(function(We,$e){typeof exports=="object"&&typeof module!="undefined"?$e(exports):typeof define=="function"&&define.amd?define(["exports"],$e):(We=typeof globalThis!="undefined"?globalThis:We||self,$e(We.OML2D={}))})(this,function(We){"use strict";var mT=Object.defineProperty;var gT=(We,$e,or)=>$e in We?mT(We,$e,{enumerable:!0,configurable:!0,writable:!0,value:or}):We[$e]=or;var ae=(We,$e,or)=>(gT(We,typeof $e!="symbol"?$e+"":$e,or),or);var vi=(We,$e,or)=>new Promise((ei,gs)=>{var Ra=Vr=>{try{Zi(or.next(Vr))}catch(An){gs(An)}},Na=Vr=>{try{Zi(or.throw(Vr))}catch(An){gs(An)}},Zi=Vr=>Vr.done?ei(Vr.value):Promise.resolve(Vr.value).then(Ra,Na);Zi((or=or.apply(We,$e)).next())});var $e;(function(t){var e=function(){function I(){}return I.getVersion=function(){return m.ccall("csmGetVersion","number",[],[])},I.getLatestMocVersion=function(){return m.ccall("csmGetLatestMocVersion","number",[],[])},I.getMocVersion=function(y,b){return m.ccall("csmGetMocVersion","number",["number","number"],[y,b])},I.getSizeofModel=function(y){return m.ccall("csmGetSizeofModel","number",["number"],[y])},I.reviveMocInPlace=function(y,b){return m.ccall("csmReviveMocInPlace","number",["number","number"],[y,b])},I.initializeModelInPlace=function(y,b,R){return m.ccall("csmInitializeModelInPlace","number",["number","number","number"],[y,b,R])},I.getParameterCount=function(y){return m.ccall("csmGetParameterCount","number",["number"],[y])},I.getParameterIds=function(y){return m.ccall("csmGetParameterIds","number",["number"],[y])},I.getParameterMinimumValues=function(y){return m.ccall("csmGetParameterMinimumValues","number",["number"],[y])},I.getParameterTypes=function(y){return m.ccall("csmGetParameterTypes","number",["number"],[y])},I.getParameterMaximumValues=function(y){return m.ccall("csmGetParameterMaximumValues","number",["number"],[y])},I.getParameterDefaultValues=function(y){return m.ccall("csmGetParameterDefaultValues","number",["number"],[y])},I.getParameterValues=function(y){return m.ccall("csmGetParameterValues","number",["number"],[y])},I.getParameterKeyCounts=function(y){return m.ccall("csmGetParameterKeyCounts","number",["number"],[y])},I.getParameterKeyValues=function(y){return m.ccall("csmGetParameterKeyValues","number",["number"],[y])},I.getPartCount=function(y){return m.ccall("csmGetPartCount","number",["number"],[y])},I.getPartIds=function(y){return m.ccall("csmGetPartIds","number",["number"],[y])},I.getPartOpacities=function(y){return m.ccall("csmGetPartOpacities","number",["number"],[y])},I.getPartParentPartIndices=function(y){return m.ccall("csmGetPartParentPartIndices","number",["number"],[y])},I.getDrawableCount=function(y){return m.ccall("csmGetDrawableCount","number",["number"],[y])},I.getDrawableIds=function(y){return m.ccall("csmGetDrawableIds","number",["number"],[y])},I.getDrawableConstantFlags=function(y){return m.ccall("csmGetDrawableConstantFlags","number",["number"],[y])},I.getDrawableDynamicFlags=function(y){return m.ccall("csmGetDrawableDynamicFlags","number",["number"],[y])},I.getDrawableTextureIndices=function(y){return m.ccall("csmGetDrawableTextureIndices","number",["number"],[y])},I.getDrawableDrawOrders=function(y){return m.ccall("csmGetDrawableDrawOrders","number",["number"],[y])},I.getDrawableRenderOrders=function(y){return m.ccall("csmGetDrawableRenderOrders","number",["number"],[y])},I.getDrawableOpacities=function(y){return m.ccall("csmGetDrawableOpacities","number",["number"],[y])},I.getDrawableMaskCounts=function(y){return m.ccall("csmGetDrawableMaskCounts","number",["number"],[y])},I.getDrawableMasks=function(y){return m.ccall("csmGetDrawableMasks","number",["number"],[y])},I.getDrawableVertexCounts=function(y){return m.ccall("csmGetDrawableVertexCounts","number",["number"],[y])},I.getDrawableVertexPositions=function(y){return m.ccall("csmGetDrawableVertexPositions","number",["number"],[y])},I.getDrawableVertexUvs=function(y){return m.ccall("csmGetDrawableVertexUvs","number",["number"],[y])},I.getDrawableIndexCounts=function(y){return m.ccall("csmGetDrawableIndexCounts","number",["number"],[y])},I.getDrawableIndices=function(y){return m.ccall("csmGetDrawableIndices","number",["number"],[y])},I.getDrawableMultiplyColors=function(y){return m.ccall("csmGetDrawableMultiplyColors","number",["number"],[y])},I.getDrawableScreenColors=function(y){return m.ccall("csmGetDrawableScreenColors","number",["number"],[y])},I.getDrawableParentPartIndices=function(y){return m.ccall("csmGetDrawableParentPartIndices","number",["number"],[y])},I.mallocMoc=function(y){return m.ccall("csmMallocMoc","number",["number"],[y])},I.mallocModelAndInitialize=function(y){return m.ccall("csmMallocModelAndInitialize","number",["number"],[y])},I.malloc=function(y){return m.ccall("csmMalloc","number",["number"],[y])},I.setLogFunction=function(y){m.ccall("csmSetLogFunction",null,["number"],[y])},I.updateModel=function(y){m.ccall("csmUpdateModel",null,["number"],[y])},I.readCanvasInfo=function(y,b,R,F){m.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[y,b,R,F])},I.resetDrawableDynamicFlags=function(y){m.ccall("csmResetDrawableDynamicFlags",null,["number"],[y])},I.free=function(y){m.ccall("csmFree",null,["number"],[y])},I}();t.AlignofMoc=64,t.AlignofModel=16,t.MocVersion_Unknown=0,t.MocVersion_30=1,t.MocVersion_33=2,t.MocVersion_40=3,t.MocVersion_42=4,t.ParameterType_Normal=0,t.ParameterType_BlendShape=1;var r=function(){function I(){}return I.csmGetVersion=function(){return e.getVersion()},I.csmGetLatestMocVersion=function(){return e.getLatestMocVersion()},I.csmGetMocVersion=function(y,b){return e.getMocVersion(y._ptr,b.byteLength)},I}();t.Version=r;var i=function(){function I(){}return I.csmSetLogFunction=function(y){I.logFunction=y;var b=m.addFunction(I.wrapLogFunction,"vi");e.setLogFunction(b)},I.csmGetLogFunction=function(){return I.logFunction},I.wrapLogFunction=function(y){var b=m.UTF8ToString(y);I.logFunction(b)},I}();t.Logging=i;var s=function(){function I(y){var b=e.mallocMoc(y.byteLength);if(b){var R=new Uint8Array(m.HEAPU8.buffer,b,y.byteLength);R.set(new Uint8Array(y)),this._ptr=e.reviveMocInPlace(b,y.byteLength),this._ptr||e.free(b)}}return I.fromArrayBuffer=function(y){if(!y)return null;var b=new I(y);return b._ptr?b:null},I.prototype._release=function(){e.free(this._ptr),this._ptr=0},I}();t.Moc=s;var a=function(){function I(y){this._ptr=e.mallocModelAndInitialize(y._ptr),this._ptr&&(this.parameters=new l(this._ptr),this.parts=new f(this._ptr),this.drawables=new c(this._ptr),this.canvasinfo=new h(this._ptr))}return I.fromMoc=function(y){var b=new I(y);return b._ptr?b:null},I.prototype.update=function(){e.updateModel(this._ptr)},I.prototype.release=function(){e.free(this._ptr),this._ptr=0},I}();t.Model=a;var h=function(){function I(y){if(y){var b=new Float32Array(2),R=b.length*b.BYTES_PER_ELEMENT,F=e.malloc(R),k=new Uint8Array(m.HEAPU8.buffer,F,R);k.set(new Uint8Array(b.buffer));var H=new Float32Array(2),z=H.length*H.BYTES_PER_ELEMENT,W=e.malloc(z),X=new Uint8Array(m.HEAPU8.buffer,W,z);X.set(new Uint8Array(H.buffer));var rt=new Float32Array(1),ut=rt.length*rt.BYTES_PER_ELEMENT,tt=e.malloc(ut),st=new Uint8Array(m.HEAPU8.buffer,tt,ut);st.set(new Uint8Array(rt.buffer)),e.readCanvasInfo(y,k.byteOffset,X.byteOffset,st.byteOffset),b=new Float32Array(k.buffer,k.byteOffset,k.length),H=new Float32Array(X.buffer,X.byteOffset,X.length),rt=new Float32Array(st.buffer,st.byteOffset,st.length),this.CanvasWidth=b[0],this.CanvasHeight=b[1],this.CanvasOriginX=H[0],this.CanvasOriginY=H[1],this.PixelsPerUnit=rt[0],e.free(k.byteOffset),e.free(X.byteOffset),e.free(st.byteOffset)}}return I}();t.CanvasInfo=h;var l=function(){function I(y){var b=0,R=null;this.count=e.getParameterCount(y),b=e.getParameterCount(y),this.ids=new Array(b);for(var F=new Uint32Array(m.HEAPU32.buffer,e.getParameterIds(y),b),k=0;k<F.length;k++)this.ids[k]=m.UTF8ToString(F[k]);b=e.getParameterCount(y),this.minimumValues=new Float32Array(m.HEAPF32.buffer,e.getParameterMinimumValues(y),b),b=e.getParameterCount(y),this.types=new Int32Array(m.HEAP32.buffer,e.getParameterTypes(y),b),b=e.getParameterCount(y),this.maximumValues=new Float32Array(m.HEAPF32.buffer,e.getParameterMaximumValues(y),b),b=e.getParameterCount(y),this.defaultValues=new Float32Array(m.HEAPF32.buffer,e.getParameterDefaultValues(y),b),b=e.getParameterCount(y),this.values=new Float32Array(m.HEAPF32.buffer,e.getParameterValues(y),b),b=e.getParameterCount(y),this.keyCounts=new Int32Array(m.HEAP32.buffer,e.getParameterKeyCounts(y),b),b=e.getParameterCount(y),R=new Int32Array(m.HEAP32.buffer,e.getParameterKeyCounts(y),b),this.keyValues=new Array(b);for(var H=new Uint32Array(m.HEAPU32.buffer,e.getParameterKeyValues(y),b),k=0;k<H.length;k++)this.keyValues[k]=new Float32Array(m.HEAPF32.buffer,H[k],R[k])}return I}();t.Parameters=l;var f=function(){function I(y){var b=0;this.count=e.getPartCount(y),b=e.getPartCount(y),this.ids=new Array(b);for(var R=new Uint32Array(m.HEAPU32.buffer,e.getPartIds(y),b),F=0;F<R.length;F++)this.ids[F]=m.UTF8ToString(R[F]);b=e.getPartCount(y),this.opacities=new Float32Array(m.HEAPF32.buffer,e.getPartOpacities(y),b),b=e.getPartCount(y),this.parentIndices=new Int32Array(m.HEAP32.buffer,e.getPartParentPartIndices(y),b)}return I}();t.Parts=f;var c=function(){function I(y){this._modelPtr=y;var b=0,R=null;this.count=e.getDrawableCount(y),b=e.getDrawableCount(y),this.ids=new Array(b);for(var F=new Uint32Array(m.HEAPU32.buffer,e.getDrawableIds(y),b),k=0;k<F.length;k++)this.ids[k]=m.UTF8ToString(F[k]);b=e.getDrawableCount(y),this.constantFlags=new Uint8Array(m.HEAPU8.buffer,e.getDrawableConstantFlags(y),b),b=e.getDrawableCount(y),this.dynamicFlags=new Uint8Array(m.HEAPU8.buffer,e.getDrawableDynamicFlags(y),b),b=e.getDrawableCount(y),this.textureIndices=new Int32Array(m.HEAP32.buffer,e.getDrawableTextureIndices(y),b),b=e.getDrawableCount(y),this.drawOrders=new Int32Array(m.HEAP32.buffer,e.getDrawableDrawOrders(y),b),b=e.getDrawableCount(y),this.renderOrders=new Int32Array(m.HEAP32.buffer,e.getDrawableRenderOrders(y),b),b=e.getDrawableCount(y),this.opacities=new Float32Array(m.HEAPF32.buffer,e.getDrawableOpacities(y),b),b=e.getDrawableCount(y),this.maskCounts=new Int32Array(m.HEAP32.buffer,e.getDrawableMaskCounts(y),b),b=e.getDrawableCount(y),this.vertexCounts=new Int32Array(m.HEAP32.buffer,e.getDrawableVertexCounts(y),b),b=e.getDrawableCount(y),this.indexCounts=new Int32Array(m.HEAP32.buffer,e.getDrawableIndexCounts(y),b),b=e.getDrawableCount(y),this.multiplyColors=new Float32Array(m.HEAPF32.buffer,e.getDrawableMultiplyColors(y),b*4),b=e.getDrawableCount(y),this.screenColors=new Float32Array(m.HEAPF32.buffer,e.getDrawableScreenColors(y),b*4),b=e.getDrawableCount(y),this.parentPartIndices=new Int32Array(m.HEAP32.buffer,e.getDrawableParentPartIndices(y),b),b=e.getDrawableCount(y),R=new Int32Array(m.HEAP32.buffer,e.getDrawableMaskCounts(y),b),this.masks=new Array(b);for(var H=new Uint32Array(m.HEAPU32.buffer,e.getDrawableMasks(y),b),k=0;k<H.length;k++)this.masks[k]=new Int32Array(m.HEAP32.buffer,H[k],R[k]);b=e.getDrawableCount(y),R=new Int32Array(m.HEAP32.buffer,e.getDrawableVertexCounts(y),b),this.vertexPositions=new Array(b);for(var z=new Uint32Array(m.HEAPU32.buffer,e.getDrawableVertexPositions(y),b),k=0;k<z.length;k++)this.vertexPositions[k]=new Float32Array(m.HEAPF32.buffer,z[k],R[k]*2);b=e.getDrawableCount(y),R=new Int32Array(m.HEAP32.buffer,e.getDrawableVertexCounts(y),b),this.vertexUvs=new Array(b);for(var W=new Uint32Array(m.HEAPU32.buffer,e.getDrawableVertexUvs(y),b),k=0;k<W.length;k++)this.vertexUvs[k]=new Float32Array(m.HEAPF32.buffer,W[k],R[k]*2);b=e.getDrawableCount(y),R=new Int32Array(m.HEAP32.buffer,e.getDrawableIndexCounts(y),b),this.indices=new Array(b);for(var X=new Uint32Array(m.HEAPU32.buffer,e.getDrawableIndices(y),b),k=0;k<X.length;k++)this.indices[k]=new Uint16Array(m.HEAPU16.buffer,X[k],R[k])}return I.prototype.resetDynamicFlags=function(){e.resetDrawableDynamicFlags(this._modelPtr)},I}();t.Drawables=c;var _=function(){function I(){}return I.hasBlendAdditiveBit=function(y){return(y&1<<0)==1<<0},I.hasBlendMultiplicativeBit=function(y){return(y&1<<1)==1<<1},I.hasIsDoubleSidedBit=function(y){return(y&1<<2)==1<<2},I.hasIsInvertedMaskBit=function(y){return(y&1<<3)==1<<3},I.hasIsVisibleBit=function(y){return(y&1<<0)==1<<0},I.hasVisibilityDidChangeBit=function(y){return(y&1<<1)==1<<1},I.hasOpacityDidChangeBit=function(y){return(y&1<<2)==1<<2},I.hasDrawOrderDidChangeBit=function(y){return(y&1<<3)==1<<3},I.hasRenderOrderDidChangeBit=function(y){return(y&1<<4)==1<<4},I.hasVertexPositionsDidChangeBit=function(y){return(y&1<<5)==1<<5},I.hasBlendColorDidChangeBit=function(y){return(y&1<<6)==1<<6},I}();t.Utils=_;var A=function(){var I=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(y){y=y||{};var b,R,st={};for(R in b=b||(y!==void 0?y:{}))b.hasOwnProperty(R)&&(st[R]=b[R]);var F,k,H,W=!1,z=typeof window=="object",mt=typeof importScripts=="function",W=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!z&&!mt,X=!z&&!W&&!mt,rt="",ut=(W?(rt=__dirname+"/",k=function(Y,Q){pi(Y)},H=function(Y){return ee((Y=(Y=k(Y,!0)).buffer?Y:new Uint8Array(Y)).buffer),Y},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(Y){throw Y}),process.on("unhandledRejection",Ut),b.inspect=function(){return"[Emscripten Module object]"}):X?(typeof read!="undefined"&&(k=function(Y){var Q=pi(Y);return Q?ps(Q):read(Y)}),H=function(Y){var Q;if(!(Q=pi(Y))){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(Y));ee(typeof(Q=read(Y,"binary"))=="object")}return Q},typeof print!="undefined"&&((console=typeof console=="undefined"?{}:console).log=print,console.warn=console.error=typeof printErr!="undefined"?printErr:print)):(z||mt)&&(mt?rt=self.location.href:document.currentScript&&(rt=document.currentScript.src),rt=(rt=I||rt).indexOf("blob:")!==0?rt.substr(0,rt.lastIndexOf("/")+1):"",k=function(Y){try{var Q=new XMLHttpRequest;return Q.open("GET",Y,!1),Q.send(null),Q.responseText}catch(vt){if(Y=pi(Y))return ps(Y);throw vt}},mt&&(H=function(Y){try{var Q=new XMLHttpRequest;return Q.open("GET",Y,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}catch(vt){if(Y=pi(Y))return Y;throw vt}}),F=function(Y){var Q=Ft,vt=xa,K=new XMLHttpRequest;K.open("GET",Q,!0),K.responseType="arraybuffer",K.onload=function(){var de;K.status==200||K.status==0&&K.response?vt(K.response):(de=pi(Q))?vt(de.buffer):Y()},K.onerror=Y,K.send(null)}),b.print||console.log.bind(console)),tt=b.printErr||console.warn.bind(console);for(R in st)st.hasOwnProperty(R)&&(b[R]=st[R]);var st=null,bt=Array(1),Ct=0,Gt=!1;function ee(Y,Q){Y||Ut("Assertion failed: "+Q)}var xt,Tt,Ot,ve,Jt=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function q(Y,Q,vt){var K=Q+vt;for(vt=Q;Y[vt]&&!(K<=vt);)++vt;if(16<vt-Q&&Y.subarray&&Jt)return Jt.decode(Y.subarray(Q,vt));for(K="";Q<vt;){var de,n,Ht=Y[Q++];128&Ht?(de=63&Y[Q++],(224&Ht)==192?K+=String.fromCharCode((31&Ht)<<6|de):(n=63&Y[Q++],(Ht=(240&Ht)==224?(15&Ht)<<12|de<<6|n:(7&Ht)<<18|de<<12|n<<6|63&Y[Q++])<65536?K+=String.fromCharCode(Ht):(Ht-=65536,K+=String.fromCharCode(55296|Ht>>10,56320|1023&Ht)))):K+=String.fromCharCode(Ht)}return K}function at(Y,Q){return Y?q(Ot,Y,Q):""}function gt(Y){return 0<Y%16777216&&(Y+=16777216-Y%16777216),Y}function At(Y){xt=Y,b.HEAP8=Tt=new Int8Array(Y),b.HEAP16=new Int16Array(Y),b.HEAP32=ve=new Int32Array(Y),b.HEAPU8=Ot=new Uint8Array(Y),b.HEAPU16=new Uint16Array(Y),b.HEAPU32=new Uint32Array(Y),b.HEAPF32=new Float32Array(Y),b.HEAPF64=new Float64Array(Y)}typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le"),z=b.TOTAL_MEMORY||16777216;function Pt(Y){for(;0<Y.length;){var Q,vt=Y.shift();typeof vt=="function"?vt():typeof(Q=vt.C)=="number"?vt.w===void 0?b.dynCall_v(Q):b.dynCall_vi(Q,vt.w):Q(vt.w===void 0?null:vt.w)}}z=(xt=b.buffer||new ArrayBuffer(z)).byteLength,At(xt),ve[1052]=5247296;var $t=[],kt=[],Kt=[],ie=[];Math.imul&&Math.imul(4294967295,5)===-5||(Math.imul=function(Y,Q){var vt=65535&Y,K=65535&Q;return vt*K+((Y>>>16)*K+vt*(Q>>>16)<<16)|0}),Math.clz32||(Math.clz32=function(Y){var Q=32,vt=Y>>16;return vt&&(Q-=16,Y=vt),(vt=Y>>8)&&(Q-=8,Y=vt),(vt=Y>>4)&&(Q-=4,Y=vt),(vt=Y>>2)&&(Q-=2,Y=vt),Y>>1?Q-2:Q-Y}),Math.trunc||(Math.trunc=function(Y){return Y<0?Math.ceil(Y):Math.floor(Y)});var Yt=0,qt=null;function Ut(Y){throw b.onAbort&&b.onAbort(Y),ut(Y),tt(Y),Gt=!0,"abort("+Y+"). Build with -s ASSERTIONS=1 for more info."}b.preloadedImages={},b.preloadedAudios={};var Ft=null,It="data:application/octet-stream;base64,";function _e(Y){return Y.replace(/\b__Z[\w\d_]+/g,function(Q){return Q==Q?Q:Q+" ["+Q+"]"})}function ce(){var Y=Error();if(!Y.stack){try{throw Error(0)}catch(Q){Y=Q}if(!Y.stack)return"(no stack trace available)"}return Y.stack.toString()}var jt=[null,[],[]];function sr(Y,Q){var vt=jt[Y];Q===0||Q===10?((Y===1?ut:tt)(q(vt,0)),vt.length=0):vt.push(Q)}function ti(Y,Q,vt,K){try{for(var de=0,n=0;n<vt;n++){for(var Ht=ve[Q+8*n>>2],Je=ve[Q+(8*n+4)>>2],O=0;O<Je;O++)sr(Y,Ot[Ht+O]);de+=Je}return ve[K>>2]=de,0}catch(oe){return typeof FS!="undefined"&&oe instanceof FS.A||Ut(oe),oe.B}}function Hi(){return Tt.length}function ds(Y){try{var Q=new ArrayBuffer(Y);if(Q.byteLength==Y)return new Int8Array(Q).set(Tt),Sx(Q),At(Q),1}catch(vt){}}var ya=!(Ft="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAABgKAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAK/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgaW50ZXJwb2xhdGlvbiBmb3IgYmxlbmQgc2hhcGVzLiBDb21iaW5hdGlvbkNvdW50IGlzICVkLgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAExpdmUyRCBDdWJpc20gU0RLIENvcmUgVmVyc2lvbiAlZC4lZC4lZABNT0MzAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBDb3JydXB0ZWQgIG1vYzMgZmlsZS4KAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBUaGUgQ29yZSB1bnN1cHBvcnQgbGF0ZXIgdGhhbiBtb2MzIHZlcjpbJWRdLiBUaGlzIG1vYzMgdmVyIGlzIFslZF0uCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KAFtDU01dIFtFXSVzOiAlcwoAY3NtR2V0TW9jVmVyc2lvbgAiYWRkcmVzcyIgaXMgbnVsbC4AY3NtUmV2aXZlTW9jSW5QbGFjZQAiYWRkcmVzcyIgYWxpZ25tZW50IGlzIGludmFsaWQuACJzaXplIiBpcyBpbnZhbGlkLgBjc21SZWFkQ2FudmFzSW5mbwAibW9kZWwiIGlzIGludmFsaWQuACJvdXRTaXplSW5QaXhlbHMiIGlzIG51bGwuACJvdXRPcmlnaW5JblBpeGVscyIgaXMgbnVsbC4AIm91dFBpeGVsc1BlclVuaXQiIGlzIG51bGwuAGNzbUdldFNpemVvZk1vZGVsACJtb2MiIGlzIGludmFsaWQuAGNzbUluaXRpYWxpemVNb2RlbEluUGxhY2UAInNpemUiIGlzIGludmFsaWQAY3NtVXBkYXRlTW9kZWwAY3NtR2V0UGFyYW1ldGVyQ291bnQAY3NtR2V0UGFyYW1ldGVySWRzAGNzbUdldFBhcmFtZXRlclR5cGVzAGNzbUdldFBhcmFtZXRlck1pbmltdW1WYWx1ZXMAY3NtR2V0UGFyYW1ldGVyTWF4aW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJEZWZhdWx0VmFsdWVzAGNzbUdldFBhcmFtZXRlclZhbHVlcwBjc21HZXRQYXJ0Q291bnQAY3NtR2V0UGFydElkcwBjc21HZXRQYXJ0T3BhY2l0aWVzAGNzbUdldFBhcnRQYXJlbnRQYXJ0SW5kaWNlcwBjc21HZXREcmF3YWJsZUNvdW50AGNzbUdldERyYXdhYmxlSWRzAGNzbUdldERyYXdhYmxlQ29uc3RhbnRGbGFncwBjc21HZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXREcmF3YWJsZVRleHR1cmVJbmRpY2VzAGNzbUdldERyYXdhYmxlRHJhd09yZGVycwBjc21HZXREcmF3YWJsZVJlbmRlck9yZGVycwBjc21HZXREcmF3YWJsZU9wYWNpdGllcwBjc21HZXREcmF3YWJsZU1hc2tDb3VudHMAY3NtR2V0RHJhd2FibGVNYXNrcwBjc21HZXREcmF3YWJsZVZlcnRleENvdW50cwBjc21HZXREcmF3YWJsZVZlcnRleFBvc2l0aW9ucwBjc21HZXREcmF3YWJsZVZlcnRleFV2cwBjc21HZXREcmF3YWJsZUluZGV4Q291bnRzAGNzbUdldERyYXdhYmxlSW5kaWNlcwBjc21HZXREcmF3YWJsZU11bHRpcGx5Q29sb3JzAGNzbUdldERyYXdhYmxlU2NyZWVuQ29sb3JzAGNzbUdldERyYXdhYmxlUGFyZW50UGFydEluZGljZXMAY3NtUmVzZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXRQYXJhbWV0ZXJLZXlDb3VudHMAY3NtR2V0UGFyYW1ldGVyS2V5VmFsdWVzAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgAlcwoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4=");function ps(Y){for(var Q=[],vt=0;vt<Y.length;vt++){var K=Y[vt];255<K&&(ya&&ee(!1,"Character code "+K+" ("+String.fromCharCode(K)+")  at offset "+vt+" not in 0x00-0xFF."),K&=255),Q.push(String.fromCharCode(K))}return Q.join("")}var ba=typeof atob=="function"?atob:function(Y){var Q="",vt=0;Y=Y.replace(/[^A-Za-z0-9\+\/=]/g,"");do var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(Y.charAt(vt++)),Ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(Y.charAt(vt++)),K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(Y.charAt(vt++)),de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(Y.charAt(vt++)),n=n<<2|Ht>>4,Ht=(15&Ht)<<4|K>>2,Je=(3&K)<<6|de;while(Q+=String.fromCharCode(n),K!==64&&(Q+=String.fromCharCode(Ht)),de!==64&&(Q+=String.fromCharCode(Je)),vt<Y.length);return Q};function pi(Y){if(String.prototype.startsWith?Y.startsWith(It):Y.indexOf(It)===0){if(Y=Y.slice(It.length),typeof W=="boolean"&&W){try{var Q=Buffer.from(Y,"base64")}catch(n){Q=new Buffer(Y,"base64")}var vt=new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength)}else try{for(var K=ba(Y),de=new Uint8Array(K.length),Q=0;Q<K.length;++Q)de[Q]=K.charCodeAt(Q);vt=de}catch(n){throw Error("Converting base64 string to bytes failed.")}return vt}}var xa,Cu,vs,mt=function(Y,Q,vt){var K=new Y.Int8Array(vt),de=new Y.Int16Array(vt),n=new Y.Int32Array(vt),Ht=new Y.Uint8Array(vt),Je=new Y.Uint16Array(vt),O=new Y.Float32Array(vt),oe=new Y.Float64Array(vt),Ve=0|Q.v,Hr=Y.Math.floor,Ke=Y.Math.pow,Xr=Y.Math.cos,bn=Y.Math.sin,qe=Y.Math.atan2,Ie=Y.Math.imul,Xi=Y.Math.clz32,xn=Q.a,ke=Q.b,ze=Q.c,Fx=Q.d,Lx=Q.e,Mx=Q.f,Gx=Q.g,kx=Q.h,Bx=Q.i,Dx=Q.j,Hx=Q.k,Xx=Q.l,Vx=Q.m,L=4416;function zx(o){var u,p,C,T,d,E,x,g,v,w,P,U,B,S,G,M,N,V,$=0,D=0,Z=0|n[(o|=0)+500>>2];if(!((0|Z)<=0)){x=0|n[o+504>>2],g=0|n[o+444>>2],p=0|n[o+536>>2],D=0;do if(C=0|n[x+(24*D|0)+12>>2],T=0|n[g+(n[x+(24*D|0)+4>>2]<<2)>>2],d=0|n[g+(n[x+(24*D|0)+8>>2]<<2)>>2],E=0|n[x+(24*D|0)+16>>2],o=0|n[x+(24*D|0)+20>>2],u=+O[p+(D<<2)>>2],0<(0|C))for($=0;N=+O[E+($<<2)>>2],U=+O[E+((v=1|$)<<2)>>2],M=(0|Je[o+($<<1)>>1])<<1&65534,G=+O[(V=T+(M<<2)|0)>>2],P=+O[(M=T+((1|M)<<2)|0)>>2],v=(0|Je[o+(v<<1)>>1])<<1&65534,S=+O[(B=d+(v<<2)|0)>>2],w=+O[(v=d+((1|v)<<2)|0)>>2],O[V>>2]=G+N*(S-G)*u,O[M>>2]=P+N*(w-P)*u,O[B>>2]=S+U*(G-S)*u,O[v>>2]=w+U*(P-w)*u,(0|($=$+2|0))<(0|C););while((0|(D=D+1|0))!=(0|Z))}}function jx(o){var u=0|n[(o|=0)>>2];(0|Ht[4+u>>0])<4||d2(o,0|n[o+596>>2],0|n[o+600>>2],0|n[984+u>>2],0|n[o+152>>2],0|n[796+u>>2])}function d2(o,u,p,C,T,d){o|=0,C|=0,T|=0,d|=0;var E,x,g,v,w,P,U,B,S,G=0,M=0,N=0,V=0,$=0,D=L;if(L=L+16|0,B=D+8|0,U=D,P=(p|=0)+(12*(u|=0)|0)|0,(0|u)<=0)L=D;else{do{u=0|n[p>>2],x=0|n[T+(u<<2)>>2],v=(u=0|n[d+(u<<2)>>2])<<1,$=0|n[p+4>>2],G=0|n[p+8>>2],g=0|n[1028+(0|n[o>>2])>>2],w=G+(48*$|0)|0;t:do if(0<(0|$)){if((0|u)<=0){for(;;)if(3<=(u=0|n[G+8>>2])>>>0&&(n[B>>2]=u,wt(0,784,B)),w>>>0<=(G=G+48|0)>>>0)break t}do{M=C+(n[G+4>>2]<<2)|0,u=0|n[G+8>>2];e:do if(0|u)switch($=g+(n[M+(n[G+12>>2]<<2)>>2]<<2)|0,0|u){case 1:for(M=G+20|0,u=G+44|0,N=0;O[(V=x+(N<<2)|0)>>2]=+O[V>>2]+ +O[u>>2]*(+O[$+(N<<2)>>2]*+O[M>>2]),(0|(N=N+1|0))!=(0|v););break;case 2:for(M=g+(n[M+(n[G+16>>2]<<2)>>2]<<2)|0,N=G+20|0,E=G+24|0,u=G+44|0,V=0;O[(S=x+(V<<2)|0)>>2]=+O[S>>2]+ +O[u>>2]*(+O[$+(V<<2)>>2]*+O[N>>2]+ +O[M+(V<<2)>>2]*+O[E>>2]),(0|(V=V+1|0))!=(0|v););break;default:n[U>>2]=u,wt(0,784,U);break e}while(0)}while((G=G+48|0)>>>0<w>>>0)}while(0)}while((p=p+12|0)>>>0<P>>>0);L=D}}function Wx(o){var u=0|n[(o|=0)>>2];(0|Ht[4+u>>0])<4||d2(o,0|n[o+604>>2],0|n[o+608>>2],0|n[1024+u>>2],0|n[o+444>>2],0|n[892+u>>2])}function wt(o,u,p){o|=0,u|=0,p|=0;var C,T,d=L;L=L+272|0,o=d+16|0,T=d,L=((C=0|n[904])&&(n[T>>2]=p,x2(o,u,T),k2[1&C](o)),d)}function p2(o,u,p){p|=0;var C,T=0,d=0,E=0,x=0,g=0,v=0,w=0,P=0,B=0,U=0,B=0|K[(o|=0)+4>>0];if(n[(u|=0)>>2]=628,U=0|n[(P=o+704|0)>>2],0<(0|(g=0|n[U>>2]))){for(T=0|n[o+1048>>2],d=0|n[o+720>>2],x=E=0;x=(1<<n[T+(n[d+(E<<2)>>2]<<2)>>2])+x|0,(0|(E=E+1|0))!=(0|g););T=x<<2}else T=0;if(n[u+4>>2]=12*g,n[u+8>>2]=n[U>>2]<<2,n[u+12>>2]=n[U>>2]<<2,n[u+16>>2]=n[U>>2]<<2,n[u+20>>2]=n[U>>2]<<2,n[u+24>>2]=n[U>>2]<<2,n[u+28>>2]=T,n[u+32>>2]=n[U>>2]<<2,n[u+36>>2]=T,n[u+40>>2]=T,n[u+44>>2]=n[(C=U+4|0)>>2]<<5,n[u+48>>2]=n[C>>2]<<2,n[u+52>>2]=n[C>>2]<<2,n[u+56>>2]=n[C>>2]<<2,n[u+60>>2]=n[C>>2]<<4,n[u+64>>2]=n[C>>2]<<4,0<(0|(w=0|n[(C=U+8|0)>>2]))){for(d=0|n[o+796>>2],E=0|n[o+1048>>2],x=0|n[o+780>>2],T=v=g=0;T=(15+(n[d+(g<<2)>>2]<<3)&-16)+T|0,v=(1<<n[E+(n[x+(g<<2)>>2]<<2)>>2])+v|0,(0|(g=g+1|0))!=(0|w););d=v<<2}else T=d=0;if(n[u+68>>2]=24*w,n[u+72>>2]=n[C>>2]<<2,n[u+76>>2]=n[C>>2]<<2,n[u+80>>2]=n[C>>2]<<2,n[u+84>>2]=T,n[u+88>>2]=n[C>>2]<<4,n[u+92>>2]=n[C>>2]<<4,n[u+96>>2]=n[C>>2]<<2,n[u+100>>2]=d,n[u+104>>2]=n[C>>2]<<2,n[u+108>>2]=d,n[u+112>>2]=d,n[u+116>>2]=d,n[u+120>>2]=d,n[u+124>>2]=d,n[u+128>>2]=d,n[u+132>>2]=d,n[u+136>>2]=d,n[u+140>>2]=d,n[u+144>>2]=n[C>>2]<<2,n[u+148>>2]=n[C>>2]<<2,n[u+152>>2]=n[C>>2]<<2,n[u+156>>2]=n[C>>2]<<2,n[u+160>>2]=n[C>>2]<<2,n[u+164>>2]=n[C>>2]<<2,0<(0|(g=0|n[(v=U+12|0)>>2]))){for(T=0|n[o+1048>>2],d=0|n[o+812>>2],x=E=0;x=(1<<n[T+(n[d+(E<<2)>>2]<<2)>>2])+x|0,(0|(E=E+1|0))!=(0|g););T=x<<2}else T=0;if(n[u+168>>2]=12*g,n[u+172>>2]=n[v>>2]<<2,n[u+176>>2]=n[v>>2]<<2,n[u+180>>2]=n[v>>2]<<2,n[u+184>>2]=n[v>>2]<<2,n[u+188>>2]=n[v>>2]<<2,n[u+192>>2]=n[v>>2]<<2,n[u+196>>2]=n[v>>2]<<2,n[u+200>>2]=n[v>>2]<<2,n[u+204>>2]=n[v>>2]<<4,n[u+208>>2]=n[v>>2]<<4,n[u+212>>2]=n[v>>2]<<2,n[u+216>>2]=T,n[u+220>>2]=n[v>>2]<<2,n[u+224>>2]=T,n[u+228>>2]=T,n[u+232>>2]=T,n[u+236>>2]=T,n[u+240>>2]=T,n[u+244>>2]=T,n[u+248>>2]=T,n[u+252>>2]=T,n[u+256>>2]=T,n[u+260>>2]=T,n[u+264>>2]=T,n[u+268>>2]=T,n[u+272>>2]=n[v>>2]<<2,n[u+276>>2]=n[v>>2]<<2,n[u+280>>2]=n[v>>2]<<2,n[u+284>>2]=n[v>>2]<<2,n[u+288>>2]=n[v>>2]<<2,n[u+292>>2]=n[v>>2]<<2,0<(0|(w=0|n[(C=U+16|0)>>2]))){for(d=0|n[o+892>>2],E=0|n[o+1048>>2],x=0|n[o+852>>2],T=v=g=0;T=(15+(n[d+(g<<2)>>2]<<3)&-16)+T|0,v=(1<<n[E+(n[x+(g<<2)>>2]<<2)>>2])+v|0,(0|(g=g+1|0))!=(0|w););d=v<<2}else T=d=0;if(n[u+296>>2]=20*w,n[u+300>>2]=n[C>>2]<<2,n[u+304>>2]=n[C>>2],n[u+308>>2]=n[C>>2]<<2,n[u+312>>2]=n[C>>2]<<2,n[u+316>>2]=n[C>>2]<<2,n[u+320>>2]=T,n[u+324>>2]=n[C>>2]<<2,n[u+328>>2]=n[C>>2]<<4,n[u+332>>2]=n[C>>2]<<4,n[u+336>>2]=n[C>>2]<<2,n[u+340>>2]=n[C>>2]<<2,n[u+344>>2]=n[C>>2]<<2,n[u+348>>2]=n[C>>2]<<4,n[u+352>>2]=n[C>>2]<<4,n[u+356>>2]=n[C>>2]<<2,n[u+360>>2]=d,n[u+364>>2]=n[C>>2]<<2,n[u+368>>2]=d,n[u+372>>2]=d,n[u+376>>2]=d,n[u+380>>2]=d,n[u+384>>2]=d,n[u+388>>2]=d,n[u+392>>2]=d,n[u+396>>2]=d,n[u+400>>2]=d,n[u+404>>2]=d,n[u+408>>2]=n[C>>2]<<2,n[u+412>>2]=n[C>>2]<<2,n[u+416>>2]=n[C>>2]<<2,n[u+420>>2]=n[C>>2]<<2,n[u+424>>2]=n[C>>2]<<2,n[u+428>>2]=n[C>>2]<<2,P=0|n[P>>2],n[u+432>>2]=52*(0|n[(d=P+20|0)>>2]),T=(C=3<(255&B))?0:n[d>>2]<<2,n[u+436>>2]=T,n[u+440>>2]=n[d>>2]<<2,n[u+444>>2]=28*(0|n[P+52>>2]),0<(0|(g=0|n[U+48>>2]))){for(T=0|n[o+1048>>2],x=E=d=0;E=(B=0|n[T+(d<<2)>>2])+E|0,x=(1<<B)+x|0,(0|(d=d+1|0))!=(0|g););d=E<<2,T=x<<2}else T=d=0;if(n[u+448>>2]=36*g,n[u+452>>2]=d,n[u+456>>2]=T,n[u+460>>2]=T,n[u+488>>2]=28*(0|n[(d=U+72|0)>>2]),0<(0|(d=0|n[d>>2]))){for(E=0|n[o+1152>>2],x=0|n[o+1160>>2],T=0|n[o+1164>>2],w=v=g=0;v=(0|v)<(0|(B=0|n[E+(g<<2)>>2]))?B:v,w=(0|(B=(0|n[x+(g<<2)>>2])-(0|n[T+(g<<2)>>2])|0))<(0|w)?w:B+1|0,(0|(g=g+1|0))!=(0|d););d=v<<2,T=w<<2}else T=d=0;if(n[u+492>>2]=n[U+76>>2]<<4,n[u+496>>2]=T,n[u+500>>2]=d,n[u+504>>2]=T,0<(0|(g=0|n[(v=U+80|0)>>2]))){for(T=0|n[o+1048>>2],d=0|n[o+1188>>2],x=E=0;x=(1<<n[T+(n[d+(E<<2)>>2]<<2)>>2])+x|0,(0|(E=E+1|0))!=(0|g););T=x<<2}else T=0;if(n[u+508>>2]=24*g,n[u+512>>2]=n[v>>2]<<2,n[u+516>>2]=n[v>>2]<<2,n[u+520>>2]=T,n[u+524>>2]=n[v>>2]<<2,n[u+528>>2]=T,n[u+532>>2]=T,C){if(n[u+464>>2]=20*(0|n[P+120>>2]),n[u+468>>2]=28*(0|n[P+100>>2]),0<(0|(x=0|n[U+104>>2]))){for(T=0|n[o+1080>>2],E=d=0;E=(0|n[T+(d<<2)>>2])+E|0,(0|(d=d+1|0))!=(0|x););T=E<<2}else T=0;n[u+472>>2]=48*x,n[u+476>>2]=T,n[u+480>>2]=12*(0|n[P+108>>2]),n[u+484>>2]=12*(0|n[P+112>>2]),T=d=n[u+540>>2]=0}else{if(0<(0|(C=0|n[(P=U+20|0)>>2]))){v=0|n[o+948>>2],w=0|n[o+952>>2],x=0|n[o+1036>>2],T=g=0;do if(o=0|n[w+(g<<2)>>2],E=(d=x+(n[v+(g<<2)>>2]<<2)|0)+(o<<2)|0,0<(0|o))for(;T=(0|n[d>>2])+T|0,(d=d+4|0)>>>0<E>>>0;);while((0|(g=g+1|0))!=(0|C))}else T=0;n[u+540>>2]=C<<2,d=T<<2,T=n[P>>2]<<2}for(n[u+536>>2]=T,n[u+544>>2]=d,d=T=0;d=(o=15+(0|n[(U=u+(T<<2)|0)>>2])&-16)+(n[U>>2]=d)|0,(0|(T=T+1|0))!=137;);n[p>>2]=d}function $x(o,u,p){o|=0,u|=0,p|=0;var C,T,d,E,x,g,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0,it=0,lt=0,_t=0,nt=0,dt=0,ct=0,J=0,ot=0,pt=0,ht=0,Xt=0,Lt=0,Mt=0,me=0,ue=0,re=0,zt=0,ge=0,we=0,ne=0,le=0,Rt=0,Bt=0,j=0,Le=L;if(L=L+560|0,ht=Le+552|0,v=(N=Le)+556|0,mr(0|N,0,548),p2(o,N,v),p>>>0<(v=0|n[v>>2])>>>0)return L=Le,(j=0)|j;if(mr(0|u,0,0|v),j=u+(0|n[N>>2])|0,n[(T=j+8|0)>>2]=u+(0|n[N+4>>2]),n[j+40>>2]=u+(0|n[N+8>>2]),n[j+44>>2]=u+(0|n[N+12>>2]),n[j+48>>2]=u+(0|n[N+16>>2]),n[(ot=j+52|0)>>2]=u+(0|n[N+20>>2]),n[(pt=j+16|0)>>2]=u+(0|n[N+24>>2]),n[j+24>>2]=u+(0|n[N+28>>2]),n[j+28>>2]=u+(0|n[N+32>>2]),n[j+32>>2]=u+(0|n[N+36>>2]),n[j+36>>2]=u+(0|n[N+40>>2]),P=0|n[(Bt=o+704|0)>>2],n[(d=j+308|0)>>2]=u+(0|n[N+44>>2]),n[j+312>>2]=u+(0|n[N+48>>2]),n[j+316>>2]=u+(0|n[N+52>>2]),n[j+320>>2]=u+(0|n[N+56>>2]),n[j+324>>2]=u+(0|n[N+60>>2]),n[j+328>>2]=u+(0|n[N+64>>2]),n[(Mt=j+60|0)>>2]=u+(0|n[N+68>>2]),n[j+144>>2]=u+(0|n[N+72>>2]),n[j+148>>2]=u+(0|n[N+76>>2]),v=u+(0|n[N+80>>2])|0,n[(U=j+152|0)>>2]=v,0<(0|(P=0|n[P+8>>2]))&&(B=u+(0|n[N+84>>2])|0,S=o+796|0,n[v>>2]=B,(0|P)!=1))for(v=0,w=1,p=B;p=p+(15+(n[(0|n[S>>2])+(v<<2)>>2]<<3)&-16)|0,n[(0|n[U>>2])+(w<<2)>>2]=p,!((0|P)<=(0|(v=w+1|0)));)le=w,w=v,v=le;if(n[j+156>>2]=u+(0|n[N+88>>2]),n[j+160>>2]=u+(0|n[N+92>>2]),n[(Xt=j+68|0)>>2]=u+(0|n[N+96>>2]),n[j+76>>2]=u+(0|n[N+100>>2]),n[j+80>>2]=u+(0|n[N+104>>2]),n[j+84>>2]=u+(0|n[N+108>>2]),n[j+88>>2]=u+(0|n[N+112>>2]),n[j+92>>2]=u+(0|n[N+116>>2]),n[j+96>>2]=u+(0|n[N+120>>2]),n[j+100>>2]=u+(0|n[N+124>>2]),n[j+104>>2]=u+(0|n[N+128>>2]),n[j+108>>2]=u+(0|n[N+132>>2]),n[j+112>>2]=u+(0|n[N+136>>2]),n[j+116>>2]=u+(0|n[N+140>>2]),n[j+120>>2]=u+(0|n[N+144>>2]),n[j+124>>2]=u+(0|n[N+148>>2]),n[j+128>>2]=u+(0|n[N+152>>2]),n[j+132>>2]=u+(0|n[N+156>>2]),n[j+136>>2]=u+(0|n[N+160>>2]),n[j+140>>2]=u+(0|n[N+164>>2]),n[(E=j+168|0)>>2]=u+(0|n[N+168>>2]),n[j+264>>2]=u+(0|n[N+172>>2]),n[j+268>>2]=u+(0|n[N+176>>2]),n[j+272>>2]=u+(0|n[N+180>>2]),n[j+276>>2]=u+(0|n[N+184>>2]),n[j+280>>2]=u+(0|n[N+188>>2]),n[j+284>>2]=u+(0|n[N+192>>2]),n[j+288>>2]=u+(0|n[N+196>>2]),n[j+292>>2]=u+(0|n[N+200>>2]),n[j+296>>2]=u+(0|n[N+204>>2]),n[j+300>>2]=u+(0|n[N+208>>2]),n[(Lt=j+176|0)>>2]=u+(0|n[N+212>>2]),n[j+184>>2]=u+(0|n[N+216>>2]),n[j+188>>2]=u+(0|n[N+220>>2]),n[j+192>>2]=u+(0|n[N+224>>2]),n[j+196>>2]=u+(0|n[N+228>>2]),n[j+200>>2]=u+(0|n[N+232>>2]),n[j+204>>2]=u+(0|n[N+236>>2]),n[j+208>>2]=u+(0|n[N+240>>2]),n[j+212>>2]=u+(0|n[N+244>>2]),n[j+216>>2]=u+(0|n[N+248>>2]),n[j+220>>2]=u+(0|n[N+252>>2]),n[j+224>>2]=u+(0|n[N+256>>2]),n[j+228>>2]=u+(0|n[N+260>>2]),n[j+232>>2]=u+(0|n[N+264>>2]),n[j+236>>2]=u+(0|n[N+268>>2]),n[j+240>>2]=u+(0|n[N+272>>2]),n[j+244>>2]=u+(0|n[N+276>>2]),n[j+248>>2]=u+(0|n[N+280>>2]),n[j+252>>2]=u+(0|n[N+284>>2]),n[j+256>>2]=u+(0|n[N+288>>2]),n[j+260>>2]=u+(0|n[N+292>>2]),P=0|n[Bt>>2],n[(ue=j+336|0)>>2]=u+(0|n[N+296>>2]),n[j+424>>2]=u+(0|n[N+300>>2]),n[j+432>>2]=u+(0|n[N+304>>2]),n[j+436>>2]=u+(0|n[N+308>>2]),n[j+440>>2]=u+(0|n[N+312>>2]),v=u+(0|n[N+316>>2])|0,n[(U=j+444|0)>>2]=v,0<(0|(P=0|n[P+16>>2]))&&(G=u+(0|n[N+320>>2])|0,M=o+892|0,n[v>>2]=G,(0|P)!=1))for(v=0,w=1,p=G;p=p+(15+(n[(0|n[M>>2])+(v<<2)>>2]<<3)&-16)|0,n[(0|n[U>>2])+(w<<2)>>2]=p,!((0|P)<=(0|(v=w+1|0)));)le=w,w=v,v=le;if(n[j+448>>2]=u+(0|n[N+324>>2]),n[(re=j+452|0)>>2]=u+(0|n[N+328>>2]),n[(zt=j+456|0)>>2]=u+(0|n[N+332>>2]),n[j+460>>2]=u+(0|n[N+336>>2]),n[j+464>>2]=u+(0|n[N+340>>2]),n[j+468>>2]=u+(0|n[N+344>>2]),n[j+472>>2]=u+(0|n[N+348>>2]),n[j+476>>2]=u+(0|n[N+352>>2]),n[(me=j+344|0)>>2]=u+(0|n[N+356>>2]),n[j+352>>2]=u+(0|n[N+360>>2]),n[j+356>>2]=u+(0|n[N+364>>2]),n[j+360>>2]=u+(0|n[N+368>>2]),n[j+364>>2]=u+(0|n[N+372>>2]),n[j+368>>2]=u+(0|n[N+376>>2]),n[j+372>>2]=u+(0|n[N+380>>2]),n[j+376>>2]=u+(0|n[N+384>>2]),n[j+380>>2]=u+(0|n[N+388>>2]),n[j+384>>2]=u+(0|n[N+392>>2]),n[j+388>>2]=u+(0|n[N+396>>2]),n[j+392>>2]=u+(0|n[N+400>>2]),n[j+396>>2]=u+(0|n[N+404>>2]),n[j+400>>2]=u+(0|n[N+408>>2]),n[j+404>>2]=u+(0|n[N+412>>2]),n[j+408>>2]=u+(0|n[N+416>>2]),n[j+412>>2]=u+(0|n[N+420>>2]),n[j+416>>2]=u+(0|n[N+424>>2]),n[j+420>>2]=u+(0|n[N+428>>2]),ct=0|n[N+436>>2],C=0|n[N+440>>2],n[(le=j+544|0)>>2]=u+(0|n[N+432>>2]),n[(J=j+548|0)>>2]=u+ct,n[(ct=j+552|0)>>2]=u+C,n[(C=j+560|0)>>2]=u+(0|n[N+444>>2]),v=0|n[Bt>>2],P=u+(0|n[N+448>>2])|0,n[(ne=j+568|0)>>2]=P,0<(0|(v=0|n[v+48>>2])))for(p=0|n[o+1048>>2],U=u+(0|n[N+452>>2])|0,S=u+((B=0)|n[N+456>>2])|0,M=u+(0|n[N+460>>2])|0;n[P+(36*B|0)>>2]=U,n[P+(36*B|0)+16>>2]=S,n[P+(36*B|0)+20>>2]=M,G=1<<(w=0|n[p+(B<<2)>>2]),(0|(B=B+1|0))!=(0|v);)U=U+(w<<2)|0,S=S+(G<<2)|0,M=M+(G<<2)|0;if(v=0|n[Bt>>2],w=u+(0|n[N+488>>2])|0,n[(x=j+484|0)>>2]=w,0<(0|(v=0|n[v+72>>2])))for(p=0|n[o+1152>>2],U=u+((P=0)|n[N+492>>2])|0;U=(n[w+(28*P|0)+12>>2]=U)+(n[p+(P<<2)>>2]<<4)|0,(0|(P=P+1|0))!=(0|v););if(n[j+488>>2]=u+(0|n[N+496>>2]),n[j+492>>2]=u+(0|n[N+500>>2]),n[j+496>>2]=u+(0|n[N+504>>2]),n[(ge=j+504|0)>>2]=u+(0|n[N+508>>2]),n[j+536>>2]=u+(0|n[N+512>>2]),n[(we=j+512|0)>>2]=u+(0|n[N+516>>2]),n[j+520>>2]=u+(0|n[N+520>>2]),n[j+524>>2]=u+(0|n[N+524>>2]),n[j+528>>2]=u+(0|n[N+528>>2]),n[j+532>>2]=u+(0|n[N+532>>2]),dt=3<(0|Ht[(g=o+4|0)>>0])){if(n[j+576>>2]=u+(0|n[N+464>>2]),n[j+584>>2]=u+(0|n[N+468>>2]),v=0|n[N+476>>2],P=0|n[Bt>>2],B=u+(0|n[N+472>>2])|0,n[j+592>>2]=B,0<(0|(P=0|n[P+104>>2])))for(U=0|n[o+1080>>2],v=u+v|0,p=0;n[B+(48*p|0)+40>>2]=v,(0|(w=p+1|0))!=(0|P);)v=v+(n[U+(p<<2)>>2]<<2)|0,p=w;n[j+600>>2]=u+(0|n[N+480>>2]),n[j+608>>2]=u+(0|n[N+484>>2]),p=0|n[Bt>>2],v=0|n[p+20>>2]}else if(p=0|n[N+536>>2],w=0|n[N+544>>2],n[j+616>>2]=u+(0|n[N+540>>2]),n[(N=j+612|0)>>2]=u+p,p=0|n[Bt>>2],0<(0|(v=0|n[p+20>>2])))for(S=o+948|0,G=o+952|0,B=o+1036|0,U=u+w|(M=0);;){if(v=0|n[(0|n[S>>2])+(M<<2)>>2],w=(nt=0|n[(0|n[G>>2])+(M<<2)>>2])+v|0,0<(0|nt)){for(p=0|n[B>>2],P=0;P=(0|n[p+(v<<2)>>2])+P|0,(0|(v=v+1|0))<(0|w););v=(0|n[N>>2])+(M<<2)|0,P?(p=U,w=P):Rt=27}else v=(0|n[N>>2])+(M<<2)|0,Rt=27;if((0|Rt)==27&&(w=p=Rt=0),n[v>>2]=p,p=0|n[Bt>>2],(0|(v=0|n[p+20>>2]))<=(0|(M=M+1|0)))break;U=U+(w<<2)|0}n[j>>2]=o,n[j+620>>2]=1,n[j+624>>2]=1&K[20+(0|n[o+708>>2])>>0],U=(n[j+540>>2]=v)+-1|0;t:do if(0<(0|v)){if(u=0|n[le>>2],V=0|n[o+928>>2],$=0|n[o+924>>2],Z=0|n[o+936>>2],it=0|n[o+932>>2],lt=0|n[o+940>>2],_t=0|n[o+952>>2],nt=o+948|0,N=0|n[ct>>2],M=j+584|0,G=o+956|0,!dt)for(;;){if(n[u+(52*U|0)>>2]=0,n[u+(52*U|0)+4>>2]=n[(w=V+(U<<2)|0)>>2],n[u+(52*U|0)+8>>2]=n[(ct=$+(U<<2)|0)>>2],O[u+(52*U|0)+12>>2]=+O[ct>>2]-+O[w>>2],n[u+(52*U|0)+16>>2]=n[Z+(U<<2)>>2],n[u+(52*U|0)+44>>2]=n[(w=it+(U<<2)|0)>>2],D=+Ke(.10000000149011612,0|n[lt+(U<<2)>>2]),O[u+(52*U|0)+20>>2]=D,O[u+(52*U|0)+24>>2]=1.5*D,ct=0|n[_t+(U<<2)>>2],P=(n[u+(52*U|0)+32>>2]=ct)?(0|n[C>>2])+(28*(0|n[(0|n[nt>>2])+(U<<2)>>2])|0)|0:0,n[u+(52*U|0)+28>>2]=P,n[u+(52*U|0)+48>>2]=1,n[N+(U<<2)>>2]=n[w>>2],!(0<(0|U)))break t;U=U+-1|0}for(B=0|n[o+944>>2],S=0|n[o+960>>2];n[u+(52*U|0)>>2]=n[B+(U<<2)>>2],n[u+(52*U|0)+4>>2]=n[(P=V+(U<<2)|0)>>2],n[u+(52*U|0)+8>>2]=n[(ct=$+(U<<2)|0)>>2],O[u+(52*U|0)+12>>2]=+O[ct>>2]-+O[P>>2],n[u+(52*U|0)+16>>2]=n[Z+(U<<2)>>2],n[u+(52*U|0)+44>>2]=n[(P=it+(U<<2)|0)>>2],D=+Ke(.10000000149011612,0|n[lt+(U<<2)>>2]),O[u+(52*U|0)+20>>2]=D,O[u+(52*U|0)+24>>2]=1.5*D,ct=0|n[_t+(U<<2)>>2],w=(n[u+(52*U|0)+32>>2]=ct)?(0|n[C>>2])+(28*(0|n[(0|n[nt>>2])+(U<<2)>>2])|0)|0:0,n[u+(52*U|0)+28>>2]=w,ct=0|n[S+(U<<2)>>2],w=(n[u+(52*U|0)+40>>2]=ct)?(0|n[M>>2])+(28*(0|n[(0|n[G>>2])+(U<<2)>>2])|0)|0:0,n[u+(52*U|0)+36>>2]=w,n[u+(52*U|0)+48>>2]=1,n[N+(U<<2)>>2]=n[P>>2],0<(0|U);)U=U+-1|0}while(0);if(dt?(n[J>>2]=n[o+944>>2],B=p,S=o):(mr(0|n[J>>2],0,v<<2|0),S=0|n[j>>2],B=0|n[S+704>>2]),v=0|n[B+52>>2],0<(0|(n[j+556>>2]=v)))for(p=0|n[C>>2],w=0|n[S+1036>>2],P=0|n[S+1132>>2],U=0|n[S+1032>>2];n[p+(28*(v=(J=v)+-1|0)|0)>>2]=n[w+(v<<2)>>2],n[p+(28*v|0)+4>>2]=P+(n[U+(v<<2)>>2]<<2),n[p+(28*v|0)+8>>2]=0,O[p+(28*v|0)+12>>2]=0,n[p+(28*v|0)+16>>2]=0,n[p+(28*v|0)+20>>2]=1,(n[p+(28*v|0)+24>>2]=1)<(0|J););if(v=0|n[B+48>>2],0<(0|(n[j+564>>2]=v))){G=S+1048|0,M=S+1040|0,S=S+1044|0;do if(B=v,p=0|n[ne>>2],w=0|n[(0|n[G>>2])+((v=v+-1|0)<<2)>>2],0<(0|(n[p+(36*v|0)+4>>2]=w)))for(P=p+(36*v|0)|0,U=0;n[(0|n[P>>2])+(U<<2)>>2]=(0|n[C>>2])+(28*(0|n[(0|n[M>>2])+((0|n[(0|n[S>>2])+(v<<2)>>2])+U<<2)>>2])|0),(0|(U=U+1|0))!=(0|w););while(n[p+(36*v|0)+8>>2]=1<<w,n[p+(36*v|0)+24>>2]=1,(n[p+(36*v|0)+28>>2]=1)<(0|B));V=0|n[j>>2],B=0|n[V+704>>2]}else V=S;if(p=0|n[B>>2],0<(0|(n[(u=j+4|0)>>2]=p))){for(P=0|n[T>>2],M=0|n[ne>>2],N=0|n[V+720>>2],U=0|n[V+740>>2],S=0|n[V+736>>2],G=0|n[V+732>>2],v=0|n[ot>>2],w=p;n[P+(12*(w=(ot=w)+-1|0)|0)>>2]=M+(36*(0|n[N+(w<<2)>>2])|0),n[P+(12*w|0)+4>>2]=n[U+(w<<2)>>2],n[P+(12*w|0)+8>>2]=n[S+(w<<2)>>2],O[v+(w<<2)>>2]=0|n[G+(w<<2)>>2]?1:0,1<(0|ot););for(w=0|n[pt>>2],v=0;ot=0|n[M+(36*(0|n[N+((p=(pt=p)+-1|0)<<2)>>2])|0)+8>>2],v=(n[w+(p<<2)>>2]=ot)+v|0,1<(0|pt););p=0|n[u>>2]}else v=0;if(n[j+20>>2]=v,n[j+12>>2]=p,v=0|n[B+4>>2],0<(0|(n[j+304>>2]=v))){S=V+752|0,M=V+764|0,G=V+768|0,B=V+772|0,N=V+776|0,U=V+760|0;do switch(P=v,p=0|n[d>>2],n[p+((v=v+-1|0)<<5)>>2]=(0|n[ne>>2])+(36*(0|n[(0|n[S>>2])+(v<<2)>>2])|0),n[p+(v<<5)+4>>2]=n[(0|n[M>>2])+(v<<2)>>2],n[p+(v<<5)+8>>2]=n[(0|n[G>>2])+(v<<2)>>2],pt=0|n[(0|n[B>>2])+(v<<2)>>2],n[p+(v<<5)+12>>2]=pt,w=0|n[(0|n[N>>2])+(v<<2)>>2],n[p+(v<<5)+16>>2]=w,n[p+(v<<5)+28>>2]=n[(0|n[U>>2])+(v<<2)>>2],0|pt){case 0:n[(0|n[Mt>>2])+(24*w|0)+20>>2]=v,n[p+(v<<5)+20>>2]=2,n[p+(v<<5)+24>>2]=2;break;case 1:n[(0|n[E>>2])+(12*w|0)+8>>2]=v,n[p+(v<<5)+20>>2]=3,n[p+(v<<5)+24>>2]=3;break;default:wt(0,937,ht)}while(1<(0|P));J=0|n[j>>2],dt=0|n[J+704>>2]}else dt=B,J=V;if(w=0|n[dt+8>>2],v=(n[(u=j+56|0)>>2]=w)+-1|0,N=0<(0|w))if(P=0|n[Mt>>2],U=0|n[ne>>2],B=0|n[J+780>>2],S=0|n[J+800>>2],G=0|n[J+804>>2],M=0|n[J+796>>2],1<(0|Ht[J+4>>0]))for(p=0|n[J+808>>2];n[P+(24*v|0)>>2]=U+(36*(0|n[B+(v<<2)>>2])|0),n[P+(24*v|0)+4>>2]=n[S+(v<<2)>>2],n[P+(24*v|0)+8>>2]=n[G+(v<<2)>>2],n[P+(24*v|0)+16>>2]=n[M+(v<<2)>>2],n[P+(24*v|0)+12>>2]=n[p+(v<<2)>>2],0<(0|v);)v=v+-1|0;else for(;n[P+(24*v|0)>>2]=U+(36*(0|n[B+(v<<2)>>2])|0),n[P+(24*v|0)+4>>2]=n[S+(v<<2)>>2],n[P+(24*v|0)+8>>2]=n[G+(v<<2)>>2],n[P+(24*v|0)+16>>2]=n[M+(v<<2)>>2],(n[P+(24*v|0)+12>>2]=0)<(0|v);)v=v+-1|0;if(p=0|n[dt+12>>2],0<(0|(n[(G=j+164|0)>>2]=p)))for(v=0|n[E>>2],P=0|n[ne>>2],U=0|n[J+812>>2],B=0|n[J+828>>2],S=p;n[v+(12*(S=(ht=S)+-1|0)|0)>>2]=P+(36*(0|n[U+(S<<2)>>2])|0),n[v+(12*S|0)+4>>2]=n[B+(S<<2)>>2],1<(0|ht););if(N){for(P=0|n[Mt>>2],p=0|n[Xt>>2],v=0;Xt=0|n[8+(0|n[P+(24*(w=(Mt=w)+-1|0)|0)>>2])>>2],v=(n[p+(w<<2)>>2]=Xt)+v|0,1<(0|Mt););w=0|n[u>>2],p=0|n[G>>2]}else v=0;if(n[j+72>>2]=v,n[j+64>>2]=w,0<(0|p)){for(P=0|n[E>>2],w=0|n[Lt>>2],v=0;Lt=0|n[8+(0|n[P+(12*(p=(Mt=p)+-1|0)|0)>>2])>>2],v=(n[w+(p<<2)>>2]=Lt)+v|0,1<(0|Mt););p=0|n[G>>2]}else v=0;if(n[j+180>>2]=v,n[j+172>>2]=p,ct=J+704|0,v=0|n[dt+16>>2],0<(0|(n[(N=j+332|0)>>2]=v))){for(p=0|n[ue>>2],G=0|n[ne>>2],M=0|n[J+852>>2],w=0|n[J+876>>2],P=0|n[J+880>>2],U=0|n[J+892>>2],B=0|n[J+872>>2],S=v;n[p+(20*(S=(ue=S)+-1|0)|0)>>2]=G+(36*(0|n[M+(S<<2)>>2])|0),n[p+(20*S|0)+4>>2]=n[w+(S<<2)>>2],n[p+(20*S|0)+8>>2]=n[P+(S<<2)>>2],n[p+(20*S|0)+16>>2]=n[U+(S<<2)>>2],n[p+(20*S|0)+12>>2]=n[B+(S<<2)>>2],1<(0|ue););for(p=0|n[me>>2],w=0;me=0|n[G+(36*(0|n[M+((v=(ue=v)+-1|0)<<2)>>2])|0)+8>>2],w=(n[p+(v<<2)>>2]=me)+w|0,1<(0|ue););if(v=0|n[N>>2],n[j+348>>2]=w,0<(0|(n[j+340>>2]=v)))for(P=0|n[re>>2],p=0|n[zt>>2],w=v<<2;O[P+((w=(zt=w)+-4|0)<<2)>>2]=1,O[P+((ue=zt+-3|0)<<2)>>2]=1,O[P+((re=zt+-2|0)<<2)>>2]=1,O[P+((zt=zt+-1|0)<<2)>>2]=1,O[p+(w<<2)>>2]=0,O[p+(ue<<2)>>2]=0,!(((O[p+(re<<2)>>2]=0)|v)<=(O[p+(zt<<2)>>2]=1));)v=v+-1|0}else n[j+348>>2]=0,n[j+340>>2]=v;if(nt=0|n[dt+72>>2],0<(0|(n[j+480>>2]=nt))){v=0|n[x>>2],p=0|n[J+1152>>2],w=0|n[J+1156>>2],P=0|n[J+1160>>2],U=0|n[J+1164>>2],B=0|n[J+1148>>2],$=J+1172|0,it=J+1168|0,Z=J+1176|0,lt=0;do if(S=0|n[p+(lt<<2)>>2],n[v+(28*lt|0)+4>>2]=S,n[v+(28*lt|0)>>2]=n[w+(lt<<2)>>2],zt=0|n[P+(lt<<2)>>2],n[v+(28*lt|0)+16>>2]=zt,G=0|n[U+(lt<<2)>>2],n[v+(28*lt|0)+20>>2]=G,n[v+(28*lt|0)+24>>2]=zt+1-G,G=(n[v+(28*lt|0)+8>>2]=0)|n[B+(lt<<2)>>2],0<(0|S))for(M=0|n[v+(28*lt|0)+12>>2],N=0|n[$>>2],u=0|n[it>>2],V=0|n[Z>>2],_t=0;n[M+(_t<<4)+4>>2]=n[N+((zt=_t+G|0)<<2)>>2],n[M+(_t<<4)>>2]=n[u+(zt<<2)>>2],n[M+(_t<<4)+8>>2]=n[V+(zt<<2)>>2],(0|(_t=_t+1|(n[M+(_t<<4)+12>>2]=0)))!=(0|S););while((0|(lt=lt+1|0))!=(0|nt))}p=0|n[dt+80>>2],n[(u=j+500|0)>>2]=p;do if(0<(0|p)){for(G=0|n[ge>>2],M=0|n[ne>>2],N=0|n[J+1188>>2],v=0|n[J+1200>>2],w=0|n[J+1204>>2],P=0|n[J+1212>>2],U=0|n[J+1216>>2],B=0|n[J+1208>>2],S=0|n[J+1220>>2];n[G+(24*(p=(ne=p)+-1|0)|0)>>2]=M+(36*(0|n[N+(p<<2)>>2])|0),n[G+(24*p|0)+4>>2]=n[v+(p<<2)>>2],n[G+(24*p|0)+8>>2]=n[w+(p<<2)>>2],n[G+(24*p|0)+12>>2]=n[P+(p<<2)>>2],ge=0|n[B+(p<<2)>>2],n[G+(24*p|0)+16>>2]=U+(ge<<2),n[G+(24*p|0)+20>>2]=S+(ge<<1),1<(0|ne););if((0|(p=0|n[u>>2]))<=0){v=0;break}for(w=0|n[we>>2],v=0;we=0|n[M+(36*(0|n[N+((p=(ne=p)+-1|0)<<2)>>2])|0)+8>>2],v=(n[w+(p<<2)>>2]=we)+v|0,1<(0|ne););p=0|n[u>>2]}else v=0;while(0);n[j+516>>2]=v,n[j+508>>2]=p;do if(3<(0|Ht[g>>0])){if((255&(v=0|K[J+4>>0]))<4)break;if(p=0|n[dt+120>>2],0<(0|(n[j+572>>2]=p)))for(M=0|n[j+576>>2],w=0|n[le>>2],P=0|n[J+1112>>2],U=0|n[J+1124>>2],B=0|n[J+1116>>2],S=0|n[J+1128>>2],G=0|n[J+1120>>2];n[M+(20*(p=(Rt=p)+-1|0)|0)>>2]=w+(52*(0|n[P+(p<<2)>>2])|0),le=0|n[B+(p<<2)>>2],n[M+(20*p|0)+4>>2]=U+(le<<2),n[M+(20*p|0)+8>>2]=S+(le<<2),n[M+(20*p|0)+12>>2]=n[G+(p<<2)>>2],1<(0|Rt););if(p=0|n[dt+100>>2],0<(0|(n[j+580>>2]=p)))for(w=0|n[j+584>>2],P=0|n[J+1056>>2],U=0|n[J+1132>>2],B=0|n[J+1052>>2],S=0|n[J+1060>>2];n[w+(28*(p=(Rt=p)+-1|0)|0)>>2]=n[P+(p<<2)>>2],n[w+(28*p|0)+4>>2]=U+(n[B+(p<<2)>>2]<<2),n[w+(28*p|0)+8>>2]=n[S+(p<<2)>>2],n[w+(28*p|0)+12>>2]=0,O[w+(28*p|0)+16>>2]=0,n[w+(28*p|0)+20>>2]=1,(n[w+(28*p|0)+24>>2]=1)<(0|Rt););if(p=0|n[dt+104>>2],0<(0|(n[j+588>>2]=p))){N=j+592|0,V=j+584|0,M=J+1064|0,$=J+1068|0,S=J+1080|0,u=j+576|0,G=J+1108|0,B=J+1076|0;do if(U=p,v=0|n[N>>2],n[v+(48*(p=p+-1|0)|0)>>2]=(0|n[V>>2])+(28*(0|n[(0|n[M>>2])+(p<<2)>>2])|0),n[v+(48*p|0)+4>>2]=n[(0|n[$>>2])+(p<<2)>>2],n[v+(48*p|0)+8>>2]=0,n[v+(48*p|0)+28>>2]=1,n[v+(48*p|0)+32>>2]=1,P=0|n[(0|n[S>>2])+(p<<2)>>2],0<(0|(n[v+(48*p|0)+36>>2]=P)))for(v=v+(48*p|0)+40|0,w=0;n[(0|n[v>>2])+(w<<2)>>2]=(0|n[u>>2])+(20*(0|n[(0|n[G>>2])+((0|n[(0|n[B>>2])+(p<<2)>>2])+w<<2)>>2])|0),(0|(w=w+1|0))!=(0|P););while(1<(0|U));M=0|n[j>>2],v=0|K[M+4>>0]}else M=J;if(G=0|n[Bt>>2],p=0|n[G+108>>2],(255&v)<4)break;if(0<(0|(n[j+596>>2]=p)))for(w=0|n[j+600>>2],P=0|n[o+1084>>2],U=0|n[o+1092>>2],B=0|n[j+592>>2],S=0|n[o+1088>>2],v=p;n[w+(12*(v=(Bt=v)+-1|0)|0)>>2]=n[P+(v<<2)>>2],n[w+(12*v|0)+4>>2]=n[U+(v<<2)>>2],n[w+(12*v|0)+8>>2]=B+(48*(0|n[S+(v<<2)>>2])|0),1<(0|Bt););if(v=0|n[G+112>>2],0<(0|(n[j+604>>2]=v)))for(w=0|n[j+608>>2],P=0|n[o+1096>>2],U=0|n[o+1104>>2],B=0|n[j+592>>2],p=0|n[o+1100>>2];n[w+(12*(v=(o=v)+-1|0)|0)>>2]=n[P+(v<<2)>>2],n[w+(12*v|0)+4>>2]=n[U+(v<<2)>>2],n[w+(12*v|0)+8>>2]=B+(48*(0|n[p+(v<<2)>>2])|0),1<(0|o););if(w=0|n[M+1132>>2],P=0|n[20+(0|n[M+704>>2])>>2],U=j+612|0,n[j+616>>2]=n[M+972>>2],v=0|n[M+964>>2],n[U>>2]=v,(0|P)<=0||(n[v>>2]=w+(n[n[(p=M+968|0)>>2]>>2]<<2),(0|P)==1))break;for(v=1;n[(0|n[U>>2])+(v<<2)>>2]=w+(n[(0|n[p>>2])+(v<<2)>>2]<<2),(0|(v=v+1|0))!=(0|P););}else{if((0|n[dt+20>>2])<=0)break;nt=J+948|0,dt=J+952|0,it=j+612|0,lt=J+1032|0,_t=J+1036|0,V=J+1132|0,$=j+616|0,Z=0;do{if(v=0|n[(0|n[nt>>2])+(Z<<2)>>2],N=(o=0|n[(0|n[dt>>2])+(Z<<2)>>2])+v|0,u=0|n[(0|n[it>>2])+(Z<<2)>>2],0<(0|o)){G=0|n[lt>>2],M=0|n[_t>>2],S=v,v=0;do if(p=0|n[G+(S<<2)>>2],B=(o=0|n[M+(S<<2)>>2])+p|0,0<(0|o)){U=0|n[V>>2];do{D=+O[U+(p<<2)>>2],w=u+(v<<2)|0;t:do if(0<(0|v))for(P=u;;){if(+O[P>>2]==D)break t;if(w>>>0<=(P=P+4|0)>>>0){Rt=146;break}}else Rt=146;while(0)}while((0|Rt)==146&&(Rt=0,O[w>>2]=D,v=v+1|0),(0|(p=p+1|0))<(0|B))}while((0|(S=S+1|0))<(0|N))}else v=0;(function(se,Zt){se|=0;var he=0,St=0,tr=0,$i=0,D2=0,Yi=0,gr=0,Be=0,Pa=0,Lu=0;L=(Lu=L)+208|0,tr=(Zt|=0)<<2,n[(Yi=Be=(gr=Lu)+192|0)>>2]=1,n[Yi+4>>2]=0;t:do if(0|tr){for(n[gr+4>>2]=4,n[gr>>2]=4,he=Zt=4,St=2;Zt=Zt+4+he|0,(n[gr+(St<<2)>>2]=Zt)>>>0<tr>>>0;)Yi=he,he=Zt,St=St+1|0,Zt=Yi;if(se>>>0<($i=se+tr+-4|0)>>>0){D2=$i,Yi=4+Be|0,he=se,St=Zt=1;do do if((3&Zt|0)!=3){if((0|n[gr+((tr=St+-1|0)<<2)>>2])>>>0<(D2-he|0)>>>0?Nu(he,St,gr):Aa(he,Zt,0|n[Yi>>2],St,0,gr),(0|St)==1){Ia(Be,1),St=0;break}Ia(Be,tr),St=1;break}while(Nu(he,St,gr),Ta(Be,2),St=St+2|0,0);while(Zt=1|n[Be>>2],n[Be>>2]=Zt,(he=he+4|0)>>>0<$i>>>0);tr=0|n[($i=Yi)>>2]}else $i=4+Be|0,tr=0,he=se,St=Zt=1;for(Aa(he,Zt,tr,St,0,gr),tr=4+Be|0;;){if((0|St)==1&(0|Zt)==1){if(!(0|n[tr>>2]))break t;Pa=21}else(0|St)<2?Pa=21:(Ia(Be,2),se=St+-2|0,n[Be>>2]=7^n[Be>>2],Ta(Be,1),Aa(he+(0-(0|n[gr+(se<<2)>>2]))+-4|0,0|n[Be>>2],0|n[$i>>2],St+-1|0,1,gr),Ia(Be,1),Zt=1|n[Be>>2],n[Be>>2]=Zt,Aa(he=he+-4|0,Zt,0|n[$i>>2],se,1,gr),St=se);(0|Pa)==21&&(se=(Pa=0)|R2(Be),Ta(Be,se),Zt=0|n[Be>>2],he=he+-4|0,St=se+St|0)}}while(0);L=Lu})(u,v),n[(0|n[$>>2])+(Z<<2)>>2]=v,Z=Z+1|0}while((0|Z)<(0|n[20+(0|n[ct>>2])>>2]))}while(0);return b2(j),L=Le,0|j}function Vi(o,u){return 0|((o=+O[(o|=0)>>2])<(u=+O[(u|=0)>>2])?-1:u<o&1)}function v2(o){var u=0|K[(o|=0)+4>>0];n[o+704>>2]=o+(0|n[o+64>>2]),n[o+708>>2]=o+(0|n[o+68>>2]),n[o+712>>2]=o+(0|n[o+72>>2]),n[o+716>>2]=o+(0|n[o+76>>2]),n[o+720>>2]=o+(0|n[o+80>>2]),n[o+724>>2]=o+(0|n[o+84>>2]),n[o+728>>2]=o+(0|n[o+88>>2]),n[o+732>>2]=o+(0|n[o+92>>2]),n[o+736>>2]=o+(0|n[o+96>>2]),n[o+740>>2]=o+(0|n[o+100>>2]),n[o+744>>2]=o+(0|n[o+104>>2]),n[o+748>>2]=o+(0|n[o+108>>2]),n[o+752>>2]=o+(0|n[o+112>>2]),n[o+756>>2]=o+(0|n[o+116>>2]),n[o+760>>2]=o+(0|n[o+120>>2]),n[o+764>>2]=o+(0|n[o+124>>2]),n[o+768>>2]=o+(0|n[o+128>>2]),n[o+772>>2]=o+(0|n[o+132>>2]),n[o+776>>2]=o+(0|n[o+136>>2]),n[o+780>>2]=o+(0|n[o+140>>2]),n[o+784>>2]=o+(0|n[o+144>>2]),n[o+788>>2]=o+(0|n[o+148>>2]),n[o+796>>2]=o+(0|n[o+152>>2]),n[o+800>>2]=o+(0|n[o+156>>2]),n[o+804>>2]=o+(0|n[o+160>>2]),n[o+812>>2]=o+(0|n[o+164>>2]),n[o+816>>2]=o+(0|n[o+168>>2]),n[o+820>>2]=o+(0|n[o+172>>2]),n[o+828>>2]=o+(0|n[o+176>>2]),n[o+832>>2]=o+(0|n[o+180>>2]),n[o+836>>2]=o+(0|n[o+184>>2]),n[o+840>>2]=o+(0|n[o+188>>2]),n[o+844>>2]=o+(0|n[o+192>>2]),n[o+848>>2]=o+(0|n[o+196>>2]),n[o+852>>2]=o+(0|n[o+200>>2]),n[o+856>>2]=o+(0|n[o+204>>2]),n[o+860>>2]=o+(0|n[o+208>>2]),n[o+868>>2]=o+(0|n[o+212>>2]),n[o+872>>2]=o+(0|n[o+216>>2]),n[o+876>>2]=o+(0|n[o+220>>2]),n[o+880>>2]=o+(0|n[o+224>>2]),n[o+884>>2]=o+(0|n[o+228>>2]),n[o+888>>2]=o+(0|n[o+232>>2]),n[o+892>>2]=o+(0|n[o+236>>2]),n[o+896>>2]=o+(0|n[o+240>>2]),n[o+900>>2]=o+(0|n[o+244>>2]),n[o+904>>2]=o+(0|n[o+248>>2]),n[o+908>>2]=o+(0|n[o+252>>2]),n[o+912>>2]=o+(0|n[o+256>>2]),n[o+916>>2]=o+(0|n[o+260>>2]),n[o+920>>2]=o+(0|n[o+264>>2]),n[o+924>>2]=o+(0|n[o+268>>2]),n[o+928>>2]=o+(0|n[o+272>>2]),n[o+932>>2]=o+(0|n[o+276>>2]),n[o+936>>2]=o+(0|n[o+280>>2]),n[o+940>>2]=o+(0|n[o+284>>2]),n[o+948>>2]=o+(0|n[o+288>>2]),n[o+952>>2]=o+(0|n[o+292>>2]),n[o+976>>2]=o+(0|n[o+296>>2]),n[o+980>>2]=o+(0|n[o+300>>2]),n[o+984>>2]=o+(0|n[o+304>>2]),n[o+988>>2]=o+(0|n[o+308>>2]),n[o+992>>2]=o+(0|n[o+312>>2]),n[o+996>>2]=o+(0|n[o+316>>2]),n[o+1e3>>2]=o+(0|n[o+320>>2]),n[o+1004>>2]=o+(0|n[o+324>>2]),n[o+1008>>2]=o+(0|n[o+328>>2]),n[o+1012>>2]=o+(0|n[o+332>>2]),n[o+1016>>2]=o+(0|n[o+336>>2]),n[o+1020>>2]=o+(0|n[o+340>>2]),n[o+1024>>2]=o+(0|n[o+344>>2]),n[o+1028>>2]=o+(0|n[o+348>>2]),n[o+1040>>2]=o+(0|n[o+352>>2]),n[o+1044>>2]=o+(0|n[o+356>>2]),n[o+1048>>2]=o+(0|n[o+360>>2]),n[o+1032>>2]=o+(0|n[o+364>>2]),n[o+1036>>2]=o+(0|n[o+368>>2]),n[o+1132>>2]=o+(0|n[o+372>>2]),n[o+1136>>2]=o+(0|n[o+376>>2]),n[o+1140>>2]=o+(0|n[o+380>>2]),n[o+1144>>2]=o+(0|n[o+384>>2]),n[o+1148>>2]=o+(0|n[o+388>>2]),n[o+1152>>2]=o+(0|n[o+392>>2]),n[o+1156>>2]=o+(0|n[o+396>>2]),n[o+1160>>2]=o+(0|n[o+400>>2]),n[o+1164>>2]=o+(0|n[o+404>>2]),n[o+1168>>2]=o+(0|n[o+408>>2]),n[o+1172>>2]=o+(0|n[o+412>>2]),n[o+1176>>2]=o+(0|n[o+416>>2]),n[o+1180>>2]=o+(0|n[o+420>>2]),n[o+1184>>2]=o+(0|n[o+424>>2]),n[o+1188>>2]=o+(0|n[o+428>>2]),n[o+1192>>2]=o+(0|n[o+432>>2]),n[o+1196>>2]=o+(0|n[o+436>>2]),n[o+1200>>2]=o+(0|n[o+440>>2]),n[o+1204>>2]=o+(0|n[o+444>>2]),n[o+1208>>2]=o+(0|n[o+448>>2]),n[o+1212>>2]=o+(0|n[o+452>>2]),n[o+1216>>2]=o+(0|n[o+456>>2]),n[o+1220>>2]=o+(0|n[o+460>>2]),n[o+1224>>2]=o+(0|n[o+464>>2]),(255&u)<=1||(n[o+808>>2]=o+(0|n[o+468>>2]),(255&u)<=3||(n[o+964>>2]=o+(0|n[o+472>>2]),n[o+968>>2]=o+(0|n[o+476>>2]),n[o+972>>2]=o+(0|n[o+480>>2]),n[o+792>>2]=o+(0|n[o+484>>2]),n[o+824>>2]=o+(0|n[o+488>>2]),n[o+864>>2]=o+(0|n[o+492>>2]),n[o+1228>>2]=o+(0|n[o+496>>2]),n[o+1232>>2]=o+(0|n[o+500>>2]),n[o+1236>>2]=o+(0|n[o+504>>2]),n[o+1240>>2]=o+(0|n[o+508>>2]),n[o+1244>>2]=o+(0|n[o+512>>2]),n[o+1248>>2]=o+(0|n[o+516>>2]),n[o+944>>2]=o+(0|n[o+520>>2]),n[o+956>>2]=o+(0|n[o+524>>2]),n[o+960>>2]=o+(0|n[o+528>>2]),n[o+1052>>2]=o+(0|n[o+532>>2]),n[o+1056>>2]=o+(0|n[o+536>>2]),n[o+1060>>2]=o+(0|n[o+540>>2]),n[o+1064>>2]=o+(0|n[o+544>>2]),n[o+1068>>2]=o+(0|n[o+548>>2]),n[o+1072>>2]=o+(0|n[o+552>>2]),n[o+1076>>2]=o+(0|n[o+556>>2]),n[o+1080>>2]=o+(0|n[o+560>>2]),n[o+1084>>2]=o+(0|n[o+564>>2]),n[o+1088>>2]=o+(0|n[o+568>>2]),n[o+1092>>2]=o+(0|n[o+572>>2]),n[o+1096>>2]=o+(0|n[o+576>>2]),n[o+1100>>2]=o+(0|n[o+580>>2]),n[o+1104>>2]=o+(0|n[o+584>>2]),n[o+1108>>2]=o+(0|n[o+588>>2]),n[o+1112>>2]=o+(0|n[o+592>>2]),n[o+1116>>2]=o+(0|n[o+596>>2]),n[o+1120>>2]=o+(0|n[o+600>>2]),n[o+1124>>2]=o+(0|n[o+604>>2]),n[o+1128>>2]=o+(0|n[o+608>>2])))}function Yx(o){o|=0;var u,p,C,T=0,d=0,E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=L;if(L=L+32|0,d=G+24|0,n[(S=G)>>2]=4,n[S+4>>2]=2,n[S+8>>2]=2,function(M,N){M|=0,N|=0;var V=0,$=0;L=(M=L)+272|0,V=M+16|0,n[($=M)>>2]=N,x2(V,993,$),function(D){D|=0;var Z=0,it=0;L=(Z=L)+16|0,n[(it=Z)>>2]=D,function(lt,_t,nt){lt|=0,_t|=0,nt|=0,L=(_t=L)+16|0,n[(lt=_t)>>2]=nt,T2(496,2518,lt),L=_t}(0,0,it),L=Z}(V),L=M}(0,S),0|P2(o))return wt(0,1038,G+16|0),L=G,(S=0)|S;if(4<(255&(T=0|K[(E=o+4|0)>>0])))return n[d>>2]=4,n[d+4>>2]=255&T,wt(0,1101,d),L=G,(S=0)|S;if(0|K[(T=o+5|0)>>0]?(zi(E,1),et(o+64|0,4,160),K[T>>0]=0,v2(o),T=0|K[E>>0],et(0|n[(d=o+704|0)>>2],4,32),zi(0|n[(S=o+708|0)>>2],4),zi(4+(0|n[S>>2])|0,4),zi(8+(0|n[S>>2])|0,4),zi(12+(0|n[S>>2])|0,4),zi(16+(0|n[S>>2])|0,4),zi(20+(0|n[S>>2])|0,1),et(0|n[o+720>>2],4,0|n[n[d>>2]>>2]),et(0|n[o+724>>2],4,0|n[n[d>>2]>>2]),et(0|n[o+728>>2],4,0|n[n[d>>2]>>2]),et(0|n[o+732>>2],4,0|n[n[d>>2]>>2]),et(0|n[o+736>>2],4,0|n[n[d>>2]>>2]),et(0|n[o+740>>2],4,0|n[n[d>>2]>>2]),et(0|n[o+752>>2],4,0|n[4+(0|n[d>>2])>>2]),et(0|n[o+756>>2],4,0|n[4+(0|n[d>>2])>>2]),et(0|n[o+760>>2],4,0|n[4+(0|n[d>>2])>>2]),et(0|n[o+764>>2],4,0|n[4+(0|n[d>>2])>>2]),et(0|n[o+768>>2],4,0|n[4+(0|n[d>>2])>>2]),et(0|n[o+772>>2],4,0|n[4+(0|n[d>>2])>>2]),et(0|n[o+776>>2],4,0|n[4+(0|n[d>>2])>>2]),et(0|n[o+780>>2],4,0|n[8+(0|n[d>>2])>>2]),et(0|n[o+784>>2],4,0|n[8+(0|n[d>>2])>>2]),et(0|n[o+788>>2],4,0|n[8+(0|n[d>>2])>>2]),et(0|n[o+796>>2],4,0|n[8+(0|n[d>>2])>>2]),et(0|n[o+800>>2],4,0|n[8+(0|n[d>>2])>>2]),et(0|n[o+804>>2],4,0|n[8+(0|n[d>>2])>>2]),et(0|n[o+812>>2],4,0|n[12+(0|n[d>>2])>>2]),et(0|n[o+816>>2],4,0|n[12+(0|n[d>>2])>>2]),et(0|n[o+820>>2],4,0|n[12+(0|n[d>>2])>>2]),et(0|n[o+828>>2],4,0|n[12+(0|n[d>>2])>>2]),et(0|n[o+852>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+856>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+860>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+868>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+872>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+876>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+880>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+884>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+888>>2],1,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+892>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+896>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+900>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+904>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+908>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+912>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+924>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+928>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+932>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+936>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+940>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+948>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+952>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+976>>2],4,0|n[24+(0|n[d>>2])>>2]),et(0|n[o+980>>2],4,0|n[28+(0|n[d>>2])>>2]),et(0|n[o+984>>2],4,0|n[28+(0|n[d>>2])>>2]),et(0|n[o+988>>2],4,0|n[32+(0|n[d>>2])>>2]),et(0|n[o+992>>2],4,0|n[32+(0|n[d>>2])>>2]),et(0|n[o+996>>2],4,0|n[32+(0|n[d>>2])>>2]),et(0|n[o+1e3>>2],4,0|n[32+(0|n[d>>2])>>2]),et(0|n[o+1004>>2],4,0|n[32+(0|n[d>>2])>>2]),et(0|n[o+1008>>2],4,0|n[32+(0|n[d>>2])>>2]),et(0|n[o+1012>>2],4,0|n[32+(0|n[d>>2])>>2]),et(0|n[o+1016>>2],4,0|n[36+(0|n[d>>2])>>2]),et(0|n[o+1020>>2],4,0|n[36+(0|n[d>>2])>>2]),et(0|n[o+1024>>2],4,0|n[36+(0|n[d>>2])>>2]),et(0|n[o+1028>>2],4,0|n[40+(0|n[d>>2])>>2]),et(0|n[o+1040>>2],4,0|n[44+(0|n[d>>2])>>2]),et(0|n[o+1044>>2],4,0|n[48+(0|n[d>>2])>>2]),et(0|n[o+1048>>2],4,0|n[48+(0|n[d>>2])>>2]),et(0|n[o+1032>>2],4,0|n[52+(0|n[d>>2])>>2]),et(0|n[o+1036>>2],4,0|n[52+(0|n[d>>2])>>2]),et(0|n[o+1132>>2],4,0|n[56+(0|n[d>>2])>>2]),et(0|n[o+1136>>2],4,0|n[60+(0|n[d>>2])>>2]),et(0|n[o+1140>>2],2,0|n[64+(0|n[d>>2])>>2]),et(0|n[o+1144>>2],4,0|n[68+(0|n[d>>2])>>2]),et(0|n[o+1148>>2],4,0|n[72+(0|n[d>>2])>>2]),et(0|n[o+1152>>2],4,0|n[72+(0|n[d>>2])>>2]),et(0|n[o+1156>>2],4,0|n[72+(0|n[d>>2])>>2]),et(0|n[o+1160>>2],4,0|n[72+(0|n[d>>2])>>2]),et(0|n[o+1164>>2],4,0|n[72+(0|n[d>>2])>>2]),et(0|n[o+1168>>2],4,0|n[76+(0|n[d>>2])>>2]),et(0|n[o+1172>>2],4,0|n[76+(0|n[d>>2])>>2]),et(0|n[o+1176>>2],4,0|n[76+(0|n[d>>2])>>2]),et(0|n[o+1188>>2],4,0|n[80+(0|n[d>>2])>>2]),et(0|n[o+1192>>2],4,0|n[80+(0|n[d>>2])>>2]),et(0|n[o+1196>>2],4,0|n[80+(0|n[d>>2])>>2]),et(0|n[o+1200>>2],4,0|n[80+(0|n[d>>2])>>2]),et(0|n[o+1204>>2],4,0|n[80+(0|n[d>>2])>>2]),et(0|n[o+1208>>2],4,0|n[80+(0|n[d>>2])>>2]),et(0|n[o+1212>>2],4,0|n[80+(0|n[d>>2])>>2]),et(0|n[o+1216>>2],4,0|n[84+(0|n[d>>2])>>2]),et(0|n[o+1220>>2],2,0|n[84+(0|n[d>>2])>>2]),et(0|n[o+1224>>2],4,0|n[88+(0|n[d>>2])>>2]),1<(255&T)&&(et(0|n[o+808>>2],4,0|n[8+(0|n[d>>2])>>2]),3<(255&T))&&(et(0|n[o+968>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+972>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+792>>2],4,0|n[8+(0|n[d>>2])>>2]),et(0|n[o+824>>2],4,0|n[12+(0|n[d>>2])>>2]),et(0|n[o+864>>2],4,0|n[16+(0|n[d>>2])>>2]),et(0|n[o+1228>>2],4,0|n[92+(0|n[d>>2])>>2]),et(0|n[o+1232>>2],4,0|n[92+(0|n[d>>2])>>2]),et(0|n[o+1236>>2],4,0|n[92+(0|n[d>>2])>>2]),et(0|n[o+1240>>2],4,0|n[96+(0|n[d>>2])>>2]),et(0|n[o+1244>>2],4,0|n[96+(0|n[d>>2])>>2]),et(0|n[o+1248>>2],4,0|n[96+(0|n[d>>2])>>2]),et(0|n[o+944>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+956>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+960>>2],4,0|n[20+(0|n[d>>2])>>2]),et(0|n[o+1052>>2],4,0|n[100+(0|n[d>>2])>>2]),et(0|n[o+1056>>2],4,0|n[100+(0|n[d>>2])>>2]),et(0|n[o+1060>>2],4,0|n[100+(0|n[d>>2])>>2]),et(0|n[o+1064>>2],4,0|n[104+(0|n[d>>2])>>2]),et(0|n[o+1068>>2],4,0|n[104+(0|n[d>>2])>>2]),et(0|n[o+1072>>2],4,0|n[104+(0|n[d>>2])>>2]),et(0|n[o+1076>>2],4,0|n[104+(0|n[d>>2])>>2]),et(0|n[o+1080>>2],4,0|n[104+(0|n[d>>2])>>2]),et(0|n[o+1084>>2],4,0|n[108+(0|n[d>>2])>>2]),et(0|n[o+1088>>2],4,0|n[108+(0|n[d>>2])>>2]),et(0|n[o+1092>>2],4,0|n[108+(0|n[d>>2])>>2]),et(0|n[o+1096>>2],4,0|n[112+(0|n[d>>2])>>2]),et(0|n[o+1100>>2],4,0|n[112+(0|n[d>>2])>>2]),et(0|n[o+1104>>2],4,0|n[112+(0|n[d>>2])>>2]),et(0|n[o+1108>>2],4,0|n[116+(0|n[d>>2])>>2]),et(0|n[o+1112>>2],4,0|n[120+(0|n[d>>2])>>2]),et(0|n[o+1116>>2],4,0|n[120+(0|n[d>>2])>>2]),et(0|n[o+1120>>2],4,0|n[120+(0|n[d>>2])>>2]),et(0|n[o+1124>>2],4,0|n[124+(0|n[d>>2])>>2]),et(0|n[o+1128>>2],4,0|n[124+(0|n[d>>2])>>2]))):(v2(o),d=o+704|0),0|n[905]||(n[905]=1),T=0|n[d>>2],0<(0|n[T>>2]))for(E=o+716|0,x=o+712|0,g=0;n[(0|n[x>>2])+(g<<2)>>2]=(0|n[E>>2])+(g<<6),T=0|n[d>>2],(0|(g=g+1|0))<(0|n[T>>2]););if(0<(0|n[T+4>>2]))for(E=o+748|0,x=o+744|0,g=0;n[(0|n[x>>2])+(g<<2)>>2]=(0|n[E>>2])+(g<<6),T=0|n[d>>2],(0|(g=g+1|0))<(0|n[T+4>>2]););if(0<(0|n[T+16>>2]))for(v=o+848|0,w=o+832|0,B=o+1136|0,C=o+896|0,U=o+836|0,P=o+1140|0,u=o+900|0,p=o+840|0,E=o+1144|0,x=o+908|0,g=o+844|0,S=0;n[(0|n[w>>2])+(S<<2)>>2]=(0|n[v>>2])+(S<<6),n[(0|n[U>>2])+(S<<2)>>2]=(0|n[B>>2])+(n[(0|n[C>>2])+(S<<2)>>2]<<2),n[(0|n[p>>2])+(S<<2)>>2]=(0|n[P>>2])+(n[(0|n[u>>2])+(S<<2)>>2]<<1),n[(0|n[g>>2])+(S<<2)>>2]=(0|n[E>>2])+(n[(0|n[x>>2])+(S<<2)>>2]<<2),T=0|n[d>>2],(0|(S=S+1|0))<(0|n[T+16>>2]););if(0<(0|n[T+20>>2]))for(E=o+920|0,x=o+916|0,g=0;n[(0|n[x>>2])+(g<<2)>>2]=(0|n[E>>2])+(g<<6),T=0|n[d>>2],(0|(g=g+1|0))<(0|n[T+20>>2]););if(0<(0|n[T+80>>2]))for(E=o+1184|0,x=o+1180|0,g=0;n[(0|n[x>>2])+(g<<2)>>2]=(0|n[E>>2])+(g<<6),T=0|n[d>>2],(0|(g=g+1|0))<(0|n[T+80>>2]););if(1&K[20+(0|n[o+708>>2])>>0]||(0|(P=0|n[T+16>>2]))<=0)return L=G,0|(S=o);T=0|n[o+1140>>2],d=0|n[o+900>>2],E=0|n[o+904>>2],g=0;do if(x=T+(n[d+(g<<2)>>2]<<1)|0,w=(S=0|n[E+(g<<2)>>2])+-1|0,1<(0|S))for(v=0;B=0|de[(U=x+(v<<1)|0)>>1],de[U>>1]=0|de[(S=x+(v+2<<1)|0)>>1],de[S>>1]=B,(0|(v=v+3|0))<(0|w););while((0|(g=g+1|0))!=(0|P));d=0|n[o+1136>>2],E=0|n[o+896>>2],x=0|n[o+892>>2],v=0;do if(g=(T=d+(n[E+(v<<2)>>2]<<2)|0)+((S=0|n[x+(v<<2)>>2])<<1<<2)|0,0<(0|S))for(T=T+4|0;O[T>>2]=1-+O[T>>2],(T=T+8|0)>>>0<g>>>0;);while((0|(v=v+1|0))!=(0|P));return L=G,0|o}function Zx(o){var u=L;return L=L+16|0,0|P2(o|=0)?(wt(0,1210,u),L=u,(o=0)|o):(o=0|Ht[o+4>>0],L=u,0|o)}function qx(o){var u,p,C,T,w=0,v=0,d=0,E=0,x=0,g=0,v=(o|=0)+64|0,w=o+144|0;if(Ae(v,0|n[o+88>>2],0|n[o+148>>2],0|n[w>>2]),m2(v,0|n[o+92>>2],0|n[o+152>>2],0|n[796+(0|n[o>>2])>>2],2,0|n[w>>2]),!((0|Ht[4+(0|n[o>>2])>>0])<4||(Ae(v,0|n[o+96>>2],0|n[(T=o+120|0)>>2],0|n[w>>2]),Ae(v,0|n[o+100>>2],0|n[(d=o+124|0)>>2],0|n[w>>2]),Ae(v,0|n[o+104>>2],0|n[(E=o+128|0)>>2],0|n[w>>2]),Ae(v,0|n[o+108>>2],0|n[(u=o+132|0)>>2],0|n[w>>2]),Ae(v,0|n[o+112>>2],0|n[(p=o+136|0)>>2],0|n[w>>2]),Ae(v,0|n[o+116>>2],0|n[(C=o+140|0)>>2],0|n[w>>2]),w=0|n[o+156>>2],v=0|n[T>>2],d=0|n[d>>2],E=0|n[E>>2],(0|(T=0|n[o+56>>2]))<=0))){for(g=x=0;n[w+(x<<2)>>2]=n[v+(g<<2)>>2],n[w+((1|x)<<2)>>2]=n[d+(g<<2)>>2],n[w+((2|x)<<2)>>2]=n[E+(g<<2)>>2],(0|(g=g+1|0))!=(0|T);)x=x+4|0;for(g=0|n[o+160>>2],x=0|n[u>>2],E=0|n[p>>2],w=0|n[C>>2],d=v=0;n[g+(v<<2)>>2]=n[x+(d<<2)>>2],n[g+((1|v)<<2)>>2]=n[E+(d<<2)>>2],n[g+((2|v)<<2)>>2]=n[w+(d<<2)>>2],(0|(d=d+1|0))!=(0|T);)v=v+4|0}}function Jx(o){var u,p,C,T,w=0,v=0,d=0,E=0,x=0,g=0,v=(o|=0)+172|0,w=o+264|0;if(Ae(v,0|n[o+196>>2],0|n[o+268>>2],0|n[w>>2]),Ae(v,0|n[o+200>>2],0|n[o+284>>2],0|n[w>>2]),Ae(v,0|n[o+204>>2],0|n[o+276>>2],0|n[w>>2]),Ae(v,0|n[o+208>>2],0|n[o+280>>2],0|n[w>>2]),Ae(v,0|n[o+212>>2],0|n[o+272>>2],0|n[w>>2]),!((0|Ht[4+(0|n[o>>2])>>0])<4||(Ae(v,0|n[o+216>>2],0|n[(T=o+240|0)>>2],0|n[w>>2]),Ae(v,0|n[o+220>>2],0|n[(d=o+244|0)>>2],0|n[w>>2]),Ae(v,0|n[o+224>>2],0|n[(E=o+248|0)>>2],0|n[w>>2]),Ae(v,0|n[o+228>>2],0|n[(u=o+252|0)>>2],0|n[w>>2]),Ae(v,0|n[o+232>>2],0|n[(p=o+256|0)>>2],0|n[w>>2]),Ae(v,0|n[o+236>>2],0|n[(C=o+260|0)>>2],0|n[w>>2]),w=0|n[o+296>>2],v=0|n[T>>2],d=0|n[d>>2],E=0|n[E>>2],(0|(T=0|n[o+164>>2]))<=0))){for(g=x=0;n[w+(x<<2)>>2]=n[v+(g<<2)>>2],n[w+((1|x)<<2)>>2]=n[d+(g<<2)>>2],n[w+((2|x)<<2)>>2]=n[E+(g<<2)>>2],(0|(g=g+1|0))!=(0|T);)x=x+4|0;for(g=0|n[o+300>>2],x=0|n[u>>2],E=0|n[p>>2],w=0|n[C>>2],d=v=0;n[g+(v<<2)>>2]=n[x+(d<<2)>>2],n[g+((1|v)<<2)>>2]=n[E+(d<<2)>>2],n[g+((2|v)<<2)>>2]=n[w+(d<<2)>>2],(0|(d=d+1|0))!=(0|T);)v=v+4|0}}function Kx(o){var u,p,C,T,w=0,v=0,d=0,E=0,x=0,g=0,v=(o|=0)+340|0,w=o+424|0;if(Ae(v,0|n[o+364>>2],0|n[o+448>>2],0|n[w>>2]),_2(v,0|n[o+368>>2],0|n[o+440>>2],0|n[w>>2]),m2(v,0|n[o+372>>2],0|n[o+444>>2],0|n[892+(0|n[o>>2])>>2],2,0|n[w>>2]),!((0|Ht[4+(0|n[o>>2])>>0])<4||(Ae(v,0|n[o+376>>2],0|n[(T=o+400|0)>>2],0|n[w>>2]),Ae(v,0|n[o+380>>2],0|n[(d=o+404|0)>>2],0|n[w>>2]),Ae(v,0|n[o+384>>2],0|n[(E=o+408|0)>>2],0|n[w>>2]),Ae(v,0|n[o+388>>2],0|n[(u=o+412|0)>>2],0|n[w>>2]),Ae(v,0|n[o+392>>2],0|n[(p=o+416|0)>>2],0|n[w>>2]),Ae(v,0|n[o+396>>2],0|n[(C=o+420|0)>>2],0|n[w>>2]),w=0|n[o+452>>2],v=0|n[T>>2],d=0|n[d>>2],E=0|n[E>>2],(0|(T=0|n[o+332>>2]))<=0))){for(g=x=0;n[w+(x<<2)>>2]=n[v+(g<<2)>>2],n[w+((1|x)<<2)>>2]=n[d+(g<<2)>>2],n[w+((2|x)<<2)>>2]=n[E+(g<<2)>>2],(0|(g=g+1|0))!=(0|T);)x=x+4|0;for(g=0|n[o+456>>2],x=0|n[u>>2],E=0|n[p>>2],w=0|n[C>>2],d=v=0;n[g+(v<<2)>>2]=n[x+(d<<2)>>2],n[g+((1|v)<<2)>>2]=n[E+(d<<2)>>2],n[g+((2|v)<<2)>>2]=n[w+(d<<2)>>2],(0|(d=d+1|0))!=(0|T);)v=v+4|0}}function Ae(o,u,p,C){u|=0,p|=0,C|=0;var T,d,E,x=0,g=0,v=0,w=0,P=0,U=0;if(0<(0|(x=0|n[(o|=0)+8>>2])))for(g=0|n[o+20>>2],v=0|n[o+12>>2],w=0;O[v+(w<<2)>>2]=+O[u+(w<<2)>>2]*+O[g+(w<<2)>>2],(0|(w=w+1|0))!=(0|x););if(!((0|(d=0|n[o>>2]))<=0))if(U=o+16|0,E=0|n[o+4>>2],T=o+12|0,C)for(u=w=0;;){if(0|n[C>>2]){if(g=(o=0|n[(0|n[U>>2])+(u<<2)>>2])+w|0,0<(0|o))for(x=0|n[T>>2],v=w,P=0;P+=+O[x+(v<<2)>>2],(0|(v=v+1|0))<(0|g););else P=0;O[p+(u<<2)>>2]=P}if((0|(x=u+1|0))==(0|d))break;C=C+4|0,w=(0|n[E+(u<<2)>>2])+w|0,u=x}else for(w=0|n[U>>2],o=u=0;;){if(g=(U=0|n[w+(o<<2)>>2])+u|0,0<(0|U))for(x=0|n[T>>2],v=u,P=0;P+=+O[x+(v<<2)>>2],(0|(v=v+1|0))<(0|g););else P=0;if(O[p+(o<<2)>>2]=P,(0|(x=o+1|0))==(0|d))break;u=(0|n[E+(o<<2)>>2])+u|0,o=x}}function _2(o,u,p,C){u|=0,p|=0,C|=0;var T,d,E=0,x=0,g=0,v=0,w=0,P=0;if(0<(0|(E=0|n[(o|=0)+8>>2])))for(x=0|n[o+20>>2],g=0|n[o+12>>2],v=0;O[g+(v<<2)>>2]=+O[u+(v<<2)>>2]*+O[x+(v<<2)>>2],(0|(v=v+1|0))!=(0|E););if(!((0|(E=0|n[o>>2]))<=0))if(P=o+16|0,T=0|n[o+4>>2],d=o+12|0,C)for(u=v=0;;){if(0|n[C>>2]){if(x=(g=0|n[(0|n[P>>2])+(u<<2)>>2])+v|0,0<(0|g))for(E=0|n[d>>2],g=v,w=0;w+=+O[E+(g<<2)>>2],(0|(g=g+1|0))<(0|x););else w=0;n[p+(u<<2)>>2]=~~(w+.0010000000474974513),E=0|n[o>>2]}if(!((0|(x=u+1|0))<(0|E)))break;C=C+4|0,v=(0|n[T+(u<<2)>>2])+v|0,u=x}else for(v=0|n[P>>2],C=u=0;;){if(x=(P=0|n[v+(C<<2)>>2])+u|0,0<(0|P))for(E=0|n[d>>2],g=u,w=0;w+=+O[E+(g<<2)>>2],(0|(g=g+1|0))<(0|x););else w=0;if(n[p+(C<<2)>>2]=~~(w+.0010000000474974513),!((0|(E=C+1|0))<(0|n[o>>2])))break;u=(0|n[T+(C<<2)>>2])+u|0,C=E}}function m2(o,u,p,C,T,d){u|=0,p|=0,C|=0,T|=0,d|=0;var E,x,g,v,w,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0|n[(o|=0)>>2];if(!((0|D)<=0))if(v=o+16|0,g=0|n[o+4>>2],x=o+20|0,E=T<<2,d)for(V=N=0;;){if(0|n[d>>2]&&(S=0|n[p+(V<<2)>>2],o=0|n[C+(V<<2)>>2],M=0|Ie(o,T),G=(P=0|n[(0|n[v>>2])+(V<<2)>>2])+N|0,(B=0<(0|M))&&mr(0|S,0,0|Ie(E,o)),0<(0|P)&&($=0|n[x>>2],B))){P=N;do for(o=0|n[u+(P<<2)>>2],U=+O[$+(P<<2)>>2],B=0;O[(w=S+(B<<2)|0)>>2]=+O[w>>2]+U*+O[o+(B<<2)>>2],(0|(B=B+1|0))!=(0|M););while((0|(P=P+1|0))<(0|G))}if((0|(o=V+1|0))==(0|D))break;d=d+4|0,N=(0|n[g+(V<<2)>>2])+N|0,V=o}else for(N=M=0;;){if(B=0|n[p+(N<<2)>>2],o=0|n[C+(N<<2)>>2],G=0|Ie(o,T),S=(d=0|n[(0|n[v>>2])+(N<<2)>>2])+M|0,(P=0<(0|G))&&mr(0|B,0,0|Ie(E,o)),0<(0|d)&&(V=0|n[x>>2],P)){d=M;do for(o=0|n[u+(d<<2)>>2],U=+O[V+(d<<2)>>2],P=0;O[($=B+(P<<2)|0)>>2]=+O[$>>2]+U*+O[o+(P<<2)>>2],(0|(P=P+1|0))!=(0|G););while((0|(d=d+1|0))<(0|S))}if((0|(o=N+1|0))==(0|D))break;M=(0|n[g+(N<<2)>>2])+M|0,N=o}}function g2(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|function(C){C|=0;var T,d,E=L;return L=L+560|0,T=(d=E)+548|0,mr(0|d,0,548),p2(C,d,T),L=E,0|n[T>>2]}(o),L=p,0|u):(n[u>>2]=1515,n[u+4>>2]=1533,wt(0,1269,u),L=p,(u=0)|u)}function y2(o,u,p){u|=0,p|=0;var C,T,d=0,E=0,x=L;return L=L+32|0,E=x+24|0,T=x+16|0,d=x+8|0,C=x,(o|=0)?u?((d=u)+15&-16|0)!=(0|d)?(n[T>>2]=1551,n[4+T>>2]=1342,wt(0,1269,T),L=x,(E=0)|E):(u=0|$x(o,u,p))?(L=x,0|(E=u)):(n[E>>2]=1551,n[E+4>>2]=1577,wt(0,1269,E),L=x,(E=0)|E):(n[d>>2]=1551,n[d+4>>2]=1303,wt(0,1269,d),L=x,(E=0)|E):(n[C>>2]=1551,n[C+4>>2]=1533,wt(0,1269,C),L=x,(E=0)|E)}function Qx(o,u,p,C){if(p=+p,C=+C,(u=+qe(+(u=+u),+(o=+o))-+qe(+C,+p))<-3.1415927410125732)for(;(u+=6.2831854820251465)<-3.1415927410125732;);if(!(3.1415927410125732<u))return+(p=u);for(;3.1415927410125732<(u+=-6.2831854820251465););return+u}function zi(o,u){o|=0,u|=0;var p;if(!((u=o+u+-1|0)>>>0<=o>>>0))for(;p=0|K[o>>0],K[o>>0]=0|K[u>>0],o=o+1|0,K[u>>0]=p,o>>>0<(u=u+-1|0)>>>0;);}function et(o,u,p){o|=0,u|=0;var C,T=0,d=0;if(p|=0)do if(p=p+-1|0,(d=o)>>>0<(T=(o=o+u|0)+-1|0)>>>0)for(;C=0|K[d>>0],K[d>>0]=0|K[T>>0],d=d+1|0,K[T>>0]=C,d>>>0<(T=T+-1|0)>>>0;);while(0|p)}function tT(o){var u,p,C,T=0,d=0,E=0,x=0,M=0,N=0,V=0,g=0,G=0,v=0,w=0,P=0,U=0,B=0,S=(T=0|n[(p=(o|=0)+336|0)>>2])+(20*(g=0|n[(C=o+332|0)>>2])|0)|0,G=o+424|0,M=0|n[o+48>>2],N=0|n[o+316>>2],V=0|n[o+308>>2];if(0<(0|g))for(g=0|n[G>>2],E=0|n[o+448>>2],x=0|n[o+444>>2];0|n[g>>2]&&((0|(d=0|n[T+4>>2]))!=-1&&(O[E>>2]=+O[M+(d<<2)>>2]*+O[E>>2]),(0|(d=0|n[T+8>>2]))!=-1&&(O[E>>2]=+O[N+(d<<2)>>2]*+O[E>>2],w=0|n[x>>2],Wi[3&n[V+(d<<5)+24>>2]](o,d,w,w,0|n[T+16>>2]))),!(S>>>0<=(T=T+20|0)>>>0);)g=g+4|0,E=E+4|0,x=x+4|0;if(!((0|Ht[4+(0|n[o>>2])>>0])<4||(V=(T=0|n[p>>2])+(20*(w=0|n[C>>2])|0)|0,M=0|n[o+324>>2],N=0|n[o+328>>2],(0|w)<=0)))for(x=0|n[G>>2],d=T,E=0|n[o+452>>2],T=0|n[o+456>>2];0|n[x>>2]&&(0|(v=0|n[d+8>>2]))!=-1&&(P=+O[E>>2]*+O[(C=M+((G=v<<2)<<2)|0)>>2],O[E>>2]=P,U=+O[(w=E+4|0)>>2]*+O[4+C>>2],O[w>>2]=U,B=+O[(o=E+8|0)>>2]*+O[8+C>>2],O[E>>2]=P<0?0:1<P?1:P,O[w>>2]=U<0?0:1<U?1:U,O[o>>2]=B<0?0:1<B?1:B,O[E+12>>2]=1,B=+O[T>>2],U=+O[(G=N+(G<<2)|0)>>2],O[T>>2]=U=B+U-B*U,B=+O[(o=T+4|0)>>2],P=+O[G+4>>2],O[o>>2]=P=B+P-B*P,u=(B=+O[(w=T+8|0)>>2])+(u=+O[G+8>>2])-B*u,O[T>>2]=U<0?0:1<U?1:U,O[o>>2]=P<0?0:1<P?1:P,O[w>>2]=u<0?0:1<u?1:u,O[T+12>>2]=1),!(V>>>0<=(d=d+20|0)>>>0);)x=x+4|0,E=E+16|0,T=T+16|0}function eT(o){var u,p=0|n[(o|=0)+332>>2];0|n[o+428>>2]&&(Pr(0|n[o+460>>2],0|n[o+436>>2],0|(u=p<<2)),Pr(0|n[o+464>>2],0|n[o+440>>2],0|u),Pr(0|n[o+468>>2],0|n[o+448>>2],0|u),(0|Ht[4+(0|n[o>>2])>>0])<=3||(Pr(0|n[o+472>>2],0|n[o+452>>2],0|(u=p<<4)),Pr(0|n[o+476>>2],0|n[o+456>>2],0|u)))}function rT(o){var u,p,C,T,d,E,x,g,v,w,P,Z=0,$=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0|K[4+(0|n[(o|=0)>>2])>>0],D=0|n[o+332>>2],Z=o+428|0;if(0|n[o+620>>2]){if(!(((n[Z>>2]=0)|D)<=0))for(B=o+424|0,S=o+432|0,Z=o+448|0,$=0;U=0|n[(0|n[B>>2])+($<<2)>>2]&&+O[(0|n[Z>>2])+($<<2)>>2]!=0?127:126,K[(0|n[S>>2])+$>>0]=U,(0|($=$+1|0))!=(0|D););}else if(0|n[Z>>2]){if(!(((n[Z>>2]=0)|D)<=0))if(C=o+424|0,E=o+432|0,d=o+448|0,g=o+468|0,T=o+440|0,x=o+464|0,w=o+436|0,v=o+460|0,u=o+452|0,G=o+472|0,p=o+456|0,S=o+476|0,(255&$)<=3)for(Z=0;G=(0|n[(0|n[C>>2])+(Z<<2)>>2])==0,V=+O[(0|n[d>>2])+(Z<<2)>>2],N=(0|n[E>>2])+Z|0,M=(1&K[N>>0])==(M=V!=0&(1^G)&1)<<24>>24?M:2|M,M=V!=+O[(0|n[g>>2])+(Z<<2)>>2]?4|M:M,M=(0|n[(0|n[T>>2])+(Z<<2)>>2])==(0|n[(0|n[x>>2])+(Z<<2)>>2])?M:8|M,M=(0|n[(0|n[w>>2])+(Z<<2)>>2])==(0|n[(0|n[v>>2])+(Z<<2)>>2])?M:16|M,K[N>>0]=G?M:32|M,(0|(Z=Z+1|0))!=(0|D););else for(B=U=0;P=(0|n[(0|n[C>>2])+(U<<2)>>2])==0,V=+O[(0|n[d>>2])+(U<<2)>>2],$=(0|n[E>>2])+U|0,Z=(1&K[$>>0])==(Z=V!=0&(1^P)&1)<<24>>24?Z:2|Z,Z=V!=+O[(0|n[g>>2])+(U<<2)>>2]?4|Z:Z,Z=(0|n[(0|n[T>>2])+(U<<2)>>2])==(0|n[(0|n[x>>2])+(U<<2)>>2])?Z:8|Z,Z=(0|n[(0|n[w>>2])+(U<<2)>>2])==(0|n[(0|n[v>>2])+(U<<2)>>2])?Z:16|Z,Z=P?Z:32|Z,P=(0|n[u>>2])+(B<<2)|0,o=(0|n[G>>2])+(B<<2)|0,+O[P>>2]==+O[o>>2]&&+O[4+P>>2]==+O[o+4>>2]&&+O[8+P>>2]==+O[o+8>>2]&&+O[12+P>>2]==+O[o+12>>2]&&(M=(0|n[p>>2])+(B<<2)|0,N=(0|n[S>>2])+(B<<2)|0,+O[M>>2]==+O[N>>2])&&+O[M+4>>2]==+O[N+4>>2]&&+O[M+8>>2]==+O[N+8>>2]&&+O[M+12>>2]==+O[N+12>>2]||(Z|=64),K[$>>0]=Z,(0|(U=U+1|0))!=(0|D);)B=B+4|0}else if(!((0|D)<=0))for(U=o+424|0,B=o+432|0,Z=o+448|0,$=0;0|n[(0|n[U>>2])+($<<2)>>2]&&+O[(0|n[Z>>2])+($<<2)>>2]!=0?(N=(0|n[B>>2])+$|0,K[N>>0]=1|K[N>>0]):(N=(0|n[B>>2])+$|0,K[N>>0]=-2&K[N>>0]),(0|($=$+1|0))!=(0|D););}function iT(o){var u,p,C,T,d,E,x,ht=0,g=0,v=0,w=0,P=0,U=0,B=0,pt=0,Xt=0,Lt=0,Mt=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0,it=0,lt=0,_t=0,nt=0,dt=0,ct=0,J=0,ot=0,pt=0|n[(E=(o|=0)+60|0)>>2],ht=0|n[o>>2],Xt=0|n[ht+784>>2],Lt=0|n[(x=o+56|0)>>2],Mt=0|n[ht+1028>>2];if(0<(0|Lt)){for(V=o+80|0,Z=o+92|0,D=o+88|0,it=o+84|0,$=ht+984|0,P=ht+980|0,B=U=0;;){if(w=0|n[pt+(24*U|0)>>2],(0|(nt=0|n[(ht=w+24|0)>>2]||0|n[w+28>>2]?15:nt))==15&&(n[((nt=0)|n[V>>2])+(U<<2)>>2]=n[(N=w+12|0)>>2],0|n[ht>>2])&&(S=0|n[Xt+(U<<2)>>2],lt=(G=0|n[w+16>>2])+((dt=0|n[N>>2])<<2)|0,0<(0|dt)))for(ht=G,g=(0|n[D>>2])+(B<<2)|0,v=(0|n[Z>>2])+(B<<2)|0;dt=(0|n[ht>>2])+S|0,n[v>>2]=Mt+(n[(0|n[$>>2])+(dt<<2)>>2]<<2),n[g>>2]=n[(0|n[P>>2])+(dt<<2)>>2],!(lt>>>0<=(ht=ht+4|0)>>>0);)g=g+4|0,v=v+4|0;if(0|n[w+28>>2]&&(_t=(M=0|n[w+20>>2])+((dt=0|n[w+12>>2])<<2)|0,0<(0|dt)))for(ht=(0|n[it>>2])+(B<<2)|0,g=M;n[ht>>2]=n[g>>2],!(_t>>>0<=(g=g+4|0)>>>0);)ht=ht+4|0;if((0|(U=U+1|0))==(0|Lt))break;B=(0|n[w+8>>2])+B|0}ht=0|n[o>>2]}if(!((0|Ht[ht+4>>0])<4||(d=0|n[E>>2],dt=0|n[ht+792>>2],(0|(E=0|n[x>>2]))<=0)))for(p=o+96|0,u=o+100|0,x=o+104|0,T=o+108|0,C=o+112|0,nt=o+116|0,lt=ht+1228|0,Z=ht+1232|0,D=ht+1236|0,_t=ht+1240|0,it=ht+1244|0,pt=ht+1248|0,Lt=Xt=0;;){if(ht=0|n[d+(24*Xt|0)>>2],0|n[ht+24>>2]&&(ct=0|n[dt+(Xt<<2)>>2],ot=(J=0|n[ht+16>>2])+((o=0|n[ht+12>>2])<<2)|0,0<(0|o)))for(g=0|n[lt>>2],v=0|n[Z>>2],w=0|n[D>>2],P=0|n[_t>>2],U=0|n[it>>2],B=0|n[pt>>2],Mt=J,S=(0|n[x>>2])+(Lt<<2)|0,G=(0|n[u>>2])+(Lt<<2)|0,M=(0|n[p>>2])+(Lt<<2)|0,N=(0|n[nt>>2])+(Lt<<2)|0,V=(0|n[C>>2])+(Lt<<2)|0,$=(0|n[T>>2])+(Lt<<2)|0;o=(0|n[Mt>>2])+ct|0,n[M>>2]=n[g+(o<<2)>>2],n[G>>2]=n[v+(o<<2)>>2],n[S>>2]=n[w+(o<<2)>>2],n[$>>2]=n[P+(o<<2)>>2],n[V>>2]=n[U+(o<<2)>>2],n[N>>2]=n[B+(o<<2)>>2],!(ot>>>0<=(Mt=Mt+4|0)>>>0);)S=S+4|0,G=G+4|0,M=M+4|0,N=N+4|0,V=V+4|0,$=$+4|0;if((0|(Xt=Xt+1|0))==(0|E))break;Lt=(0|n[ht+8>>2])+Lt|0}}function nT(o){var u,p,C,T,d,E,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Le=0,Z=0,it=0,lt=0,_t=0,nt=0,dt=0,ct=0,J=0,ot=0,pt=0,ht=0,Xt=0,Lt=0,Mt=0,me=0,ue=0,re=0,zt=0,ge=0,we=0,ne=0,le=0,Rt=0,Bt=0|n[(o|=0)+168>>2],j=0|n[o>>2],Le=0|n[816+j>>2];if(0<(0|(Z=0|n[(E=o+164|0)>>2])))for(ot=o+188|0,nt=o+200|0,Lt=o+204|0,me=o+208|0,T=o+212|0,pt=o+196|0,d=o+192|0,_t=992+j|0,Xt=996+j|0,Mt=1e3+j|0,C=1004+j|0,ht=988+j|0,u=1008+j|0,dt=o+288|0,p=1012+j|0,ct=o+292|0,zt=re=0;;){if(it=0|n[Bt+(12*re|0)>>2],(0|(ge=0|n[(x=it+24|0)>>2]||0|n[it+28>>2]?14:ge))==14&&(n[((ge=0)|n[ot>>2])+(re<<2)>>2]=n[(J=it+12|0)>>2],0|n[x>>2])){if(x=0|n[Le+(re<<2)>>2],S=(g=0|n[it+16>>2])+((D=0|n[J>>2])<<2)|0,0<(0|D))for(v=0|n[_t>>2],w=0|n[Xt>>2],P=0|n[Mt>>2],U=0|n[C>>2],B=0|n[ht>>2],G=(0|n[nt>>2])+(zt<<2)|0,M=g,N=(0|n[pt>>2])+(zt<<2)|0,V=(0|n[Lt>>2])+(zt<<2)|0,$=(0|n[me>>2])+(zt<<2)|0,D=(0|n[T>>2])+(zt<<2)|0;Rt=(0|n[M>>2])+x|0,n[G>>2]=n[v+(Rt<<2)>>2],n[V>>2]=n[w+(Rt<<2)>>2],n[$>>2]=n[P+(Rt<<2)>>2],n[D>>2]=n[U+(Rt<<2)>>2],n[N>>2]=n[B+(Rt<<2)>>2],!(S>>>0<=(M=M+4|0)>>>0);)G=G+4|0,N=N+4|0,V=V+4|0,$=$+4|0,D=D+4|0;Rt=(0|n[g>>2])+x|0,n[(0|n[dt>>2])+(re<<2)>>2]=n[(0|n[u>>2])+(Rt<<2)>>2],n[(0|n[ct>>2])+(re<<2)>>2]=n[(0|n[p>>2])+(Rt<<2)>>2]}if(0|n[it+28>>2]&&(ue=(lt=0|n[it+20>>2])+((Rt=0|n[it+12>>2])<<2)|0,0<(0|Rt)))for(x=(0|n[d>>2])+(zt<<2)|0,g=lt;n[x>>2]=n[g>>2],!(ue>>>0<=(g=g+4|0)>>>0);)x=x+4|0;if((0|(re=re+1|0))==(0|Z))break;zt=(0|n[it+8>>2])+zt|0}if(!((0|Ht[4+j>>0])<4||(me=0|n[824+j>>2],(0|(ot=0|n[E>>2]))<=0)))for(Xt=o+216|0,ht=o+220|0,pt=o+224|0,Mt=o+228|0,Lt=o+232|0,J=o+236|0,dt=1228+j|0,_t=1232+j|0,lt=1236+j|0,ct=1240+j|0,nt=1244+j|0,S=1248+j|0,M=G=0;;){if(B=0|n[Bt+(12*G|0)>>2],0|n[B+24>>2]&&(ne=0|n[me+(G<<2)>>2],le=(we=0|n[B+16>>2])+((Rt=0|n[B+12>>2])<<2)|0,0<(0|Rt)))for(x=0|n[dt>>2],g=0|n[_t>>2],v=0|n[lt>>2],w=0|n[ct>>2],P=0|n[nt>>2],U=0|n[S>>2],N=we,V=(0|n[pt>>2])+(M<<2)|0,$=(0|n[ht>>2])+(M<<2)|0,D=(0|n[Xt>>2])+(M<<2)|0,Le=(0|n[J>>2])+(M<<2)|0,Z=(0|n[Lt>>2])+(M<<2)|0,it=(0|n[Mt>>2])+(M<<2)|0;Rt=(0|n[N>>2])+ne|0,n[D>>2]=n[x+(Rt<<2)>>2],n[$>>2]=n[g+(Rt<<2)>>2],n[V>>2]=n[v+(Rt<<2)>>2],n[it>>2]=n[w+(Rt<<2)>>2],n[Z>>2]=n[P+(Rt<<2)>>2],n[Le>>2]=n[U+(Rt<<2)>>2],!(le>>>0<=(N=N+4|0)>>>0);)V=V+4|0,$=$+4|0,D=D+4|0,Le=Le+4|0,Z=Z+4|0,it=it+4|0;if((0|(G=G+1|0))==(0|ot))break;M=(0|n[B+8>>2])+M|0}}function sT(o){var u,p,C,T,ht=0,d=0,E=0,x=0,g=0,v=0,w=0,P=0,pt=0,Xt=0,Lt=0,Mt=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0,it=0,lt=0,_t=0,nt=0,dt=0,ct=0,J=0,ot=0,pt=0|n[(C=(o|=0)+336|0)>>2],ht=0|n[o>>2],Xt=0|n[ht+856>>2],Lt=0|n[(T=o+332|0)>>2],Mt=0|n[ht+1028>>2];if(0<(0|Lt)){for(M=o+356|0,Z=o+372|0,$=o+364|0,N=o+368|0,it=o+360|0,V=ht+1024|0,D=ht+1016|0,v=ht+1020|0,P=w=0;;){if(g=0|n[pt+(20*w|0)>>2],(0|(nt=0|n[(ht=g+24|0)>>2]||0|n[g+28>>2]?15:nt))==15&&(n[((nt=0)|n[M>>2])+(w<<2)>>2]=n[(G=g+12|0)>>2],0|n[ht>>2])&&(U=0|n[Xt+(w<<2)>>2],lt=(B=0|n[g+16>>2])+((dt=0|n[G>>2])<<2)|0,0<(0|dt)))for(ht=(0|n[N>>2])+(P<<2)|0,d=B,E=(0|n[$>>2])+(P<<2)|0,x=(0|n[Z>>2])+(P<<2)|0;dt=(0|n[d>>2])+U|0,n[x>>2]=Mt+(n[(0|n[V>>2])+(dt<<2)>>2]<<2),n[E>>2]=n[(0|n[D>>2])+(dt<<2)>>2],n[ht>>2]=n[(0|n[v>>2])+(dt<<2)>>2],!(lt>>>0<=(d=d+4|0)>>>0);)ht=ht+4|0,E=E+4|0,x=x+4|0;if(0|n[g+28>>2]&&(_t=(S=0|n[g+20>>2])+((dt=0|n[g+12>>2])<<2)|0,0<(0|dt)))for(ht=(0|n[it>>2])+(P<<2)|0,d=S;n[ht>>2]=n[d>>2],!(_t>>>0<=(d=d+4|0)>>>0);)ht=ht+4|0;if((0|(w=w+1|0))==(0|Lt))break;P=(0|n[g+8>>2])+P|0}ht=0|n[o>>2]}if(!((0|Ht[ht+4>>0])<4||(p=0|n[C>>2],dt=0|n[ht+864>>2],(0|(lt=0|n[T>>2]))<=0)))for(C=o+376|0,nt=o+380|0,_t=o+384|0,u=o+388|0,T=o+392|0,it=o+396|0,D=ht+1228|0,V=ht+1232|0,N=ht+1236|0,Z=ht+1240|0,$=ht+1244|0,P=ht+1248|0,Xt=pt=0;;){if(ht=0|n[p+(20*pt|0)>>2],0|n[ht+24>>2]&&(ct=0|n[dt+(pt<<2)>>2],ot=(J=0|n[ht+16>>2])+((o=0|n[ht+12>>2])<<2)|0,0<(0|o)))for(d=0|n[D>>2],E=0|n[V>>2],x=0|n[N>>2],g=0|n[Z>>2],v=0|n[$>>2],w=0|n[P>>2],Lt=J,Mt=(0|n[_t>>2])+(Xt<<2)|0,U=(0|n[nt>>2])+(Xt<<2)|0,B=(0|n[C>>2])+(Xt<<2)|0,S=(0|n[it>>2])+(Xt<<2)|0,G=(0|n[T>>2])+(Xt<<2)|0,M=(0|n[u>>2])+(Xt<<2)|0;o=(0|n[Lt>>2])+ct|0,n[B>>2]=n[d+(o<<2)>>2],n[U>>2]=n[E+(o<<2)>>2],n[Mt>>2]=n[x+(o<<2)>>2],n[M>>2]=n[g+(o<<2)>>2],n[G>>2]=n[v+(o<<2)>>2],n[S>>2]=n[w+(o<<2)>>2],!(ot>>>0<=(Lt=Lt+4|0)>>>0);)Mt=Mt+4|0,U=U+4|0,B=B+4|0,S=S+4|0,G=G+4|0,M=M+4|0;if((0|(pt=pt+1|0))==(0|lt))break;Xt=(0|n[ht+8>>2])+Xt|0}}function b2(o){var u,p,C,T=0;if(eT(o|=0),function(d){d|=0;var E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0;if(E=0|n[d+4>>2],w=0|n[d>>2],P=E+(52*w|0)|0,!((0|w)<=0))for(w=0|n[d+12>>2];x=+O[w>>2],v=(0|n[E+16>>2])==0,d=E+4|0,x=v?(B=+O[d>>2],U=+O[E+8>>2],x<B?B:U<x?U:x):(B=+O[E+12>>2],(U=+O[d>>2])+B*((x=(x-U)/B)-(0|~~+Hr(+x)))),d=E+48|0,+O[(g=E+44|0)>>2]!=x?(n[d>>2]=1,O[g>>2]=x):n[d>>2]=0,v&&(O[w>>2]=x),!(P>>>0<=(E=E+52|0)>>>0);)w=w+4|0}(o+540|0),function(d){d|=0;var E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0,it=0,lt=0;if(E=0|n[d+544>>2],M=0|n[d+540>>2],Z=E+(52*M|0)|0,!((0|M)<=0)){M=(0|n[d+620>>2])==0;do{t:do if(!(0|n[E>>2])&&(N=+O[E+44>>2],V=+O[E+20>>2],$=+O[E+24>>2],D=0|n[E+28>>2],S=0|n[E+32>>2],it=D+(28*S|0)|0,0<(0|S))){if(!M)for(S=D;;){w=0|n[S>>2];do if(1<=(0|w)){if(v=0|n[S+4>>2],g=+O[v>>2],x=g-V,(0|w)==1){w=!(N<V+g)|!(x<N),x=d=0,G=41;break}if(N<x){v=S+16|0,P=1,x=d=0,G=43;break}if(N<V+g)x=d=w=0,G=41;else{for(d=1;x=+O[v+(d<<2)>>2],!(N<V+x);){if(!((0|(d=d+1|0))<(0|w))){G=40;break}g=x}if((0|G)==40){v=S+16|0,d=w+-(P=1)|0,x=0,G=43;break}G=(x=x-V<N?w=0:(d=d+-1|0,(x-=g)<$?w=0:(w=0,(N-g)/x)),41)}}else x=d=w=0,G=41;while(0);if((0|G)==41&&(w|(G=0)==(0|n[(v=S+16|0)>>2])?(P=1&w,G=43):(n[S+24>>2]=1,n[S+20>>2]=1,B=S+8|0,U=S+12|0,w=0)),(0|G)==43&&(g=+O[(U=S+12|(G=0))>>2],lt=g!=x,w=1&((0|n[(B=S+8|0)>>2])!=(0|d)|lt&(x==0|g==0)),n[S+24>>2]=1&lt,n[S+20>>2]=w,w=P),O[U>>2]=x,n[B>>2]=d,n[v>>2]=w,it>>>0<=(S=S+28|0)>>>0)break t}if(!(0|n[E+48>>2])){for(d=D;;)if(n[d+24>>2]=0,n[d+20>>2]=0,it>>>0<=(d=d+28|0)>>>0)break t}S=D;do{w=0|n[S>>2];do if(1<=(0|w)){if(v=0|n[S+4>>2],g=+O[v>>2],x=g-V,(0|w)==1){w=!(N<V+g)|!(x<N),x=d=0,G=24;break}if(N<x){v=S+16|0,P=1,x=d=0,G=26;break}if(N<V+g)x=d=w=0,G=24;else{for(d=1;x=+O[v+(d<<2)>>2],!(N<V+x);){if(!((0|(d=d+1|0))<(0|w))){G=21;break}g=x}if((0|G)==21){v=S+16|0,d=w+-(P=1)|0,x=0,G=26;break}G=(x=x-V<N?w=0:(d=d+-1|0,(x-=g)<$?w=0:(w=0,(N-g)/x)),24)}}else x=d=w=0,G=24;while(0)}while((0|G)==24&&(w|(G=0)==(0|n[(v=S+16|0)>>2])?(P=1&w,G=26):(n[S+24>>2]=1,n[S+20>>2]=1,B=S+8|0,U=S+12|0,w=0)),(0|G)==26&&(g=+O[(U=S+12|(G=0))>>2],lt=g!=x,w=1&((0|n[(B=S+8|0)>>2])!=(0|d)|lt&(x==0|g==0)),n[S+24>>2]=1&lt,n[S+20>>2]=w,w=P),O[U>>2]=x,n[B>>2]=d,n[v>>2]=w,(S=S+28|0)>>>0<it>>>0)}while(0)}while((E=E+52|0)>>>0<Z>>>0)}}(o),aT(o),function(d){d|=0;var E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0,it=0,lt=0,_t=0,nt=0,dt=0,ct=0;if(E=0|n[d+568>>2],V=0|n[d+564>>2],it=E+(36*V|0)|0,!((0|V)<=0)){V=(0|n[d+620>>2])==0;do{N=0|n[E+4>>2];t:do if(0<(0|N))for(P=0|n[E>>2],g=d=x=U=0;;){if(v=0|n[P+(U<<2)>>2],0|n[v+16>>2]){g=1,d=x=0;break t}if(g=g||0|n[v+24>>2],d=d||0|n[v+20>>2],x=x+(+O[v+12>>2]!=0&1)|0,(0|N)<=(0|(U=U+1|0))){P=x,nt=11;break}}else g=d=P=0,nt=11;while(0);t:do if((0|nt)==11)if(x=V?d:1,(nt=0)!=((d=V?g:1)|x|0)&&(_t=1<<P,n[E+12>>2]=_t,$=0|n[E>>2],D=0|n[E+16>>2],Z=0|n[E+20>>2],lt=D+(_t<<2)|0,(0|P)!=31)){for(mr(0|D,0,((g=D+4|0)>>>0<lt>>>0?lt:g)+~D+4&-4|0),g=Z+(_t<<2)|0,v=Z;O[v>>2]=1,(v=v+4|0)>>>0<g>>>0;);if(1<=(0|N)){if(!P)for(P=0,B=1;;){if(v=0|n[$+(P<<2)>>2],U=0|Ie(0|n[v+8>>2],B),(w=+O[v+12>>2])==0)for(g=0;n[(M=D+(g<<2)|0)>>2]=(0|n[M>>2])+U,(0|(g=g+1|0))!=(0|_t););else n[D>>2]=(0|n[D>>2])+U,O[Z>>2]=(1-w)*+O[Z>>2];if(B=0|Ie(0|n[v>>2],B),(0|(P=P+1|0))==(0|N)){g=0;break t}}G=0,M=g=1;do if(S=0|n[$+(G<<2)>>2],v=0|n[8+S>>2],B=0|Ie(v,M),(w=+O[(U=12+S|0)>>2])==0)for(v=0;n[(U=D+(v<<2)|0)>>2]=(0|n[U>>2])+B,(0|(v=v+1|0))!=(0|_t););else{for(P=0|Ie(v+1|0,M),n[D>>2]=(0|n[D>>2])+B,O[Z>>2]=(1-w)*+O[Z>>2],v=1;w=+O[U>>2],ct=(v&g|0)!=0,n[(dt=D+(v<<2)|0)>>2]=(ct?P:B)+(0|n[dt>>2]),O[(dt=Z+(v<<2)|0)>>2]=(ct?w:1-w)*+O[dt>>2],(0|(v=v+1|0))!=(0|_t););g<<=1}while(M=0|Ie(0|n[S>>2],M),(0|(G=G+1|0))!=(0|N));g=0}else g=0}else g=0;while(0)}while(n[E+28>>2]=d,n[E+24>>2]=x,n[E+32>>2]=g,(E=E+36|0)>>>0<it>>>0)}}(o),oT(o),p=0|n[o+4>>2],u=(T=0|n[o+52>>2])+(p<<2)|0,0<(0|p))for(;C=+O[T>>2],O[T>>2]=C<0?0:1<C?1:C,(T=T+4|0)>>>0<u>>>0;);(function(d,E,x){d|=0,E|=0,x|=0;var g=0,v=0;if(v=E+(12*d|0)|0,!((0|d)<=0))for(g=x;;){do if(0|n[E+8>>2]){if((0|(d=0|n[E+4>>2]))!=-1&&!(0|n[x+(d<<2)>>2])){d=0;break}d=(0|n[32+(0|n[E>>2])>>2])==0}else d=0;while(0);if(n[g>>2]=1&d,v>>>0<=(E=E+12|0)>>>0)break;g=g+4|0}})(p,0|n[o+8>>2],0|n[o+40>>2]),function(d){var E,x,g,v,w,it=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0|n[(d|=0)+8>>2],it=0|n[d>>2],lt=0|n[it+724>>2],_t=0|n[d+4>>2];if(!((0|_t)<=0))for(v=d+28|0,w=d+36|0,g=d+32|0,x=it+976|0,B=U=0;;){if(E=0|n[Z+(12*U|0)>>2],(0|(D=0|n[(d=24+E|0)>>2]||0|n[28+E>>2]?6:D))==6&&(n[((D=0)|n[v>>2])+(U<<2)>>2]=n[(N=12+E|0)>>2],0|n[d>>2])&&(M=0|n[lt+(U<<2)>>2],V=(S=0|n[16+E>>2])+((P=0|n[N>>2])<<2)|0,0<(0|P)))for(d=0|n[x>>2],it=(0|n[w>>2])+(B<<2)|0,P=S;n[it>>2]=n[d+((0|n[P>>2])+M<<2)>>2],!(V>>>0<=(P=P+4|0)>>>0);)it=it+4|0;if(0|n[28+E>>2]&&($=(G=0|n[20+E>>2])+((P=0|n[12+E>>2])<<2)|0,0<(0|P)))for(d=(0|n[g>>2])+(B<<2)|0,it=G;n[d>>2]=n[it>>2],!($>>>0<=(it=it+4|0)>>>0);)d=d+4|0;if((0|(U=U+1|0))==(0|_t))break;B=(0|n[8+E>>2])+B|0}}(o),function(d){_2((d|=0)+12|0,0|n[d+36>>2],0|n[d+44>>2],0|n[d+40>>2])}(o),function(d){var E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0;if(L=(S=L)+16|0,B=S,E=n[(d=d|0)+308>>2]|0,g=n[d+304>>2]|0,U=E+(g<<5)|0,v=n[d+40>>2]|0,w=n[d+312>>2]|0,P=n[d+144>>2]|0,x=n[d+264>>2]|0,(0|g)<=0)L=S;else{for(g=w;;){do if(0|n[E+28>>2]){if((0|(d=0|n[E+4>>2]))!=-1&&!(0|n[v+(d<<2)>>2])){d=0;break}if((0|(d=0|n[E+8>>2]))!=-1&&!(0|n[w+(d<<2)>>2])){d=0;break}d=(0|n[32+(0|n[E>>2])>>2])==0}else d=0;while(0);switch(d&=1,n[g>>2]=d,0|n[E+12>>2]){case 0:n[P+(n[E+16>>2]<<2)>>2]=d;break;case 1:n[x+(n[E+16>>2]<<2)>>2]=d;break;default:wt(0,2458,B)}if(U>>>0<=(E=E+32|0)>>>0)break;g=g+4|0}L=S}}(o),iT(o),nT(o),qx(o),Jx(o),function(d){d|=0;var E=0,x=0,g=0,v=0,w=0;if(E=0|n[d+336>>2],x=0|n[d+332>>2],w=E+(20*x|0)|0,g=0|n[d+40>>2],v=0|n[d+312>>2],!((0|x)<=0))for(x=0|n[d+424>>2];;){do if(0|n[E+12>>2]){if((0|(d=0|n[E+4>>2]))!=-1&&!(0|n[g+(d<<2)>>2])){d=0;break}if((0|(d=0|n[E+8>>2]))!=-1&&!(0|n[v+(d<<2)>>2])){d=0;break}d=(0|n[32+(0|n[E>>2])>>2])==0}else d=0;while(0);if(n[x>>2]=1&d,w>>>0<=(E=E+20|0)>>>0)break;x=x+4|0}}(o),sT(o),Kx(o),function(d){var E,x,g,v,w,it=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0|n[(d|=0)+504>>2],it=0|n[d>>2],lt=0|n[it+1192>>2],_t=0|n[d+500>>2];if(!((0|_t)<=0))for(v=d+524|0,w=d+532|0,g=d+528|0,x=it+1224|0,B=U=0;;){if(E=0|n[Z+(24*U|0)>>2],(0|(D=0|n[(d=24+E|0)>>2]||0|n[28+E>>2]?6:D))==6&&(n[((D=0)|n[v>>2])+(U<<2)>>2]=n[(N=12+E|0)>>2],0|n[d>>2])&&(M=0|n[lt+(U<<2)>>2],V=(S=0|n[16+E>>2])+((P=0|n[N>>2])<<2)|0,0<(0|P)))for(d=0|n[x>>2],it=(0|n[w>>2])+(B<<2)|0,P=S;n[it>>2]=n[d+((0|n[P>>2])+M<<2)>>2],!(V>>>0<=(P=P+4|0)>>>0);)it=it+4|0;if(0|n[28+E>>2]&&($=(G=0|n[20+E>>2])+((P=0|n[12+E>>2])<<2)|0,0<(0|P)))for(d=(0|n[g>>2])+(B<<2)|0,it=G;n[d>>2]=n[it>>2],!($>>>0<=(it=it+4|0)>>>0);)d=d+4|0;if((0|(U=U+1|0))==(0|_t))break;B=(0|n[8+E>>2])+B|0}}(o),function(d){Ae((d|=0)+508|0,0|n[d+532>>2],0|n[d+536>>2],0)}(o),jx(o),Wx(o),function(d){var E=0,x=0,g=0,v=0,w=0,P=(E=0|n[(d|=0)+8>>2])+(12*(w=0|n[d+4>>2])|0)|0,U=0|n[d+48>>2];if(!((0|w)<=0))for(w=0|n[d+40>>2],x=U,d=0|n[d+52>>2];0|n[w>>2]&&(g=+O[d>>2],O[x>>2]=g,(0|(v=0|n[E+4>>2]))!=-1)&&(O[x>>2]=g*+O[U+(v<<2)>>2]),!(P>>>0<=(E=E+12|0)>>>0);)w=w+4|0,x=x+4|0,d=d+4|0}(o),function(d){var E=0,x=0,g=0,v=0|n[(d|=0)+304>>2];if(!((0|v)<=0))for(E=0|n[d+312>>2],x=0|n[d+308>>2],g=0;0|n[E>>2]&&B2[3&n[x+20>>2]](d,g),(0|(g=g+1|0))!=(0|v);)E=E+4|0,x=x+32|0}(o),tT(o),zx(o),function(d){d|=0;var E,x,g=0,v=0,w=0,P=0,U=0;if(!(0|n[d+624>>2]||(E=(g=0|n[d+336>>2])+(20*(P=0|n[d+332>>2])|0)|0,(0|P)<=0)))for(P=0|n[d+424>>2],d=0|n[d+444>>2];;){if(0|n[P>>2]&&(w=0|n[d>>2],U=(v=0|n[g+16>>2])<<1,0<(0|v)))for(v=1;O[(x=w+(v<<2)|0)>>2]=-+O[x>>2],(0|(v=v+2|0))<(0|U););if(E>>>0<=(g=g+20|0)>>>0)break;P=P+4|0,d=d+4|0}}(o),function(d){d|=0;var E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0;if(D=0|n[d+480>>2],Z=0|n[d+484>>2],B=Z+(28*D|0)|0,E=0|n[d+440>>2],x=0|n[d+44>>2],g=0|n[d+40>>2],v=0|n[d+424>>2],!((0|D)<=0)){S=Z;do if(0<(0|(w=0|n[S+4>>2])))for(P=0|n[S+12>>2],U=S+20|0,G=0;$=0|n[P+(G<<4)+4>>2],V=(0|n[P+(G<<4)>>2])==1,n[P+(G<<4)+12>>2]=n[(0|n[(V?g:v)+($<<2)>>2]?(V?x:E)+($<<2)|0:U)>>2],(0|(G=G+1|0))!=(0|w););while((S=S+28|0)>>>0<B>>>0);N=0|n[d+436>>2],V=d+488|0,$=d+492|0,G=d+496|0,M=0;do{if(0<(0|n[(d=Z+(28*M|0)+24|0)>>2])){for(E=0|n[V>>2],g=0;n[E+(g<<2)>>2]=-1,g=g+1|0,x=0|n[d>>2],(0|g)<(0|x););if(0<(0|x))for(E=0|n[G>>2],x=0;n[E+(x<<2)>>2]=-1,(0|(x=x+1|0))<(0|n[d>>2]););}if(0<(0|n[(S=Z+(28*M|0)+4|0)>>2])){for(B=0|n[$>>2],x=0;n[B+(x<<2)>>2]=-1,x=x+1|0,E=0|n[S>>2],(0|x)<(0|E););if(0<(0|E))for(g=0|n[Z+(28*M|0)+12>>2],w=Z+(28*M|0)+20|0,v=0|n[G>>2],U=0;x=(0|n[g+(U<<4)+12>>2])-(0|n[w>>2])|0,E=(0|(E=0|n[(P=v+(x<<2)|0)>>2]))==-1?(0|n[V>>2])+(x<<2)|0:B+(E<<2)|0,n[E>>2]=U,(0|(U=(n[P>>2]=U)+1|0))<(0|n[S>>2]););}if(0<(0|(E=0|n[d>>2]))){U=0|n[V>>2],B=Z+(28*M|0)+12|0,x=(P=0)|n[Z+(28*M|0)+8>>2];do if((0|(g=0|n[U+(P<<2)>>2]))!=-1){for(v=0|n[B>>2],w=0|n[$>>2];E=(0|n[v+(g<<4)>>2])==1?(E=0|n[v+(g<<4)+8>>2],n[Z+(28*E|0)+8>>2]=x,0|n[Z+(28*E|0)>>2]):(n[N+(n[v+(g<<4)+4>>2]<<2)>>2]=x,1),x=E+x|0,!((0|(g=0|n[w+((S=g)<<2)>>2]))<=(0|S)|(0|g)==-1););E=0|n[d>>2]}while((0|(P=P+1|0))<(0|E))}}while((0|(M=M+1|0))!=(0|D))}}(o),rT(o),n[o+620>>2]=0}function aT(o){o|=0;var u,p,C=0,T=0,d=0,E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0;if(!((0|Ht[4+(0|n[o>>2])>>0])<4||(p=(C=0|n[o+544>>2])+(52*(u=0|n[o+540>>2])|0)|0,(0|u)<=0))){u=(0|n[o+620>>2])==0;do{t:do if((0|n[C>>2])==1&&(S=+O[C+44>>2],G=0|n[C+36>>2],v=0|n[C+40>>2],M=G+(28*v|0)|0,0<(0|v))){if(!u)for(g=G;;){d=0|n[g>>2];do if(2<=(0|d)&&(U=0|n[g+4>>2],!(S<=(B=+O[U>>2])))){for(E=1,x=B;;){if(o=E+1|0,S<(T=+O[U+(E<<2)>>2])){v=25;break}if(!((0|o)<(0|d))){v=26;break}E=o,x=T}if((0|v)==25){o=E+-1|0,T=(S-x)/(T-x);break}if((0|v)==26){o=d+-1|0,T=0;break}}else T=o=0;while(0);if(x=+O[(E=g+16|0)>>2],d=1&((0|n[(v=g+12|0)>>2])!=(0|o)|(N=x!=T)&(T==0|x==0)),n[g+24>>2]=1&N,n[g+20>>2]=d,O[E>>2]=T,n[v>>2]=o,M>>>0<=(g=g+28|0)>>>0)break t}if(!(0|n[C+48>>2])){for(o=G;;)if(n[o+24>>2]=0,M>>>(n[o+20>>2]=0)<=(o=o+28|0)>>>0)break t}g=G;do{d=0|n[g>>2];do if(2<=(0|d)&&(w=0|n[g+4>>2],!(S<=(P=+O[w>>2])))){for(E=1,x=P;;){if(o=E+1|0,S<(T=+O[w+(E<<2)>>2])){v=17;break}if(!((0|o)<(0|d))){v=18;break}E=o,x=T}if((0|v)==17){o=E+-1|0,T=(S-x)/(T-x);break}if((0|v)==18){o=d+-1|0,T=0;break}}else T=o=0;while(0)}while(x=+O[(v=g+16|0)>>2],E=1&((0|n[(N=g+12|0)>>2])!=(0|o)|(d=x!=T)&(T==0|x==0)),n[g+24>>2]=1&d,n[g+20>>2]=E,O[v>>2]=T,n[N>>2]=o,(g=g+28|0)>>>0<M>>>0)}while(0)}while((C=C+52|0)>>>0<p>>>0)}}function oT(o){o|=0;var u,p,C,T,d=0,E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0;if(!((0|Ht[4+(0|n[o>>2])>>0])<4||(T=(d=0|n[o+592>>2])+(48*(C=0|n[o+588>>2])|0)|0,(0|C)<=0))){C=(0|n[o+620>>2])==0;do{if(o=0|n[d>>2],x=C?0|n[o+24>>2]:1,(U=C?0|n[o+20>>2]:1)|x){P=0|n[o+12>>2],E=+O[o+16>>2],w=(0|P)==(0|(o=0|n[o+8>>2]));do if(E!=0){if(v=P+1|0,w){E=(x=o=n[d+8>>2]=1)-E,w=11;break}o=(0|v)==(0|o)?1:2,w=10;break}while(o=1&(1^w),w=10,0);(0|w)==10&&(w=0,n[d+8>>2]=o,x?(v=P,o=U,w=11):(v=P,o=U,x=0)),(0|w)==11&&(O[d+20>>2]=1-E,O[d+24>>2]=E),o?(n[d+12>>2]=v,n[d+16>>2]=v+1):o=0}else o=U;u=0|n[d+36>>2];t:do if(0<(0|u)){if(p=0|n[d+40>>2],!C)for(M=0,E=1;;){G=0|n[p+(M<<2)>>2],w=0|n[G+4>>2],P=0|n[G+8>>2],U=0|n[G+12>>2],S=+O[44+(0|n[G>>2])>>2];do if(1<=(0|U)){if((0|U)==1){g=+O[P>>2];break}if(S<=(g=+O[w>>2])){g=+O[P>>2];break}for(v=1;;){if(S<(B=+O[w+(v<<2)>>2])){w=40;break}if(!((0|(v=v+1|0))<(0|U))){w=41;break}g=B}if((0|w)==40){g=(1-(g=(S-g)/(B-g)))*+O[P+(v+-1<<2)>>2]+g*+O[P+(v<<2)>>2];break}if((0|w)==41){g=+O[P+(U+-1<<2)>>2];break}}else g=1;while(0);if(E=E<(O[G+16>>2]=g)?E:g,(0|(M=M+1|0))==(0|u))break t}M=0,E=1;do if(G=0|n[p+(M<<2)>>2],v=0|n[G>>2],0|n[v+48>>2]){w=0|n[G+4>>2],P=0|n[G+8>>2],U=0|n[G+12>>2],S=+O[v+44>>2];do if(1<=(0|U)){if((0|U)==1){g=+O[P>>2];break}if(S<=(g=+O[w>>2])){g=+O[P>>2];break}for(v=1;;){if(S<(B=+O[w+(v<<2)>>2])){w=28;break}if(!((0|(v=v+1|0))<(0|U))){w=27;break}g=B}if((0|w)==27){g=+O[P+(U+-1<<2)>>2];break}if((0|w)==28){g=(1-(g=(S-g)/(B-g)))*+O[P+(v+-1<<2)>>2]+g*+O[P+(v<<2)>>2];break}}else g=1;while(0);O[G+16>>2]=g}else g=+O[G+16>>2];while(E=E<g?E:g,(0|(M=M+1|0))!=(0|u))}else E=1;while(0)}while(O[d+44>>2]=E,n[d+28>>2]=o,n[d+32>>2]=x,(d=d+48|0)>>>0<T>>>0)}}function x2(o,u,p){o|=0,u|=0,p|=0;var C,T,d,E=0,x=L;L=L+144|0,Pr(0|(T=x),640,144),n[T+48>>2]=E=(E=-2-o|0)>>>0<256?E:256,n[(C=T+20|0)>>2]=o,d=(n[T+44>>2]=o)+E|0,n[(o=T+16|0)>>2]=d,n[T+28>>2]=d,T2(T,u,p),0|E&&(d=0|n[C>>2],K[d+(((0|d)==(0|n[o>>2]))<<31>>31)>>0]=0),L=x}function T2(o,u,p){uT(o|=0,u|=0,p|=0)}function hT(o,u,p,C,T,d){o|=0,u=+u,p|=0,C|=0,T|=0,d|=0;var E,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0,it=0,lt=0,_t=0,nt=0,dt=0,ct=0,J=L;L=L+560|0,w=J+32|0,nt=(v=(dt=ct=J)+540|0)+12|(n[(N=J+536|0)>>2]=0),E2(u),lt=(0|(x=0|ze()))<0?(E2(u=-u),x=0|ze(),_t=1,2539):(_t=(2049&T|0)!=0&1,2048&T|0?2542:1&T|0?2545:2540);do if(!0&(2146435072&x|0)==2146435072)ct=(32&d|0)!=0,je(o,32,p,x=_t+3|0,-65537&T),He(o,lt,_t),He(o,u!=u|!1?ct?2566:2570:ct?2558:2562,3),je(o,32,p,x,8192^T);else{if((x=(S=2*+C2(u,N))!=0)&&(n[N>>2]=(0|n[N>>2])-1),(0|($=32|d))==97){G=0|(U=32&d)?lt+9|0:lt,B=2|_t,x=12-C|0;do if(!(11<C>>>0|(0|x)==0)){for(u=8;u*=16,(0|(x=x+-1|0))!=0;);if((0|K[G>>0])==45){u=-(u+(-S-u));break}u=S+u-u;break}while(u=S,0);for((0|(x=0|Tn(x=(0|(g=0|n[N>>2]))<0?0-g|0:g,((0|x)<0)<<31>>31,nt)))==(0|nt)&&(K[(x=v+11|0)>>0]=48),K[x+-1>>0]=43+(g>>31&2),K[(P=x+-2|0)>>0]=d+15,g=(0|C)<1,v=(8&T|0)==0,x=ct;w=x+1|0,K[x>>0]=U|Ht[480+(_t=~~u)>>0],u=16*(u-(0|_t)),(w-dt|0)!=1||v&g&u==0||(K[w>>0]=46,w=x+2|0),u!=0;)x=w;je(o,32,p,nt=(x=0|C&&(-2-dt+w|0)<(0|C)?C+2+(g=nt)-(v=P)|0:(g=nt)-dt-(v=P)+w|0)+B|0,T),He(o,G,B),je(o,48,p,nt,65536^T),He(o,ct,dt=w-dt|0),je(o,48,x-(dt+(ct=g-v|0))|0,0,0),He(o,P,ct),je(o,32,p,nt,8192^T),x=nt;break}for(g=(0|C)<0?6:C,u=x?(v=(0|n[N>>2])-28|0,n[N>>2]=v,268435456*S):(v=0|n[N>>2],S),w=E=(0|v)<0?w:w+288|0;n[w>>2]=Z=~~u>>>0,w=w+4|0,(u=1e9*(u-(Z>>>0)))!=0;);if(Z=E,0<(0|v)){x=E;do{if(U=(0|v)<29?v:29,x>>>0<=(v=w+-4|0)>>>0){for(P=0;M=0|ms(0|(M=0|L2(0|n[v>>2],0,0|U)),0|ze(),0|P,0),D=0|ms(0|M,0|(V=0|ze()),0|(D=0|Ou(0|(P=0|Fu(0|M,0|V,1e9,0)),0|ze(),-1e9,-1)),0|ze()),ze(),n[v>>2]=D,x>>>0<=(v=v+-4|0)>>>0;);P&&(n[(x=x+-4|0)>>2]=P)}t:do if(x>>>0<w>>>0)for(;;){if(0|n[(v=w+-4|0)>>2])break t;if(!(x>>>0<v>>>0)){w=v;break}w=v}while(0)}while(v=(0|n[N>>2])-U|0,0<(0|(n[N>>2]=v)))}else x=E;if((0|v)<0){C=1+((g+25|0)/9|0)|0,M=(0|$)==102;do if(G=(0|(G=0-v|0))<9?G:9,x>>>0<w>>>0){for(U=(1<<G)-1|0,P=G?1e9>>>G:1e9,B=0,v=x;D=0|n[v>>2],n[v>>2]=(G?D>>>G:D)+B,B=0|Ie(D&U,P),(v=v+4|0)>>>0<w>>>0;);x=0|n[x>>2]?x:x+4|0,B&&(n[w>>2]=B,w=w+4|0)}else x=0|n[x>>2]?x:x+4|0;while(w=(0|C)<((D=w-(v=M?E:x)|0)>>2|0)?v+(C<<2)|0:w,v=(0|n[N>>2])+G|0,(0|(n[N>>2]=v))<0);M=w}else M=w;if(x>>>0<M>>>0){if(v=9*((v=Z-x|0)>>2)|0,10<=(P=0|n[x>>2])>>>0)for(w=10;v=v+1|0,(w=10*w|0)>>>0<=P>>>0;);}else v=0;if((0|(w=g-((0|$)==102?0:v)+(((V=(0|g)!=0)&(N=(0|$)==103))<<31>>31)|0))<((9*((D=M-Z|0)>>2)|0)-9|0)){if(C=E+4+((w=(0|(D=w+9216|0))/9|0)+-1024<<2)|0,(0|(w=D+(0|Ie(w,-9))|0))<8)for(P=10;P=10*P|0,(0|w)<7;)w=w+1|0;else P=10;if((B=(C+4|0)==(0|M))&(0|(U=(U=0|n[C>>2])-(G=0|Ie(w=(U>>>0)/(P>>>0)|0,P))|0))==0)w=C;else if(S=1&w|0?9007199254740994:9007199254740992,u=U>>>0<(D=P>>>1)>>>0?.5:B&(0|U)==(0|D)?1:1.5,_t&&(S=(D=(0|K[lt>>0])==45)?-S:S,u=D?-u:u),n[C>>2]=G,S+u!=S){if(999999999<(n[C>>2]=D=G+P|0)>>>0)for(v=C;(w=v+-4|0)>>>(n[v>>2]=0)<x>>>0&&(n[(x=x+-4|0)>>2]=0),D=1+(0|n[w>>2])|0,999999999<(n[w>>2]=D)>>>0;)v=w;else w=C;if(v=9*((v=Z-x|0)>>2)|0,10<=(U=0|n[x>>2])>>>0)for(P=10;v=v+1|0,(P=10*P|0)>>>0<=U>>>0;);}else w=C;D=x,x=($=w+4|0)>>>0<M>>>0?$:M}else D=x,x=M;G=0-v|0;t:do if(D>>>0<x>>>0)for(;;){if(0|n[(w=x+-4|0)>>2]){M=1,$=x;break t}if(!(D>>>0<w>>>0)){M=0,$=w;break}x=w}else M=0,$=x;while(0);do if(N){if(P=(0|v)<(0|(x=g+(1&(1^V))|0))&-5<(0|v)?(g=x+-1-v|0,d+-1|0):(g=x+-1|0,d+-2|0),!(8&T)){if(M&&0|(it=0|n[$+-4>>2]))if((it>>>0)%10|0)w=0;else for(x=10,w=0;w=w+1|0,!((it>>>0)%((x=10*x|0)>>>0)|0););else w=9;if(x=(9*((x=$-Z|0)>>2)|0)-9|0,(32|P)==102){g=(0|g)<(0|(d=0<(0|(d=x-w|0))?d:0))?g:d;break}g=(0|g)<(0|(d=0<(0|(d=x+v-w|0))?d:0))?g:d;break}}else P=d;while(0);if(U=(C=(0|g)!=0)?1:T>>>3&1,B=(32|P)==102)x=(V=0)<(0|v)?v:0;else{if(((w=nt)-(x=0|Tn(x=(0|v)<0?G:v,((0|x)<0)<<31>>31,nt))|0)<2)for(;K[(x=x+-1|0)>>0]=48,(w-x|0)<2;);K[x+-1>>0]=43+(v>>31&2),K[(x=x+-2|0)>>0]=P,x=w-(V=x)|0}if(je(o,32,p,x=_t+1+g+U+x|0,T),He(o,lt,_t),je(o,48,p,x,65536^T),B){B=G=ct+9|0,P=ct+8|0,w=U=E>>>0<D>>>0?E:D;do if(v=0|Tn(0|n[w>>2],0,G),(0|w)==(0|U))(0|v)==(0|G)&&(K[P>>0]=48,v=P);else if(ct>>>0<v>>>0)for(mr(0|ct,48,v-dt|0);ct>>>0<(v=v+-1|0)>>>0;);while(He(o,v,B-v|0),(w=w+4|0)>>>0<=E>>>0);if((8&T|0)==0&(1^C)||He(o,2574,1),w>>>0<$>>>0&0<(0|g))for(;;){if(ct>>>0<(v=0|Tn(0|n[w>>2],0,G))>>>0)for(mr(0|ct,48,v-dt|0);ct>>>0<(v=v+-1|0)>>>0;);if(He(o,v,(0|g)<9?g:9),v=g+-9|0,!((w=w+4|0)>>>0<$>>>0&9<(0|g))){g=v;break}g=v}je(o,48,g+9|0,9,0)}else{if(D>>>0<(C=M?$:D+4|0)>>>0&-1<(0|g)){N=(8&T|0)==0,M=G=ct+9|0,P=0-dt|0,B=ct+8|0,U=D;do{(0|(v=0|Tn(0|n[U>>2],0,G)))==(0|G)&&(K[B>>0]=48,v=B);do if((0|U)==(0|D)){if(w=v+1|0,He(o,v,1),N&(0|g)<1){v=w;break}He(o,2574,1),v=w}else{if(v>>>0<=ct>>>0)break;for(mr(0|ct,48,v+P|0);ct>>>0<(v=v+-1|0)>>>0;);}while(0)}while(He(o,v,(0|(dt=M-v|0))<(0|g)?dt:g),(U=U+4|0)>>>0<C>>>0&-1<(0|(g=g-dt|0)))}je(o,48,g+18|0,18,0),He(o,V,nt-V|0)}je(o,32,p,x,8192^T)}while(0);return L=J,0|((0|x)<(0|p)?p:x)}function uT(o,u,p){o|=0,u|=0,p|=0;var C,T,d,E,x,g,v,w,P=0,U=0,B=L;for(L=L+224|0,x=B+208|0,v=B+80|0,U=(P=w=(g=B)+160|0)+40|0;(0|(P=P+4|(n[P>>2]=0)))<(0|U););n[x>>2]=n[p>>2],0<=(0|Ru(0,u,x,v,w))&&(E=32&(p=0|n[o>>2]),(0|K[o+74>>0])<1&&(n[o>>2]=-33&p),0|n[(U=o+48|0)>>2]?Ru(o,u,x,v,w):(p=0|n[(P=o+44|0)>>2],n[P>>2]=g,n[(C=o+28|0)>>2]=g,n[(d=o+20|0)>>2]=g,n[U>>2]=80,n[(T=o+16|0)>>2]=g+80,Ru(o,u,x,v,w),0|p&&(Ca[3&n[o+36>>2]](o,0,0),n[P>>2]=p,n[U>>2]=0,n[T>>2]=0,n[C>>2]=0,n[d>>2]=0)),n[o>>2]=n[o>>2]|E),L=B}function Ru(o,u,p,C,T){o|=0,p|=0,C|=0,T|=0;var d,E,x,g,v,w,P,U,B,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=0,it=0,lt=0,_t=0,nt=0,dt=0,ct=L;L=L+64|0,w=ct+40|0,B=(E=ct)+48|0,P=ct+60|0,n[(U=ct+56|0)>>2]=u|=0,v=(0|o)!=0,g=d=E+40|0,E=E+39|0,x=4+B|0,N=S=u=0;t:for(;;){do{do if(-1<(0|u)){if((2147483647-u|0)<(0|S)){n[922]=61,u=-1;break}u=S+u|0;break}while(0);if(D=0|n[U>>2],!((S=0|K[D>>0])<<24>>24)){nt=91;break t}G=D;e:for(;;){switch(S<<24>>24){case 37:nt=10;break e;case 0:S=G;break e}n[U>>2]=_t=G+1|0,S=0|K[_t>>0],G=_t}e:do if((0|nt)==10){nt=0,S=M=G;do if((0|K[M+1>>0])!=37)break e;while(S=S+1|0,n[U>>2]=M=M+2|0,(0|K[M>>0])==37)}while(0)}while(S=S-D|0,v&&He(o,D,S),(0|S)!=0);if(M=0|n[U>>2],$=0|_s(S=0|K[M+1>>0])?(G=($=(0|K[M+2>>0])==36)?3:1,it=$?S+-48|0:-1,$?1:N):(it=-(G=1),N),n[U>>2]=G=M+G|0,31<(M=((S=0|K[G>>0])<<24>>24)-32|0)>>>0|(1<<M&75913|0)==0)V=0;else for(S=0;;){if(N=1<<M|S,n[U>>2]=G=G+1|0,31<(M=((S=0|K[G>>0])<<24>>24)-32|0)>>>0|(1<<M&75913|0)==0){V=N;break}S=N}if(S<<24>>24==42){if(0|_s(S=0|K[(M=G+1|0)>>0])&&(0|K[G+2>>0])==36)n[T+(S+-48<<2)>>2]=10,N=1,S=G+3|0,G=0|n[C+((0|K[M>>0])-48<<3)>>2];else{if(0|$){u=-1;break}v?(N=3+(0|n[p>>2])&-4,G=0|n[N>>2],n[p>>2]=N+4,N=0,S=M):(S=M,G=N=0)}M=n[U>>2]=S,Z=(lt=(0|G)<0)?8192|V:V,_t=N,lt=lt?0-G|0:G}else{if((0|(S=0|A2(U)))<0){u=-1;break}M=0|n[U>>2],Z=V,_t=$,lt=S}do if((0|K[M>>0])==46){if((0|K[(S=M+1|0)>>0])!=42){n[U>>2]=S,V=0|A2(U),S=0|n[U>>2];break}if(0|_s(G=0|K[(S=M+2|0)>>0])&&(0|K[M+3>>0])==36){n[T+(G+-48<<2)>>2]=10,V=0|n[C+((0|K[S>>0])-48<<3)>>2],n[U>>2]=S=M+4|0;break}if(0|_t){u=-1;break t}v?($=3+(0|n[p>>2])&-4,G=0|n[$>>2],n[p>>2]=$+4):G=0,n[U>>2]=S,V=G}else S=M,V=-1;while(0);for($=0;;){if(57<((0|K[S>>0])-65|0)>>>0){u=-1;break t}if(n[U>>2]=G=S+1|0,!(((N=255&(M=0|K[(0|K[S>>0])-65+(16+(58*$|0))>>0]))+-1|0)>>>0<8))break;S=G,$=N}if(!(M<<24>>24)){u=-1;break}G=-1<(0|it);do if(M<<24>>24==19){if(G){u=-1;break t}nt=52}else{if(G){n[T+(it<<2)>>2]=N,it=0|n[(N=C+(it<<3)|0)+4>>2],n[(nt=w)>>2]=n[N>>2],n[nt+4>>2]=it,nt=52;break}if(!v){u=0;break t}I2(w,N,p),nt=53}while(0);(0|nt)==52&&(nt=0,v?nt=53:S=0);e:do if((0|nt)==53){M=(nt=0)!=(0|$)&(15&(M=0|K[S>>0])|0)==3?-33&M:M,S=-65537&Z,it=8192&Z|0?S:Z;r:do switch(0|M){case 110:switch((255&$)<<24>>24){case 0:case 1:n[n[w>>2]>>2]=u,S=0;break e;case 2:S=0|n[w>>2],n[S>>2]=u,n[S+4>>2]=((0|u)<0)<<31>>31,S=0;break e;case 3:de[n[w>>2]>>1]=u,S=0;break e;case 4:K[n[w>>2]>>0]=u,S=0;break e;case 6:n[n[w>>2]>>2]=u,S=0;break e;case 7:S=0|n[w>>2],n[S>>2]=u,n[S+4>>2]=((0|u)<0)<<31>>31,S=0;break e;default:S=0;break e}case 112:S=8|it,G=8<V>>>0?V:8,N=120,nt=65;break;case 88:case 120:S=it,G=V,N=M,nt=65;break;case 111:V=(8&(S=it)|0)==0|(0|(M=g-($=0|function(J,ot,pt){if(pt|=0,!((0|(J|=0))==0&(0|(ot|=0))==0))for(;K[(pt=pt+-1|0)>>0]=7&J|48,J=0|Ea(0|J,0|ot,3),ot=0|ze(),!((0|J)==0&(0|ot)==0););return 0|pt}(D=0|n[(Z=w)>>2],Z=0|n[Z+4>>2],d))|0))<(0|V)?V:M+1|0,M=0,G=2522,nt=71;break;case 105:case 100:if(S=0|n[(G=w)>>2],(0|(G=0|n[G+4>>2]))<0){S=0|wa(0,0,0|S,0|G),G=0|ze(),n[(M=w)>>2]=S,n[M+4>>2]=G,M=1,N=2522,nt=70;break r}M=(2049&it|0)!=0&1,N=2048&it|0?2523:1&it|0?2524:2522,nt=70;break r;case 117:S=0|n[(G=w)>>2],G=0|n[G+4>>2],M=0,N=2522,nt=70;break;case 99:K[E>>0]=n[w>>2],D=E,$=S,N=1,M=0,G=2522,S=g;break;case 115:D=Z=0|(Z=0|n[w>>2])?Z:2532,$=S,N=(dt=(0|(it=0|function(J,ot){J|=0;var pt=0,ht=0;pt=(0|(ot|=0))!=0;i:do if(pt&(3&J|0)!=0)for(;;){if(!(0|K[J>>0]))break i;if(!((pt=(0|(ot=ot+-1|0))!=0)&(3&(J=J+1|0)|0)!=0)){ht=5;break}}else ht=5;while(0);i:do if((0|ht)==5){do if(pt){if(!(0|K[J>>0])){if(ot)break i;break}n:do if(3<ot>>>0)for(;;){if((-2139062144&(pt=0|n[J>>2])^-2139062144)&pt+-16843009|0)break n;if(J=J+4|0,(ot=ot+-4|0)>>>0<=3){ht=11;break}}else ht=11;while(0);if((0|ht)==11&&!ot)break;for(;;){if(!(0|K[J>>0]))break i;if(!(ot=ot+-1|0))break;J=J+1|0}}while(0);J=0}while(0);return 0|J}(Z,V)))==0)?V:it-Z|0,M=0,G=2522,S=dt?Z+V|0:it;break;case 67:n[B>>2]=n[w>>2],n[x>>2]=0,M=n[w>>2]=B,V=-1,nt=78;break;case 83:if(V){M=0|n[w>>2],nt=78;break r}je(o,32,lt,0,it),S=0,nt=88;break r;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:S=0|hT(o,+oe[w>>3],lt,V,it,M);break e;default:$=it,N=V,M=0,G=2522,S=g}while(0);r:do if((0|nt)==65)$=0|lT(D=0|n[(Z=w)>>2],Z=0|n[Z+4>>2],d,32&N),V=G,M=(dt=(8&S|0)==0|(0|D)==0&(0|Z)==0)?0:2,G=dt?2522:2522+(N>>>4)|0,nt=71;else if((0|nt)==70)$=0|Tn(D=S,Z=G,d),S=it,G=N,nt=71;else if((0|nt)==78){for(S=nt=0,$=M;G=0|n[$>>2];){if((N=(0|(G=0|w2(P,G)))<0)|(V-S|0)>>>0<G>>>0){nt=82;break}if(!((S=G+S|0)>>>0<V>>>0))break;$=$+4|0}if((0|nt)==82&&(nt=0,N)){u=-1;break t}if(je(o,32,lt,S,it),S)for(N=0;;){if(!(G=0|n[M>>2])){nt=88;break r}if((0|S)<(0|(N=(G=0|w2(P,G))+N|0))){nt=88;break r}if(He(o,P,G),S>>>0<=N>>>0){nt=88;break}M=M+4|0}else S=0,nt=88}while(0);if((0|nt)==71)dt=(nt=0)!=(0|V)|(N=(0|D)!=0|(0|Z)!=0),N=g-$+(1&(1^N))|0,D=dt?$:d,$=-1<(0|V)?-65537&S:S,N=dt?(0|N)<(0|V)?V:N:0,S=g;else if((0|nt)==88){nt=0,je(o,32,lt,S,8192^it),S=(0|S)<(0|lt)?lt:S;break}je(o,32,S=(0|lt)<(0|(dt=(Z=(0|N)<(0|(it=S-D|0))?it:N)+M|0))?dt:lt,dt,$),He(o,G,M),je(o,48,S,dt,65536^$),je(o,48,Z,it,0),He(o,D,it),je(o,32,S,dt,8192^$)}while(0);N=_t}t:do if((0|nt)==91&&!o)if(N){for(u=1;S=0|n[T+(u<<2)>>2];)if(I2(C+(u<<3)|0,S,p),10<=(u=u+1|0)>>>0){u=1;break t}for(S=0;;){if(u=u+1|0,0|S){u=-1;break t}if(10<=u>>>0){u=1;break t}S=0|n[T+(u<<2)>>2]}}else u=0;while(0);return L=ct,0|u}function He(o,u,p){u|=0,p|=0,32&n[(o|=0)>>2]||cT(u,p,o)}function _s(o){return((o|=0)+-48|0)>>>0<10|0}function A2(o){var u=0,C=0,p=0,C=0|n[(o|=0)>>2];if(0|_s((u=0|K[C>>0])<<24>>24))for(p=u,u=0;u=(10*u|0)-48+(p<<24>>24)|0,n[o>>2]=C=C+1|0,(0|_s((p=0|K[C>>0])<<24>>24))!=0;);else u=0;return 0|u}function I2(o,u,p){o|=0,u|=0,p|=0;var C,T=0,d=0;t:do if(u>>>0<=20)switch(0|u){case 9:T=3+(0|n[p>>2])&-4,u=0|n[T>>2],n[p>>2]=T+4,n[o>>2]=u;break t;case 10:T=3+(0|n[p>>2])&-4,u=0|n[T>>2],n[p>>2]=T+4,n[(T=o)>>2]=u,n[T+4>>2]=((0|u)<0)<<31>>31;break t;case 11:T=3+(0|n[p>>2])&-4,u=0|n[T>>2],n[p>>2]=T+4,n[(T=o)>>2]=u,n[T+4>>2]=0;break t;case 12:T=7+(0|n[p>>2])&-8,d=0|n[(u=T)>>2],u=0|n[u+4>>2],n[p>>2]=T+8,n[(T=o)>>2]=d,n[T+4>>2]=u;break t;case 13:d=3+(0|n[p>>2])&-4,T=0|n[d>>2],n[p>>2]=d+4,n[(d=o)>>2]=T=(65535&T)<<16>>16,n[d+4>>2]=((0|T)<0)<<31>>31;break t;case 14:d=3+(0|n[p>>2])&-4,T=0|n[d>>2],n[p>>2]=d+4,n[(d=o)>>2]=65535&T,n[d+4>>2]=0;break t;case 15:d=3+(0|n[p>>2])&-4,T=0|n[d>>2],n[p>>2]=d+4,n[(d=o)>>2]=T=(255&T)<<24>>24,n[d+4>>2]=((0|T)<0)<<31>>31;break t;case 16:d=3+(0|n[p>>2])&-4,T=0|n[d>>2],n[p>>2]=d+4,n[(d=o)>>2]=255&T,n[d+4>>2]=0;break t;case 17:d=7+(0|n[p>>2])&-8,C=+oe[d>>3],n[p>>2]=d+8,oe[o>>3]=C;break t;case 18:(function(E,x){E|=0;var g=7+(0|n[(x|=0)>>2])&-8,v=+oe[g>>3];n[x>>2]=8+g,oe[E>>3]=v})(o,p);break t;default:break t}while(0)}function lT(o,u,p,C){if(p|=0,C|=0,!((0|(o|=0))==0&(0|(u|=0))==0))for(;K[(p=p+-1|0)>>0]=0|Ht[480+(15&o)>>0]|C,!((0|(o=0|Ea(0|o,0|u,4)))==0&(0|(u=0|ze()))==0););return 0|p}function Tn(o,u,p){p|=0;var C,T=0,d=0;if(0<(u|=0)>>>0|(0|u)==0&4294967295<(o|=0)>>>0)for(;d=0|ms(0|(C=o),0|(T=u),0|(d=0|Ou(0|(o=0|Fu(0|o,0|u,10,0)),0|(u=0|ze()),-10,-1)),0|ze()),ze(),K[(p=p+-1|0)>>0]=255&d|48,9<T>>>0|(0|T)==9&4294967295<C>>>0;);if(o)for(;T=255&((d=o)+(0|Ie(o=(o>>>0)/10|0,-10))|48),K[(p=p+-1|0)>>0]=T,10<=d>>>0;);return 0|p}function je(o,u,p,C,T){o|=0,u|=0;var d,E=L;if(L=L+256|0,d=E,(0|(C|=0))<(0|(p|=0))&(73728&(T|=0)|0)==0){if(mr(0|d,u<<24>>24|0,0|((T=p-C|0)>>>0<256?T:256)),255<T>>>0){for(C=T;He(o,d,256),255<(C=C+-256|0)>>>0;);T&=255}He(o,d,T)}L=E}function w2(o,u){return u|=0,0|(o=(o|=0)?0|fT(o,u):0)}function fT(o,u){o|=0,u|=0;do if(o){if(u>>>0<128){K[o>>0]=u,o=1;break}if(!(0|n[916])){if((-128&u|0)==57216){K[o>>0]=u,o=1;break}n[922]=25,o=-1;break}if(u>>>0<2048){K[o>>0]=u>>>6|192,K[o+1>>0]=63&u|128,o=2;break}if(u>>>0<55296|(-8192&u|0)==57344){K[o>>0]=u>>>12|224,K[o+1>>0]=u>>>6&63|128,K[o+2>>0]=63&u|128,o=3;break}if((u+-65536|0)>>>0<1048576){K[o>>0]=u>>>18|240,K[o+1>>0]=u>>>12&63|128,K[o+2>>0]=u>>>6&63|128,K[o+3>>0]=63&u|128,o=4;break}n[922]=25,o=-1;break}while(o=1,0);return 0|o}function cT(o,u,p){o|=0,u|=0;var C,T=0,d=0,E=0;(T=0|n[(d=(p|=0)+16|0)>>2])?E=5:0|function(x){var g=0,v=0;return v=0|K[(g=74+(x|=0)|0)>>0],K[g>>0]=255+v|v,g=8&(g=0|n[x>>2])?(n[x>>2]=32|g,-1):(n[x+8>>2]=0,n[x+4>>2]=0,g=0|n[x+44>>2],n[x+28>>2]=g,n[x+20>>2]=g,n[x+16>>2]=g+(0|n[x+48>>2]),0),0|g}(p)||(T=0|n[d>>2],E=5);t:do if((0|E)==5){if((T-(d=E=0|n[(C=p+20|0)>>2])|0)>>>0<u>>>0){Ca[3&n[p+36>>2]](p,o,u);break}e:do if((0|K[p+75>>0])<0|(0|u)==0)T=u;else{for(E=u;(0|K[o+(T=E+-1|0)>>0])!=10;){if(!T){T=u;break e}E=T}if((0|Ca[3&n[p+36>>2]](p,o,E))>>>0<E>>>0)break t;d=0|n[C>>2],T=u-E|0,o=o+E|0}while(0);Pr(0|d,0|o,0|T),n[C>>2]=(0|n[C>>2])+T}while(0)}function E2(o){return oe[Ve>>3]=o=+o,o=0|n[Ve>>2],ke(0|n[Ve+4>>2]),0|o}function C2(o,u){u|=0;var p,C,T=0;switch(oe[Ve>>3]=o=+o,C=0|Ea(0|(T=0|n[Ve>>2]),0|(p=0|n[Ve+4>>2]),52),ze(),2047&C){case 0:T=o!=0?(o=+C2(18446744073709552e3*o,u),(0|n[u>>2])-64|0):0,n[u>>2]=T;break;case 2047:break;default:n[u>>2]=(2047&C)-1022,n[Ve>>2]=T,n[Ve+4>>2]=-2146435073&p|1071644672,o=+oe[Ve>>3]}return+o}function P2(o){var u,T=0,p=0,C=0,T=0|K[(o|=0)>>0];t:do if(T<<24>>24)for(p=o,C=4,o=1033;;){if(!(T<<24>>24==(u=0|K[o>>0])<<24>>24&(0|(C=C+-1|0))!=0&u<<24>>24!=0))break t;if(o=o+1|0,!((T=0|K[(p=p+1|0)>>0])<<24>>24)){T=0;break}}else T=0,o=1033;while(0);return(255&T)-(0|Ht[o>>0])|0}function Nu(o,u,p){u|=0,p|=0;var C,T,d,E=0,x=0,g=L;L=L+240|0,n[(d=g)>>2]=o|=0;t:do if(1<(0|u))for(x=E=o,o=1;;){if(-1<(0|Vi(E,C=(x=x+-4|0)+(0-(0|n[p+((T=u+-2|0)<<2)>>2]))|0))&&-1<(0|Vi(E,x))||(E=d+(o<<2)|0,o=o+1|0,(0|(u=-1<(0|Vi(C,x))?(x=n[E>>2]=C,u+-1|0):(n[E>>2]=x,T)))<=1))break t;E=0|n[d>>2]}else o=1;while(0);S2(d,o),L=g}function Ta(o,u){var p=0,C=0,T=(o|=0)+4|0;31<(u|=0)>>>0?(p=0|n[T>>2],n[o>>2]=p,u=u+-32|(C=n[T>>2]=0)):(p=0|n[o>>2],C=0|n[T>>2]),n[o>>2]=C<<32-u|(u?p>>>u:p),n[T>>2]=u?C>>>u:C}function Aa(o,u,p,C,T,d){o|=0,p|=0,C|=0,T|=0,d|=0;var E,x,g,v=0,w=0,P=L;L=L+240|0,n[(x=(g=P)+232|0)>>2]=u|=0,n[(E=4+x|0)>>2]=p,n[g>>2]=o;t:do if((0|u)!=1|(0|p)!=0&&(v=o+(0-(0|n[d+(C<<2)>>2]))|0,1<=(0|Vi(v,o))))for(u=v,w=1,v=(0|T)==0;;){if(v&1<(0|C)){if(-1<(0|Vi(v=o+-4|0,u))){u=o,v=w,p=10;break t}if(-1<(0|Vi(v+(0-(0|n[d+(C+-2<<2)>>2]))|0,u))){u=o,v=w,p=10;break t}}if(p=w+1|0,n[g+(w<<2)>>2]=u,Ta(x,T=0|R2(x)),C=T+C|0,!((0|n[x>>2])!=1|(0|n[E>>2])!=0)){v=p,p=10;break t}if((0|Vi(v=u+(0-(0|n[d+(C<<2)>>2]))|0,0|n[g>>2]))<1){v=p,p=10;break}o=u,u=v,w=p,v=1}else p=9;while(0);(0|p)==9&&!(0|T)&&(u=o,v=1,p=10),(0|p)==10&&(S2(g,v),Nu(u,C,d)),L=P}function Ia(o,u){var p=0,C=0,T=(o|=0)+4|0;31<(u|=0)>>>0?(p=0|n[o>>2],n[T>>2]=p,u=u+-32|(C=n[o>>2]=0)):(p=0|n[T>>2],C=0|n[o>>2]),n[T>>2]=((T=32-u|0)?C>>>T:C)|p<<u,n[o>>2]=C<<u}function R2(o){var u;return(u=0|N2((0|n[(o|=0)>>2])-1|0))?0|u:0|(0|(o=0|N2(0|n[o+4>>2]))?o+32|0:0)}function N2(o){var u=0;if(o|=0)if(1&o)u=0;else for(u=0;u=u+1|0,!(2&o);)o>>>=1;else u=32;return 0|u}function S2(o,u){o|=0;var p,C=0,T=L;if(L=L+256|0,C=T,2<=(0|(u|=0)))for(Pr(0|(n[o+(u<<2)>>2]=C),0|n[o>>2],4),C=0;Pr(0|n[(p=o+(C<<2)|0)>>2],0|n[o+((C=C+1|0)<<2)>>2],4),n[p>>2]=4+(0|n[p>>2]),(0|C)!=(0|u););L=T}function Su(o){o|=0;var u=0,p=0,C=0,T=0,d=0,E=0,x=0,g=0,v=0,w=0,P=0,U=0,B=0,S=0,G=0,M=0,N=0,V=0,$=0,D=0,Z=L;L=L+16|0,U=Z;do if(o>>>0<245){if(P=0|n[923],3&(p=(o=(v=o>>>0<11?16:o+11&-8)>>>3)?P>>>o:P)|0)return o=0|n[(u=(T=3732+((C=(1&p^1)+o|0)<<1<<2)|0)+8|0)>>2],(0|(p=0|n[(d=o+8|0)>>2]))==(0|T)?n[923]=P&~(1<<C):(n[p+12>>2]=T,n[u>>2]=p),n[o+4>>2]=3|(D=C<<3),n[(D=o+D+4|0)>>2]=1|n[D>>2],L=Z,0|(D=d);if((w=0|n[925])>>>0<v>>>0){if(0|p)return d=0|n[(u=(p=3732+((C=((o=(C=(x=(C=((C=p<<o&((C=2<<o)|0-C))&0-C)-1|0)>>>12&16)?C>>>x:C)>>>5&8)|x|(d=(C=o?C>>>o:C)>>>2&4)|(u=(C=d?C>>>d:C)>>>1&2)|(p=(C=u?C>>>u:C)>>>1&1))+(p?C>>>p:C)|0)<<1<<2)|0)+8|0)>>2],(0|(o=0|n[(x=d+8|0)>>2]))==(0|p)?n[923]=o=P&~(1<<C):(n[o+12>>2]=p,n[u>>2]=o,o=P),E=(D=C<<3)-v|0,n[d+4>>2]=3|v,n[(T=d+v|0)+4>>2]=1|E,n[d+D>>2]=E,0|w&&(C=0|n[928],p=3732+((u=w>>>3)<<1<<2)|0,o=o&(u=1<<u)?0|n[(u=o=p+8|0)>>2]:(n[923]=o|u,u=p+8|0,p),n[u>>2]=C,n[o+12>>2]=C,n[C+8>>2]=o,n[C+12>>2]=p),n[925]=E,n[928]=T,L=Z,0|(D=x);if(d=0|n[924]){for(g=0|n[3996+(((C=(g=(T=(g=(d&0-d)-1|0)>>>12&16)?g>>>T:g)>>>5&8)|T|(E=(g=C?g>>>C:g)>>>2&4)|(p=(g=E?g>>>E:g)>>>1&2)|(x=(g=p?g>>>p:g)>>>1&1))+(x?g>>>x:g)<<2)>>2],x=(-8&n[g+4>>2])-v|0,p=g;!(!(o=0|n[p+16>>2])&&!(o=0|n[p+20>>2]));)x=(E=(p=(-8&n[o+4>>2])-v|0)>>>0<x>>>0)?p:x,p=o,g=E?o:g;if(g>>>0<(E=g+v|0)>>>0){T=0|n[g+24>>2],u=0|n[g+12>>2];do if((0|u)==(0|g)){if(!(u=0|n[(o=g+20|0)>>2])&&!(u=0|n[(o=g+16|0)>>2])){p=0;break}for(;;)if(p=0|n[(C=u+20|0)>>2])u=p,o=C;else{if(!(p=0|n[(C=u+16|0)>>2]))break;u=p,o=C}n[o>>2]=0,p=u}else p=0|n[g+8>>2],n[p+12>>2]=u,n[u+8>>2]=p,p=u;while(0);do if(0|T){if(u=0|n[g+28>>2],(0|g)==(0|n[(o=3996+(u<<2)|0)>>2])){if(!(n[o>>2]=p)){n[924]=d&~(1<<u);break}}else if(!(n[((0|n[(D=T+16|0)>>2])==(0|g)?D:T+20|0)>>2]=p))break;n[p+24>>2]=T,0|(u=0|n[g+16>>2])&&(n[p+16>>2]=u,n[u+24>>2]=p),0|(u=0|n[g+20>>2])&&(n[p+20>>2]=u,n[u+24>>2]=p)}while(0);return x>>>0<16?(n[g+4>>2]=3|(D=x+v|0),n[(D=g+D+4|0)>>2]=1|n[D>>2]):(n[g+4>>2]=3|v,n[E+4>>2]=1|x,n[E+x>>2]=x,0|w&&(C=0|n[928],p=3732+((u=w>>>3)<<1<<2)|0,o=(u=1<<u)&P?0|n[(u=o=p+8|0)>>2]:(n[923]=u|P,u=p+8|0,p),n[u>>2]=C,n[o+12>>2]=C,n[C+8>>2]=o,n[C+12>>2]=p),n[925]=x,n[928]=E),L=Z,0|(D=g+8|0)}P=v}else P=v}else P=v}else if(o>>>0<=4294967231)if(v=-8&(o=o+11|0),C=0|n[924]){p=0-v|0,g=(o>>>=8)?16777215<v>>>0?31:1&((M=(g=14-((x=(x=(g=o<<(P=(P=o+1048320|0)>>>16&8))+520192|0)>>>16&4)|P|(M=(M=(g<<=x)+245760|0)>>>16&2))+((g<<=M)>>>15)|0)+7|0)?v>>>M:v)|g<<1:0,o=0|n[3996+(g<<2)>>2];t:do if(o)for(E=v<<(((T=0)|g)==31?0:25-(g>>>1)|0),x=o,o=0;;){if((d=(-8&n[x+4>>2])-v|0)>>>0<p>>>0){if(!d){p=0,o=T=x,M=65;break t}p=d,o=x}if(T=(0|(M=0|n[x+20>>2]))==0|(0|M)==(0|(x=0|n[x+16+(E>>>31<<2)>>2]))?T:M,!x){M=61;break}E<<=1}else o=T=0,M=61;while(0);if((0|M)==61){if((0|T)==0&(0|o)==0){if(!(o=((o=2<<g)|0-o)&C)){P=v;break}T=0|n[3996+(((E=(T=(x=(T=(o&0-o)-1|0)>>>12&16)?T>>>x:T)>>>5&8)|x|(g=(T=E?T>>>E:T)>>>2&4)|(P=(T=g?T>>>g:T)>>>1&2)|(o=(T=P?T>>>P:T)>>>1&1))+(o?T>>>o:T)<<2)>>2],o=0}T?M=65:(x=p,d=o)}if((0|M)==65)for(;;){if(p=(d=(P=(-8&n[T+4>>2])-v|0)>>>0<p>>>0)?P:p,d=d?T:o,!(o=(o=0|n[T+16>>2])||0|n[T+20>>2])){x=p;break}T=o,o=d}if(0|d&&x>>>0<((0|n[925])-v|0)>>>0&&d>>>0<(w=d+v|0)>>>0){E=0|n[d+24>>2],u=0|n[d+12>>2];do if((0|u)==(0|d)){if(!(u=0|n[(o=d+20|0)>>2])&&!(u=0|n[(o=d+16|0)>>2])){u=0;break}for(;;)if(p=0|n[(T=u+20|0)>>2])u=p,o=T;else{if(!(p=0|n[(T=u+16|0)>>2]))break;u=p,o=T}n[o>>2]=0}else D=0|n[d+8>>2],n[D+12>>2]=u,n[u+8>>2]=D;while(0);do if(E){if(o=0|n[d+28>>2],(0|d)==(0|n[(p=3996+(o<<2)|0)>>2])){if(!(n[p>>2]=u)){C&=~(1<<o),n[924]=C;break}}else if(!(n[((0|n[(D=E+16|0)>>2])==(0|d)?D:E+20|0)>>2]=u))break;n[u+24>>2]=E,0|(o=0|n[d+16>>2])&&(n[u+16>>2]=o,n[o+24>>2]=u),(o=0|n[d+20>>2])&&(n[u+20>>2]=o,n[o+24>>2]=u)}while(0);t:do if(x>>>0<16)n[d+4>>2]=3|(D=x+v|0),n[(D=d+D+4|0)>>2]=1|n[D>>2];else{if(n[d+4>>2]=3|v,n[w+4>>2]=1|x,u=(n[w+x>>2]=x)>>>3,x>>>0<256){p=3732+(u<<1<<2)|0,o=(o=0|n[923])&(u=1<<u)?0|n[(u=o=p+8|0)>>2]:(n[923]=o|u,u=p+8|0,p),n[u>>2]=w,n[o+12>>2]=w,n[w+8>>2]=o,n[w+12>>2]=p;break}if(u=3996+((p=(u=x>>>8)?16777215<x>>>0?31:1&((D=(p=14-((V=(V=(p=u<<($=($=u+1048320|0)>>>16&8))+520192|0)>>>16&4)|$|(D=(D=(p<<=V)+245760|0)>>>16&2))+((p<<=D)>>>15)|0)+7|0)?x>>>D:x)|p<<1:0)<<2)|0,n[w+28>>2]=p,n[(o=w+16|0)+4>>2]=0,n[o>>2]=0,!(C&(o=1<<p))){n[924]=C|o,n[u>>2]=w,n[w+24>>2]=u,n[w+12>>2]=w,n[w+8>>2]=w;break}u=0|n[u>>2];e:do if((-8&n[u+4>>2]|0)!=(0|x)){for(C=x<<((0|p)==31?0:25-(p>>>1)|0);o=0|n[(p=u+16+(C>>>31<<2)|0)>>2];){if((-8&n[o+4>>2]|0)==(0|x)){u=o;break e}C<<=1,u=o}n[p>>2]=w,n[w+24>>2]=u,n[w+12>>2]=w,n[w+8>>2]=w;break t}while(0);D=0|n[($=u+8|0)>>2],n[D+12>>2]=w,n[$>>2]=w,n[w+8>>2]=D,n[w+12>>2]=u,n[w+24>>2]=0}while(0);return L=Z,0|(D=d+8|0)}P=v}else P=v;else P=-1;while(0);if(P>>>0<=(p=0|n[925])>>>0)return u=0|n[928],15<(o=p-P|0)>>>0?(n[928]=D=u+P|0,n[925]=o,n[D+4>>2]=1|o,n[u+p>>2]=o,n[u+4>>2]=3|P):(n[925]=0,n[928]=0,n[u+4>>2]=3|p,n[(D=u+p+4|0)>>2]=1|n[D>>2]),L=Z,0|(D=u+8|0);if(P>>>0<(E=0|n[926])>>>0)return n[926]=V=E-P|0,D=0|n[929],n[929]=$=D+P|0,n[$+4>>2]=1|V,n[D+4>>2]=3|P,L=Z,0|(D=D+8|0);if(x=P+48|0,(v=(d=(o=0|n[1041]?0|n[1043]:(n[1043]=4096,n[1042]=4096,n[1044]=-1,n[1045]=-1,n[1046]=0,n[1034]=0,n[1041]=-16&U^1431655768,4096))+(g=P+47|0)|0)&(C=0-o|0))>>>0<=P>>>0||0|(o=0|n[1033])&&(U=(w=0|n[1031])+v|0)>>>0<=w>>>0|o>>>0<U>>>0)return L=Z,(D=0)|D;t:do if(4&n[1034])u=0,M=143;else{p=0|n[929];e:do if(p){for(T=4140;!((o=0|n[T>>2])>>>0<=p>>>0&&(o+(0|n[(G=T+4|0)>>2])|0)>>>0>p>>>0);){if(!(o=0|n[T+8>>2])){M=128;break e}T=o}if((u=d-E&C)>>>0<2147483647)if((0|(o=0|ji(u)))==((0|n[T>>2])+(0|n[G>>2])|0)){if((0|o)!=-1){E=o,d=u,M=145;break t}}else C=o,M=136;else u=0}else M=128;while(0);do if((0|M)==128)if((0|(p=0|ji(0)))!=-1&&(u=p,S=(u=((S=(B=0|n[1042])+-1|0)&u|0?(S+u&0-B)-u|0:0)+v|0)+(B=0|n[1031])|0,P>>>0<u>>>0&u>>>0<2147483647)){if(0|(G=0|n[1033])&&S>>>0<=B>>>0|G>>>0<S>>>0){u=0;break}if((0|(o=0|ji(u)))==(0|p)){E=p,d=u,M=145;break t}C=o,M=136}else u=0;while(0);do if((0|M)==136){if(p=0-u|0,!(u>>>0<x>>>0&u>>>0<2147483647&(0|C)!=-1)){if((0|C)==-1){u=0;break}E=C,d=u,M=145;break t}if(2147483647<=(o=g-u+(o=0|n[1043])&0-o)>>>0){E=C,d=u,M=145;break t}if((0|ji(o))==-1){ji(p),u=0;break}E=C,d=o+u|0,M=145;break t}while(0);n[1034]=4|n[1034],M=143}while(0);if((0|M)==143&&v>>>0<2147483647&&!((0|(N=0|ji(v)))==-1|1^(V=(P+40|0)>>>0<($=(G=0|ji(0))-N|0)>>>0)|N>>>0<G>>>0&(0|N)!=-1&(0|G)!=-1^1)&&(E=N,d=V?$:u,M=145),(0|M)==145){u=(0|n[1031])+d|0,(n[1031]=u)>>>0>(0|n[1032])>>>0&&(n[1032]=u),g=0|n[929];t:do if(g){for(T=4140;;){if((0|E)==((u=0|n[T>>2])+(o=0|n[(C=T+4|0)>>2])|0)){M=154;break}if(!(p=0|n[T+8>>2]))break;T=p}if((0|M)==154&&!(8&n[T+12>>2]|0)&&g>>>0<E>>>0&u>>>0<=g>>>0){n[C>>2]=o+d,$=g+(V=7&(V=g+8|0)|0?0-V&7:0)|0,V=(D=(0|n[926])+d|0)-V|0,n[929]=$,n[926]=V,n[$+4>>2]=1|V,n[g+D+4>>2]=40,n[930]=n[1045];break}for(E>>>0<(0|n[927])>>>0&&(n[927]=E),p=E+d|0,o=4140;;){if((0|n[o>>2])==(0|p)){M=162;break}if(!(u=0|n[o+8>>2]))break;o=u}if((0|M)==162&&!(8&n[o+12>>2]|0)){n[o>>2]=E,n[(w=o+4|0)>>2]=(0|n[w>>2])+d,v=(w=E+(7&(w=E+8|0)|0?0-w&7:0)|0)+P|0,x=(u=p+(7&(u=p+8|0)|0?0-u&7:0)|0)-w-P|0,n[w+4>>2]=3|P;e:do if((0|g)==(0|u))D=(0|n[926])+x|0,n[926]=D,n[929]=v,n[v+4>>2]=1|D;else{if((0|n[928])==(0|u)){D=(0|n[925])+x|0,n[925]=D,n[928]=v,n[v+4>>2]=1|D,n[v+D>>2]=D;break}if((3&(o=0|n[u+4>>2])|0)==1){E=-8&o,C=o>>>3;r:do{if(o>>>0<256){if(o=0|n[u+8>>2],(0|(p=0|n[u+12>>2]))==(0|o)){n[923]=n[923]&~(1<<C);break}n[o+12>>2]=p,n[p+8>>2]=o;break}d=0|n[u+24>>2],o=0|n[u+12>>2];do if((0|o)==(0|u)){if(!(o=0|n[(p=(C=u+16|0)+4|0)>>2])){if(!(o=0|n[C>>2])){o=0;break}p=C}for(;;)if(C=0|n[(T=o+20|0)>>2])o=C,p=T;else{if(!(C=0|n[(T=o+16|0)>>2]))break;o=C,p=T}n[p>>2]=0}else D=0|n[u+8>>2],n[D+12>>2]=o,n[o+8>>2]=D;while(0);if(!d)break;C=3996+((p=0|n[u+28>>2])<<2)|0;do{if((0|n[C>>2])==(0|u)){if(0|(n[C>>2]=o))break;n[924]=n[924]&~(1<<p);break r}if(!(n[((0|n[(D=d+16|0)>>2])==(0|u)?D:d+20|0)>>2]=o))break r}while(0)}while(n[o+24>>2]=d,0|(p=0|n[(C=u+16|0)>>2])&&(n[o+16>>2]=p,n[p+24>>2]=o),(p=0|n[C+4>>2])&&(n[o+20>>2]=p,n[p+24>>2]=o,0));u=u+E|0,T=E+x|0}else T=x;if(n[(u=u+4|0)>>2]=-2&n[u>>2],n[v+4>>2]=1|T,u=(n[v+T>>2]=T)>>>3,T>>>0<256){p=3732+(u<<1<<2)|0,o=(o=0|n[923])&(u=1<<u)?0|n[(u=o=p+8|0)>>2]:(n[923]=o|u,u=p+8|0,p),n[u>>2]=v,n[o+12>>2]=v,n[v+8>>2]=o,n[v+12>>2]=p;break}u=T>>>8;do if(u){if(16777215<T>>>0){C=31;break}C=1&((D=(C=14-((V=(V=(C=u<<($=($=u+1048320|0)>>>16&8))+520192|0)>>>16&4)|$|(D=(D=(C<<=V)+245760|0)>>>16&2))+((C<<=D)>>>15)|0)+7|0)?T>>>D:T)|C<<1}else C=0;while(0);if(o=3996+(C<<2)|0,n[v+28>>2]=C,n[(u=v+16|0)+4>>2]=0,!((u=(n[u>>2]=0)|n[924])&(p=1<<C))){n[924]=u|p,n[o>>2]=v,n[v+24>>2]=o,n[v+12>>2]=v,n[v+8>>2]=v;break}u=0|n[o>>2];r:do if((-8&n[u+4>>2]|0)!=(0|T)){for(C=T<<((0|C)==31?0:25-(C>>>1)|0);o=0|n[(p=u+16+(C>>>31<<2)|0)>>2];){if((-8&n[o+4>>2]|0)==(0|T)){u=o;break r}C<<=1,u=o}n[p>>2]=v,n[v+24>>2]=u,n[v+12>>2]=v,n[v+8>>2]=v;break e}while(0);D=0|n[($=u+8|0)>>2],n[D+12>>2]=v,n[$>>2]=v,n[v+8>>2]=D,n[v+12>>2]=u,n[v+24>>2]=0}while(0);return L=Z,0|(D=w+8|0)}for(o=4140;!((u=0|n[o>>2])>>>0<=g>>>0&&g>>>0<(D=u+(0|n[o+4>>2])|0)>>>0);)o=0|n[o+8>>2];for(u=(o=(o=(T=D+-47|0)+(7&(o=T+8|0)|0?0-o&7:0)|0)>>>0<(T=g+16|0)>>>0?g:o)+8|0,$=E+(V=7&(V=E+8|0)|0?0-V&7:0)|0,V=(p=d+-40|0)-V|0,n[929]=$,n[926]=V,n[$+4>>2]=1|V,n[E+p+4>>2]=40,n[930]=n[1045],n[(p=o+4|0)>>2]=27,n[u>>2]=n[1035],n[u+4>>2]=n[1036],n[u+8>>2]=n[1037],n[u+12>>2]=n[1038],n[1035]=E,n[1036]=d,n[1038]=0,n[1037]=u,u=o+24|0;n[(u=($=u)+4|0)>>2]=7,($+8|0)>>>0<D>>>0;);if((0|o)!=(0|g)){if(d=o-g|0,n[p>>2]=-2&n[p>>2],n[g+4>>2]=1|d,u=(n[o>>2]=d)>>>3,d>>>0<256){p=3732+(u<<1<<2)|0,o=(o=0|n[923])&(u=1<<u)?0|n[(u=o=p+8|0)>>2]:(n[923]=o|u,u=p+8|0,p),n[u>>2]=g,n[o+12>>2]=g,n[g+8>>2]=o,n[g+12>>2]=p;break}if(p=3996+((C=(u=d>>>8)?16777215<d>>>0?31:1&((D=(C=14-((V=(V=(C=u<<($=($=u+1048320|0)>>>16&8))+520192|0)>>>16&4)|$|(D=(D=(C<<=V)+245760|0)>>>16&2))+((C<<=D)>>>15)|0)+7|0)?d>>>D:d)|C<<1:0)<<2)|0,n[g+28>>2]=C,n[g+20>>2]=0,!((u=(n[T>>2]=0)|n[924])&(o=1<<C))){n[924]=u|o,n[p>>2]=g,n[g+24>>2]=p,n[g+12>>2]=g,n[g+8>>2]=g;break}u=0|n[p>>2];e:do if((-8&n[u+4>>2]|0)!=(0|d)){for(C=d<<((0|C)==31?0:25-(C>>>1)|0);o=0|n[(p=u+16+(C>>>31<<2)|0)>>2];){if((-8&n[o+4>>2]|0)==(0|d)){u=o;break e}C<<=1,u=o}n[p>>2]=g,n[g+24>>2]=u,n[g+12>>2]=g,n[g+8>>2]=g;break t}while(0);D=0|n[($=u+8|0)>>2],n[D+12>>2]=g,n[$>>2]=g,n[g+8>>2]=D,n[g+12>>2]=u,n[g+24>>2]=0}}else(0|(D=0|n[927]))==0|E>>>0<D>>>0&&(n[927]=E),n[1035]=E,n[1036]=d,n[1038]=0,n[932]=n[1041],n[931]=-1,n[936]=3732,n[935]=3732,n[938]=3740,n[937]=3740,n[940]=3748,n[939]=3748,n[942]=3756,n[941]=3756,n[944]=3764,n[943]=3764,n[946]=3772,n[945]=3772,n[948]=3780,n[947]=3780,n[950]=3788,n[949]=3788,n[952]=3796,n[951]=3796,n[954]=3804,n[953]=3804,n[956]=3812,n[955]=3812,n[958]=3820,n[957]=3820,n[960]=3828,n[959]=3828,n[962]=3836,n[961]=3836,n[964]=3844,n[963]=3844,n[966]=3852,n[965]=3852,n[968]=3860,n[967]=3860,n[970]=3868,n[969]=3868,n[972]=3876,n[971]=3876,n[974]=3884,n[973]=3884,n[976]=3892,n[975]=3892,n[978]=3900,n[977]=3900,n[980]=3908,n[979]=3908,n[982]=3916,n[981]=3916,n[984]=3924,n[983]=3924,n[986]=3932,n[985]=3932,n[988]=3940,n[987]=3940,n[990]=3948,n[989]=3948,n[992]=3956,n[991]=3956,n[994]=3964,n[993]=3964,n[996]=3972,n[995]=3972,n[998]=3980,n[997]=3980,$=E+(V=7&(V=E+8|0)|0?0-V&7:0)|0,V=(D=d+-40|0)-V|0,n[929]=$,n[926]=V,n[$+4>>2]=1|V,n[E+D+4>>2]=40,n[930]=n[1045];while(0);if(P>>>0<(u=0|n[926])>>>0)return n[926]=V=u-P|0,D=0|n[929],n[929]=$=D+P|0,n[$+4>>2]=1|V,n[D+4>>2]=3|P,L=Z,0|(D=D+8|0)}return n[922]=48,L=Z,(D=0)|D}function Uu(o){var u=0,p=0,C=0,T=0,d=0,E=0,x=0,g=0,v=0;if(o|=0){C=0|n[927],v=(p=o+-8|0)+(u=-8&(o=0|n[o+-4>>2]))|0;do if(1&o)g=x=p;else{if(T=0|n[p>>2],!(3&o)||(E=T+u|0,(d=p+(0-T)|0)>>>0<C>>>0))return;if((0|n[928])==(0|d)){if((3&(o=0|n[(u=v+4|0)>>2])|0)==3)return n[925]=E,n[u>>2]=-2&o,n[d+4>>2]=1|E,void(n[d+E>>2]=E);g=x=d,u=E;break}if(p=T>>>3,T>>>0<256){if(o=0|n[d+8>>2],(0|(u=0|n[d+12>>2]))==(0|o)){n[923]=n[923]&~(1<<p),g=x=d,u=E;break}n[o+12>>2]=u,n[u+8>>2]=o,g=x=d,u=E;break}T=0|n[d+24>>2],o=0|n[d+12>>2];do if((0|o)==(0|d)){if(!(o=0|n[(u=(p=d+16|0)+4|0)>>2])){if(!(o=0|n[p>>2])){p=0;break}u=p}for(;;)if(p=0|n[(C=o+20|0)>>2])o=p,u=C;else{if(!(p=0|n[(C=o+16|0)>>2]))break;o=p,u=C}n[u>>2]=0,p=o}else p=0|n[d+8>>2],n[p+12>>2]=o,n[o+8>>2]=p,p=o;while(0);if(T){if(o=0|n[d+28>>2],(0|n[(u=3996+(o<<2)|0)>>2])==(0|d)){if(!(n[u>>2]=p)){n[924]=n[924]&~(1<<o),g=x=d,u=E;break}}else if(!(n[((0|n[(g=T+16|0)>>2])==(0|d)?g:T+20|0)>>2]=p)){g=x=d,u=E;break}n[p+24>>2]=T,0|(o=0|n[(u=d+16|0)>>2])&&(n[p+16>>2]=o,n[o+24>>2]=p),u=(g=x=((o=0|n[u+4>>2])&&(n[p+20>>2]=o,n[o+24>>2]=p),d),E)}else g=x=d,u=E}while(0);if(!(v>>>0<=x>>>0)&&1&(p=0|n[(o=v+4|0)>>2])){if(2&p)n[o>>2]=-2&p,n[g+4>>2]=1|u,T=n[x+u>>2]=u;else{if((0|n[929])==(0|v))return v=(0|n[926])+u|0,n[926]=v,n[929]=g,n[g+4>>2]=1|v,void((0|g)==(0|n[928])&&(n[928]=0,n[925]=0));if((0|n[928])==(0|v))return v=(0|n[925])+u|0,n[925]=v,n[928]=x,n[g+4>>2]=1|v,void(n[x+v>>2]=v);T=(-8&p)+u|0,C=p>>>3;do{if(p>>>0<256){if(u=0|n[v+8>>2],(0|(o=0|n[v+12>>2]))==(0|u)){n[923]=n[923]&~(1<<C);break}n[u+12>>2]=o,n[o+8>>2]=u;break}d=0|n[v+24>>2],o=0|n[v+12>>2];do if((0|o)==(0|v)){if(!(o=0|n[(u=(p=v+16|0)+4|0)>>2])){if(!(o=0|n[p>>2])){p=0;break}u=p}for(;;)if(p=0|n[(C=o+20|0)>>2])o=p,u=C;else{if(!(p=0|n[(C=o+16|0)>>2]))break;o=p,u=C}n[u>>2]=0,p=o}else p=0|n[v+8>>2],n[p+12>>2]=o,n[o+8>>2]=p,p=o;while(0);if(0|d){if(o=0|n[v+28>>2],(0|n[(u=3996+(o<<2)|0)>>2])==(0|v)){if(!(n[u>>2]=p)){n[924]=n[924]&~(1<<o);break}}else if(!(n[((0|n[(E=d+16|0)>>2])==(0|v)?E:d+20|0)>>2]=p))break;n[p+24>>2]=d,0|(o=0|n[(u=v+16|0)>>2])&&(n[p+16>>2]=o,n[o+24>>2]=p),0|(o=0|n[u+4>>2])&&(n[p+20>>2]=o,n[o+24>>2]=p)}}while(0);if(n[g+4>>2]=1|T,n[x+T>>2]=T,(0|g)==(0|n[928]))return void(n[925]=T)}if(o=T>>>3,T>>>0<256)return p=3732+(o<<1<<2)|0,u=(u=0|n[923])&(o=1<<o)?0|n[(o=u=p+8|0)>>2]:(n[923]=u|o,o=p+8|0,p),n[o>>2]=g,n[u+12>>2]=g,n[g+8>>2]=u,void(n[g+12>>2]=p);u=3996+((C=(o=T>>>8)?16777215<T>>>0?31:1&((v=(C=14-((E=(E=(C=o<<(x=(x=o+1048320|0)>>>16&8))+520192|0)>>>16&4)|x|(v=(v=(C<<=E)+245760|0)>>>16&2))+((C<<=v)>>>15)|0)+7|0)?T>>>v:T)|C<<1:0)<<2)|0,n[g+28>>2]=C,n[g+20>>2]=0,o=(n[g+16>>2]=0)|n[924],p=1<<C;t:do if(o&p){o=0|n[u>>2];e:do if((-8&n[o+4>>2]|0)!=(0|T)){for(C=T<<((0|C)==31?0:25-(C>>>1)|0);u=0|n[(p=o+16+(C>>>31<<2)|0)>>2];){if((-8&n[u+4>>2]|0)==(0|T)){o=u;break e}C<<=1,o=u}n[p>>2]=g,n[g+24>>2]=o,n[g+12>>2]=g,n[g+8>>2]=g;break t}while(0);v=0|n[(x=o+8|0)>>2],n[v+12>>2]=g,n[x>>2]=g,n[g+8>>2]=v,n[g+12>>2]=o,n[g+24>>2]=0}else n[924]=o|p,n[u>>2]=g,n[g+24>>2]=u,n[g+12>>2]=g,n[g+8>>2]=g;while(0);if(v=(0|n[931])-1|0,!(0|(n[931]=v))){for(o=4148;o=0|n[o>>2];)o=o+8|0;n[931]=-1}}}}function U2(o,u){var g=0,p=0,C=0,T=0,d=0,E=0,x=0,x=(o|=0)+(u|=0)|0,g=0|n[o+4>>2];do if(1&g)E=o,o=u;else{if(p=0|n[o>>2],!(3&g))return;if(d=p+u|0,(0|n[928])==(0|(T=o+(0-p)|0))){if((3&(g=0|n[(o=x+4|0)>>2])|0)==3)return n[925]=d,n[o>>2]=-2&g,n[T+4>>2]=1|d,void(n[x>>2]=d);E=T,o=d;break}if(u=p>>>3,p>>>0<256){if(g=0|n[T+8>>2],(0|(o=0|n[T+12>>2]))==(0|g)){n[923]=n[923]&~(1<<u),E=T,o=d;break}n[g+12>>2]=o,n[o+8>>2]=g,E=T,o=d;break}C=0|n[T+24>>2],g=0|n[T+12>>2];do if((0|g)==(0|T)){if(!(g=0|n[(o=(u=T+16|0)+4|0)>>2])){if(!(g=0|n[u>>2])){u=0;break}o=u}for(;;)if(u=0|n[(p=g+20|0)>>2])g=u,o=p;else{if(!(u=0|n[(p=g+16|0)>>2]))break;g=u,o=p}n[o>>2]=0,u=g}else u=0|n[T+8>>2],n[u+12>>2]=g,n[g+8>>2]=u,u=g;while(0);if(C){if(g=0|n[T+28>>2],(0|n[(o=3996+(g<<2)|0)>>2])==(0|T)){if(!(n[o>>2]=u)){n[924]=n[924]&~(1<<g),E=T,o=d;break}}else if(!(n[((0|n[(E=C+16|0)>>2])==(0|T)?E:C+20|0)>>2]=u)){E=T,o=d;break}n[u+24>>2]=C,0|(g=0|n[(o=T+16|0)>>2])&&(n[u+16>>2]=g,n[g+24>>2]=u),o=(E=((g=0|n[o+4>>2])&&(n[u+20>>2]=g,n[g+24>>2]=u),T),d)}else E=T,o=d}while(0);if(2&(u=0|n[(g=x+4|0)>>2]))n[g>>2]=-2&u,n[E+4>>2]=1|o,n[E+o>>2]=o;else{if((0|n[929])==(0|x))return x=(0|n[926])+o|0,n[926]=x,n[929]=E,n[E+4>>2]=1|x,void((0|E)==(0|n[928])&&(n[928]=0,n[925]=0));if((0|n[928])==(0|x))return x=(0|n[925])+o|0,n[925]=x,n[928]=E,n[E+4>>2]=1|x,void(n[E+x>>2]=x);T=(-8&u)+o|0,p=u>>>3;do{if(u>>>0<256){if(o=0|n[x+8>>2],(0|(g=0|n[x+12>>2]))==(0|o)){n[923]=n[923]&~(1<<p);break}n[o+12>>2]=g,n[g+8>>2]=o;break}C=0|n[x+24>>2],g=0|n[x+12>>2];do if((0|g)==(0|x)){if(!(g=0|n[(o=(u=x+16|0)+4|0)>>2])){if(!(g=0|n[u>>2])){u=0;break}o=u}for(;;)if(u=0|n[(p=g+20|0)>>2])g=u,o=p;else{if(!(u=0|n[(p=g+16|0)>>2]))break;g=u,o=p}n[o>>2]=0,u=g}else u=0|n[x+8>>2],n[u+12>>2]=g,n[g+8>>2]=u,u=g;while(0);if(0|C){if(g=0|n[x+28>>2],(0|n[(o=3996+(g<<2)|0)>>2])==(0|x)){if(!(n[o>>2]=u)){n[924]=n[924]&~(1<<g);break}}else if(!(n[((0|n[(d=C+16|0)>>2])==(0|x)?d:C+20|0)>>2]=u))break;n[u+24>>2]=C,0|(g=0|n[(o=x+16|0)>>2])&&(n[u+16>>2]=g,n[g+24>>2]=u),0|(g=0|n[o+4>>2])&&(n[u+20>>2]=g,n[g+24>>2]=u)}}while(0);if(n[E+4>>2]=1|T,n[E+T>>2]=T,(0|E)==(0|n[928]))return void(n[925]=T);o=T}if(g=o>>>3,o>>>0<256)return u=3732+(g<<1<<2)|0,o=(o=0|n[923])&(g=1<<g)?0|n[(g=o=u+8|0)>>2]:(n[923]=o|g,g=u+8|0,u),n[g>>2]=E,n[o+12>>2]=E,n[E+8>>2]=o,void(n[E+12>>2]=u);if(u=3996+((C=(g=o>>>8)?16777215<o>>>0?31:1&((x=(C=14-((T=(T=(C=g<<(d=(d=g+1048320|0)>>>16&8))+520192|0)>>>16&4)|d|(x=(x=(C<<=T)+245760|0)>>>16&2))+((C<<=x)>>>15)|0)+7|0)?o>>>x:o)|C<<1:0)<<2)|0,n[E+28>>2]=C,n[E+20>>2]=0,!((g=(n[E+16>>2]=0)|n[924])&(p=1<<C)))return n[924]=g|p,n[u>>2]=E,n[E+24>>2]=u,n[E+12>>2]=E,void(n[E+8>>2]=E);g=0|n[u>>2];t:do if((-8&n[g+4>>2]|0)!=(0|o)){for(C=o<<((0|C)==31?0:25-(C>>>1)|0);u=0|n[(p=g+16+(C>>>31<<2)|0)>>2];){if((-8&n[u+4>>2]|0)==(0|o)){g=u;break t}C<<=1,g=u}return n[p>>2]=E,n[E+24>>2]=g,n[E+12>>2]=E,void(n[E+8>>2]=E)}while(0);x=0|n[(d=g+8|0)>>2],n[x+12>>2]=E,n[d>>2]=E,n[E+8>>2]=x,n[E+12>>2]=g,n[E+24>>2]=0}function O2(o,u,p){o|=0;var C;return(3&(u|=0)|0)!=0|(0|(C=u>>>2))==0||1073741823+C&C|0?0|(o=28):!((-64-u|0)>>>0<(p|=0)>>>0)&&(u=0|function(T,d){d|=0;var E,x=0,g=0,v=0,w=0,P=0;if((x=16<(T|=0)>>>0?T:16)+-1&x)for(T=16;T>>>0<x>>>0;)T<<=1;else T=x;if((-64-T|0)>>>0<=d>>>0)return n[922]=48,(w=0)|w;if(!(x=0|Su(12+(E=d>>>0<11?16:d+11&-8)+T|0)))return(w=0)|w;v=x+-8|0;do if(T+-1&x){if(g=15<((g=(x+T+-1&0-T)-8|0)-(d=v)|0)>>>0?g:g+T|0,x=(-8&(P=0|n[(T=x+-4|0)>>2]))-(d=g-d|0)|0,3&P){n[(P=g+4|0)>>2]=x|1&n[P>>2]|2,n[(x=g+x+4|0)>>2]=1|n[x>>2],n[T>>2]=d|1&n[T>>2]|2,n[P>>2]=1|n[P>>2],U2(v,d),T=d=g;break}n[g>>2]=(0|n[v>>2])+d,n[g+4>>2]=x,T=d=g;break}while(T=d=v,0);return 3&(T=0|n[(x=T+4|0)>>2])|0&&(16+E|0)>>>0<(w=-8&T)>>>0&&(P=w-E|0,v=d+E|0,n[x>>2]=E|1&T|2,n[v+4>>2]=3|P,n[(w=d+w+4|0)>>2]=1|n[w>>2],U2(v,P)),0|(P=d+8|0)}(16<u>>>0?u:16,p))?(n[o>>2]=u,(o=0)|o):0|(o=48)}function ji(o){var u,p=0;return(o=(u=0|n[(p=4208)>>2])+(o|=0)|0)>>>0>(0|Hx())>>>0&&!(0|Vx(0|o))?(n[922]=48,0|(p=-1)):(n[p>>2]=o,0|(p=u))}function Ou(o,u,p,C){u|=0,C|=0;var T=0,d=0;return p=0|function(E,x){var g,v,w,P;return E=((w=0|Ie(v=65535&(x|=0),g=65535&(E|=0)))>>>16)+(0|Ie(v,P=E>>>16))|0,x=0|Ie(v=x>>>16,g),0|(ke((E>>>16)+(0|Ie(v,P))+(((65535&E)+x|0)>>>16)|0),E+x<<16|65535&w|0)}(T=o|=0,d=p|=0),o=0|ze(),0|(ke((0|Ie(u,d))+(0|Ie(C,T))+o|0&o|0),0|p)}function ms(o,u,p,C){return 0|(ke((u|=0)+(C|=0)+((p=(o|=0)+(p|=0)>>>0)>>>0<o>>>0|0)>>>0|0),0|p)}function wa(o,u,p,C){return 0|(ke(0|(C=(u|=0)-(C|=0)-((o|=0)>>>0<(p|=0)>>>0|0)>>>0)),o-p>>>0|0)}function F2(o){return 0|((o|=0)?31-(0|Xi(o^o-1))|0:32)}function dT(o,u,p,C,T){T|=0;var d=0,B=0,S=0,E=0,x=0,U=0,g=0,v=0,w=0,P=0,U=o|=0,B=p|=0,S=v=C|=0;if(!(x=E=u|=0))return d=(0|T)!=0,S?(d&&(n[T>>2]=0|o,n[T+4>>2]=0&u),(T=v=0)|(ke(0|v),T)):(d&&(n[T>>2]=(U>>>0)%(B>>>0),n[T+4>>2]=0),T=(U>>>(v=0))/(B>>>0)>>>0,0|(ke(0|v),T));d=(0|S)==0;do{if(B){if(!d){if((d=(0|Xi(0|S))-(0|Xi(0|x))|0)>>>0<=31){o=U>>>((B=g=d+1|0)>>>0)&(u=d-31>>31)|x<<(S=31-d|0),u&=x>>>(g>>>0),d=0,S=U<<S;break}return T&&(n[T>>2]=0|o,n[T+4>>2]=E|0&u),(T=v=0)|(ke(0|v),T)}if((d=B-1|0)&B|0){o=(g=32-(S=33+(0|Xi(0|B))-(0|Xi(0|x))|0)|0)-1>>31&x>>>((w=S-32|0)>>>0)|(x<<g|U>>>((B=S)>>>0))&(u=w>>31),u&=x>>>(S>>>0),d=U<<(P=64-S|0)&(E=g>>31),S=(x<<P|U>>>(w>>>0))&E|U<<g&S-33>>31;break}return 0|T&&(n[T>>2]=d&U,n[T+4>>2]=0),(0|B)==1?(P=0|o,0|(ke(0|(w=E|0&u)),P)):(w=x>>>((P=0|F2(0|B))>>>0)|0,P=x<<32-P|U>>>(P>>>0)|0,0|(ke(0|w),P))}if(d)return 0|T&&(n[T>>2]=(x>>>0)%(B>>>0),n[T+4>>2]=0),P=(x>>>(w=0))/(B>>>0)>>>0,0|(ke(0|w),P);if(!U)return 0|T&&(n[T>>2]=0,n[T+4>>2]=(x>>>0)%(S>>>0)),P=(x>>>(w=0))/(S>>>0)>>>0,0|(ke(0|w),P);if(!((d=S-1|0)&S))return 0|T&&(n[T>>2]=0|o,n[T+4>>2]=d&x|0&u),P=x>>>(((w=0)|F2(0|S))>>>0),0|(ke(0|w),P);if((d=(0|Xi(0|S))-(0|Xi(0|x))|0)>>>0<=30){o=x<<(S=31-d|0)|U>>>((B=u=d+1|0)>>>0),u=x>>>(u>>>0),d=0,S=U<<S;break}return T&&(n[T>>2]=0|o,n[T+4>>2]=E|0&u),(P=w=0)|(ke(0|w),P)}while(0);if(B){for(x=0|ms(0|(g=0|p),0|(U=v|0&C),-1,-1),p=0|ze(),E=S,S=0;E=d>>>31|(C=E)<<1,d=S|d<<1,wa(0|x,0|p,0|(C=o<<1|C>>>31|0),0|(v=o>>>31|u<<1|0)),S=1&(w=(P=0|ze())>>31|((0|P)<0?-1:0)<<1),o=0|wa(0|C,0|v,w&g|0,(((0|P)<0?-1:0)>>31|((0|P)<0?-1:0)<<1)&U|0),u=0|ze(),(0|(B=B-1|0))!=0;);x=E,E=0}else x=S,S=E=0;return(B=0)|T&&(n[T>>2]=o,n[T+4>>2]=u),P=-2&(d<<1|0)|S,0|(ke(0|(w=(0|d)>>>31|(x|B)<<1|0&(B<<1|d>>>31)|E)),P)}function Fu(o,u,p,C){return 0|dT(o|=0,u|=0,p|=0,C|=0,0)}function Ea(o,u,p){return o|=0,u|=0,(0|(p|=0))<32?(ke(u>>>p|0),o>>>p|(u&(1<<p)-1)<<32-p):(ke(0),u>>>p-32|0)}function L2(o,u,p){return o|=0,u|=0,(0|(p|=0))<32?(ke(u<<p|(o&(1<<p)-1<<32-p)>>>32-p|0),o<<p):(ke(o<<p-32|0),0)}function pT(){return 4208}function Pr(o,u,p){o|=0,u|=0;var C,T,d;if(8192<=(0|(p|=0)))return Xx(0|o,0|u,0|p),0|o;if(d=0|o,T=o+p|0,(3&o)==(3&u)){for(;3&o;){if(!p)return 0|d;K[o>>0]=0|K[u>>0],o=o+1|0,u=u+1|0,p=p-1|0}for(C=(p=-4&T|0)-64|0;(0|o)<=(0|C);)n[o>>2]=n[u>>2],n[o+4>>2]=n[u+4>>2],n[o+8>>2]=n[u+8>>2],n[o+12>>2]=n[u+12>>2],n[o+16>>2]=n[u+16>>2],n[o+20>>2]=n[u+20>>2],n[o+24>>2]=n[u+24>>2],n[o+28>>2]=n[u+28>>2],n[o+32>>2]=n[u+32>>2],n[o+36>>2]=n[u+36>>2],n[o+40>>2]=n[u+40>>2],n[o+44>>2]=n[u+44>>2],n[o+48>>2]=n[u+48>>2],n[o+52>>2]=n[u+52>>2],n[o+56>>2]=n[u+56>>2],n[o+60>>2]=n[u+60>>2],o=o+64|0,u=u+64|0;for(;(0|o)<(0|p);)n[o>>2]=n[u>>2],o=o+4|0,u=u+4|0}else for(p=T-4|0;(0|o)<(0|p);)K[o>>0]=0|K[u>>0],K[o+1>>0]=0|K[u+1>>0],K[o+2>>0]=0|K[u+2>>0],K[o+3>>0]=0|K[u+3>>0],o=o+4|0,u=u+4|0;for(;(0|o)<(0|T);)K[o>>0]=0|K[u>>0],o=o+1|0,u=u+1|0;return 0|d}function mr(o,u,p){var C,T,d,E=(o|=0)+(p|=0)|0;if(u=(u|0)&255,67<=(0|p)){for(;3&o;)K[o>>0]=u,o=o+1|0;for(d=u|u<<8|u<<16|u<<24,T=(C=-4&E|0)-64|0;(0|o)<=(0|T);)n[o>>2]=d,n[o+4>>2]=d,n[o+8>>2]=d,n[o+12>>2]=d,n[o+16>>2]=d,n[o+20>>2]=d,n[o+24>>2]=d,n[o+28>>2]=d,n[o+32>>2]=d,n[o+36>>2]=d,n[o+40>>2]=d,n[o+44>>2]=d,n[o+48>>2]=d,n[o+52>>2]=d,n[o+56>>2]=d,n[o+60>>2]=d,o=o+64|0;for(;(0|o)<(0|C);)n[o>>2]=d,o=o+4|0}for(;(0|o)<(0|E);)K[o>>0]=u,o=o+1|0;return E-p|0}function M2(o){return xn(0),0}function G2(o,u,p,C){return xn(2),0}var vT=[M2,function(o){return 0|Fx(0,0|(o|=0))},function(o){return 0},M2],Ca=[function(o,u,p){return xn(1),0},function(o,u,p){return 0|Lx(0,0|(o|=0),0|(u|=0),0|(p|=0))},function(o,u,p){u|=0,p|=0;var C,T,d,E,x,g,v,w=0,P=0,U=0,B=0,S=L;for(L=L+32|0,T=(P=S)+16|0,w=0|n[(d=(o|=0)+28|0)>>2],n[P>>2]=w,w=(0|n[(E=o+20|0)>>2])-w|0,n[P+4>>2]=w,n[P+8>>2]=u,C=o+60|0,w=w+(n[P+12>>(U=2)]=p)|0;;){if((0|w)==(0|(u=0|function(G){return 0|(G=(G|=0)<<16>>16?(n[922]=65535&G,-1):0)}(0|Dx(0|n[C>>2],0|P,0|U,0|T))?n[T>>2]=-1:0|n[T>>2]))){u=6;break}if((0|u)<0){u=8;break}B=0|n[P+4>>2],n[(g=(x=B>>>0<u>>>0)?P+8|0:P)>>2]=(0|n[g>>2])+(B=u-(x?B:0)|0),n[(v=g+4|0)>>2]=(0|n[v>>2])-B,P=g,U=U+(x<<31>>31)|0,w=w-u|0}return(0|u)==6?(B=0|n[o+44>>2],n[o+16>>2]=B+(0|n[o+48>>2]),n[d>>2]=B,n[E>>2]=B):(0|u)==8&&(n[o+16>>2]=0,n[d>>2]=0,n[E>>2]=0,n[o>>2]=32|n[o>>2],p=(0|U)==2?0:p-(0|n[P+4>>2])|0),L=S,0|p},function(o,u,p){var C,T;return Pr(0|(T=0|n[(C=(o|=0)+20|0)>>2]),0|(u|=0),0|(o=(p|=0)>>>0<(o=(0|n[o+16>>2])-T|0)>>>0?p:o)),n[C>>2]=(0|n[C>>2])+o,0|p}],_T=[G2,function(o,u,p,C){return 0|Mx(0,0|(o|=0),0|(u|=0),0|(p|=0),0|(C|=0))},function(o,u,p,C){return ke(0),0},G2],k2=[function(o){xn(3)},function(o){Gx(0,0|(o|=0))}],B2=[function(o,u){xn(4)},function(o,u){kx(0,0|(o|=0),0|(u|=0))},function(o,u){var p,g=0,v=0,w=0,C=0,T=0,d=0,E=0,x=0,g=0|n[(p=(o|=0)+308|0)>>2],v=0|n[o+316>>2],w=0|n[o+320>>2];(0|(C=0|n[(T=g+((u|=0)<<5)+8|0)>>2]))==-1?(n[v+(u<<2)>>2]=n[(0|n[o+148>>2])+(n[g+(u<<5)+16>>2]<<2)>>2],O[w+(u<<2)>>2]=1):(E=0|n[(d=g+(u<<5)+16|0)>>2],x=0|n[(0|n[o+152>>2])+(E<<2)>>2],Wi[3&n[g+(C<<5)+24>>2]](o,C,x,x,0|n[(0|n[o+60>>2])+(24*E|0)+16>>2]),T=0|n[T>>2],O[v+(u<<2)>>2]=+O[(0|n[o+148>>2])+(n[d>>2]<<2)>>2]*+O[v+(T<<2)>>2],n[w+(u<<2)>>2]=n[w+(T<<2)>>2]),(0|Ht[4+(0|n[o>>2])>>0])<4||(g=0|n[p>>2],v=0|n[o+324>>2],p=0|n[o+328>>2],w=u<<2,C=n[g+(u<<5)+16>>2]<<2,(0|(g=0|n[g+(u<<5)+8>>2]))==-1?(g=0|n[o+156>>2],n[v+(w<<2)>>2]=n[g+(C<<2)>>2],n[v+((u=1|w)<<2)>>2]=n[g+((T=1|C)<<2)>>2],n[v+((x=2|w)<<2)>>2]=n[g+((E=2|C)<<2)>>2],O[v+((g=3|w)<<2)>>2]=1,d=0|n[o+160>>2],n[p+(w<<2)>>2]=n[d+(C<<2)>>2],n[p+(u<<2)>>2]=n[d+(T<<2)>>2],n[p+(x<<2)>>2]=n[d+(E<<2)>>2]):(E=g<<2,d=(0|n[o+156>>2])+(C<<2)|0,O[(g=v+(w<<2)|0)>>2]=+O[d>>2]*+O[(x=v+(E<<2)|0)>>2],O[g+4>>2]=+O[d+4>>2]*+O[x+4>>2],O[g+8>>2]=+O[d+8>>2]*+O[x+8>>2],O[v+((g=3|w)<<2)>>2]=1,d=(0|n[o+160>>2])+(C<<2)|0,u=+O[d>>2],T=+O[(E=p+(E<<2)|0)>>2],O[(x=p+(w<<2)|0)>>2]=u+T-u*T,T=+O[d+4>>2],u=+O[E+4>>2],O[x+4>>2]=T+u-T*u,u=+O[d+8>>2],T=+O[E+8>>2],O[x+8>>2]=u+T-u*T),O[p+(g<<2)>>2]=1)},function(o,u){var p,C,T,d,E,x,g,v,w,P,U,B,S,G,M,N=0,V=0,$=0,D=0,Z=0,it=0,lt=0,_t=0,nt=0,dt=0,ct=0,J=0,ot=0,pt=L;if(L=L+48|0,g=pt+8|0,E=pt+40|0,d=pt+32|0,T=(x=pt)+24|0,J=pt+16|0,N=0|n[(U=(o|=0)+308|0)>>2],w=0|n[o+316>>2],P=0|n[o+320>>2],(0|(C=0|n[(G=N+((u|=0)<<5)+8|0)>>2]))==-1)ot=0|n[N+(u<<5)+16>>2],n[w+(u<<2)>>2]=n[(0|n[o+268>>2])+(ot<<2)>>2],n[P+(u<<2)>>2]=n[(0|n[o+272>>2])+(ot<<2)>>2];else{for(v=0|n[(M=N+(u<<5)+16|0)>>2],Z=0|n[(0|n[(B=o+276|0)>>2])+(v<<2)>>2],n[J>>2]=Z,v=0|n[(0|n[(S=o+280|0)>>2])+(v<<2)>>2],n[(dt=J+4|0)>>2]=v,ct=(0|n[N+(C<<5)+12>>2])==1?-10:-.10000000149011612,n[E>>2]=Z,n[(Z=4+E|0)>>2]=v,Wi[3&n[(v=N+(C<<5)+24|0)>>2]](o,C,E,d,1),$=4+T|0,N=4+d|0,V=x+4|0,D=9,nt=1;O[T>>2]=(_t=0*nt)+ +O[E>>2],O[$>>2]=(p=ct*nt)+ +O[Z>>2],Wi[3&n[v>>2]](o,C,T,x,1),lt=+O[x>>2]-+O[d>>2],O[x>>2]=lt,it=+O[V>>2]-+O[N>>2],!(lt!=0|(O[V>>2]=it)!=0);){if(O[T>>2]=+O[E>>2]-_t,O[$>>2]=+O[Z>>2]-p,Wi[3&n[v>>2]](o,C,T,x,1),it=+O[x>>2]-+O[d>>2],O[x>>2]=it,_t=+O[V>>2]-+O[N>>2],it!=0|(O[V>>2]=_t)!=0){ot=6;break}if(!D){ot=8;break}D=D+-1|0,nt*=.10000000149011612}(0|ot)==6?(lt=-it,it=-_t):(0|ot)==8&&(wt(0,2397,g),it=lt=0),ct=180*+Qx(0,ct,lt,it)/3.1415927410125732,Wi[3&n[v>>2]](o,0|n[G>>2],J,J,1),ot=0|n[M>>2],n[(0|n[B>>2])+(ot<<2)>>2]=n[J>>2],n[(0|n[S>>2])+(ot<<2)>>2]=n[dt>>2],J=(0|n[o+284>>2])+(ot<<2)|0,O[J>>2]=+O[J>>2]-ct,J=0|n[G>>2],O[w+(u<<2)>>2]=+O[(0|n[o+268>>2])+(ot<<2)>>2]*+O[w+(J<<2)>>2],ot=(0|n[o+272>>2])+(ot<<2)|0,ct=+O[ot>>2]*+O[P+(J<<2)>>2],O[P+(u<<2)>>2]=ct,O[ot>>2]=ct}L=((0|Ht[4+(0|n[o>>2])>>0])<4||(N=0|n[U>>2],V=0|n[o+324>>2],Z=0|n[o+328>>2],$=u<<2,D=n[N+(u<<5)+16>>2]<<2,(0|(N=0|n[N+(u<<5)+8>>2]))==-1?(N=0|n[o+296>>2],n[V+($<<2)>>2]=n[N+(D<<2)>>2],n[V+((J=1|$)<<2)>>2]=n[N+((dt=1|D)<<2)>>2],n[V+((u=2|$)<<2)>>2]=n[N+((ot=2|D)<<2)>>2],O[V+((N=3|$)<<2)>>2]=1,o=0|n[o+300>>2],n[Z+($<<2)>>2]=n[o+(D<<2)>>2],n[Z+(J<<2)>>2]=n[o+(dt<<2)>>2],n[Z+(u<<2)>>2]=n[o+(ot<<2)>>2]):(J=N<<2,ot=(0|n[o+296>>2])+(D<<2)|0,O[(N=V+($<<2)|0)>>2]=+O[ot>>2]*+O[(u=V+(J<<2)|0)>>2],O[N+4>>2]=+O[ot+4>>2]*+O[u+4>>2],O[N+8>>2]=+O[ot+8>>2]*+O[u+8>>2],O[V+((N=3|$)<<2)>>2]=1,ot=(0|n[o+300>>2])+(D<<2)|0,nt=+O[ot>>2],ct=+O[(o=Z+(J<<2)|0)>>2],O[(u=Z+($<<2)|0)>>2]=nt+ct-nt*ct,ct=+O[ot+4>>2],nt=+O[o+4>>2],O[u+4>>2]=ct+nt-ct*nt,nt=+O[ot+8>>2],ct=+O[o+8>>2],O[u+8>>2]=nt+ct-nt*ct),O[Z+(N<<2)>>2]=1),pt)}],Wi=[function(o,u,p,C,T){xn(5)},function(o,u,p,C,T){Bx(0,0|(o|=0),0|(u|=0),0|(p|=0),0|(C|=0),0|(T|=0))},function(o,u,p,C,T){p|=0,C|=0;var d,E,x,g,v,w,P,U,B,S,G,M,N,V,$,D,Z,it,lt,_t,nt,dt,ct,J=0,ot=0,pt=0,ht=0,Xt=0,Lt=0,Mt=0,me=0,ue=0,re=0,zt=0,ge=0,we=0,ne=0,le=0,Rt=0,Bt=0,j=0,Le=0,se=0,Zt=0,he=0,St=0,tr=L;if(L=L+32|0,lt=tr,u=0|n[(0|n[(o|=0)+308>>2])+((u|=0)<<5)+16>>2],J=0|n[o+60>>2],N=0|n[(0|n[o+152>>2])+(u<<2)>>2],V=0|n[J+(24*u|0)+8>>2],$=0|n[J+(24*u|0)+4>>2],D=1+V|0,(0|(T|=0))<=0)L=tr;else{Z=0|V,it=0|$,M=(0|n[J+(24*u|0)+12>>2])==0,E=N+(V<<3)|0,x=N+((B=0|Ie($,D))<<3)|0,g=N+((U=B+V|0)<<3)|0,v=4+N|0,w=N+(V<<3)+4|0,P=N+(B<<3)+4|0,U=N+(U<<3)+4|0,G=V-1|0,S=$-1|0,ge=we=ne=le=ot=pt=zt=re=ue=me=Zt=se=Mt=Lt=Xt=ht=he=j=0;do{Rt=(d=+O[p+(he<<3)>>2])*Z,Le=(Bt=+O[p+(he<<3)+4>>2])*it,o=!(1<=d),J=!(1<=Bt);do{if(J&o&!(d<0)&!(Bt<0)){if(o=~~Rt,u=(0|Ie(D,J=~~Le))+o|0,pt=Rt-(0|o),ot=Le-(0|J),!M){O[C+(he<<3)>>2]=(Rt=1-ot)*((Bt=1-pt)*+O[N+(u<<3)>>2])+Rt*(pt*+O[N+((St=u+1|0)<<3)>>2])+ot*(Bt*+O[N+((o=u+D|0)<<3)>>2])+ot*(pt*+O[N+((J=o+1|0)<<3)>>2]),Bt=Rt*(Bt*+O[N+(u<<3)+4>>2])+Rt*(pt*+O[N+(St<<3)+4>>2])+ot*(Bt*+O[N+(o<<3)+4>>2]),Rt=ot*(pt*+O[N+(J<<3)+4>>2]);break}if(pt+ot<=1){O[C+(he<<3)>>2]=(Bt=1-pt-ot)*+O[N+(u<<3)>>2]+pt*+O[N+((J=u+1|0)<<3)>>2]+ot*+O[N+((St=u+D|0)<<3)>>2],Bt=Bt*+O[N+(u<<3)+4>>2]+pt*+O[N+(J<<3)+4>>2],Rt=ot*+O[N+(St<<3)+4>>2];break}O[C+(he<<3)>>2]=(Le=pt+-1+ot)*+O[N+((o=(J=u+D|0)+1|0)<<3)>>2]+(Bt=1-pt)*+O[N+(J<<3)>>2]+(Rt=1-ot)*+O[N+((St=u+1|0)<<3)>>2],Bt=Le*+O[N+(o<<3)+4>>2]+Bt*+O[N+(J<<3)+4>>2],Rt*=+O[N+(St<<3)+4>>2];break}if(j||(ct=+O[N>>2],dt=+O[E>>2],nt=+O[x>>2],se=+O[g>>2],_t=+O[v>>2],ge=(ne=+O[w>>2])-(le=+O[P>>2]),j=1,se=.25*(ct+dt+nt+se)-.5*(ct=se-ct),Zt=.25*(_t+ne+le+(Zt=+O[U>>2]))-.5*(_t=Zt-_t),le=.5*((we=dt-nt)+ct),ne=.5*(ge+_t),we=.5*(ct-we),ge=.5*(_t-ge)),!(Bt<3&-2<d&d<3&-2<Bt)){O[C+(he<<3)>>2]=Bt*we+(d*le+se),Bt*=ge,Rt=d*ne+Zt;break}do{if(d<=0){if(Bt<=0){ht=se-(Lt=2*we),Xt=Zt-(Mt=2*ge),Lt=(re=se-2*le)-Lt,Mt=(zt=Zt-2*ne)-Mt,me=+O[N>>2],ue=+O[v>>2],pt=.5*(2+d),ot=.5*(Bt+2);break}if(J){Mt=(ot=0|(J=(0|$)==(0|(J=~~Le))?S:J))/it,pt=(0|(St=J+1|0))/it,J=0|Ie(J,D),St=0|Ie(St,D),ht=+O[N+(J<<3)>>2],Xt=+O[N+(J<<3)+4>>2],Lt=Mt*we+(re=se-2*le),Mt=Mt*ge+(zt=Zt-2*ne),me=+O[N+(St<<3)>>2],ue=+O[N+(St<<3)+4>>2],re=pt*we+re,zt=pt*ge+zt,pt=.5*(2+d),ot=Le-ot;break}ht=+O[x>>2],Xt=+O[P>>2],Lt=we+(re=se-2*le),Mt=ge+(zt=Zt-2*ne),me=(ot=3*we)+se,ue=(pt=3*ge)+Zt,re=ot+re,zt=pt+zt,pt=.5*(2+d),ot=.5*(Bt+-1);break}if(u=Bt<=0,o){if(u){ht=(Xt=(0|(J=(St=(0|V)==(0|(St=~~Rt))?G:St)+1|0))/Z)*le+se-(Lt=2*we),Xt=Xt*ne+Zt-(Mt=2*ge),Lt=(me=(pt=0|St)/Z)*le+se-Lt,Mt=me*ne+Zt-Mt,me=+O[N+(J<<3)>>2],ue=+O[N+(J<<3)+4>>2],re=+O[N+(St<<3)>>2],zt=+O[N+(St<<3)+4>>2],pt=Rt-pt,ot=.5*(Bt+2);break}if(J){n[lt>>2]=he,oe[lt+8>>3]=d,oe[lt+16>>3]=Bt,wt(0,865,lt);break}pt=0|(St=(0|V)==(0|(St=~~Rt))?G:St),ue=(0|(J=St+1|0))/Z,ht=+O[N+((J=J+B|0)<<3)>>2],Xt=+O[N+(J<<3)+4>>2],Lt=+O[N+((St=St+B|0)<<3)>>2],Mt=+O[N+(St<<3)+4>>2],me=(re=3*we)+(ue*le+se),ue=(ot=3*ge)+(ue*ne+Zt),re+=(zt=pt/Z)*le+se,zt=ot+(zt*ne+Zt),pt=Rt-pt,ot=.5*(Bt+-1);break}if(u){ht=(me=3*le+se)-(Lt=2*we),Xt=(ue=3*ne+Zt)-(Mt=2*ge),Lt=le+se-Lt,Mt=ne+Zt-Mt,re=+O[E>>2],zt=+O[w>>2],pt=.5*(d-1),ot=.5*(Bt+2);break}if(J){Xt=(ot=0|(J=(0|$)==(0|(J=~~Le))?S:J))/it,re=(0|(St=J+1|0))/it,J=(0|Ie(J,D))+V|0,St=(0|Ie(St,D))+V|0,ht=Xt*we+(me=3*le+se),Xt=Xt*ge+(ue=3*ne+Zt),Lt=+O[N+(J<<3)>>2],Mt=+O[N+(J<<3)+4>>2],me=re*we+me,ue=re*ge+ue,re=+O[N+(St<<3)>>2],zt=+O[N+(St<<3)+4>>2],pt=.5*(d-1),ot=Le-ot;break}ht=we+(me=3*le+se),Xt=ge+(ue=3*ne+Zt),Lt=+O[g>>2],Mt=+O[U>>2],me=(re=3*we)+me,ue=(zt=3*ge)+ue,re+=le+se,zt+=ne+Zt,pt=.5*(d-1),ot=.5*(Bt+-1);break}while(0);if(pt+ot<=1){O[C+(he<<3)>>2]=Lt+(ht-Lt)*pt+(re-Lt)*ot,Bt=Mt+(Xt-Mt)*pt,Rt=(zt-Mt)*ot;break}O[C+(he<<3)>>2]=me+(re-me)*(Bt=1-pt)+(ht-me)*(Rt=1-ot),Bt=ue+(zt-ue)*Bt,Rt*=Xt-ue;break}while(0)}while(O[C+(he<<3)+4>>2]=Bt+Rt,(0|(he=he+1|0))!=(0|T));L=tr}},function(o,u,p,C,T){o|=0,u|=0,p|=0,C|=0,T|=0;var d,E,x,g,v=0,w=0,P=0,U=0;if(u=0|n[(0|n[o+308>>2])+(u<<5)+16>>2],w=3.1415927410125732*(+O[(0|n[o+168>>2])+(12*u|0)+4>>2]+ +O[(0|n[o+284>>2])+(u<<2)>>2])/180,v=+bn(w),w=+Xr(w),E=(w*=d=+O[(0|n[o+272>>2])+(u<<2)>>2])*(P=0|n[(0|n[o+288>>2])+(u<<2)>>2]?-1:1),d=(v*=d)*(U=0|n[(0|n[o+292>>2])+(u<<2)>>2]?-1:1),P*=v,U*=w,w=+O[(0|n[o+276>>2])+(u<<2)>>2],v=+O[(0|n[o+280>>2])+(u<<2)>>2],!((0|T)<=0))for(u=0;g=+O[p+(u<<3)>>2],x=+O[p+(u<<3)+4>>2],O[C+(u<<3)>>2]=E*g-d*x+w,O[C+(u<<3)+4>>2]=P*g+U*x+v,(0|(u=u+1|0))!=(0|T););}];return{___errno_location:function(){return 3688},___muldi3:Ou,___udivdi3:Fu,_bitshift64Lshr:Ea,_bitshift64Shl:L2,_csmFree:function(o){Uu(o|=0)},_csmGetDrawableConstantFlags:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[888+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1896,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableCount:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+332>>2],L=p,0|u):(n[u>>2]=1858,n[u+4>>2]=1411,wt(0,1269,u),L=p,0|(u=-1))},_csmGetDrawableDrawOrders:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+440>>2],L=p,0|u):(n[u>>2]=1980,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableDynamicFlags:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+432>>2],L=p,0|u):(n[u>>2]=1924,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableIds:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[832+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1878,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableIndexCounts:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[904+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=2182,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableIndices:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[840+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=2208,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableMaskCounts:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[912+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=2056,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableMasks:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[844+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=2081,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableMultiplyColors:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+452>>2],L=p,0|u):(n[u>>2]=2230,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableOpacities:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+448>>2],L=p,0|u):(n[u>>2]=2032,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableParentPartIndices:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[876+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=2286,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableRenderOrders:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+436>>2],L=p,0|u):(n[u>>2]=2005,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableScreenColors:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+456>>2],L=p,0|u):(n[u>>2]=2259,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableTextureIndices:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[884+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1951,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableVertexCounts:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[892+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=2101,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableVertexPositions:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+444>>2],L=p,0|u):(n[u>>2]=2128,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetDrawableVertexUvs:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[836+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=2158,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetLatestMocVersion:function(){return 4},_csmGetMocVersion:function(o,u){u|=0;var p=L;return L=L+16|0,u=p,(o|=0)?(o=0|Zx(o),L=p,0|o):(n[u>>2]=1286,n[u+4>>2]=1303,wt(0,1269,u),L=p,(o=0)|o)},_csmGetParameterCount:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+540>>2],L=p,0|u):(n[u>>2]=1610,n[u+4>>2]=1411,wt(0,1269,u),L=p,0|(u=-1))},_csmGetParameterDefaultValues:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[932+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1729,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetParameterIds:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[916+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1631,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetParameterKeyCounts:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+616>>2],L=p,0|u):(n[u>>2]=2347,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetParameterKeyValues:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+612>>2],L=p,0|u):(n[u>>2]=2372,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetParameterMaximumValues:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[924+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1700,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetParameterMinimumValues:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[928+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1671,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetParameterTypes:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+548>>2],L=p,0|u):(n[u>>2]=1650,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetParameterValues:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+552>>2],L=p,0|u):(n[u>>2]=1758,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetPartCount:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+4>>2],L=p,0|u):(n[u>>2]=1780,n[u+4>>2]=1411,wt(0,1269,u),L=p,0|(u=-1))},_csmGetPartIds:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[712+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1796,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetPartOpacities:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[o+52>>2],L=p,0|u):(n[u>>2]=1810,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetPartParentPartIndices:function(o){var u=0,p=L;return L=L+16|0,u=p,(o|=0)?(u=0|n[740+(0|n[o>>2])>>2],L=p,0|u):(n[u>>2]=1830,n[u+4>>2]=1411,wt(0,1269,u),L=p,(u=0)|u)},_csmGetSizeofModel:g2,_csmGetVersion:function(){return 67239938},_csmInitializeModelInPlace:y2,_csmMalloc:function(o){return 0|Su(o|=0)},_csmMallocMoc:function(o){var u,p=L;return L=L+16|0,O2(u=p,64,o|=0),L=p,0|n[u>>2]},_csmMallocModelAndInitialize:function(o){var u=0,p=0,C=L;return L=L+16|0,u=C,0|(o|=0)&&!(0|O2(u,16,p=0|g2(o)))?(u=0|y2(o,o=0|n[u>>2],p))||(Uu(o),u=0):u=0,L=C,0|u},_csmReadCanvasInfo:function(o,u,p,C){u|=0,p|=0,C|=0;var T,d,E,x=0,g=L;if(L=L+32|0,d=g+24|0,x=g+16|0,E=g+8|0,T=g,o|=0)return u?p?void(L=(C?(x=0|n[708+(0|n[o>>2])>>2],n[u>>2]=n[x+12>>2],n[u+4>>2]=n[x+16>>2],n[p>>2]=n[x+4>>2],n[p+4>>2]=n[x+8>>2],n[C>>2]=n[x>>2]):(n[d>>2]=1393,n[4+d>>2]=1487,wt(0,1269,d)),g)):(n[x>>2]=1393,n[x+4>>2]=1458,wt(0,1269,x),void(L=g)):(n[E>>2]=1393,n[4+E>>2]=1431,wt(0,1269,E),void(L=g));n[T>>2]=1393,n[T+4>>2]=1411,wt(0,1269,T),L=g},_csmResetDrawableDynamicFlags:function(o){var u,p=L;L=L+16|0,u=p,L=((o|=0)?n[o+428>>2]=1:(n[u>>2]=2318,n[u+4>>2]=1411,wt(0,1269,u)),p)},_csmReviveMocInPlace:function(o,u){u|=0;var p,C=0,T=0,d=L;return L=L+32|0,T=d+16|0,p=d+8|0,C=d,(o|=0)?((C=o)+63&-64|0)!=(0|C)?(n[p>>2]=1322,n[4+p>>2]=1342,wt(0,1269,p),L=d,(T=0)|T):0|u&&(u+63&-64|0)==(0|u)?(T=0|Yx(o),L=d,0|T):(n[T>>2]=1322,n[T+4>>2]=1374,wt(0,1269,T),L=d,(T=0)|T):(n[C>>2]=1322,n[C+4>>2]=1303,wt(0,1269,C),L=d,(T=0)|T)},_csmSetLogFunction:function(o){n[904]=o|=0},_csmUpdateModel:function(o){var u,p=L;L=L+16|0,u=p,L=((o|=0)?b2(o):(n[u>>2]=1595,n[u+4>>2]=1411,wt(0,1269,u)),p)},_emscripten_get_sbrk_ptr:pT,_emscripten_replace_memory:function(o){return K=new Int8Array(o),Ht=new Uint8Array(o),de=new Int16Array(o),Je=new Uint16Array(o),n=new Int32Array(o),O=new Float32Array(o),oe=new Float64Array(o),!0},_free:Uu,_i64Add:ms,_i64Subtract:wa,_malloc:Su,_memcpy:Pr,_memset:mr,dynCall_ii:function(o,u){return 0|vT[3&(o|=0)](0|(u|=0))},dynCall_iiii:function(o,u,p,C){return 0|Ca[3&(o|=0)](0|(u|=0),0|(p|=0),0|(C|=0))},dynCall_iiiii:function(o,u,p,C,T){return 0|_T[3&(o|=0)](0|(u|=0),0|(p|=0),0|(C|=0),0|(T|=0))},dynCall_vi:function(o,u){k2[1&(o|=0)](0|(u|=0))},dynCall_vii:function(o,u,p){B2[3&(o|=0)](0|(u|=0),0|(p|=0))},dynCall_viiiii:function(o,u,p,C,T,d){Wi[3&(o|=0)](0|(u|=0),0|(p|=0),0|(C|=0),0|(T|=0),0|(d|=0))},establishStackSpace:function(o,u){L=o|=0},stackAlloc:function(o){var u=L;return L=(L=L+(o|=0)|0)+15&-16,0|u},stackRestore:function(o){L=o|=0},stackSave:function(){return 0|L}}}({Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Float32Array,Float64Array},{a:Ut,b:function(Y){Ct=Y},c:function(){return Ct},d:function(Y,Q){return bt[Y](Q)},e:function(Y,Q,vt,K){return bt[Y](Q,vt,K)},f:function(Y,Q,vt,K,de){return bt[Y](Q,vt,K,de)},g:function(Y,Q){bt[Y](Q)},h:function(Y,Q,vt){bt[Y](Q,vt)},i:function(Y,Q,vt,K,de,n){bt[Y](Q,vt,K,de,n)},j:function(){return ti.apply(null,arguments)},k:Hi,l:function(Y,Q,vt){Ot.set(Ot.subarray(Q,Q+vt),Y)},m:function(Y){if(2130706432<Y)return!1;for(var Q=Math.max(Hi(),16777216);Q<Y;)Q=Q<=536870912?gt(2*Q):Math.min(gt((3*Q+2147483648)/4),2130706432);return!!ds(Q)},n:ti,o:function(){Ut("OOM")},p:function(Y){return Y},q:_e,r:ds,s:function(){var Y=b._fflush;Y&&Y(0),jt[1].length&&sr(1,10),jt[2].length&&sr(2,10)},t:ce,u:function(){var Y=ce();return b.extraStackTrace&&(Y+=`
`+b.extraStackTrace()),_e(Y)},v:4400},xt),Sx=(b.___errno_location=mt.___errno_location,b.___muldi3=mt.___muldi3,b.___udivdi3=mt.___udivdi3,b._bitshift64Lshr=mt._bitshift64Lshr,b._bitshift64Shl=mt._bitshift64Shl,b._csmFree=mt._csmFree,b._csmGetDrawableConstantFlags=mt._csmGetDrawableConstantFlags,b._csmGetDrawableCount=mt._csmGetDrawableCount,b._csmGetDrawableDrawOrders=mt._csmGetDrawableDrawOrders,b._csmGetDrawableDynamicFlags=mt._csmGetDrawableDynamicFlags,b._csmGetDrawableIds=mt._csmGetDrawableIds,b._csmGetDrawableIndexCounts=mt._csmGetDrawableIndexCounts,b._csmGetDrawableIndices=mt._csmGetDrawableIndices,b._csmGetDrawableMaskCounts=mt._csmGetDrawableMaskCounts,b._csmGetDrawableMasks=mt._csmGetDrawableMasks,b._csmGetDrawableMultiplyColors=mt._csmGetDrawableMultiplyColors,b._csmGetDrawableOpacities=mt._csmGetDrawableOpacities,b._csmGetDrawableParentPartIndices=mt._csmGetDrawableParentPartIndices,b._csmGetDrawableRenderOrders=mt._csmGetDrawableRenderOrders,b._csmGetDrawableScreenColors=mt._csmGetDrawableScreenColors,b._csmGetDrawableTextureIndices=mt._csmGetDrawableTextureIndices,b._csmGetDrawableVertexCounts=mt._csmGetDrawableVertexCounts,b._csmGetDrawableVertexPositions=mt._csmGetDrawableVertexPositions,b._csmGetDrawableVertexUvs=mt._csmGetDrawableVertexUvs,b._csmGetLatestMocVersion=mt._csmGetLatestMocVersion,b._csmGetMocVersion=mt._csmGetMocVersion,b._csmGetParameterCount=mt._csmGetParameterCount,b._csmGetParameterDefaultValues=mt._csmGetParameterDefaultValues,b._csmGetParameterIds=mt._csmGetParameterIds,b._csmGetParameterKeyCounts=mt._csmGetParameterKeyCounts,b._csmGetParameterKeyValues=mt._csmGetParameterKeyValues,b._csmGetParameterMaximumValues=mt._csmGetParameterMaximumValues,b._csmGetParameterMinimumValues=mt._csmGetParameterMinimumValues,b._csmGetParameterTypes=mt._csmGetParameterTypes,b._csmGetParameterValues=mt._csmGetParameterValues,b._csmGetPartCount=mt._csmGetPartCount,b._csmGetPartIds=mt._csmGetPartIds,b._csmGetPartOpacities=mt._csmGetPartOpacities,b._csmGetPartParentPartIndices=mt._csmGetPartParentPartIndices,b._csmGetSizeofModel=mt._csmGetSizeofModel,b._csmGetVersion=mt._csmGetVersion,b._csmInitializeModelInPlace=mt._csmInitializeModelInPlace,b._csmMalloc=mt._csmMalloc,b._csmMallocMoc=mt._csmMallocMoc,b._csmMallocModelAndInitialize=mt._csmMallocModelAndInitialize,b._csmReadCanvasInfo=mt._csmReadCanvasInfo,b._csmResetDrawableDynamicFlags=mt._csmResetDrawableDynamicFlags,b._csmReviveMocInPlace=mt._csmReviveMocInPlace,b._csmSetLogFunction=mt._csmSetLogFunction,b._csmUpdateModel=mt._csmUpdateModel,b._emscripten_get_sbrk_ptr=mt._emscripten_get_sbrk_ptr,b._emscripten_replace_memory=mt._emscripten_replace_memory),c2=(b._free=mt._free,b._i64Add=mt._i64Add,b._i64Subtract=mt._i64Subtract,b._malloc=mt._malloc,b._memcpy=mt._memcpy,b._memset=mt._memset,b.establishStackSpace=mt.establishStackSpace,b.stackAlloc=mt.stackAlloc),Ux=b.stackRestore=mt.stackRestore,Ox=b.stackSave=mt.stackSave;function Pu(){function Y(){if(!vs&&(vs=!0,!Gt)){if(Pt(kt),Pt(Kt),b.onRuntimeInitialized&&b.onRuntimeInitialized(),b.postRun)for(typeof b.postRun=="function"&&(b.postRun=[b.postRun]);b.postRun.length;){var Q=b.postRun.shift();ie.unshift(Q)}Pt(ie)}}if(!(0<Yt)){if(b.preRun)for(typeof b.preRun=="function"&&(b.preRun=[b.preRun]);b.preRun.length;)(function(){var Q=b.preRun.shift();$t.unshift(Q)})();Pt($t),0<Yt||(b.setStatus?(b.setStatus("Running..."),setTimeout(function(){setTimeout(function(){b.setStatus("")},1),Y()},1)):Y())}}if(b.dynCall_ii=mt.dynCall_ii,b.dynCall_iiii=mt.dynCall_iiii,b.dynCall_iiiii=mt.dynCall_iiiii,b.dynCall_vi=mt.dynCall_vi,b.dynCall_vii=mt.dynCall_vii,b.dynCall_viiiii=mt.dynCall_viiiii,b.asm=mt,b.ccall=function(Y,Q,vt,K){var de={string:function(oe){var Ve=0;if(oe!=null&&oe!==0){var Hr=1+(oe.length<<2),Ke=Ve=c2(Hr),Xr=Ot;if(0<Hr){for(var Hr=Ke+Hr-1,bn=0;bn<oe.length;++bn){var qe=oe.charCodeAt(bn);if((qe=55296<=qe&&qe<=57343?65536+((1023&qe)<<10)|1023&oe.charCodeAt(++bn):qe)<=127){if(Hr<=Ke)break;Xr[Ke++]=qe}else{if(qe<=2047){if(Hr<=Ke+1)break;Xr[Ke++]=192|qe>>6}else{if(qe<=65535){if(Hr<=Ke+2)break;Xr[Ke++]=224|qe>>12}else{if(Hr<=Ke+3)break;Xr[Ke++]=240|qe>>18,Xr[Ke++]=128|qe>>12&63}Xr[Ke++]=128|qe>>6&63}Xr[Ke++]=128|63&qe}}Xr[Ke]=0}}return Ve},array:function(oe){var Ve=c2(oe.length);return Tt.set(oe,Ve),Ve}},n=function(oe){var Ve=b["_"+oe];return ee(Ve,"Cannot call unknown function "+oe+", make sure it is exported"),Ve}(Y),Ht=[];if(Y=0,K)for(var Je=0;Je<K.length;Je++){var O=de[vt[Je]];O?(Y===0&&(Y=Ox()),Ht[Je]=O(K[Je])):Ht[Je]=K[Je]}return vt=function(oe){return Q==="string"?at(oe):Q==="boolean"?!!oe:oe}(vt=n.apply(null,Ht)),Y!==0&&Ux(Y),vt},b.UTF8ToString=at,b.addFunction=function(Y){for(var Q=0;Q<1;Q++)if(!bt[Q])return bt[Q]=Y,1+Q;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},Ft&&((String.prototype.startsWith?Ft.startsWith(It):Ft.indexOf(It)===0)||(z=Ft,Ft=b.locateFile?b.locateFile(z,rt):rt+z),W||X?(mt=H(Ft),Ot.set(mt,8)):(Yt++,b.monitorRunDependencies&&b.monitorRunDependencies(Yt),xa=function(Y){Y.byteLength&&(Y=new Uint8Array(Y)),Ot.set(Y,8),b.memoryInitializerRequest&&delete b.memoryInitializerRequest.response,Yt--,b.monitorRunDependencies&&b.monitorRunDependencies(Yt),Yt==0&&qt&&(Y=qt,qt=null,Y())},Cu=function(){F(function(){throw"could not load memory initializer "+Ft})},(rt=pi(Ft))?xa(rt.buffer):b.memoryInitializerRequest?(z=function(){var Y=b.memoryInitializerRequest,Q=Y.response;if(Y.status!==200&&Y.status!==0){if(!(Q=pi(b.memoryInitializerRequestURL)))return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+Y.status+", retrying "+Ft),void Cu();Q=Q.buffer}xa(Q)},b.memoryInitializerRequest.response?setTimeout(z,0):b.memoryInitializerRequest.addEventListener("load",z)):Cu())),b.then=function(Y){var Q;return vs?Y(b):(Q=b.onRuntimeInitialized,b.onRuntimeInitialized=function(){Q&&Q(),Y(b)}),b},qt=function Y(){vs||Pu(),vs||(qt=Y)},b.run=Pu,b.preInit)for(typeof b.preInit=="function"&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();return Pu(),y}}();typeof We=="object"&&typeof module=="object"?module.exports=A:typeof define=="function"&&define.amd?define([],function(){return A}):typeof We=="object"&&(We._em_module=A);var m=A()})($e||($e={})),window.Live2DCubismCore=$e,window._iconfont_svg_string_3847283='<svg><symbol id="icon-bed1" viewBox="0 0 1280 1024"><path d="M352 512c88.22 0 160-71.78 160-160s-71.78-160-160-160-160 71.78-160 160 71.78 160 160 160z m704-256H608c-17.68 0-32 14.32-32 32v288H128V160c0-17.68-14.32-32-32-32H32C14.32 128 0 142.32 0 160v704c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32v-96h1024v96c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32V480c0-123.72-100.28-224-224-224z"  ></path></symbol><symbol id="icon-info-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272z m-32-344c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"  ></path></symbol><symbol id="icon-heart-fill" viewBox="0 0 1024 1024"><path d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"  ></path></symbol><symbol id="icon-skin-fill" viewBox="0 0 1024 1024"><path d="M870 126H663.8c-17.4 0-32.9 11.9-37 29.3C614.3 208.1 567 246 512 246s-102.3-37.9-114.8-90.7c-4.1-17.4-19.5-29.3-37-29.3H154c-24.3 0-44 19.7-44 44v252c0 24.3 19.7 44 44 44h75v388c0 24.3 19.7 44 44 44h478c24.3 0 44-19.7 44-44V466h75c24.3 0 44-19.7 44-44V170c0-24.3-19.7-44-44-44z"  ></path></symbol><symbol id="icon-setting-fill" viewBox="0 0 1024 1024"><path d="M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1-21.2-21.2-49.2-32.8-79.1-32.8z"  ></path><path d="M924.8 626.1l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9c10.1-8.6 13.8-22.6 9.3-35.2l-0.9-2.6c-18.1-50.4-44.8-96.8-79.6-137.7l-1.8-2.1c-8.6-10.1-22.5-13.9-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9c-2.4-13.1-12.7-23.3-25.8-25.7l-2.7-0.5c-52-9.4-106.8-9.4-158.8 0l-2.7 0.5c-13.1 2.4-23.4 12.6-25.8 25.7l-15.8 85.3c-35.9 13.6-69.1 32.9-98.9 57.3l-81.8-29.1c-12.5-4.4-26.5-0.7-35.1 9.5l-1.8 2.1c-34.8 41.1-61.5 87.4-79.6 137.7l-0.9 2.6c-4.5 12.5-0.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5c-10.1 8.6-13.8 22.6-9.3 35.2l0.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1c8.6 10.1 22.5 13.9 35.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3c2.4 13.1 12.7 23.3 25.8 25.7l2.7 0.5c26.1 4.7 52.7 7.1 79.4 7.1 26.7 0 53.4-2.4 79.4-7.1l2.7-0.5c13.1-2.4 23.4-12.6 25.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9c12.5 4.4 26.5 0.7 35.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l0.9-2.6c4.3-12.4 0.6-26.3-9.5-35z m-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"  ></path></symbol><symbol id="icon-a-userswitch-fill" viewBox="0 0 1024 1024"><path d="M512 565c133.7 0 242-108.3 242-242S645.7 81 512 81 270 189.3 270 323s108.3 242 242 242z m4.8 299.3a264.4 264.4 0 0 1 0-205.6c2.3-5.4 4.8-10.8 7.4-16a4 4 0 0 0-3.7-5.8H512a311.4 311.4 0 0 1-122.2-24.7 319.8 319.8 0 0 1-57.9-32 4 4 0 0 0-4.2-0.3C208.7 645.3 128 771.7 128 917v25a4 4 0 0 0 4 4h429.9a4 4 0 0 0 3-6.7 261.9 261.9 0 0 1-48.1-75zM760 568c-106 0-192 86-192 192s86 192 192 192 192-86 192-192-86-192-192-192z m-98.4 136a4 4 0 0 1 4-4h124v-33.4c0-16 20.8-22.1 29.4-8.7l36.9 57.5a16 16 0 0 1-13.5 24.6H665.6a4 4 0 0 1-4-4z m196.8 112a4 4 0 0 1-4 4h-124v33.4c0 16-20.8 22.1-29.4 8.7l-36.9-57.5a16 16 0 0 1 13.5-24.6h176.8a4 4 0 0 1 4 4z"  ></path></symbol><symbol id="icon-loading" viewBox="0 0 1024 1024"><path d="M563.2 819.2a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z m-320.4608-153.6a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m592.7936 25.6a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8zM947.2 477.1328a76.8 76.8 0 1 1 0 153.6 76.8 76.8 0 0 1 0-153.6zM128 307.2a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m782.6432-40.6016a51.2 51.2 0 1 1 0 102.4 51.2 51.2 0 0 1 0-102.4zM409.6 0a153.6 153.6 0 1 1 0 307.2 153.6 153.6 0 0 1 0-307.2z m384 153.6a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z"  ></path></symbol></svg>',function(t){var r=(r=document.getElementsByTagName("script"))[r.length-1],e=r.getAttribute("data-injectcss"),r=r.getAttribute("data-disable-injectsvg");if(!r){var i,s,a,h,l,f=function(A,m){m.parentNode.insertBefore(A,m)};if(e&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(A){console&&console.log(A)}}i=function(){var A,m=document.createElement("div");m.innerHTML=t._iconfont_svg_string_3847283,(m=m.getElementsByTagName("svg")[0])&&(m.setAttribute("aria-hidden","true"),m.style.position="absolute",m.style.width=0,m.style.height=0,m.style.overflow="hidden",m=m,(A=document.body).firstChild?f(m,A.firstChild):A.appendChild(m))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(i,0):(s=function(){document.removeEventListener("DOMContentLoaded",s,!1),i()},document.addEventListener("DOMContentLoaded",s,!1)):document.attachEvent&&(a=i,h=t.document,l=!1,_(),h.onreadystatechange=function(){h.readyState=="complete"&&(h.onreadystatechange=null,c())})}function c(){l||(l=!0,a())}function _(){try{h.documentElement.doScroll("left")}catch(A){return void setTimeout(_,50)}c()}}(window);const or={fixed:!0,sayHello:!0,transitionTime:1e3,parentElement:document.body,models:[],tips:{style:{width:230,height:100,offsetX:0,offsetY:0},idleTips:{message:[],duration:3e3,interval:8e3,priority:2},welcomeTips:{message:{daybreak:"早上好！一日之计在于晨，美好的一天就要开始了。",morning:"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！",noon:"中午了，工作了一个上午，现在是午餐时间！",afternoon:"午后很容易犯困呢，来杯咖啡吧~",dusk:"傍晚了！工作一天幸苦啦~",night:"晚上好，今天过得怎么样呢？",lateNight:"已经这么晚了呀，早点休息吧，晚安~",weeHours:"这么晚还不睡吗？当心熬夜秃头哦！"},duration:6e3,priority:3}}},ei={stageId:"oml2dStage",canvasId:"oml2dCanvas",statusBarId:"oml2dStatusBar",tipsId:"oml2dTips",menusId:"oml2dMenus"},gs=[{id:"SwitchModel",name:"icon-a-userswitch-fill",title:"切换模型"},{id:"Play",name:"icon-skin-fill",title:"变装"},{id:"About",name:"icon-info-circle-fill",title:"关于"}];function Ra(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function Na(t){var e=this;return new e(function(r,i){if(!(t&&typeof t.length!="undefined"))return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var s=Array.prototype.slice.call(t);if(s.length===0)return r([]);var a=s.length;function h(f,c){if(c&&(typeof c=="object"||typeof c=="function")){var _=c.then;if(typeof _=="function"){_.call(c,function(A){h(f,A)},function(A){s[f]={status:"rejected",reason:A},--a===0&&r(s)});return}}s[f]={status:"fulfilled",value:c},--a===0&&r(s)}for(var l=0;l<s.length;l++)h(l,s[l])})}function Zi(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}Zi.prototype=Error.prototype;function Vr(t){var e=this;return new e(function(r,i){if(!(t&&typeof t.length!="undefined"))return i(new TypeError("Promise.any accepts an array"));var s=Array.prototype.slice.call(t);if(s.length===0)return i();for(var a=[],h=0;h<s.length;h++)try{e.resolve(s[h]).then(r).catch(function(l){a.push(l),a.length===s.length&&i(new Zi(a,"All promises were rejected"))})}catch(l){i(l)}})}var An=setTimeout;function Mu(t){return Boolean(t&&typeof t.length!="undefined")}function H2(){}function X2(t,e){return function(){t.apply(e,arguments)}}function Pe(t){if(!(this instanceof Pe))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ku(t,this)}function Gu(t,e){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(e);return}t._handled=!0,Pe._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?Sa:In)(e.promise,t._value);return}var i;try{i=r(t._value)}catch(s){In(e.promise,s);return}Sa(e.promise,i)})}function Sa(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var r=e.then;if(e instanceof Pe){t._state=3,t._value=e,Ua(t);return}else if(typeof r=="function"){ku(X2(r,e),t);return}}t._state=1,t._value=e,Ua(t)}catch(i){In(t,i)}}function In(t,e){t._state=2,t._value=e,Ua(t)}function Ua(t){t._state===2&&t._deferreds.length===0&&Pe._immediateFn(function(){t._handled||Pe._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)Gu(t,t._deferreds[e]);t._deferreds=null}function V2(t,e,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.promise=r}function ku(t,e){var r=!1;try{t(function(i){r||(r=!0,Sa(e,i))},function(i){r||(r=!0,In(e,i))})}catch(i){if(r)return;r=!0,In(e,i)}}Pe.prototype.catch=function(t){return this.then(null,t)},Pe.prototype.then=function(t,e){var r=new this.constructor(H2);return Gu(this,new V2(t,e,r)),r},Pe.prototype.finally=Ra,Pe.all=function(t){return new Pe(function(e,r){if(!Mu(t))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return e([]);var s=i.length;function a(l,f){try{if(f&&(typeof f=="object"||typeof f=="function")){var c=f.then;if(typeof c=="function"){c.call(f,function(_){a(l,_)},r);return}}i[l]=f,--s===0&&e(i)}catch(_){r(_)}}for(var h=0;h<i.length;h++)a(h,i[h])})},Pe.any=Vr,Pe.allSettled=Na,Pe.resolve=function(t){return t&&typeof t=="object"&&t.constructor===Pe?t:new Pe(function(e){e(t)})},Pe.reject=function(t){return new Pe(function(e,r){r(t)})},Pe.race=function(t){return new Pe(function(e,r){if(!Mu(t))return r(new TypeError("Promise.race accepts an array"));for(var i=0,s=t.length;i<s;i++)Pe.resolve(t[i]).then(e,r)})},Pe._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){An(t,0)},Pe._unhandledRejectionFn=function(e){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Oa=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Bu=Object.getOwnPropertySymbols,z2=Object.prototype.hasOwnProperty,j2=Object.prototype.propertyIsEnumerable;function W2(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function $2(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(i.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(a){s[a]=a}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}var Y2=$2()?Object.assign:function(t,e){for(var r,i=W2(t),s,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var h in r)z2.call(r,h)&&(i[h]=r[h]);if(Bu){s=Bu(r);for(var l=0;l<s.length;l++)j2.call(r,s[l])&&(i[s[l]]=r[s[l]])}}return i};/*!
 * @pixi/polyfill - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof global!="undefined"&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=Pe),Object.assign||(Object.assign=Y2);var Z2=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(globalThis.performance&&globalThis.performance.now)){var q2=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-q2}}for(var Fa=Date.now(),Du=["ms","moz","webkit","o"],La=0;La<Du.length&&!globalThis.requestAnimationFrame;++La){var Ma=Du[La];globalThis.requestAnimationFrame=globalThis[Ma+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Ma+"CancelAnimationFrame"]||globalThis[Ma+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if(typeof t!="function")throw new TypeError(t+"is not a function");var e=Date.now(),r=Z2+Fa-e;return r<0&&(r=0),Fa=e,globalThis.self.setTimeout(function(){Fa=Date.now(),t(performance.now())},r)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Hu;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Hu||(Hu={}));var Xu;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Xu||(Xu={}));var Vu;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Vu||(Vu={}));var zu;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(zu||(zu={}));var ju;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ju||(ju={}));var Wu;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Wu||(Wu={}));var $u;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})($u||($u={}));var Yu;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Yu||(Yu={}));var Zu;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Zu||(Zu={}));var Ga;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Ga||(Ga={}));var ka;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ka||(ka={}));var Ba;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Ba||(Ba={}));var qu;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(qu||(qu={}));var Ju;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Ju||(Ju={}));var Da;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Da||(Da={}));var wn;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(wn||(wn={}));var Ku;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Ku||(Ku={}));var Qu;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Qu||(Qu={}));var Ha;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Ha||(Ha={}));var tl;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(tl||(tl={}));var el={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},Xa=/iPhone/i,rl=/iPod/i,il=/iPad/i,nl=/\biOS-universal(?:.+)Mac\b/i,Va=/\bAndroid(?:.+)Mobile\b/i,sl=/Android/i,qi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ys=/Silk/i,zr=/Windows Phone/i,al=/\bWindows(?:.+)ARM\b/i,ol=/BlackBerry/i,hl=/BB10/i,ul=/Opera Mini/i,ll=/\b(CriOS|Chrome)(?:.+)Mobile/i,fl=/Mobile(?:.+)Firefox\b/i,cl=function(t){return typeof t!="undefined"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream=="undefined"};function J2(t){return function(e){return e.test(t)}}function K2(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator!="undefined"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]!="undefined"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]!="undefined"&&(r=i[0]);var s=J2(r),a={apple:{phone:s(Xa)&&!s(zr),ipod:s(rl),tablet:!s(Xa)&&(s(il)||cl(e))&&!s(zr),universal:s(nl),device:(s(Xa)||s(rl)||s(il)||s(nl)||cl(e))&&!s(zr)},amazon:{phone:s(qi),tablet:!s(qi)&&s(ys),device:s(qi)||s(ys)},android:{phone:!s(zr)&&s(qi)||!s(zr)&&s(Va),tablet:!s(zr)&&!s(qi)&&!s(Va)&&(s(ys)||s(sl)),device:!s(zr)&&(s(qi)||s(ys)||s(Va)||s(sl))||s(/\bokhttp\b/i)},windows:{phone:s(zr),tablet:s(al),device:s(zr)||s(al)},other:{blackberry:s(ol),blackberry10:s(hl),opera:s(ul),firefox:s(fl),chrome:s(ll),device:s(ol)||s(hl)||s(ul)||s(fl)||s(ll)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var hr=K2(globalThis.navigator);function Q2(){return!hr.apple.device}function tp(t){var e=!0;if(hr.tablet||hr.phone){if(hr.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(hr.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}var yt={ADAPTER:el,MIPMAP_TEXTURES:Ba.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Ha.NONE,SPRITE_MAX_TEXTURES:tp(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Da.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:ka.CLAMP,SCALE_MODE:Ga.LINEAR,PRECISION_VERTEX:wn.HIGH,PRECISION_FRAGMENT:hr.apple.device?wn.HIGH:wn.MEDIUM,CAN_UPLOAD_SAME_BUFFER:Q2(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},yr={},ep={get exports(){return yr},set exports(t){yr=t}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(f,c,_){this.fn=f,this.context=c,this.once=_||!1}function a(f,c,_,A,m){if(typeof _!="function")throw new TypeError("The listener must be a function");var I=new s(_,A||f,m),y=r?r+c:c;return f._events[y]?f._events[y].fn?f._events[y]=[f._events[y],I]:f._events[y].push(I):(f._events[y]=I,f._eventsCount++),f}function h(f,c){--f._eventsCount===0?f._events=new i:delete f._events[c]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],_,A;if(this._eventsCount===0)return c;for(A in _=this._events)e.call(_,A)&&c.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(_)):c},l.prototype.listeners=function(c){var _=r?r+c:c,A=this._events[_];if(!A)return[];if(A.fn)return[A.fn];for(var m=0,I=A.length,y=new Array(I);m<I;m++)y[m]=A[m].fn;return y},l.prototype.listenerCount=function(c){var _=r?r+c:c,A=this._events[_];return A?A.fn?1:A.length:0},l.prototype.emit=function(c,_,A,m,I,y){var b=r?r+c:c;if(!this._events[b])return!1;var R=this._events[b],F=arguments.length,k,H;if(R.fn){switch(R.once&&this.removeListener(c,R.fn,void 0,!0),F){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,_),!0;case 3:return R.fn.call(R.context,_,A),!0;case 4:return R.fn.call(R.context,_,A,m),!0;case 5:return R.fn.call(R.context,_,A,m,I),!0;case 6:return R.fn.call(R.context,_,A,m,I,y),!0}for(H=1,k=new Array(F-1);H<F;H++)k[H-1]=arguments[H];R.fn.apply(R.context,k)}else{var z=R.length,W;for(H=0;H<z;H++)switch(R[H].once&&this.removeListener(c,R[H].fn,void 0,!0),F){case 1:R[H].fn.call(R[H].context);break;case 2:R[H].fn.call(R[H].context,_);break;case 3:R[H].fn.call(R[H].context,_,A);break;case 4:R[H].fn.call(R[H].context,_,A,m);break;default:if(!k)for(W=1,k=new Array(F-1);W<F;W++)k[W-1]=arguments[W];R[H].fn.apply(R[H].context,k)}}return!0},l.prototype.on=function(c,_,A){return a(this,c,_,A,!1)},l.prototype.once=function(c,_,A){return a(this,c,_,A,!0)},l.prototype.removeListener=function(c,_,A,m){var I=r?r+c:c;if(!this._events[I])return this;if(!_)return h(this,I),this;var y=this._events[I];if(y.fn)y.fn===_&&(!m||y.once)&&(!A||y.context===A)&&h(this,I);else{for(var b=0,R=[],F=y.length;b<F;b++)(y[b].fn!==_||m&&!y[b].once||A&&y[b].context!==A)&&R.push(y[b]);R.length?this._events[I]=R.length===1?R[0]:R:h(this,I)}return this},l.prototype.removeAllListeners=function(c){var _;return c?(_=r?r+c:c,this._events[_]&&h(this,_)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(ep);var Ji={},rp={get exports(){return Ji},set exports(t){Ji=t}};rp.exports=bs,Ji.default=bs;function bs(t,e,r){r=r||2;var i=e&&e.length,s=i?e[0]*r:t.length,a=dl(t,0,s,r,!0),h=[];if(!a||a.next===a.prev)return h;var l,f,c,_,A,m,I;if(i&&(a=op(t,e,a,r)),t.length>80*r){l=c=t[0],f=_=t[1];for(var y=r;y<s;y+=r)A=t[y],m=t[y+1],A<l&&(l=A),m<f&&(f=m),A>c&&(c=A),m>_&&(_=m);I=Math.max(c-l,_-f),I=I!==0?32767/I:0}return En(a,h,r,l,f,I,0),h}function dl(t,e,r,i,s){var a,h;if(s===Wa(t,e,r,i)>0)for(a=e;a<r;a+=i)h=_l(a,t[a],t[a+1],h);else for(a=r-i;a>=e;a-=i)h=_l(a,t[a],t[a+1],h);return h&&xs(h,h.next)&&(Pn(h),h=h.next),h}function _i(t,e){if(!t)return t;e||(e=t);var r=t,i;do if(i=!1,!r.steiner&&(xs(r,r.next)||Re(r.prev,r,r.next)===0)){if(Pn(r),r=e=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==e);return e}function En(t,e,r,i,s,a,h){if(t){!h&&a&&cp(t,i,s,a);for(var l=t,f,c;t.prev!==t.next;){if(f=t.prev,c=t.next,a?np(t,i,s,a):ip(t)){e.push(f.i/r|0),e.push(t.i/r|0),e.push(c.i/r|0),Pn(t),t=c.next,l=c.next;continue}if(t=c,t===l){h?h===1?(t=sp(_i(t),e,r),En(t,e,r,i,s,a,2)):h===2&&ap(t,e,r,i,s,a):En(_i(t),e,r,i,s,a,1);break}}}}function ip(t){var e=t.prev,r=t,i=t.next;if(Re(e,r,i)>=0)return!1;for(var s=e.x,a=r.x,h=i.x,l=e.y,f=r.y,c=i.y,_=s<a?s<h?s:h:a<h?a:h,A=l<f?l<c?l:c:f<c?f:c,m=s>a?s>h?s:h:a>h?a:h,I=l>f?l>c?l:c:f>c?f:c,y=i.next;y!==e;){if(y.x>=_&&y.x<=m&&y.y>=A&&y.y<=I&&Ki(s,l,a,f,h,c,y.x,y.y)&&Re(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function np(t,e,r,i){var s=t.prev,a=t,h=t.next;if(Re(s,a,h)>=0)return!1;for(var l=s.x,f=a.x,c=h.x,_=s.y,A=a.y,m=h.y,I=l<f?l<c?l:c:f<c?f:c,y=_<A?_<m?_:m:A<m?A:m,b=l>f?l>c?l:c:f>c?f:c,R=_>A?_>m?_:m:A>m?A:m,F=za(I,y,e,r,i),k=za(b,R,e,r,i),H=t.prevZ,z=t.nextZ;H&&H.z>=F&&z&&z.z<=k;){if(H.x>=I&&H.x<=b&&H.y>=y&&H.y<=R&&H!==s&&H!==h&&Ki(l,_,f,A,c,m,H.x,H.y)&&Re(H.prev,H,H.next)>=0||(H=H.prevZ,z.x>=I&&z.x<=b&&z.y>=y&&z.y<=R&&z!==s&&z!==h&&Ki(l,_,f,A,c,m,z.x,z.y)&&Re(z.prev,z,z.next)>=0))return!1;z=z.nextZ}for(;H&&H.z>=F;){if(H.x>=I&&H.x<=b&&H.y>=y&&H.y<=R&&H!==s&&H!==h&&Ki(l,_,f,A,c,m,H.x,H.y)&&Re(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;z&&z.z<=k;){if(z.x>=I&&z.x<=b&&z.y>=y&&z.y<=R&&z!==s&&z!==h&&Ki(l,_,f,A,c,m,z.x,z.y)&&Re(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function sp(t,e,r){var i=t;do{var s=i.prev,a=i.next.next;!xs(s,a)&&pl(s,i,i.next,a)&&Cn(s,a)&&Cn(a,s)&&(e.push(s.i/r|0),e.push(i.i/r|0),e.push(a.i/r|0),Pn(i),Pn(i.next),i=t=a),i=i.next}while(i!==t);return _i(i)}function ap(t,e,r,i,s,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&vp(h,l)){var f=vl(h,l);h=_i(h,h.next),f=_i(f,f.next),En(h,e,r,i,s,a,0),En(f,e,r,i,s,a,0);return}l=l.next}h=h.next}while(h!==t)}function op(t,e,r,i){var s=[],a,h,l,f,c;for(a=0,h=e.length;a<h;a++)l=e[a]*i,f=a<h-1?e[a+1]*i:t.length,c=dl(t,l,f,i,!1),c===c.next&&(c.steiner=!0),s.push(pp(c));for(s.sort(hp),a=0;a<s.length;a++)r=up(s[a],r);return r}function hp(t,e){return t.x-e.x}function up(t,e){var r=lp(t,e);if(!r)return e;var i=vl(r,t);return _i(i,i.next),_i(r,r.next)}function lp(t,e){var r=e,i=t.x,s=t.y,a=-1/0,h;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var l=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(l<=i&&l>a&&(a=l,h=r.x<r.next.x?r:r.next,l===i))return h}r=r.next}while(r!==e);if(!h)return null;var f=h,c=h.x,_=h.y,A=1/0,m;r=h;do i>=r.x&&r.x>=c&&i!==r.x&&Ki(s<_?i:a,s,c,_,s<_?a:i,s,r.x,r.y)&&(m=Math.abs(s-r.y)/(i-r.x),Cn(r,t)&&(m<A||m===A&&(r.x>h.x||r.x===h.x&&fp(h,r)))&&(h=r,A=m)),r=r.next;while(r!==f);return h}function fp(t,e){return Re(t.prev,t,e.prev)<0&&Re(e.next,t,t.next)<0}function cp(t,e,r,i){var s=t;do s.z===0&&(s.z=za(s.x,s.y,e,r,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,dp(s)}function dp(t){var e,r,i,s,a,h,l,f,c=1;do{for(r=t,t=null,a=null,h=0;r;){for(h++,i=r,l=0,e=0;e<c&&(l++,i=i.nextZ,!!i);e++);for(f=c;l>0||f>0&&i;)l!==0&&(f===0||!i||r.z<=i.z)?(s=r,r=r.nextZ,l--):(s=i,i=i.nextZ,f--),a?a.nextZ=s:t=s,s.prevZ=a,a=s;r=i}a.nextZ=null,c*=2}while(h>1);return t}function za(t,e,r,i,s){return t=(t-r)*s|0,e=(e-i)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function pp(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Ki(t,e,r,i,s,a,h,l){return(s-h)*(e-l)>=(t-h)*(a-l)&&(t-h)*(i-l)>=(r-h)*(e-l)&&(r-h)*(a-l)>=(s-h)*(i-l)}function vp(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!_p(t,e)&&(Cn(t,e)&&Cn(e,t)&&mp(t,e)&&(Re(t.prev,t,e.prev)||Re(t,e.prev,e))||xs(t,e)&&Re(t.prev,t,t.next)>0&&Re(e.prev,e,e.next)>0)}function Re(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function xs(t,e){return t.x===e.x&&t.y===e.y}function pl(t,e,r,i){var s=As(Re(t,e,r)),a=As(Re(t,e,i)),h=As(Re(r,i,t)),l=As(Re(r,i,e));return!!(s!==a&&h!==l||s===0&&Ts(t,r,e)||a===0&&Ts(t,i,e)||h===0&&Ts(r,t,i)||l===0&&Ts(r,e,i))}function Ts(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function As(t){return t>0?1:t<0?-1:0}function _p(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&pl(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Cn(t,e){return Re(t.prev,t,t.next)<0?Re(t,e,t.next)>=0&&Re(t,t.prev,e)>=0:Re(t,e,t.prev)<0||Re(t,t.next,e)<0}function mp(t,e){var r=t,i=!1,s=(t.x+e.x)/2,a=(t.y+e.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&s<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==t);return i}function vl(t,e){var r=new ja(t.i,t.x,t.y),i=new ja(e.i,e.x,e.y),s=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=s,s.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function _l(t,e,r,i){var s=new ja(t,e,r);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Pn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ja(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}bs.deviation=function(t,e,r,i){var s=e&&e.length,a=s?e[0]*r:t.length,h=Math.abs(Wa(t,0,a,r));if(s)for(var l=0,f=e.length;l<f;l++){var c=e[l]*r,_=l<f-1?e[l+1]*r:t.length;h-=Math.abs(Wa(t,c,_,r))}var A=0;for(l=0;l<i.length;l+=3){var m=i[l]*r,I=i[l+1]*r,y=i[l+2]*r;A+=Math.abs((t[m]-t[y])*(t[I+1]-t[m+1])-(t[m]-t[I])*(t[y+1]-t[m+1]))}return h===0&&A===0?0:Math.abs((A-h)/h)};function Wa(t,e,r,i){for(var s=0,a=e,h=r-i;a<r;a+=i)s+=(t[h]-t[a])*(t[a+1]+t[h+1]),h=a;return s}bs.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,s=0;s<t.length;s++){for(var a=0;a<t[s].length;a++)for(var h=0;h<e;h++)r.vertices.push(t[s][a][h]);s>0&&(i+=t[s-1].length,r.holes.push(i))}return r};var Is={},gp={get exports(){return Is},set exports(t){Is=t}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(r){var i=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,a=typeof Oa=="object"&&Oa;(a.global===a||a.window===a||a.self===a)&&(r=a);var h,l=2147483647,f=36,c=1,_=26,A=38,m=700,I=72,y=128,b="-",R=/^xn--/,F=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=f-c,W=Math.floor,X=String.fromCharCode,rt;function ut(q){throw RangeError(H[q])}function tt(q,at){for(var gt=q.length,At=[];gt--;)At[gt]=at(q[gt]);return At}function st(q,at){var gt=q.split("@"),At="";gt.length>1&&(At=gt[0]+"@",q=gt[1]),q=q.replace(k,".");var Pt=q.split("."),$t=tt(Pt,at).join(".");return At+$t}function bt(q){for(var at=[],gt=0,At=q.length,Pt,$t;gt<At;)Pt=q.charCodeAt(gt++),Pt>=55296&&Pt<=56319&&gt<At?($t=q.charCodeAt(gt++),($t&64512)==56320?at.push(((Pt&1023)<<10)+($t&1023)+65536):(at.push(Pt),gt--)):at.push(Pt);return at}function Ct(q){return tt(q,function(at){var gt="";return at>65535&&(at-=65536,gt+=X(at>>>10&1023|55296),at=56320|at&1023),gt+=X(at),gt}).join("")}function Gt(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:f}function ee(q,at){return q+22+75*(q<26)-((at!=0)<<5)}function xt(q,at,gt){var At=0;for(q=gt?W(q/m):q>>1,q+=W(q/at);q>z*_>>1;At+=f)q=W(q/z);return W(At+(z+1)*q/(q+A))}function Tt(q){var at=[],gt=q.length,At,Pt=0,$t=y,kt=I,Kt,ie,Yt,qt,Ut,Ft,It,_e,ce;for(Kt=q.lastIndexOf(b),Kt<0&&(Kt=0),ie=0;ie<Kt;++ie)q.charCodeAt(ie)>=128&&ut("not-basic"),at.push(q.charCodeAt(ie));for(Yt=Kt>0?Kt+1:0;Yt<gt;){for(qt=Pt,Ut=1,Ft=f;Yt>=gt&&ut("invalid-input"),It=Gt(q.charCodeAt(Yt++)),(It>=f||It>W((l-Pt)/Ut))&&ut("overflow"),Pt+=It*Ut,_e=Ft<=kt?c:Ft>=kt+_?_:Ft-kt,!(It<_e);Ft+=f)ce=f-_e,Ut>W(l/ce)&&ut("overflow"),Ut*=ce;At=at.length+1,kt=xt(Pt-qt,At,qt==0),W(Pt/At)>l-$t&&ut("overflow"),$t+=W(Pt/At),Pt%=At,at.splice(Pt++,0,$t)}return Ct(at)}function Ot(q){var at,gt,At,Pt,$t,kt,Kt,ie,Yt,qt,Ut,Ft=[],It,_e,ce,jt;for(q=bt(q),It=q.length,at=y,gt=0,$t=I,kt=0;kt<It;++kt)Ut=q[kt],Ut<128&&Ft.push(X(Ut));for(At=Pt=Ft.length,Pt&&Ft.push(b);At<It;){for(Kt=l,kt=0;kt<It;++kt)Ut=q[kt],Ut>=at&&Ut<Kt&&(Kt=Ut);for(_e=At+1,Kt-at>W((l-gt)/_e)&&ut("overflow"),gt+=(Kt-at)*_e,at=Kt,kt=0;kt<It;++kt)if(Ut=q[kt],Ut<at&&++gt>l&&ut("overflow"),Ut==at){for(ie=gt,Yt=f;qt=Yt<=$t?c:Yt>=$t+_?_:Yt-$t,!(ie<qt);Yt+=f)jt=ie-qt,ce=f-qt,Ft.push(X(ee(qt+jt%ce,0))),ie=W(jt/ce);Ft.push(X(ee(ie,0))),$t=xt(gt,_e,At==Pt),gt=0,++At}++gt,++at}return Ft.join("")}function ve(q){return st(q,function(at){return R.test(at)?Tt(at.slice(4).toLowerCase()):at})}function Jt(q){return st(q,function(at){return F.test(at)?"xn--"+Ot(at):at})}if(h={version:"1.3.2",ucs2:{decode:bt,encode:Ct},decode:Tt,encode:Ot,toASCII:Jt,toUnicode:ve},i&&s)if(t.exports==i)s.exports=h;else for(rt in h)h.hasOwnProperty(rt)&&(i[rt]=h[rt]);else r.punycode=h})(Oa)})(gp,Is);var yp={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},Rn={};function bp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var xp=function(t,e,r,i){e=e||"&",r=r||"=";var s={};if(typeof t!="string"||t.length===0)return s;var a=/\+/g;t=t.split(e);var h=1e3;i&&typeof i.maxKeys=="number"&&(h=i.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var f=0;f<l;++f){var c=t[f].replace(a,"%20"),_=c.indexOf(r),A,m,I,y;_>=0?(A=c.substr(0,_),m=c.substr(_+1)):(A=c,m=""),I=decodeURIComponent(A),y=decodeURIComponent(m),bp(s,I)?Array.isArray(s[I])?s[I].push(y):s[I]=[s[I],y]:s[I]=y}return s},Nn=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Tp=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(s){var a=encodeURIComponent(Nn(s))+r;return Array.isArray(t[s])?t[s].map(function(h){return a+encodeURIComponent(Nn(h))}).join(e):a+encodeURIComponent(Nn(t[s]))}).join(e):i?encodeURIComponent(Nn(i))+r+encodeURIComponent(Nn(t)):""};Rn.decode=Rn.parse=xp,Rn.encode=Rn.stringify=Tp;var Ap=Is,Rr=yp,Ip=ws,wp=Mp,Ep=Lp;function br(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Cp=/^([a-z0-9.+-]+:)/i,Pp=/:[0-9]*$/,Rp=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Np=["<",">",'"',"`"," ","\r",`
`,"	"],Sp=["{","}","|","\\","^","`"].concat(Np),$a=["'"].concat(Sp),ml=["%","/","?",";","#"].concat($a),gl=["/","?","#"],Up=255,yl=/^[+a-z0-9A-Z_-]{0,63}$/,Op=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Fp={javascript:!0,"javascript:":!0},Ya={javascript:!0,"javascript:":!0},Qi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Za=Rn;function ws(t,e,r){if(t&&Rr.isObject(t)&&t instanceof br)return t;var i=new br;return i.parse(t,e,r),i}br.prototype.parse=function(t,e,r){if(!Rr.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=i!==-1&&i<t.indexOf("#")?"?":"#",a=t.split(s),h=/\\/g;a[0]=a[0].replace(h,"/"),t=a.join(s);var l=t;if(l=l.trim(),!r&&t.split("#").length===1){var f=Rp.exec(l);if(f)return this.path=l,this.href=l,this.pathname=f[1],f[2]?(this.search=f[2],e?this.query=Za.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=Cp.exec(l);if(c){c=c[0];var _=c.toLowerCase();this.protocol=_,l=l.substr(c.length)}if(r||c||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var A=l.substr(0,2)==="//";A&&!(c&&Ya[c])&&(l=l.substr(2),this.slashes=!0)}if(!Ya[c]&&(A||c&&!Qi[c])){for(var m=-1,I=0;I<gl.length;I++){var y=l.indexOf(gl[I]);y!==-1&&(m===-1||y<m)&&(m=y)}var b,R;m===-1?R=l.lastIndexOf("@"):R=l.lastIndexOf("@",m),R!==-1&&(b=l.slice(0,R),l=l.slice(R+1),this.auth=decodeURIComponent(b)),m=-1;for(var I=0;I<ml.length;I++){var y=l.indexOf(ml[I]);y!==-1&&(m===-1||y<m)&&(m=y)}m===-1&&(m=l.length),this.host=l.slice(0,m),l=l.slice(m),this.parseHost(),this.hostname=this.hostname||"";var F=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!F)for(var k=this.hostname.split(/\./),I=0,H=k.length;I<H;I++){var z=k[I];if(z&&!z.match(yl)){for(var W="",X=0,rt=z.length;X<rt;X++)z.charCodeAt(X)>127?W+="x":W+=z[X];if(!W.match(yl)){var ut=k.slice(0,I),tt=k.slice(I+1),st=z.match(Op);st&&(ut.push(st[1]),tt.unshift(st[2])),tt.length&&(l="/"+tt.join(".")+l),this.hostname=ut.join(".");break}}}this.hostname.length>Up?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=Ap.toASCII(this.hostname));var bt=this.port?":"+this.port:"",Ct=this.hostname||"";this.host=Ct+bt,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!Fp[_])for(var I=0,H=$a.length;I<H;I++){var Gt=$a[I];if(l.indexOf(Gt)!==-1){var ee=encodeURIComponent(Gt);ee===Gt&&(ee=escape(Gt)),l=l.split(Gt).join(ee)}}var xt=l.indexOf("#");xt!==-1&&(this.hash=l.substr(xt),l=l.slice(0,xt));var Tt=l.indexOf("?");if(Tt!==-1?(this.search=l.substr(Tt),this.query=l.substr(Tt+1),e&&(this.query=Za.parse(this.query)),l=l.slice(0,Tt)):e&&(this.search="",this.query={}),l&&(this.pathname=l),Qi[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var bt=this.pathname||"",Ot=this.search||"";this.path=bt+Ot}return this.href=this.format(),this};function Lp(t){return Rr.isString(t)&&(t=ws(t)),t instanceof br?t.format():br.prototype.format.call(t)}br.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",s=!1,a="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&Rr.isObject(this.query)&&Object.keys(this.query).length&&(a=Za.stringify(this.query));var h=this.search||a&&"?"+a||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Qi[e])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),h&&h.charAt(0)!=="?"&&(h="?"+h),r=r.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),h=h.replace("#","%23"),e+s+r+h+i};function Mp(t,e){return ws(t,!1,!0).resolve(e)}br.prototype.resolve=function(t){return this.resolveObject(ws(t,!1,!0)).format()},br.prototype.resolveObject=function(t){if(Rr.isString(t)){var e=new br;e.parse(t,!1,!0),t=e}for(var r=new br,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];r[a]=this[a]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var f=h[l];f!=="protocol"&&(r[f]=t[f])}return Qi[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Qi[t.protocol]){for(var c=Object.keys(t),_=0;_<c.length;_++){var A=c[_];r[A]=t[A]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Ya[t.protocol]){for(var H=(t.pathname||"").split("/");H.length&&!(t.host=H.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),H[0]!==""&&H.unshift(""),H.length<2&&H.unshift(""),r.pathname=H.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",I=r.search||"";r.path=m+I}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&r.pathname.charAt(0)==="/",b=t.host||t.pathname&&t.pathname.charAt(0)==="/",R=b||y||r.host&&t.pathname,F=R,k=r.pathname&&r.pathname.split("/")||[],H=t.pathname&&t.pathname.split("/")||[],z=r.protocol&&!Qi[r.protocol];if(z&&(r.hostname="",r.port=null,r.host&&(k[0]===""?k[0]=r.host:k.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(H[0]===""?H[0]=t.host:H.unshift(t.host)),t.host=null),R=R&&(H[0]===""||k[0]==="")),b)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,k=H;else if(H.length)k||(k=[]),k.pop(),k=k.concat(H),r.search=t.search,r.query=t.query;else if(!Rr.isNullOrUndefined(t.search)){if(z){r.hostname=r.host=k.shift();var W=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;W&&(r.auth=W.shift(),r.host=r.hostname=W.shift())}return r.search=t.search,r.query=t.query,(!Rr.isNull(r.pathname)||!Rr.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var X=k.slice(-1)[0],rt=(r.host||t.host||k.length>1)&&(X==="."||X==="..")||X==="",ut=0,tt=k.length;tt>=0;tt--)X=k[tt],X==="."?k.splice(tt,1):X===".."?(k.splice(tt,1),ut++):ut&&(k.splice(tt,1),ut--);if(!R&&!F)for(;ut--;ut)k.unshift("..");R&&k[0]!==""&&(!k[0]||k[0].charAt(0)!=="/")&&k.unshift(""),rt&&k.join("/").substr(-1)!=="/"&&k.push("");var st=k[0]===""||k[0]&&k[0].charAt(0)==="/";if(z){r.hostname=r.host=st?"":k.length?k.shift():"";var W=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;W&&(r.auth=W.shift(),r.host=r.hostname=W.shift())}return R=R||r.host&&k.length,R&&!st&&k.unshift(""),k.length?r.pathname=k.join("/"):(r.pathname=null,r.path=null),(!Rr.isNull(r.pathname)||!Rr.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},br.prototype.parseHost=function(){var t=this.host,e=Pp.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Nr;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Nr||(Nr={}));var tn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(tn||(tn={}));var Sn;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Sn||(Sn={}));var Nt;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Nt||(Nt={}));var ur;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ur||(ur={}));var ft;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(ft||(ft={}));var ri;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(ri||(ri={}));var Et;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Et||(Et={}));var Un;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Un||(Un={}));var Sr;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Sr||(Sr={}));var Ur;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ur||(Ur={}));var Or;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Or||(Or={}));var lr;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(lr||(lr={}));var jr;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(jr||(jr={}));var Es;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Es||(Es={}));var xr;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(xr||(xr={}));var Me;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Me||(Me={}));var qa;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(qa||(qa={}));var Fe;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Fe||(Fe={}));var Tr;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Tr||(Tr={}));/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Fr={parse:Ip,format:Ep,resolve:wp};function Ar(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Gp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function kp(t,e,r){return t.replace(new RegExp(Gp(e),"g"),r)}function Bp(t,e){for(var r="",i=0,s=-1,a=0,h,l=0;l<=t.length;++l){if(l<t.length)h=t.charCodeAt(l);else{if(h===47)break;h=47}if(h===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(r.length<2||i!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var f=r.lastIndexOf("/");if(f!==r.length-1){f===-1?(r="",i=0):(r=r.slice(0,f),i=r.length-1-r.lastIndexOf("/")),s=l,a=0;continue}}else if(r.length===2||r.length===1){r="",i=0,s=l,a=0;continue}}e&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+t.slice(s+1,l):r=t.slice(s+1,l),i=l-s-1;s=l,a=0}else h===46&&a!==-1?++a:a=-1}return r}var bl={toPosix:function(t){return kp(t,"\\","/")},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){Ar(t),t=this.toPosix(t);var e="",r=/^file:\/\/\//.exec(t),i=/^[^/:]+:\/\//.exec(t),s=/^[^/:]+:\//.exec(t);if(r||i||s){var a=(r==null?void 0:r[0])||(i==null?void 0:i[0])||(s==null?void 0:s[0]);e=a,t=t.slice(a.length)}return e},toAbsolute:function(t,e,r){if(this.isDataUrl(t))return t;var i=this.toPosix(e!=null?e:yt.ADAPTER.getBaseUrl()),s=this.toPosix(r!=null?r:this.rootname(i));if(Ar(t),t=this.toPosix(t),t.startsWith("/"))return bl.join(s,t.slice(1));var a=this.isAbsolute(t)?t:this.join(i,t);return a},normalize:function(t){if(t=this.toPosix(t),Ar(t),t.length===0)return".";var e="",r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var i=t.endsWith("/");return t=Bp(t,!1),t.length>0&&i&&(t+="/"),r?"/"+t:e+t},isAbsolute:function(t){return Ar(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join:function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length===0)return".";for(var i,s=0;s<e.length;++s){var a=e[s];Ar(a),a.length>0&&(i===void 0?i=a:i+="/"+a)}return i===void 0?".":this.normalize(i)},dirname:function(t){if(Ar(t),t.length===0)return".";t=this.toPosix(t);var e=t.charCodeAt(0),r=e===47,i=-1,s=!0,a=this.getProtocol(t),h=t;t=t.slice(a.length);for(var l=t.length-1;l>=1;--l)if(e=t.charCodeAt(l),e===47){if(!s){i=l;break}}else s=!1;return i===-1?r?"/":this.isUrl(h)?a+t:a:r&&i===1?"//":a+t.slice(0,i)},rootname:function(t){Ar(t),t=this.toPosix(t);var e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){var r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename:function(t,e){Ar(t),e&&Ar(e),t=this.toPosix(t);var r=0,i=-1,s=!0,a;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var h=e.length-1,l=-1;for(a=t.length-1;a>=0;--a){var f=t.charCodeAt(a);if(f===47){if(!s){r=a+1;break}}else l===-1&&(s=!1,l=a+1),h>=0&&(f===e.charCodeAt(h)?--h===-1&&(i=a):(h=-1,i=l))}return r===i?i=l:i===-1&&(i=t.length),t.slice(r,i)}for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!s){r=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":t.slice(r,i)},extname:function(t){Ar(t),t=this.toPosix(t);for(var e=-1,r=0,i=-1,s=!0,a=0,h=t.length-1;h>=0;--h){var l=t.charCodeAt(h);if(l===47){if(!s){r=h+1;break}continue}i===-1&&(s=!1,i=h+1),l===46?e===-1?e=h:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||i===-1||a===0||a===1&&e===i-1&&e===r+1?"":t.slice(e,i)},parse:function(t){Ar(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=this.toPosix(t);var r=t.charCodeAt(0),i=this.isAbsolute(t),s;e.root=this.rootname(t),i||this.hasProtocol(t)?s=1:s=0;for(var a=-1,h=0,l=-1,f=!0,c=t.length-1,_=0;c>=s;--c){if(r=t.charCodeAt(c),r===47){if(!f){h=c+1;break}continue}l===-1&&(f=!1,l=c+1),r===46?a===-1?a=c:_!==1&&(_=1):a!==-1&&(_=-1)}return a===-1||l===-1||_===0||_===1&&a===l-1&&a===h+1?l!==-1&&(h===0&&i?e.base=e.name=t.slice(1,l):e.base=e.name=t.slice(h,l)):(h===0&&i?(e.name=t.slice(1,a),e.base=t.slice(1,l)):(e.name=t.slice(h,a),e.base=t.slice(h,l)),e.ext=t.slice(a,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};yt.RETINA_PREFIX=/@([0-9\.]+)x/,yt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ja=!1,xl="6.5.2";function Tl(){Ja=!0}function Al(t){var e;if(!Ja){if(yt.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+xl+" - ✰ "+t+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+xl+" - "+t+" - http://www.pixijs.com/");Ja=!0}}var Ka;function Il(){return typeof Ka=="undefined"&&(Ka=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:yt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!yt.ADAPTER.getWebGLRenderingContext())return!1;var r=yt.ADAPTER.createCanvas(),i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),s=!!(i&&i.getContextAttributes().stencil);if(i){var a=i.getExtension("WEBGL_lose_context");a&&a.loseContext()}return i=null,s}catch(h){return!1}}()),Ka}var Dp="#f0f8ff",Hp="#faebd7",Xp="#00ffff",Vp="#7fffd4",zp="#f0ffff",jp="#f5f5dc",Wp="#ffe4c4",$p="#000000",Yp="#ffebcd",Zp="#0000ff",qp="#8a2be2",Jp="#a52a2a",Kp="#deb887",Qp="#5f9ea0",tv="#7fff00",ev="#d2691e",rv="#ff7f50",iv="#6495ed",nv="#fff8dc",sv="#dc143c",av="#00ffff",ov="#00008b",hv="#008b8b",uv="#b8860b",lv="#a9a9a9",fv="#006400",cv="#a9a9a9",dv="#bdb76b",pv="#8b008b",vv="#556b2f",_v="#ff8c00",mv="#9932cc",gv="#8b0000",yv="#e9967a",bv="#8fbc8f",xv="#483d8b",Tv="#2f4f4f",Av="#2f4f4f",Iv="#00ced1",wv="#9400d3",Ev="#ff1493",Cv="#00bfff",Pv="#696969",Rv="#696969",Nv="#1e90ff",Sv="#b22222",Uv="#fffaf0",Ov="#228b22",Fv="#ff00ff",Lv="#dcdcdc",Mv="#f8f8ff",Gv="#daa520",kv="#ffd700",Bv="#808080",Dv="#008000",Hv="#adff2f",Xv="#808080",Vv="#f0fff0",zv="#ff69b4",jv="#cd5c5c",Wv="#4b0082",$v="#fffff0",Yv="#f0e68c",Zv="#fff0f5",qv="#e6e6fa",Jv="#7cfc00",Kv="#fffacd",Qv="#add8e6",t_="#f08080",e_="#e0ffff",r_="#fafad2",i_="#d3d3d3",n_="#90ee90",s_="#d3d3d3",a_="#ffb6c1",o_="#ffa07a",h_="#20b2aa",u_="#87cefa",l_="#778899",f_="#778899",c_="#b0c4de",d_="#ffffe0",p_="#00ff00",v_="#32cd32",__="#faf0e6",m_="#ff00ff",g_="#800000",y_="#66cdaa",b_="#0000cd",x_="#ba55d3",T_="#9370db",A_="#3cb371",I_="#7b68ee",w_="#00fa9a",E_="#48d1cc",C_="#c71585",P_="#191970",R_="#f5fffa",N_="#ffe4e1",S_="#ffe4b5",U_="#ffdead",O_="#000080",F_="#fdf5e6",L_="#808000",M_="#6b8e23",G_="#ffa500",k_="#ff4500",B_="#da70d6",D_="#eee8aa",H_="#98fb98",X_="#afeeee",V_="#db7093",z_="#ffefd5",j_="#ffdab9",W_="#cd853f",$_="#ffc0cb",Y_="#dda0dd",Z_="#b0e0e6",q_="#800080",J_="#663399",K_="#ff0000",Q_="#bc8f8f",tm="#4169e1",em="#8b4513",rm="#fa8072",im="#f4a460",nm="#2e8b57",sm="#fff5ee",am="#a0522d",om="#c0c0c0",hm="#87ceeb",um="#6a5acd",lm="#708090",fm="#708090",cm="#fffafa",dm="#00ff7f",pm="#4682b4",vm="#d2b48c",_m="#008080",mm="#d8bfd8",gm="#ff6347",ym="#40e0d0",bm="#ee82ee",xm="#f5deb3",Tm="#ffffff",Am="#f5f5f5",Im="#ffff00",wm="#9acd32",Em={aliceblue:Dp,antiquewhite:Hp,aqua:Xp,aquamarine:Vp,azure:zp,beige:jp,bisque:Wp,black:$p,blanchedalmond:Yp,blue:Zp,blueviolet:qp,brown:Jp,burlywood:Kp,cadetblue:Qp,chartreuse:tv,chocolate:ev,coral:rv,cornflowerblue:iv,cornsilk:nv,crimson:sv,cyan:av,darkblue:ov,darkcyan:hv,darkgoldenrod:uv,darkgray:lv,darkgreen:fv,darkgrey:cv,darkkhaki:dv,darkmagenta:pv,darkolivegreen:vv,darkorange:_v,darkorchid:mv,darkred:gv,darksalmon:yv,darkseagreen:bv,darkslateblue:xv,darkslategray:Tv,darkslategrey:Av,darkturquoise:Iv,darkviolet:wv,deeppink:Ev,deepskyblue:Cv,dimgray:Pv,dimgrey:Rv,dodgerblue:Nv,firebrick:Sv,floralwhite:Uv,forestgreen:Ov,fuchsia:Fv,gainsboro:Lv,ghostwhite:Mv,goldenrod:Gv,gold:kv,gray:Bv,green:Dv,greenyellow:Hv,grey:Xv,honeydew:Vv,hotpink:zv,indianred:jv,indigo:Wv,ivory:$v,khaki:Yv,lavenderblush:Zv,lavender:qv,lawngreen:Jv,lemonchiffon:Kv,lightblue:Qv,lightcoral:t_,lightcyan:e_,lightgoldenrodyellow:r_,lightgray:i_,lightgreen:n_,lightgrey:s_,lightpink:a_,lightsalmon:o_,lightseagreen:h_,lightskyblue:u_,lightslategray:l_,lightslategrey:f_,lightsteelblue:c_,lightyellow:d_,lime:p_,limegreen:v_,linen:__,magenta:m_,maroon:g_,mediumaquamarine:y_,mediumblue:b_,mediumorchid:x_,mediumpurple:T_,mediumseagreen:A_,mediumslateblue:I_,mediumspringgreen:w_,mediumturquoise:E_,mediumvioletred:C_,midnightblue:P_,mintcream:R_,mistyrose:N_,moccasin:S_,navajowhite:U_,navy:O_,oldlace:F_,olive:L_,olivedrab:M_,orange:G_,orangered:k_,orchid:B_,palegoldenrod:D_,palegreen:H_,paleturquoise:X_,palevioletred:V_,papayawhip:z_,peachpuff:j_,peru:W_,pink:$_,plum:Y_,powderblue:Z_,purple:q_,rebeccapurple:J_,red:K_,rosybrown:Q_,royalblue:tm,saddlebrown:em,salmon:rm,sandybrown:im,seagreen:nm,seashell:sm,sienna:am,silver:om,skyblue:hm,slateblue:um,slategray:lm,slategrey:fm,snow:cm,springgreen:dm,steelblue:pm,tan:vm,teal:_m,thistle:mm,tomato:gm,turquoise:ym,violet:bm,wheat:xm,white:Tm,whitesmoke:Am,yellow:Im,yellowgreen:wm};function mi(t,e){return e===void 0&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function Qa(t){var e=t.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function to(t){return typeof t=="string"&&(t=Em[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1))),parseInt(t,16)}function Cm(t){return(t[0]*255<<16)+(t[1]*255<<8)+(t[2]*255|0)}function Pm(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[Nt.NORMAL_NPM]=Nt.NORMAL,t[Nt.ADD_NPM]=Nt.ADD,t[Nt.SCREEN_NPM]=Nt.SCREEN,e[Nt.NORMAL]=Nt.NORMAL_NPM,e[Nt.ADD]=Nt.ADD_NPM,e[Nt.SCREEN]=Nt.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}var eo=Pm();function ro(t,e){return eo[e?1:0][t]}function wl(t,e,r,i){return r=r||new Float32Array(4),i||i===void 0?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function Cs(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;var r=t>>16&255,i=t>>8&255,s=t&255;return r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0,(e*255<<24)+(r<<16)+(i<<8)+s}function io(t,e,r,i){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,(i||i===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function El(t,e){e===void 0&&(e=null);var r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,s=0;i<r;i+=6,s+=4)e[i+0]=s+0,e[i+1]=s+1,e[i+2]=s+2,e[i+3]=s+0,e[i+4]=s+2,e[i+5]=s+3;return e}function Ps(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}var Rm={Float32Array,Uint32Array,Int32Array,Uint8Array};function Nm(t,e){for(var r=0,i=0,s={},a=0;a<t.length;a++)i+=e[a],r+=t[a].length;for(var h=new ArrayBuffer(r*4),l=null,f=0,a=0;a<t.length;a++){var c=e[a],_=t[a],A=Ps(_);s[A]||(s[A]=new Rm[A](h)),l=s[A];for(var m=0;m<_.length;m++){var I=(m/c|0)*i+f,y=m%c;l[I+y]=_[m]}f+=c}return new Float32Array(h)}function On(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function no(t){return!(t&t-1)&&!!t}function so(t){var e=(t>65535?1:0)<<4;t>>>=e;var r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function gi(t,e,r){var i=t.length,s;if(!(e>=i||r===0)){r=e+r>i?i-e:r;var a=i-r;for(s=e;s<a;++s)t[s]=t[s+r];t.length=a}}function yi(t){return t===0?0:t<0?-1:1}var Sm=0;function ii(){return++Sm}var Cl={};function er(t,e,r){if(r===void 0&&(r=3),!Cl[e]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(i))),Cl[e]=!0}}var ao={},rr=Object.create(null),fr=Object.create(null);function Um(){var t;for(t in rr)rr[t].destroy();for(t in fr)fr[t].destroy()}function Om(){var t;for(t in rr)delete rr[t];for(t in fr)delete fr[t]}var oo=function(){function t(e,r,i){this.canvas=yt.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||yt.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t}();function Pl(t){var e=t.width,r=t.height,i=t.getContext("2d"),s=i.getImageData(0,0,e,r),a=s.data,h=a.length,l={top:null,left:null,right:null,bottom:null},f=null,c,_,A;for(c=0;c<h;c+=4)a[c+3]!==0&&(_=c/4%e,A=~~(c/4/e),l.top===null&&(l.top=A),(l.left===null||_<l.left)&&(l.left=_),(l.right===null||l.right<_)&&(l.right=_+1),(l.bottom===null||l.bottom<A)&&(l.bottom=A));return l.top!==null&&(e=l.right-l.left,r=l.bottom-l.top+1,f=i.getImageData(l.left,l.top,e,r)),{height:r,width:e,data:f}}var Rl=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Fm(t){var e=Rl.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var Rs;function Nl(t,e){if(e===void 0&&(e=globalThis.location),t.indexOf("data:")===0)return"";e=e||globalThis.location,Rs||(Rs=document.createElement("a")),Rs.href=t;var r=Fr.parse(Rs.href),i=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!i||r.protocol!==e.protocol?"anonymous":""}function Fn(t,e){var r=yt.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e!==void 0?e:1}const Lm=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:fr,CanvasRenderTarget:oo,DATA_URI:Rl,EventEmitter:yr,ProgramCache:ao,TextureCache:rr,clearTextureCache:Om,correctBlendMode:ro,createIndicesForQuads:El,decomposeDataUri:Fm,deprecation:er,destroyTextureCache:Um,determineCrossOrigin:Nl,get earcut(){return Ji},getBufferType:Ps,getResolutionOfUrl:Fn,hex2rgb:mi,hex2string:Qa,interleaveTypedArrays:Nm,isMobile:hr,isPow2:no,isWebGLSupported:Il,log2:so,nextPow2:On,path:bl,premultiplyBlendMode:eo,premultiplyRgba:wl,premultiplyTint:Cs,premultiplyTintToRgba:io,removeItems:gi,rgb2hex:Cm,sayHello:Al,sign:yi,skipHello:Tl,string2hex:to,trimCanvas:Pl,uid:ii,url:Fr},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ln=Math.PI*2,Sl=180/Math.PI,Ul=Math.PI/180,De;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(De||(De={}));var ye=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},t.prototype.copyTo=function(e){return e.set(this.x,this.y),e},t.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x=e,this.y=r,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),Ns=[new ye,new ye,new ye,new ye],Qt=function(){function t(e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(s),this.type=De.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},t.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},t.prototype.contains=function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height},t.prototype.intersects=function(e,r){if(!r){var i=this.x<e.x?e.x:this.x,s=this.right>e.right?e.right:this.right;if(s<=i)return!1;var a=this.y<e.y?e.y:this.y,h=this.bottom>e.bottom?e.bottom:this.bottom;return h>a}var l=this.left,f=this.right,c=this.top,_=this.bottom;if(f<=l||_<=c)return!1;var A=Ns[0].set(e.left,e.top),m=Ns[1].set(e.left,e.bottom),I=Ns[2].set(e.right,e.top),y=Ns[3].set(e.right,e.bottom);if(I.x<=A.x||m.y<=A.y)return!1;var b=Math.sign(r.a*r.d-r.b*r.c);if(b===0||(r.apply(A,A),r.apply(m,m),r.apply(I,I),r.apply(y,y),Math.max(A.x,m.x,I.x,y.x)<=l||Math.min(A.x,m.x,I.x,y.x)>=f||Math.max(A.y,m.y,I.y,y.y)<=c||Math.min(A.y,m.y,I.y,y.y)>=_))return!1;var R=b*(m.y-A.y),F=b*(A.x-m.x),k=R*l+F*c,H=R*f+F*c,z=R*l+F*_,W=R*f+F*_;if(Math.max(k,H,z,W)<=R*A.x+F*A.y||Math.min(k,H,z,W)>=R*y.x+F*y.y)return!1;var X=b*(A.y-I.y),rt=b*(I.x-A.x),ut=X*l+rt*c,tt=X*f+rt*c,st=X*l+rt*_,bt=X*f+rt*_;return!(Math.max(ut,tt,st,bt)<=X*A.x+rt*A.y||Math.min(ut,tt,st,bt)>=X*y.x+rt*y.y)},t.prototype.pad=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this},t.prototype.fit=function(e){var r=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(i-r,0),this.y=s,this.height=Math.max(a-s,0),this},t.prototype.ceil=function(e,r){e===void 0&&(e=1),r===void 0&&(r=.001);var i=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=i-this.x,this.height=s-this.y,this},t.prototype.enlarge=function(e){var r=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=i-r,this.y=s,this.height=a-s,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Ol=function(){function t(e,r,i){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=e,this.y=r,this.radius=i,this.type=De.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(e,r){if(this.radius<=0)return!1;var i=this.radius*this.radius,s=this.x-e,a=this.y-r;return s*=s,a*=a,s+a<=i},t.prototype.getBounds=function(){return new Qt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),Fl=function(){function t(e,r,i,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),this.x=e,this.y=r,this.width=i,this.height=s,this.type=De.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,s=(r-this.y)/this.height;return i*=i,s*=s,i+s<=1},t.prototype.getBounds=function(){return new Qt(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Mn=function(){function t(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var s=Array.isArray(r[0])?r[0]:r;if(typeof s[0]!="number"){for(var a=[],h=0,l=s.length;h<l;h++)a.push(s[h].x,s[h].y);s=a}this.points=s,this.type=De.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=this.points.slice(),r=new t(e);return r.closeStroke=this.closeStroke,r},t.prototype.contains=function(e,r){for(var i=!1,s=this.points.length/2,a=0,h=s-1;a<s;h=a++){var l=this.points[a*2],f=this.points[a*2+1],c=this.points[h*2],_=this.points[h*2+1],A=f>r!=_>r&&e<(c-l)*((r-f)/(_-f))+l;A&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,r){return e+", "+r},"")+"]")},t}(),Ll=function(){function t(e,r,i,s,a){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=0),a===void 0&&(a=20),this.x=e,this.y=r,this.width=i,this.height=s,this.radius=a,this.type=De.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+i&&r<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;var s=e-(this.x+i),a=r-(this.y+i),h=i*i;if(s*s+a*a<=h||(s=e-(this.x+this.width-i),s*s+a*a<=h)||(a=r-(this.y+this.height-i),s*s+a*a<=h)||(s=e-(this.x+i),s*s+a*a<=h))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t}(),ni=function(){function t(e,r,i,s){i===void 0&&(i=0),s===void 0&&(s=0),this._x=i,this._y=s,this.cb=e,this.scope=r}return t.prototype.clone=function(e,r){return e===void 0&&(e=this.cb),r===void 0&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(e){return e.set(this._x,this._y),e},t.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),Ee=function(){function t(e,r,i,s,a,h){e===void 0&&(e=1),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=1),a===void 0&&(a=0),h===void 0&&(h=0),this.array=null,this.a=e,this.b=r,this.c=i,this.d=s,this.tx=a,this.ty=h}return t.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.prototype.set=function(e,r,i,s,a,h){return this.a=e,this.b=r,this.c=i,this.d=s,this.tx=a,this.ty=h,this},t.prototype.toArray=function(e,r){this.array||(this.array=new Float32Array(9));var i=r||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(e,r){r=r||new ye;var i=e.x,s=e.y;return r.x=this.a*i+this.c*s+this.tx,r.y=this.b*i+this.d*s+this.ty,r},t.prototype.applyInverse=function(e,r){r=r||new ye;var i=1/(this.a*this.d+this.c*-this.b),s=e.x,a=e.y;return r.x=this.d*i*s+-this.c*i*a+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*a+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,r},t.prototype.translate=function(e,r){return this.tx+=e,this.ty+=r,this},t.prototype.scale=function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this},t.prototype.rotate=function(e){var r=Math.cos(e),i=Math.sin(e),s=this.a,a=this.c,h=this.tx;return this.a=s*r-this.b*i,this.b=s*i+this.b*r,this.c=a*r-this.d*i,this.d=a*i+this.d*r,this.tx=h*r-this.ty*i,this.ty=h*i+this.ty*r,this},t.prototype.append=function(e){var r=this.a,i=this.b,s=this.c,a=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*i+e.b*a,this.c=e.c*r+e.d*s,this.d=e.c*i+e.d*a,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*a+this.ty,this},t.prototype.setTransform=function(e,r,i,s,a,h,l,f,c){return this.a=Math.cos(l+c)*a,this.b=Math.sin(l+c)*a,this.c=-Math.sin(l-f)*h,this.d=Math.cos(l-f)*h,this.tx=e-(i*this.a+s*this.c),this.ty=r-(i*this.b+s*this.d),this},t.prototype.prepend=function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this},t.prototype.decompose=function(e){var r=this.a,i=this.b,s=this.c,a=this.d,h=e.pivot,l=-Math.atan2(-s,a),f=Math.atan2(i,r),c=Math.abs(l+f);return c<1e-5||Math.abs(Ln-c)<1e-5?(e.rotation=f,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=l,e.skew.y=f),e.scale.x=Math.sqrt(r*r+i*i),e.scale.y=Math.sqrt(s*s+a*a),e.position.x=this.tx+(h.x*r+h.y*s),e.position.y=this.ty+(h.x*i+h.y*a),e},t.prototype.invert=function(){var e=this.a,r=this.b,i=this.c,s=this.d,a=this.tx,h=e*s-r*i;return this.a=s/h,this.b=-r/h,this.c=-i/h,this.d=e/h,this.tx=(i*this.ty-s*a)/h,this.ty=-(e*this.ty-r*a)/h,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),bi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],xi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ti=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ai=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ho=[],Ml=[],Ss=Math.sign;function Mm(){for(var t=0;t<16;t++){var e=[];ho.push(e);for(var r=0;r<16;r++)for(var i=Ss(bi[t]*bi[r]+Ti[t]*xi[r]),s=Ss(xi[t]*bi[r]+Ai[t]*xi[r]),a=Ss(bi[t]*Ti[r]+Ti[t]*Ai[r]),h=Ss(xi[t]*Ti[r]+Ai[t]*Ai[r]),l=0;l<16;l++)if(bi[l]===i&&xi[l]===s&&Ti[l]===a&&Ai[l]===h){e.push(l);break}}for(var t=0;t<16;t++){var f=new Ee;f.set(bi[t],xi[t],Ti[t],Ai[t],0,0),Ml.push(f)}}Mm();var Ce={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return bi[t]},uY:function(t){return xi[t]},vX:function(t){return Ti[t]},vY:function(t){return Ai[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,e){return ho[t][e]},sub:function(t,e){return ho[t][Ce.inv(e)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,e){return Math.abs(t)*2<=Math.abs(e)?e>=0?Ce.S:Ce.N:Math.abs(e)*2<=Math.abs(t)?t>0?Ce.E:Ce.W:e>0?t>0?Ce.SE:Ce.SW:t>0?Ce.NE:Ce.NW},matrixAppendRotationInv:function(t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=0);var s=Ml[Ce.inv(e)];s.tx=r,s.ty=i,t.append(s)}},Us=function(){function t(){this.worldTransform=new Ee,this.localTransform=new Ee,this.position=new ni(this.onChange,this,0,0),this.scale=new ni(this.onChange,this,1,1),this.pivot=new ni(this.onChange,this,0,0),this.skew=new ni(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,s=this.worldTransform;s.a=r.a*i.a+r.b*i.c,s.b=r.a*i.b+r.b*i.d,s.c=r.c*i.a+r.d*i.c,s.d=r.c*i.b+r.d*i.d,s.tx=r.tx*i.a+r.ty*i.c+i.tx,s.ty=r.tx*i.b+r.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();/*!
 * @pixi/display - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yt.SORTABLE_CHILDREN=!1;var Gn=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Qt.EMPTY:(e=e||new Qt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},t.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},t.prototype.addPointMatrix=function(e,r){var i=e.a,s=e.b,a=e.c,h=e.d,l=e.tx,f=e.ty,c=i*r.x+a*r.y+l,_=s*r.x+h*r.y+f;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,_),this.maxY=Math.max(this.maxY,_)},t.prototype.addQuad=function(e){var r=this.minX,i=this.minY,s=this.maxX,a=this.maxY,h=e[0],l=e[1];r=h<r?h:r,i=l<i?l:i,s=h>s?h:s,a=l>a?l:a,h=e[2],l=e[3],r=h<r?h:r,i=l<i?l:i,s=h>s?h:s,a=l>a?l:a,h=e[4],l=e[5],r=h<r?h:r,i=l<i?l:i,s=h>s?h:s,a=l>a?l:a,h=e[6],l=e[7],r=h<r?h:r,i=l<i?l:i,s=h>s?h:s,a=l>a?l:a,this.minX=r,this.minY=i,this.maxX=s,this.maxY=a},t.prototype.addFrame=function(e,r,i,s,a){this.addFrameMatrix(e.worldTransform,r,i,s,a)},t.prototype.addFrameMatrix=function(e,r,i,s,a){var h=e.a,l=e.b,f=e.c,c=e.d,_=e.tx,A=e.ty,m=this.minX,I=this.minY,y=this.maxX,b=this.maxY,R=h*r+f*i+_,F=l*r+c*i+A;m=R<m?R:m,I=F<I?F:I,y=R>y?R:y,b=F>b?F:b,R=h*s+f*i+_,F=l*s+c*i+A,m=R<m?R:m,I=F<I?F:I,y=R>y?R:y,b=F>b?F:b,R=h*r+f*a+_,F=l*r+c*a+A,m=R<m?R:m,I=F<I?F:I,y=R>y?R:y,b=F>b?F:b,R=h*s+f*a+_,F=l*s+c*a+A,m=R<m?R:m,I=F<I?F:I,y=R>y?R:y,b=F>b?F:b,this.minX=m,this.minY=I,this.maxX=y,this.maxY=b},t.prototype.addVertexData=function(e,r,i){for(var s=this.minX,a=this.minY,h=this.maxX,l=this.maxY,f=r;f<i;f+=2){var c=e[f],_=e[f+1];s=c<s?c:s,a=_<a?_:a,h=c>h?c:h,l=_>l?_:l}this.minX=s,this.minY=a,this.maxX=h,this.maxY=l},t.prototype.addVertices=function(e,r,i,s){this.addVerticesMatrix(e.worldTransform,r,i,s)},t.prototype.addVerticesMatrix=function(e,r,i,s,a,h){a===void 0&&(a=0),h===void 0&&(h=a);for(var l=e.a,f=e.b,c=e.c,_=e.d,A=e.tx,m=e.ty,I=this.minX,y=this.minY,b=this.maxX,R=this.maxY,F=i;F<s;F+=2){var k=r[F],H=r[F+1],z=l*k+c*H+A,W=_*H+f*k+m;I=Math.min(I,z-a),b=Math.max(b,z+a),y=Math.min(y,W-h),R=Math.max(R,W+h)}this.minX=I,this.minY=y,this.maxX=b,this.maxY=R},t.prototype.addBounds=function(e){var r=this.minX,i=this.minY,s=this.maxX,a=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>a?e.maxY:a},t.prototype.addBoundsMask=function(e,r){var i=e.minX>r.minX?e.minX:r.minX,s=e.minY>r.minY?e.minY:r.minY,a=e.maxX<r.maxX?e.maxX:r.maxX,h=e.maxY<r.maxY?e.maxY:r.maxY;if(i<=a&&s<=h){var l=this.minX,f=this.minY,c=this.maxX,_=this.maxY;this.minX=i<l?i:l,this.minY=s<f?s:f,this.maxX=a>c?a:c,this.maxY=h>_?h:_}},t.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.addBoundsArea=function(e,r){var i=e.minX>r.x?e.minX:r.x,s=e.minY>r.y?e.minY:r.y,a=e.maxX<r.x+r.width?e.maxX:r.x+r.width,h=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(i<=a&&s<=h){var l=this.minX,f=this.minY,c=this.maxX,_=this.maxY;this.minX=i<l?i:l,this.minY=s<f?s:f,this.maxX=a>c?a:c,this.maxY=h>_?h:_}},t.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},t.prototype.addFramePad=function(e,r,i,s,a,h){e-=a,r-=h,i+=a,s+=h,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var uo=function(t,e){return uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},uo(t,e)};function lo(t,e){uo(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Oe=function(t){lo(e,t);function e(){var r=t.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new Us,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new Gn,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var i=Object.keys(r),s=0;s<i.length;++s){var a=i[s];Object.defineProperty(e.prototype,a,Object.getOwnPropertyDescriptor(r,a))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,i){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Qt),i=this._boundsRect),this._bounds.getRectangle(i)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Qt),r=this._localBoundsRect),this._localBounds||(this._localBounds=new Gn);var i=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,h=this._boundsID;this._bounds=this._localBounds;var l=this.getBounds(!1,r);return this.parent=s,this.transform=i,this._bounds=a,this._bounds.updateID+=this._boundsID-h,l},e.prototype.toGlobal=function(r,i,s){return s===void 0&&(s=!1),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,i)},e.prototype.toLocal=function(r,i,s,a){return i&&(r=i.toGlobal(r,s,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,s)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,i,s,a,h,l,f,c,_){return r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=1),a===void 0&&(a=1),h===void 0&&(h=0),l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=0),_===void 0&&(_=0),this.position.x=r,this.position.y=i,this.scale.x=s||1,this.scale.y=a||1,this.rotation=h,this.skew.x=l,this.skew.y=f,this.pivot.x=c,this.pivot.y=_,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new fo),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Sl},set:function(r){this.transform.rotation=r*Ul},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=r,this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(yr),fo=function(t){lo(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(Oe);Oe.prototype.displayObjectUpdateTransform=Oe.prototype.updateTransform;/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Gl;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Gl||(Gl={}));var kl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(kl||(kl={}));var Bl;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Bl||(Bl={}));var Dl;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Dl||(Dl={}));var Hl;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Hl||(Hl={}));var Xl;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Xl||(Xl={}));var Vl;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Vl||(Vl={}));var zl;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(zl||(zl={}));var jl;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(jl||(jl={}));var Wl;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Wl||(Wl={}));var $l;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})($l||($l={}));var Yl;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Yl||(Yl={}));var Zl;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Zl||(Zl={}));var ql;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(ql||(ql={}));var Jl;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Jl||(Jl={}));var Kl;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Kl||(Kl={}));var co;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(co||(co={}));var Ql;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Ql||(Ql={}));var t0;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(t0||(t0={}));var e0;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(e0||(e0={}));function Gm(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}var cr=function(t){lo(e,t);function e(){var r=t.call(this)||this;return r.children=[],r.sortableChildren=yt.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];if(i.length>1)for(var a=0;a<i.length;a++)this.addChild(i[a]);else{var h=i[0];h.parent&&h.parent.removeChild(h),h.parent=this,this.sortDirty=!0,h.transform._parentID=-1,this.children.push(h),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",h,this,this.children.length-1),h.emit("added",this)}return i[0]},e.prototype.addChildAt=function(r,i){if(i<0||i>this.children.length)throw new Error(r+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(i,0,r),this._boundsID++,this.onChildrenChange(i),r.emit("added",this),this.emit("childAdded",r,this,i),r},e.prototype.swapChildren=function(r,i){if(r!==i){var s=this.getChildIndex(r),a=this.getChildIndex(i);this.children[s]=i,this.children[a]=r,this.onChildrenChange(s<a?s:a)}},e.prototype.getChildIndex=function(r){var i=this.children.indexOf(r);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(r,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var s=this.getChildIndex(r);gi(this.children,s,1),this.children.splice(i,0,r),this.onChildrenChange(i)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];if(i.length>1)for(var a=0;a<i.length;a++)this.removeChild(i[a]);else{var h=i[0],l=this.children.indexOf(h);if(l===-1)return null;h.parent=null,h.transform._parentID=-1,gi(this.children,l,1),this._boundsID++,this.onChildrenChange(l),h.emit("removed",this),this.emit("childRemoved",h,this,l)}return i[0]},e.prototype.removeChildAt=function(r){var i=this.getChildAt(r);return i.parent=null,i.transform._parentID=-1,gi(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r),i},e.prototype.removeChildren=function(r,i){r===void 0&&(r=0),i===void 0&&(i=this.children.length);var s=r,a=i,h=a-s,l;if(h>0&&h<=a){l=this.children.splice(s,h);for(var f=0;f<l.length;++f)l[f].parent=null,l[f].transform&&(l[f].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var f=0;f<l.length;++f)l[f].emit("removed",this),this.emit("childRemoved",l[f],this,f);return l}else if(h===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,i=0,s=this.children.length;i<s;++i){var a=this.children[i];a._lastSortedIndex=i,!r&&a.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(Gm),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r];s.visible&&s.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var i=this.children[r];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var s=i._mask.isMaskData?i._mask.maskObject:i._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(i._bounds,s._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,i){i===void 0&&(i=!1);var s=t.prototype.getLocalBounds.call(this,r);if(!i)for(var a=0,h=this.children.length;a<h;++a){var l=this.children[a];l.visible&&l.updateTransform()}return s},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(r){var i=r.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var s,a;if(this.cullArea?(s=this.cullArea,a=this.worldTransform):this._render!==e.prototype._render&&(s=this.getBounds(!0)),s&&i.intersects(s,a))this._render(r);else if(this.cullArea)return;for(var h=0,l=this.children.length;h<l;++h){var f=this.children[h],c=f.cullable;f.cullable=c||!this.cullArea,f.render(r),f.cullable=c}}},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var i=0,s=this.children.length;i<s;++i)this.children[i].render(r)}},e.prototype.renderAdvanced=function(r){var i=this.filters,s=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<i.length;a++)i[a].enabled&&this._enabledFilters.push(i[a])}var h=i&&this._enabledFilters&&this._enabledFilters.length||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==co.NONE));if(h&&r.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),s&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var a=0,l=this.children.length;a<l;++a)this.children[a].render(r)}h&&r.batch.flush(),s&&r.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){t.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof r=="boolean"?r:r&&r.children,s=this.removeChildren(0,this.children.length);if(i)for(var a=0;a<s.length;++a)s[a].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var i=this.getLocalBounds().width;i!==0?this.scale.x=r/i:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var i=this.getLocalBounds().height;i!==0?this.scale.y=r/i:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(Oe);cr.prototype.containerUpdateTransform=cr.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var kn=function(){return kn=Object.assign||function(e){for(var r=arguments,i,s=1,a=arguments.length;s<a;s++){i=r[s];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(e[h]=i[h])}return e},kn.apply(this,arguments)},fe;(function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"})(fe||(fe={}));var r0=function(t){if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e=typeof t.extension!="object"?{type:t.extension}:t.extension;t=kn(kn({},e),{ref:t})}if(typeof t=="object")t=kn({},t);else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Lr={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,r=[],i=0;i<arguments.length;i++)r[i]=t[i];return r.map(r0).forEach(function(s){s.type.forEach(function(a){var h,l;return(l=(h=e._removeHandlers)[a])===null||l===void 0?void 0:l.call(h,s)})}),this},add:function(){for(var t=arguments,e=this,r=[],i=0;i<arguments.length;i++)r[i]=t[i];return r.map(r0).forEach(function(s){s.type.forEach(function(a){var h=e._addHandlers,l=e._queue;h[a]?h[a](s):(l[a]=l[a]||[],l[a].push(s))})}),this},handle:function(t,e,r){var i=this._addHandlers=this._addHandlers||{},s=this._removeHandlers=this._removeHandlers||{};if(i[t]||s[t])throw new Error("Extension type "+t+" already has a handler");i[t]=e,s[t]=r;var a=this._queue;return a[t]&&(a[t].forEach(function(h){return e(h)}),delete a[t]),this},handleByMap:function(t,e){return this.handle(t,function(r){e[r.name]=r.ref},function(r){delete e[r.name]})},handleByList:function(t,e){return this.handle(t,function(r){var i,s;e.push(r.ref),t===fe.Loader&&((s=(i=r.ref).add)===null||s===void 0||s.call(i))},function(r){var i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};/*!
 * @pixi/runner - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ye=function(){function t(e){this.items=[],this._name=e,this._aliasCount=0}return t.prototype.emit=function(e,r,i,s,a,h,l,f){if(arguments.length>8)throw new Error("max arguments reached");var c=this,_=c.name,A=c.items;this._aliasCount++;for(var m=0,I=A.length;m<I;m++)A[m][_](e,r,i,s,a,h,l,f);return A===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},t.prototype.remove=function(e){var r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},t.prototype.contains=function(e){return this.items.indexOf(e)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Ye.prototype,{dispatch:{value:Ye.prototype.emit},run:{value:Ye.prototype.emit}});/*!
 * @pixi/ticker - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yt.TARGET_FPMS=.06;var Mr;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(Mr||(Mr={}));var po=function(){function t(e,r,i,s){r===void 0&&(r=null),i===void 0&&(i=0),s===void 0&&(s=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=i,this.once=s}return t.prototype.match=function(e,r){return r===void 0&&(r=null),this.fn===e&&this.context===r},t.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},t.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},t.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},t}(),Xe=function(){function t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new po(null,null,1/0),this.deltaMS=1/yt.TARGET_FPMS,this.elapsedMS=1/yt.TARGET_FPMS,this._tick=function(r){e._requestId=null,e.started&&(e.update(r),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(e,r,i){return i===void 0&&(i=Mr.NORMAL),this._addListener(new po(e,r,i))},t.prototype.addOnce=function(e,r,i){return i===void 0&&(i=Mr.NORMAL),this._addListener(new po(e,r,i,!0))},t.prototype._addListener=function(e){var r=this._head.next,i=this._head;if(!r)e.connect(i);else{for(;r;){if(e.priority>r.priority){e.connect(i);break}i=r,r=r.next}e.previous||e.connect(i)}return this._startIfPossible(),this},t.prototype.remove=function(e,r){for(var i=this._head.next;i;)i.match(e,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(e){e===void 0&&(e=performance.now());var r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*yt.TARGET_FPMS;for(var s=this._head,a=s.next;a;)a=a.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,r)/1e3,yt.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),i0=function(){function t(){}return t.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Mr.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Xe.shared:new Xe,e.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},t.extension=fe.Application,t}();/*!
 * @pixi/core - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yt.PREFER_ENV=hr.any?Nr.WEBGL:Nr.WEBGL2,yt.STRICT_TEXTURE_CACHE=!1;var Bn=[];function Os(t,e){if(!t)return null;var r="";if(typeof t=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(var s=Bn.length-1;s>=0;--s){var a=Bn[s];if(a.test&&a.test(t,r))return new a(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var vo=function(t,e){return vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},vo(t,e)};function xe(t,e){vo(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _o=function(){return _o=Object.assign||function(e){for(var r=arguments,i,s=1,a=arguments.length;s<a;s++){i=r[s];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(e[h]=i[h])}return e},_o.apply(this,arguments)};function km(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}var Ii=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Ye("setRealSize"),this.onUpdate=new Ye("update"),this.onError=new Ye("onError")}return t.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},t.prototype.resize=function(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(e,r,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(e,r){return!1},t}(),wi=function(t){xe(e,t);function e(r,i){var s=this,a=i||{},h=a.width,l=a.height;if(!h||!l)throw new Error("BufferResource width or height invalid");return s=t.call(this,h,l)||this,s.data=r,s}return e.prototype.upload=function(r,i,s){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===lr.UNPACK);var h=i.realWidth,l=i.realHeight;return s.width===h&&s.height===l?a.texSubImage2D(i.target,0,0,0,h,l,i.format,s.type,this.data):(s.width=h,s.height=l,a.texImage2D(i.target,0,s.internalFormat,h,l,0,i.format,s.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},e}(Ii),Bm={scaleMode:Sr.NEAREST,format:ft.RGBA,alphaMode:lr.NPM},te=function(t){xe(e,t);function e(r,i){r===void 0&&(r=null),i===void 0&&(i=null);var s=t.call(this)||this;i=i||{};var a=i.alphaMode,h=i.mipmap,l=i.anisotropicLevel,f=i.scaleMode,c=i.width,_=i.height,A=i.wrapMode,m=i.format,I=i.type,y=i.target,b=i.resolution,R=i.resourceOptions;return r&&!(r instanceof Ii)&&(r=Os(r,R),r.internal=!0),s.resolution=b||yt.RESOLUTION,s.width=Math.round((c||0)*s.resolution)/s.resolution,s.height=Math.round((_||0)*s.resolution)/s.resolution,s._mipmap=h!==void 0?h:yt.MIPMAP_TEXTURES,s.anisotropicLevel=l!==void 0?l:yt.ANISOTROPIC_LEVEL,s._wrapMode=A||yt.WRAP_MODE,s._scaleMode=f!==void 0?f:yt.SCALE_MODE,s.format=m||ft.RGBA,s.type=I||Et.UNSIGNED_BYTE,s.target=y||ri.TEXTURE_2D,s.alphaMode=a!==void 0?a:lr.UNPACK,s.uid=ii(),s.touched=0,s.isPowerOfTwo=!1,s._refreshPOT(),s._glTextures={},s.dirtyId=0,s.dirtyStyleId=0,s.cacheId=null,s.valid=c>0&&_>0,s.textureCacheIds=[],s.destroyed=!1,s.resource=null,s._batchEnabled=0,s._batchLocation=0,s.parentTextureArray=null,s.setResource(r),s}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(r,i){var s;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,s=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,s=!0),s&&this.dirtyStyleId++,this},e.prototype.setSize=function(r,i,s){return s=s||this.resolution,this.setRealSize(r*s,i*s,s)},e.prototype.setRealSize=function(r,i,s){return this.resolution=s||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=no(this.realWidth)&&no(this.realHeight)},e.prototype.setResolution=function(r){var i=this.resolution;return i===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*i)/r,this.height=Math.round(this.height*i)/r,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(r){this.emit("error",this,r)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete fr[this.cacheId],delete rr[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(r,i,s){s===void 0&&(s=yt.STRICT_TEXTURE_CACHE);var a=typeof r=="string",h=null;if(a)h=r;else{if(!r._pixiId){var l=i&&i.pixiIdPrefix||"pixiid";r._pixiId=l+"_"+ii()}h=r._pixiId}var f=fr[h];if(a&&s&&!f)throw new Error('The cacheId "'+h+'" does not exist in BaseTextureCache.');return f||(f=new e(r,i),f.cacheId=h,e.addToCache(f,h)),f},e.fromBuffer=function(r,i,s,a){r=r||new Float32Array(i*s*4);var h=new wi(r,{width:i,height:s}),l=r instanceof Float32Array?Et.FLOAT:Et.UNSIGNED_BYTE;return new e(h,Object.assign(Bm,a||{width:i,height:s,type:l}))},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),fr[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),fr[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=fr[r];if(i){var s=i.textureCacheIds.indexOf(r);return s>-1&&i.textureCacheIds.splice(s,1),delete fr[r],i}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)delete fr[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},e._globalBatch=0,e}(yr),Fs=function(t){xe(e,t);function e(r,i){var s=this,a=i||{},h=a.width,l=a.height;s=t.call(this,h,l)||this,s.items=[],s.itemDirtyIds=[];for(var f=0;f<r;f++){var c=new te;s.items.push(c),s.itemDirtyIds.push(-2)}return s.length=r,s._load=null,s.baseTexture=null,s}return e.prototype.initFromArray=function(r,i){for(var s=0;s<this.length;s++)r[s]&&(r[s].castToBaseTexture?this.addBaseTextureAt(r[s].castToBaseTexture(),s):r[s]instanceof Ii?this.addResourceAt(r[s],s):this.addResourceAt(Os(r[s],i),s))},e.prototype.dispose=function(){for(var r=0,i=this.length;r<i;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(r,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[i].setResource(r),this},e.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=r,this.items[i].on("update",r.update,r)},e.prototype.unbind=function(r){t.prototype.unbind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",r.update,r)},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.items.map(function(a){return a.resource}).filter(function(a){return a}),s=i.map(function(a){return a.load()});return this._load=Promise.all(s).then(function(){var a=r.items[0],h=a.realWidth,l=a.realHeight;return r.resize(h,l),Promise.resolve(r)}),this._load},e}(Ii),mo=function(t){xe(e,t);function e(r,i){var s=this,a=i||{},h=a.width,l=a.height,f,c;return Array.isArray(r)?(f=r,c=r.length):c=r,s=t.call(this,c,{width:h,height:l})||this,f&&s.initFromArray(f,i),s}return e.prototype.addBaseTextureAt=function(r,i){if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=ri.TEXTURE_2D_ARRAY},e.prototype.upload=function(r,i,s){var a=this,h=a.length,l=a.itemDirtyIds,f=a.items,c=r.gl;s.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,h,0,i.format,s.type,null);for(var _=0;_<h;_++){var A=f[_];l[_]<A.dirtyId&&(l[_]=A.dirtyId,A.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,_,A.resource.width,A.resource.height,1,i.format,s.type,A.resource.source))}return!0},e}(Fs),Gr=function(t){xe(e,t);function e(r){var i=this,s=r,a=s.naturalWidth||s.videoWidth||s.width,h=s.naturalHeight||s.videoHeight||s.height;return i=t.call(this,a,h)||this,i.source=r,i.noSubImage=!1,i}return e.crossOrigin=function(r,i,s){s===void 0&&i.indexOf("data:")!==0?r.crossOrigin=Nl(i):s!==!1&&(r.crossOrigin=typeof s=="string"?s:"anonymous")},e.prototype.upload=function(r,i,s,a){var h=r.gl,l=i.realWidth,f=i.realHeight;if(a=a||this.source,a instanceof HTMLImageElement){if(!a.complete||a.naturalWidth===0)return!1}else if(a instanceof HTMLVideoElement&&a.readyState<=1)return!1;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===lr.UNPACK),!this.noSubImage&&i.target===h.TEXTURE_2D&&s.width===l&&s.height===f?h.texSubImage2D(h.TEXTURE_2D,0,0,0,i.format,s.type,a):(s.width=l,s.height=f,h.texImage2D(i.target,0,s.internalFormat,i.format,s.type,a)),!0},e.prototype.update=function(){if(!this.destroyed){var r=this.source,i=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;this.resize(i,s),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Ii),go=function(t){xe(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){var i=globalThis.OffscreenCanvas;return i&&r instanceof i?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},e}(Gr),yo=function(t){xe(e,t);function e(r,i){var s=this,a=i||{},h=a.width,l=a.height,f=a.autoLoad,c=a.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");s=t.call(this,6,{width:h,height:l})||this;for(var _=0;_<e.SIDES;_++)s.items[_].target=ri.TEXTURE_CUBE_MAP_POSITIVE_X+_;return s.linkBaseTexture=c!==!1,r&&s.initFromArray(r,i),f!==!1&&s.load(),s}return e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=ri.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(r,i,s){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=ri.TEXTURE_CUBE_MAP_POSITIVE_X+i,r.parentTextureArray=this.baseTexture,this.items[i]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[i]=r,this},e.prototype.upload=function(r,i,s){for(var a=this.itemDirtyIds,h=0;h<e.SIDES;h++){var l=this.items[h];(a[h]<l.dirtyId||s.dirtyId<i.dirtyId)&&(l.valid&&l.resource?(l.resource.upload(r,l,s),a[h]=l.dirtyId):a[h]<-1&&(r.gl.texImage2D(l.target,0,s.internalFormat,i.realWidth,i.realHeight,0,i.format,s.type,null),a[h]=-1))}return!0},e.test=function(r){return Array.isArray(r)&&r.length===e.SIDES},e.SIDES=6,e}(Fs),Ls=function(t){xe(e,t);function e(r,i){var s=this;if(i=i||{},!(r instanceof HTMLImageElement)){var a=new Image;Gr.crossOrigin(a,r,i.crossorigin),a.src=r,r=a}return s=t.call(this,r)||this,!r.complete&&s._width&&s._height&&(s._width=0,s._height=0),s.url=r.src,s._process=null,s.preserveBitmap=!1,s.createBitmap=(i.createBitmap!==void 0?i.createBitmap:yt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,s.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,s.bitmap=null,s._load=null,i.autoLoad!==!1&&s.load(),s}return e.prototype.load=function(r){var i=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(s,a){var h=i.source;i.url=h.src;var l=function(){i.destroyed||(h.onload=null,h.onerror=null,i.resize(h.width,h.height),i._load=null,i.createBitmap?s(i.process()):s(i))};h.complete&&h.src?l():(h.onload=l,h.onerror=function(f){a(f),i.onError.emit(f)})}),this._load)},e.prototype.process=function(){var r=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var s=globalThis.createImageBitmap,a=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:a?"cors":"no-cors"}).then(function(h){return h.blob()}).then(function(h){return s(h,0,0,i.width,i.height,{premultiplyAlpha:r.alphaMode===lr.UNPACK?"premultiply":"none"})}).then(function(h){return r.destroyed?Promise.reject():(r.bitmap=h,r.update(),r._process=null,Promise.resolve(r))}),this._process},e.prototype.upload=function(r,i,s){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,r,i,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,r,i,s,this.bitmap),!this.preserveBitmap){var a=!0,h=i._glTextures;for(var l in h){var f=h[l];if(f!==s&&f.dirtyId!==i.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},e}(Gr),bo=function(t){xe(e,t);function e(r,i){var s=this;return i=i||{},s=t.call(this,yt.ADAPTER.createCanvas())||this,s._width=0,s._height=0,s.svg=r,s.scale=i.scale||1,s._overrideWidth=i.width,s._overrideHeight=i.height,s._resolve=null,s._crossorigin=i.crossorigin,s._load=null,i.autoLoad!==!1&&s.load(),s}return e.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(i){if(r._resolve=function(){r.resize(r.source.width,r.source.height),i(r)},e.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var r=this,i=new Image;Gr.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(s){r._resolve&&(i.onerror=null,r.onError.emit(s))},i.onload=function(){if(r._resolve){var s=i.width,a=i.height;if(!s||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var h=s*r.scale,l=a*r.scale;(r._overrideWidth||r._overrideHeight)&&(h=r._overrideWidth||r._overrideHeight/a*s,l=r._overrideHeight||r._overrideWidth/s*a),h=Math.round(h),l=Math.round(l);var f=r.source;f.width=h,f.height=l,f._pixiId="canvas_"+ii(),f.getContext("2d").drawImage(i,0,0,s,a,0,0,h,l),r._resolve(),r._resolve=null}}},e.getSize=function(r){var i=e.SVG_SIZE.exec(r),s={};return i&&(s[i[1]]=Math.round(parseFloat(i[3])),s[i[5]]=Math.round(parseFloat(i[7]))),s},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(r,i){return i==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&e.SVG_XML.test(r)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Gr),xo=function(t){xe(e,t);function e(r,i){var s=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var h=r[0].src||r[0];Gr.crossOrigin(a,h,i.crossorigin);for(var l=0;l<r.length;++l){var f=document.createElement("source"),c=r[l],_=c.src,A=c.mime;_=_||r[l];var m=_.split("?").shift().toLowerCase(),I=m.slice(m.lastIndexOf(".")+1);A=A||e.MIME_TYPES[I]||"video/"+I,f.src=_,f.type=A,a.appendChild(f)}r=a}return s=t.call(this,r)||this,s.noSubImage=!0,s._autoUpdate=!0,s._isConnectedToTicker=!1,s._updateFPS=i.updateFPS||0,s._msToNextUpdate=0,s.autoPlay=i.autoPlay!==!1,s._load=null,s._resolve=null,s._onCanPlay=s._onCanPlay.bind(s),s._onError=s._onError.bind(s),i.autoLoad!==!1&&s.load(),s}return e.prototype.update=function(r){if(!this.destroyed){var i=Xe.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(s){r.valid?s(r):(r._resolve=s,i.load())}),this._load},e.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},e.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},e.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Xe.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Xe.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(r.videoWidth,r.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Xe.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Xe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Xe.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),e.test=function(r,i){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Gr),To=function(t){xe(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){return!!globalThis.createImageBitmap&&typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap},e}(Gr);Bn.push(Ls,To,go,xo,bo,wi,yo,mo);var n0={__proto__:null,Resource:Ii,BaseImageResource:Gr,INSTALLED:Bn,autoDetectResource:Os,AbstractMultiResource:Fs,ArrayResource:mo,BufferResource:wi,CanvasResource:go,CubeResource:yo,ImageResource:Ls,SVGResource:bo,VideoResource:xo,ImageBitmapResource:To},Dm=function(t){xe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.upload=function(r,i,s){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===lr.UNPACK);var h=i.realWidth,l=i.realHeight;return s.width===h&&s.height===l?a.texSubImage2D(i.target,0,0,0,h,l,i.format,s.type,this.data):(s.width=h,s.height=l,a.texImage2D(i.target,0,s.internalFormat,h,l,0,i.format,s.type,this.data)),!0},e}(wi),Ms=function(){function t(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ye("disposeFramebuffer"),this.multisample=Fe.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(e,r){return e===void 0&&(e=0),this.colorTextures[e]=r||new te(null,{scaleMode:Sr.NEAREST,resolution:1,mipmap:Or.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(e){return this.depthTexture=e||new te(new Dm(null,{width:this.width,height:this.height}),{scaleMode:Sr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Or.OFF,format:ft.DEPTH_COMPONENT,type:Et.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var s=this.colorTextures[i],a=s.resolution;s.setSize(e/a,r/a)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(e/a,r/a)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),Ao=function(t){xe(e,t);function e(r){r===void 0&&(r={});var i=this;if(typeof r=="number"){var s=arguments[0],a=arguments[1],h=arguments[2],l=arguments[3];r={width:s,height:a,scaleMode:h,resolution:l}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:Fe.NONE,i=t.call(this,null,r)||this,i.mipmap=Or.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Ms(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=r.multisample,i.maskStack=[],i.filterStack=[{}],i}return e.prototype.resize=function(r,i){this.framebuffer.resize(r*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(te),Io=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(e,r,i){var s=r.width,a=r.height;if(i){var h=e.width/2/s,l=e.height/2/a,f=e.x/s+h,c=e.y/a+l;i=Ce.add(i,Ce.NW),this.x0=f+h*Ce.uX(i),this.y0=c+l*Ce.uY(i),i=Ce.add(i,2),this.x1=f+h*Ce.uX(i),this.y1=c+l*Ce.uY(i),i=Ce.add(i,2),this.x2=f+h*Ce.uX(i),this.y2=c+l*Ce.uY(i),i=Ce.add(i,2),this.x3=f+h*Ce.uX(i),this.y3=c+l*Ce.uY(i)}else this.x0=e.x/s,this.y0=e.y/a,this.x1=(e.x+e.width)/s,this.y1=e.y/a,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/a,this.x3=e.x/s,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t}(),s0=new Io;function Gs(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var Dt=function(t){xe(e,t);function e(r,i,s,a,h,l){var f=t.call(this)||this;if(f.noFrame=!1,i||(f.noFrame=!0,i=new Qt(0,0,1,1)),r instanceof e&&(r=r.baseTexture),f.baseTexture=r,f._frame=i,f.trim=a,f.valid=!1,f._uvs=s0,f.uvMatrix=null,f.orig=s||i,f._rotate=Number(h||0),h===!0)f._rotate=2;else if(f._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return f.defaultAnchor=l?new ye(l.x,l.y):new ye(0,0),f._updateID=0,f.textureCacheIds=[],r.valid?f.noFrame?r.valid&&f.onBaseTextureUpdated(r):f.frame=i:r.once("loaded",f.onBaseTextureUpdated,f),f.noFrame&&r.on("update",f.onBaseTextureUpdated,f),f}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(r){if(this.baseTexture){if(r){var i=this.baseTexture.resource;i&&i.url&&rr[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var r=this._frame.clone(),i=this._frame===this.orig?r:this.orig.clone(),s=new e(this.baseTexture,!this.noFrame&&r,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(s._frame=r),s},e.prototype.updateUvs=function(){this._uvs===s0&&(this._uvs=new Io),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(r,i,s){i===void 0&&(i={}),s===void 0&&(s=yt.STRICT_TEXTURE_CACHE);var a=typeof r=="string",h=null;if(a)h=r;else if(r instanceof te){if(!r.cacheId){var l=i&&i.pixiIdPrefix||"pixiid";r.cacheId=l+"-"+ii(),te.addToCache(r,r.cacheId)}h=r.cacheId}else{if(!r._pixiId){var l=i&&i.pixiIdPrefix||"pixiid";r._pixiId=l+"_"+ii()}h=r._pixiId}var f=rr[h];if(a&&s&&!f)throw new Error('The cacheId "'+h+'" does not exist in TextureCache.');return!f&&!(r instanceof te)?(i.resolution||(i.resolution=Fn(r)),f=new e(new te(r,i)),f.baseTexture.cacheId=h,te.addToCache(f.baseTexture,h),e.addToCache(f,h)):!f&&r instanceof te&&(f=new e(r),e.addToCache(f,h)),f},e.fromURL=function(r,i){var s=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),a=e.from(r,Object.assign({resourceOptions:s},i),!1),h=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):h.load().then(function(){return Promise.resolve(a)})},e.fromBuffer=function(r,i,s,a){return new e(te.fromBuffer(r,i,s,a))},e.fromLoader=function(r,i,s,a){var h=new te(r,Object.assign({scaleMode:yt.SCALE_MODE,resolution:Fn(i)},a)),l=h.resource;l instanceof Ls&&(l.url=i);var f=new e(h);return s||(s=i),te.addToCache(f.baseTexture,s),e.addToCache(f,s),s!==i&&(te.addToCache(f.baseTexture,i),e.addToCache(f,i)),f.baseTexture.valid?Promise.resolve(f):new Promise(function(c){f.baseTexture.once("loaded",function(){return c(f)})})},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),rr[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),rr[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=rr[r];if(i){var s=i.textureCacheIds.indexOf(r);return s>-1&&i.textureCacheIds.splice(s,1),delete rr[r],i}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)rr[r.textureCacheIds[a]]===r&&delete rr[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var i=r.x,s=r.y,a=r.width,h=r.height,l=i+a>this.baseTexture.width,f=s+h>this.baseTexture.height;if(l||f){var c=l&&f?"and":"or",_="X: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.width,A="Y: "+s+" + "+h+" = "+(s+h)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(_+" "+c+" "+A))}this.valid=a&&h&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new te),Gs(e._EMPTY),Gs(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var r=yt.ADAPTER.createCanvas(16,16),i=r.getContext("2d");r.width=16,r.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(te.from(r)),Gs(e._WHITE),Gs(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(yr),si=function(t){xe(e,t);function e(r,i){var s=t.call(this,r,i)||this;return s.valid=!0,s.filterFrame=null,s.filterPoolKey=null,s.updateUvs(),s}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i,s){s===void 0&&(s=!0);var a=this.baseTexture.resolution,h=Math.round(r*a)/a,l=Math.round(i*a)/a;this.valid=h>0&&l>0,this._frame.width=this.orig.width=h,this._frame.height=this.orig.height=l,s&&this.baseTexture.resize(h,l),this.updateUvs()},e.prototype.setResolution=function(r){var i=this.baseTexture;i.resolution!==r&&(i.setResolution(r),this.resize(i.width,i.height,!1))},e.create=function(r){for(var i=arguments,s=[],a=1;a<arguments.length;a++)s[a-1]=i[a];return typeof r=="number"&&(er("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:s[0],scaleMode:s[1],resolution:s[2]}),new e(new Ao(r))},e}(Dt),a0=function(){function t(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(e,r,i){i===void 0&&(i=Fe.NONE);var s=new Ao(Object.assign({width:e,height:r,resolution:1,multisample:i},this.textureOptions));return new si(s)},t.prototype.getOptimalTexture=function(e,r,i,s){i===void 0&&(i=1),s===void 0&&(s=Fe.NONE);var a;e=Math.ceil(e*i-1e-6),r=Math.ceil(r*i-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=On(e),r=On(r),a=((e&65535)<<16|r&65535)>>>0,s>1&&(a+=s*4294967296)):a=s>1?-s:-1,this.texturePool[a]||(this.texturePool[a]=[]);var h=this.texturePool[a].pop();return h||(h=this.createTexture(e,r,s)),h.filterPoolKey=a,h.setResolution(i),h},t.prototype.getFilterTexture=function(e,r,i){var s=this.getOptimalTexture(e.width,e.height,r||e.resolution,i||Fe.NONE);return s.filterFrame=e.filterFrame,s},t.prototype.returnTexture=function(e){var r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)},t.prototype.returnFilterTexture=function(e){this.returnTexture(e)},t.prototype.clear=function(e){if(e=e!==!1,e)for(var r in this.texturePool){var i=this.texturePool[r];if(i)for(var s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var r in this.texturePool)if(Number(r)<0){var i=this.texturePool[r];if(i)for(var s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY=-1,t}(),wo=function(){function t(e,r,i,s,a,h,l){r===void 0&&(r=0),i===void 0&&(i=!1),s===void 0&&(s=Et.FLOAT),this.buffer=e,this.size=r,this.normalized=i,this.type=s,this.stride=a,this.start=h,this.instance=l}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,i,s,a){return new t(e,r,i,s,a)},t}(),Hm=0,Ge=function(){function t(e,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=Hm++,this.disposeRunner=new Ye("disposeBuffer")}return t.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===Tr.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Tr.ELEMENT_ARRAY_BUFFER:Tr.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),Xm={Float32Array,Uint32Array,Int32Array,Uint8Array};function Vm(t,e){for(var r=0,i=0,s={},a=0;a<t.length;a++)i+=e[a],r+=t[a].length;for(var h=new ArrayBuffer(r*4),l=null,f=0,a=0;a<t.length;a++){var c=e[a],_=t[a],A=Ps(_);s[A]||(s[A]=new Xm[A](h)),l=s[A];for(var m=0;m<_.length;m++){var I=(m/c|0)*i+f,y=m%c;l[I+y]=_[m]}f+=c}return new Float32Array(h)}var o0={5126:4,5123:2,5121:1},zm=0,jm={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},en=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r={}),this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=zm++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ye("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(e,r,i,s,a,h,l,f){if(i===void 0&&(i=0),s===void 0&&(s=!1),f===void 0&&(f=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Ge||(r instanceof Array&&(r=new Float32Array(r)),r=new Ge(r));var c=e.split("|");if(c.length>1){for(var _=0;_<c.length;_++)this.addAttribute(c[_],r,i,s,a);return this}var A=this.buffers.indexOf(r);return A===-1&&(this.buffers.push(r),A=this.buffers.length-1),this.attributes[e]=new wo(A,i,s,a,h,l,f),this.instanced=this.instanced||f,this},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},t.prototype.addIndex=function(e){return e instanceof Ge||(e instanceof Array&&(e=new Uint16Array(e)),e=new Ge(e)),e.type=Tr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],r=[],i=new Ge,s;for(s in this.attributes){var a=this.attributes[s],h=this.buffers[a.buffer];e.push(h.data),r.push(a.size*o0[a.type]/4),a.buffer=0}for(i.data=Vm(e,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var e in this.attributes){var r=this.attributes[e],i=this.buffers[r.buffer];return i.data.length/(r.stride/4||r.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new Ge(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];e.attributes[r]=new wo(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Tr.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var r=new t,i=[],s=[],a=[],h,l=0;l<e.length;l++){h=e[l];for(var f=0;f<h.buffers.length;f++)s[f]=s[f]||0,s[f]+=h.buffers[f].data.length,a[f]=0}for(var l=0;l<h.buffers.length;l++)i[l]=new jm[Ps(h.buffers[l].data)](s[l]),r.buffers[l]=new Ge(i[l]);for(var l=0;l<e.length;l++){h=e[l];for(var f=0;f<h.buffers.length;f++)i[f].set(h.buffers[f].data,a[f]),a[f]+=h.buffers[f].data.length}if(r.attributes=h.attributes,h.indexBuffer){r.indexBuffer=r.buffers[h.buffers.indexOf(h.indexBuffer)],r.indexBuffer.type=Tr.ELEMENT_ARRAY_BUFFER;for(var c=0,_=0,A=0,m=0,l=0;l<h.buffers.length;l++)if(h.buffers[l]!==h.indexBuffer){m=l;break}for(var l in h.attributes){var I=h.attributes[l];(I.buffer|0)===m&&(_+=I.size*o0[I.type]/4)}for(var l=0;l<e.length;l++){for(var y=e[l].indexBuffer.data,f=0;f<y.length;f++)r.indexBuffer.data[f+A]+=c;c+=e[l].buffers[m].data.length/_,A+=y.length}}return r},t}(),h0=function(t){xe(e,t);function e(){var r=t.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return e}(en),Eo=function(t){xe(e,t);function e(){var r=t.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Ge(r.vertices),r.uvBuffer=new Ge(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return e.prototype.map=function(r,i){var s=0,a=0;return this.uvs[0]=s,this.uvs[1]=a,this.uvs[2]=s+i.width/r.width,this.uvs[3]=a,this.uvs[4]=s+i.width/r.width,this.uvs[5]=a+i.height/r.height,this.uvs[6]=s,this.uvs[7]=a+i.height/r.height,s=i.x,a=i.y,this.vertices[0]=s,this.vertices[1]=a,this.vertices[2]=s+i.width,this.vertices[3]=a,this.vertices[4]=s+i.width,this.vertices[5]=a+i.height,this.vertices[6]=s,this.vertices[7]=a+i.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(en),Wm=0,ai=function(){function t(e,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Wm++,this.static=!!r,this.ubo=!!i,e instanceof Ge?(this.buffer=e,this.buffer.type=Tr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Ge(new Float32Array(1)),this.buffer.type=Tr.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,r,i){if(!this.ubo)this.uniforms[e]=new t(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(e,r,i){return new t(e,r,i)},t.uboFrom=function(e,r){return new t(e,r!=null?r:!0,!0)},t}(),u0=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Fe.NONE,this.sourceFrame=new Qt,this.destinationFrame=new Qt,this.bindingSourceFrame=new Qt,this.bindingDestinationFrame=new Qt,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),ks=[new ye,new ye,new ye,new ye],Co=new Ee,Po=function(){function t(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new a0,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new h0,this.quadUv=new Eo,this.tempRect=new Qt,this.activeState={},this.globalUniforms=new ai({outputFrame:new Qt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(e,r){for(var i,s,a=this.renderer,h=this.defaultFilterStack,l=this.statePool.pop()||new u0,f=this.renderer.renderTexture,c=r[0].resolution,_=r[0].multisample,A=r[0].padding,m=r[0].autoFit,I=(i=r[0].legacy)!==null&&i!==void 0?i:!0,y=1;y<r.length;y++){var b=r[y];c=Math.min(c,b.resolution),_=Math.min(_,b.multisample),A=this.useMaxPadding?Math.max(A,b.padding):A+b.padding,m=m&&b.autoFit,I=I||((s=b.legacy)!==null&&s!==void 0?s:!0)}h.length===1&&(this.defaultFilterStack[0].renderTexture=f.current),h.push(l),l.resolution=c,l.multisample=_,l.legacy=I,l.target=e,l.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),l.sourceFrame.pad(A);var R=this.tempRect.copyFrom(f.sourceFrame);a.projection.transform&&this.transformAABB(Co.copyFrom(a.projection.transform).invert(),R),m?(l.sourceFrame.fit(R),(l.sourceFrame.width<=0||l.sourceFrame.height<=0)&&(l.sourceFrame.width=0,l.sourceFrame.height=0)):l.sourceFrame.intersects(R)||(l.sourceFrame.width=0,l.sourceFrame.height=0),this.roundFrame(l.sourceFrame,f.current?f.current.resolution:a.resolution,f.sourceFrame,f.destinationFrame,a.projection.transform),l.renderTexture=this.getOptimalFilterTexture(l.sourceFrame.width,l.sourceFrame.height,c,_),l.filters=r,l.destinationFrame.width=l.renderTexture.width,l.destinationFrame.height=l.renderTexture.height;var F=this.tempRect;F.x=0,F.y=0,F.width=l.sourceFrame.width,F.height=l.sourceFrame.height,l.renderTexture.filterFrame=l.sourceFrame,l.bindingSourceFrame.copyFrom(f.sourceFrame),l.bindingDestinationFrame.copyFrom(f.destinationFrame),l.transform=a.projection.transform,a.projection.transform=null,f.bind(l.renderTexture,l.sourceFrame,F),a.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),i=r.filters;this.activeState=r;var s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;var a=s.inputSize,h=s.inputPixel,l=s.inputClamp;if(a[0]=r.destinationFrame.width,a[1]=r.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],h[0]=Math.round(a[0]*r.resolution),h[1]=Math.round(a[1]*r.resolution),h[2]=1/h[0],h[3]=1/h[1],l[0]=.5*h[2],l[1]=.5*h[3],l[2]=r.sourceFrame.width*a[2]-.5*h[2],l[3]=r.sourceFrame.height*a[3]-.5*h[3],r.legacy){var f=s.filterArea;f[0]=r.destinationFrame.width,f[1]=r.destinationFrame.height,f[2]=r.sourceFrame.x,f[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();var c=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,c.renderTexture,jr.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var _=r.renderTexture,A=this.getOptimalFilterTexture(_.width,_.height,r.resolution);A.filterFrame=_.filterFrame;var m=0;for(m=0;m<i.length-1;++m){m===1&&r.multisample>1&&(A=this.getOptimalFilterTexture(_.width,_.height,r.resolution),A.filterFrame=_.filterFrame),i[m].apply(this,_,A,jr.CLEAR,r);var I=_;_=A,A=I}i[m].apply(this,_,c.renderTexture,jr.BLEND,r),m>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(_),this.returnFilterTexture(A)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(e,r){r===void 0&&(r=jr.CLEAR);var i=this.renderer,s=i.renderTexture,a=i.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var h=this.tempRect;h.x=0,h.y=0,h.width=e.filterFrame.width,h.height=e.filterFrame.height,s.bind(e,e.filterFrame,h)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var l=a.stateId&1||this.forceClear;(r===jr.CLEAR||r===jr.BLIT&&l)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(e,r,i,s){var a=this.renderer;a.state.set(e.state),this.bindAndClear(i,s),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(ur.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(ur.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,r){var i=this.activeState,s=i.sourceFrame,a=i.destinationFrame,h=r._texture.orig,l=e.set(a.width,0,0,a.height,s.x,s.y),f=r.worldTransform.copyTo(Ee.TEMP_MATRIX);return f.invert(),l.prepend(f),l.scale(1/h.width,1/h.height),l.translate(r.anchor.x,r.anchor.y),l},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,r,i,s){return i===void 0&&(i=1),s===void 0&&(s=Fe.NONE),this.texturePool.getOptimalTexture(e,r,i,s)},t.prototype.getFilterTexture=function(e,r,i){if(typeof e=="number"){var s=e;e=r,r=s}e=e||this.activeState.renderTexture;var a=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,i||Fe.NONE);return a.filterFrame=e.filterFrame,a},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(e,r){var i=ks[0],s=ks[1],a=ks[2],h=ks[3];i.set(r.left,r.top),s.set(r.left,r.bottom),a.set(r.right,r.top),h.set(r.right,r.bottom),e.apply(i,i),e.apply(s,s),e.apply(a,a),e.apply(h,h);var l=Math.min(i.x,s.x,a.x,h.x),f=Math.min(i.y,s.y,a.y,h.y),c=Math.max(i.x,s.x,a.x,h.x),_=Math.max(i.y,s.y,a.y,h.y);r.x=l,r.y=f,r.width=c-l,r.height=_-f},t.prototype.roundFrame=function(e,r,i,s,a){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(a){var h=a.a,l=a.b,f=a.c,c=a.d;if((Math.abs(l)>1e-4||Math.abs(f)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(c)>1e-4))return}a=a?Co.copyFrom(a):Co.identity(),a.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(a,e),e.ceil(r),this.transformAABB(a.invert(),e)}},t}(),Dn=function(){function t(e){this.renderer=e}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(e){},t}(),Ro=function(){function t(e){this.renderer=e,this.emptyRenderer=new Dn(e),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,r){for(var i=this.renderer.texture.boundTextures,s=r-1;s>=0;--s)e[s]=i[s]||null,e[s]&&(e[s]._batchLocation=s)},t.prototype.boundArray=function(e,r,i,s){for(var a=e.elements,h=e.ids,l=e.count,f=0,c=0;c<l;c++){var _=a[c],A=_._batchLocation;if(A>=0&&A<s&&r[A]===_){h[c]=A;continue}for(;f<s;){var m=r[f];if(m&&m._batchEnabled===i&&m._batchLocation===f){f++;continue}h[c]=f,_._batchLocation=f,r[f]=_;break}}},t.prototype.destroy=function(){this.renderer=null},t}(),l0=0,No=function(){function t(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=l0++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=l0++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},t.prototype.createContext=function(e,r){var i;if(yt.PREFER_ENV>=Nr.WEBGL2&&(i=e.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl,r={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var r=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var s=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),f0=function(){function t(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Fe.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t}(),$m=new Qt,So=function(){function t(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Ms(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Qt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;yt.PREFER_ENV===Nr.WEBGL_LEGACY&&(r=null,i=null),r?e.drawBuffers=function(s){return r.drawBuffersWEBGL(s)}:(this.hasMRT=!1,e.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,r,i){i===void 0&&(i=0);var s=this.gl;if(e){var a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=i),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var h=0;h<e.colorTextures.length;h++){var l=e.colorTextures[h];this.renderer.texture.unbind(l.parentTextureArray||l)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){var f=r.width>>i,c=r.height>>i,_=f/r.width;this.setViewport(r.x*_,r.y*_,f,c)}else{var f=e.width>>i,c=e.height>>i;this.setViewport(0,0,f,c)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,r,i,s){var a=this.viewport;e=Math.round(e),r=Math.round(r),i=Math.round(i),s=Math.round(s),(a.width!==i||a.height!==s||a.x!==e||a.y!==r)&&(a.x=e,a.y=r,a.width=i,a.height=s,this.gl.viewport(e,r,i,s))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,r,i,s,a){a===void 0&&(a=Sn.COLOR|Sn.DEPTH);var h=this.gl;h.clearColor(e,r,i,s),h.clear(a)},t.prototype.initFramebuffer=function(e){var r=this.gl,i=new f0(r.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(e){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height)),i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));var s=e.colorTextures,a=s.length;r.drawBuffers||(a=Math.min(a,1));for(var h=0;h<a;h++){var l=s[h],f=l.parentTextureArray||l;this.renderer.texture.bind(f,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e,r){var i=this.gl,s=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures,h=a.length;i.drawBuffers||(h=Math.min(h,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?(s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));for(var l=[],f=0;f<h;f++){var c=a[f],_=c.parentTextureArray||c;this.renderer.texture.bind(_,0),!(f===0&&s.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+f,c.target,_._glTextures[this.CONTEXT_UID].texture,r),l.push(i.COLOR_ATTACHMENT0+f))}if(l.length>1&&i.drawBuffers(l),e.depthTexture){var A=this.writeDepthTexture;if(A){var m=e.depthTexture;this.renderer.texture.bind(m,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,m._glTextures[this.CONTEXT_UID].texture,r)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(s.stencil=s.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s.stencil)):s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)},t.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},t.prototype.detectSamples=function(e){var r=this.msaaSamples,i=Fe.NONE;if(e<=1||r===null)return i;for(var s=0;s<r.length;s++)if(r[s]<=e){i=r[s];break}return i===1&&(i=Fe.NONE),i},t.prototype.blit=function(e,r,i){var s=this,a=s.current,h=s.renderer,l=s.gl,f=s.CONTEXT_UID;if(h.context.webGLVersion===2&&a){var c=a.glFramebuffers[f];if(c){if(!e){if(!c.msaaBuffer)return;var _=a.colorTextures[0];if(!_)return;c.blitFramebuffer||(c.blitFramebuffer=new Ms(a.width,a.height),c.blitFramebuffer.addColorTexture(0,_)),e=c.blitFramebuffer,e.colorTextures[0]!==_&&(e.colorTextures[0]=_,e.dirtyId++,e.dirtyFormat++),(e.width!==a.width||e.height!==a.height)&&(e.width=a.width,e.height=a.height,e.dirtyId++,e.dirtySize++)}r||(r=$m,r.width=a.width,r.height=a.height),i||(i=r);var A=r.width===i.width&&r.height===i.height;this.bind(e),l.bindFramebuffer(l.READ_FRAMEBUFFER,c.framebuffer),l.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,l.COLOR_BUFFER_BIT,A?l.NEAREST:l.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,r){var i=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(i){delete e.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),r||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<r.length;i++)this.disposeFramebuffer(r[i],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.stencil=!0;var i=e.width,s=e.height,a=this.gl,h=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,h),r.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,r.multisample,a.DEPTH24_STENCIL8,i,s):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,i,s),r.stencil=h,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,h)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Qt},t.prototype.destroy=function(){this.renderer=null},t}(),Uo={5126:4,5123:2,5121:1},Oo=function(){function t(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;yt.PREFER_ENV===Nr.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=function(){return i.createVertexArrayOES()},e.bindVertexArray=function(a){return i.bindVertexArrayOES(a)},e.deleteVertexArray=function(a){return i.deleteVertexArrayOES(a)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var s=e.getExtension("ANGLE_instanced_arrays");s?(e.vertexAttribDivisor=function(a,h){return s.vertexAttribDivisorANGLE(a,h)},e.drawElementsInstanced=function(a,h,l,f,c){return s.drawElementsInstancedANGLE(a,h,l,f,c)},e.drawArraysInstanced=function(a,h,l,f){return s.drawArraysInstancedANGLE(a,h,l,f)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var i=this.gl,s=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},a=!0);var h=s[r.program.id]||this.initGeometryVao(e,r,a);this._activeGeometry=e,this._activeVao!==h&&(this._activeVao=h,this.hasVao?i.bindVertexArray(h):this.activateVao(e,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.renderer.buffer,i=0;i<e.buffers.length;i++){var s=e.buffers[i];r.update(s)}},t.prototype.checkCompatibility=function(e,r){var i=e.attributes,s=r.attributeData;for(var a in s)if(!i[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},t.prototype.getSignature=function(e,r){var i=e.attributes,s=r.attributeData,a=["g",e.id];for(var h in i)s[h]&&a.push(h,s[h].location);return a.join("-")},t.prototype.initGeometryVao=function(e,r,i){i===void 0&&(i=!0);var s=this.gl,a=this.CONTEXT_UID,h=this.renderer.buffer,l=r.program;l.glPrograms[a]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,l);var f=this.getSignature(e,l),c=e.glVertexArrayObjects[this.CONTEXT_UID],_=c[f];if(_)return c[l.id]=_,_;var A=e.buffers,m=e.attributes,I={},y={};for(var b in A)I[b]=0,y[b]=0;for(var b in m)!m[b].size&&l.attributeData[b]?m[b].size=l.attributeData[b].size:m[b].size||console.warn("PIXI Geometry attribute '"+b+"' size cannot be determined (likely the bound shader does not have the attribute)"),I[m[b].buffer]+=m[b].size*Uo[m[b].type];for(var b in m){var R=m[b],F=R.size;R.stride===void 0&&(I[R.buffer]===F*Uo[R.type]?R.stride=0:R.stride=I[R.buffer]),R.start===void 0&&(R.start=y[R.buffer],y[R.buffer]+=F*Uo[R.type])}_=s.createVertexArray(),s.bindVertexArray(_);for(var k=0;k<A.length;k++){var H=A[k];h.bind(H),i&&H._glBuffers[a].refCount++}return this.activateVao(e,l),this._activeVao=_,c[l.id]=_,c[f]=_,_},t.prototype.disposeGeometry=function(e,r){var i;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var s=e.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,h=e.buffers,l=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(e.disposeRunner.remove(this),!!s){if(l)for(var f=0;f<h.length;f++){var c=h[f]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!r&&l.dispose(h[f],r))}if(!r){for(var _ in s)if(_[0]==="g"){var A=s[_];this._activeVao===A&&this.unbind(),a.deleteVertexArray(A)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],e)},t.prototype.activateVao=function(e,r){var i=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,h=e.buffers,l=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);var f=null;for(var c in l){var _=l[c],A=h[_.buffer],m=A._glBuffers[s];if(r.attributeData[c]){f!==m&&(a.bind(A),f=m);var I=r.attributeData[c].location;if(i.enableVertexAttribArray(I),i.vertexAttribPointer(I,_.size,_.type||i.FLOAT,_.normalized,_.stride,_.start),_.instance)if(this.hasInstance)i.vertexAttribDivisor(I,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,r,i,s){var a=this.gl,h=this._activeGeometry;if(h.indexBuffer){var l=h.indexBuffer.data.BYTES_PER_ELEMENT,f=l===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?h.instanced?a.drawElementsInstanced(e,r||h.indexBuffer.data.length,f,(i||0)*l,s||1):a.drawElements(e,r||h.indexBuffer.data.length,f,(i||0)*l):console.warn("unsupported index buffer type: uint32")}else h.instanced?a.drawArraysInstanced(e,i,r||h.getSize(),s||1):a.drawArrays(e,i,r||h.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),c0=function(){function t(e){e===void 0&&(e=null),this.type=Me.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=yt.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Me.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function d0(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function p0(t,e){var r=t.getShaderSource(e).split(`
`).map(function(c,_){return _+": "+c}),i=t.getShaderInfoLog(e),s=i.split(`
`),a={},h=s.map(function(c){return parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(c){return c&&!a[c]?(a[c]=!0,!0):!1}),l=[""];h.forEach(function(c){r[c-1]="%c"+r[c-1]+"%c",l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var f=r.join(`
`);l[0]=f,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,l),console.groupEnd()}function Ym(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||p0(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||p0(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function Fo(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function v0(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Fo(2*e);case"bvec3":return Fo(3*e);case"bvec4":return Fo(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var _0={},Hn=_0;function m0(){if(Hn===_0||Hn&&Hn.isContextLost()){var t=yt.ADAPTER.createCanvas(),e=void 0;yt.PREFER_ENV>=Nr.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Hn=e}return Hn}var Bs;function Zm(){if(!Bs){Bs=xr.MEDIUM;var t=m0();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Bs=e.precision?xr.HIGH:xr.MEDIUM}}return Bs}function g0(t,e,r){if(t.substring(0,9)!=="precision"){var i=e;return e===xr.HIGH&&r!==xr.HIGH&&(i=xr.MEDIUM),"precision "+i+` float;
`+t}else if(r!==xr.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var qm={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function y0(t){return qm[t]}var Ds=null,b0={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function x0(t,e){if(!Ds){var r=Object.keys(b0);Ds={};for(var i=0;i<r.length;++i){var s=r[i];Ds[t[s]]=b0[s]}}return Ds[e]}var Ei=[{test:function(t){return t.type==="float"&&t.size===1},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,e){return t.type==="mat3"&&t.size===1&&e.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,e){return t.type==="vec2"&&t.size===1&&e.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,e){return t.type==="vec4"&&t.size===1&&e.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Jm={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Km={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Qm(t,e){var r,i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var s in t.uniforms){var a=e[s];if(!a){!((r=t.uniforms[s])===null||r===void 0)&&r.group&&(t.uniforms[s].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+s+", '"+s+`');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.`+s+`, syncData);
                    `));continue}for(var h=t.uniforms[s],l=!1,f=0;f<Ei.length;f++)if(Ei[f].test(a,h)){i.push(Ei[f].code(s,h)),l=!0;break}if(!l){var c=a.size===1?Jm:Km,_=c[a.type].replace("location",'ud["'+s+'"].location');i.push(`
            cu = ud["`+s+`"];
            cv = cu.value;
            v = uv["`+s+`"];
            `+_+";")}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var tg=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function eg(t){for(var e="",r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+="if(test == "+r+".0){}");return e}function T0(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=tg.replace(/%forloop%/gi,eg(t));if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}var Xn;function rg(){if(typeof Xn=="boolean")return Xn;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Xn=t({a:"b"},"a","b")===!0}catch(e){Xn=!1}return Xn}var ig=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,ng=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,sg=0,Hs={},rn=function(){function t(e,r,i){i===void 0&&(i="pixi-shader"),this.id=sg++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Hs[i]?(Hs[i]++,i+="-"+Hs[i]):Hs[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=g0(this.vertexSrc,yt.PRECISION_VERTEX,xr.HIGH),this.fragmentSrc=g0(this.fragmentSrc,yt.PRECISION_FRAGMENT,Zm())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return ng},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return ig},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var s=e+r,a=ao[s];return a||(ao[s]=a=new t(e,r,i)),a},t}(),Wr=function(){function t(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof ai?this.uniformGroup=r:this.uniformGroup=new ai(r):this.uniformGroup=new ai({})}return t.prototype.checkUniformExists=function(e,r){if(r.uniforms[e])return!0;for(var i in r.uniforms){var s=r.uniforms[i];if(s.group&&this.checkUniformExists(e,s))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var s=rn.from(e,r);return new t(s,i)},t}(),Lo=0,Mo=1,Go=2,ko=3,Bo=4,Do=5,oi=function(){function t(){this.data=0,this.blendMode=Nt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<Lo)},set:function(e){!!(this.data&1<<Lo)!==e&&(this.data^=1<<Lo)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<Mo)},set:function(e){!!(this.data&1<<Mo)!==e&&(this.data^=1<<Mo)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<Go)},set:function(e){!!(this.data&1<<Go)!==e&&(this.data^=1<<Go)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<ko)},set:function(e){!!(this.data&1<<ko)!==e&&(this.data^=1<<ko)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<Do)},set:function(e){!!(this.data&1<<Do)!==e&&(this.data^=1<<Do)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Bo)},set:function(e){!!(this.data&1<<Bo)!==e&&(this.data^=1<<Bo)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==Nt.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),ag=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,og=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,$r=function(t){xe(e,t);function e(r,i,s){var a=this,h=rn.from(r||e.defaultVertexSrc,i||e.defaultFragmentSrc);return a=t.call(this,h,s)||this,a.padding=0,a.resolution=yt.FILTER_RESOLUTION,a.multisample=yt.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new oi,a}return e.prototype.apply=function(r,i,s,a,h){r.applyFilter(this,i,s,a)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return og},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return ag},enumerable:!1,configurable:!0}),e}(Wr),hg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,ug=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,A0=new Ee,Xs=function(){function t(e,r){this._texture=e,this.mapCoord=new Ee,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r=="undefined"?.5:r,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(e,r){r===void 0&&(r=e);for(var i=this.mapCoord,s=0;s<e.length;s+=2){var a=e[s],h=e[s+1];r[s]=a*i.a+h*i.c+i.tx,r[s+1]=a*i.b+h*i.d+i.ty}return r},t.prototype.update=function(e){var r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var s=r.orig,a=r.trim;a&&(A0.set(s.width/a.width,0,0,s.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(A0));var h=r.baseTexture,l=this.uClampFrame,f=this.clampMargin/h.resolution,c=this.clampOffset;return l[0]=(r._frame.x+f+c)/h.width,l[1]=(r._frame.y+f+c)/h.height,l[2]=(r._frame.x+r._frame.width-f+c)/h.width,l[3]=(r._frame.y+r._frame.height-f+c)/h.height,this.uClampOffset[0]=c/h.realWidth,this.uClampOffset[1]=c/h.realHeight,this.isSimple=r._frame.width===h.width&&r._frame.height===h.height&&r.rotate===0,!0},t}(),I0=function(t){xe(e,t);function e(r,i,s){var a=this,h=null;return typeof r!="string"&&i===void 0&&s===void 0&&(h=r,r=void 0,i=void 0,s=void 0),a=t.call(this,r||hg,i||ug,s)||this,a.maskSprite=h,a.maskMatrix=new Ee,a}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(r,i,s,a){var h=this._maskSprite,l=h._texture;l.valid&&(l.uvMatrix||(l.uvMatrix=new Xs(l,0)),l.uvMatrix.update(),this.uniforms.npmAlpha=l.baseTexture.alphaMode?0:1,this.uniforms.mask=l,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,h).prepend(l.uvMatrix.mapCoord),this.uniforms.alpha=h.worldAlpha,this.uniforms.maskClamp=l.uvMatrix.uClampFrame,r.applyFilter(this,i,s,a))},e}($r),Ho=function(){function t(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,r){var i=r;if(!i.isMaskData){var s=this.maskDataPool.pop()||new c0;s.pooled=!0,s.maskObject=r,i=s}var a=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(a),i._colorMask=a?a._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Me.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Me.SCISSOR:this.renderer.scissor.push(i);break;case Me.STENCIL:this.renderer.stencil.push(i);break;case Me.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Me.COLOR:this.pushColorMask(i);break}i.type===Me.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Me.SCISSOR:this.renderer.scissor.pop(r);break;case Me.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Me.SPRITE:this.popSpriteMask(r);break;case Me.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var i=this.maskStack[this.maskStack.length-1];i.type===Me.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(e){var r=e.maskObject;r?r.isSprite?e.type=Me.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Me.SCISSOR:e.type=Me.STENCIL:e.type=Me.COLOR},t.prototype.pushSpriteMask=function(e){var r,i,s=e.maskObject,a=e._target,h=e._filters;h||(h=this.alphaMaskPool[this.alphaMaskIndex],h||(h=this.alphaMaskPool[this.alphaMaskIndex]=[new I0]));var l=this.renderer,f=l.renderTexture,c,_;if(f.current){var A=f.current;c=e.resolution||A.resolution,_=(r=e.multisample)!==null&&r!==void 0?r:A.multisample}else c=e.resolution||l.resolution,_=(i=e.multisample)!==null&&i!==void 0?i:l.multisample;h[0].resolution=c,h[0].multisample=_,h[0].maskSprite=s;var m=a.filterArea;a.filterArea=s.getBounds(!0),l.filter.push(a,h),a.filterArea=m,e._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(e){var r=e._colorMask,i=e._colorMask=r&e.colorMask;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},t.prototype.popColorMask=function(e){var r=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},t.prototype.destroy=function(){this.renderer=null},t}(),w0=function(){function t(e){this.renderer=e,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var r=this.renderer.gl,i=this.getStackLength();this.maskStack=e;var s=this.getStackLength();s!==i&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),E0=new Ee,C0=[],Xo=function(t){xe(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=yt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},e.prototype.calcScissorRect=function(r){var i;if(!r._scissorRectLocal){var s=r._scissorRect,a=r.maskObject,h=this.renderer,l=h.renderTexture,f=a.getBounds(!0,(i=C0.pop())!==null&&i!==void 0?i:new Qt);this.roundFrameToPixels(f,l.current?l.current.resolution:h.resolution,l.sourceFrame,l.destinationFrame,h.projection.transform),s&&f.fit(s),r._scissorRectLocal=f}},e.isMatrixRotated=function(r){if(!r)return!1;var i=r.a,s=r.b,a=r.c,h=r.d;return(Math.abs(s)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(h)>1e-4)},e.prototype.testScissor=function(r){var i=r.maskObject;if(!i.isFastRect||!i.isFastRect()||e.isMatrixRotated(i.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var s=r._scissorRectLocal;return s.width>0&&s.height>0},e.prototype.roundFrameToPixels=function(r,i,s,a,h){e.isMatrixRotated(h)||(h=h?E0.copyFrom(h):E0.identity(),h.translate(-s.x,-s.y).scale(a.width/s.width,a.height/s.height).translate(a.x,a.y),this.renderer.filter.transformAABB(h,r),r.fit(a),r.x=Math.round(r.x*i),r.y=Math.round(r.y*i),r.width=Math.round(r.width*i),r.height=Math.round(r.height*i))},e.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var i=this.renderer.gl;r._scissorRect||i.enable(i.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(r){var i=this.renderer.gl;r&&C0.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},e.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,i;this.renderer.renderTexture.current?i=r.y:i=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,i,r.width,r.height)},e}(w0),Vo=function(t){xe(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=yt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},e.prototype.push=function(r){var i=r.maskObject,s=this.renderer.gl,a=r._stencilCounter;a===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),r._stencilCounter++;var h=r._colorMask;h!==0&&(r._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,a,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,h!==0&&(r._colorMask=h,s.colorMask((h&1)!==0,(h&2)!==0,(h&4)!==0,(h&8)!==0)),this._useCurrent()},e.prototype.pop=function(r){var i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,a=s?s._colorMask:15;a!==0&&(s._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,a!==0&&(s._colorMask=a,i.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var r=this.renderer.gl;r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},e}(w0),zo=function(){function t(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ee,this.transform=null}return t.prototype.update=function(e,r,i,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,r,i,s){var a=this.projectionMatrix,h=s?-1:1;a.identity(),a.a=1/r.width*2,a.d=h*(1/r.height*2),a.tx=-1-r.x*a.a,a.ty=-h-r.y*a.d},t.prototype.setTransform=function(e){},t.prototype.destroy=function(){this.renderer=null},t}(),Ci=new Qt,Vn=new Qt,jo=function(){function t(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Qt,this.destinationFrame=new Qt,this.viewportFrame=new Qt}return t.prototype.bind=function(e,r,i){e===void 0&&(e=null);var s=this.renderer;this.current=e;var a,h,l;e?(a=e.baseTexture,l=a.resolution,r||(Ci.width=e.frame.width,Ci.height=e.frame.height,r=Ci),i||(Vn.x=e.frame.x,Vn.y=e.frame.y,Vn.width=r.width,Vn.height=r.height,i=Vn),h=a.framebuffer):(l=s.resolution,r||(Ci.width=s.screen.width,Ci.height=s.screen.height,r=Ci),i||(i=Ci,i.width=r.width,i.height=r.height));var f=this.viewportFrame;f.x=i.x*l,f.y=i.y*l,f.width=i.width*l,f.height=i.height*l,e||(f.y=s.view.height-(f.y+f.height)),f.ceil(),this.renderer.framebuffer.bind(h,f),this.renderer.projection.update(i,r,l,!h),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var i=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,a=i.width!==s.width||i.height!==s.height;if(a){var h=this.viewportFrame,l=h.x,f=h.y,c=h.width,_=h.height;l=Math.round(l),f=Math.round(f),c=Math.round(c),_=Math.round(_),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,f,c,_)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),a&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function lg(t,e,r,i,s){r.buffer.update(s)}var fg={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},P0={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function R0(t){for(var e=t.map(function(f){return{data:f,offset:0,dataLen:0,dirty:0}}),r=0,i=0,s=0,a=0;a<e.length;a++){var h=e[a];if(r=P0[h.data.type],h.data.size>1&&(r=Math.max(r,16)*h.data.size),h.dataLen=r,i%r!==0&&i<16){var l=i%r%16;i+=l,s+=l}i+r>16?(s=Math.ceil(s/16)*16,h.offset=s,s+=r,i=r):(h.offset=s,i+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function N0(t,e){var r=[];for(var i in t)e[i]&&r.push(e[i]);return r.sort(function(s,a){return s.index-a.index}),r}function S0(t,e){if(!t.autoManage)return{size:0,syncFunc:lg};for(var r=N0(t.uniforms,e),i=R0(r),s=i.uboElements,a=i.size,h=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],l=0;l<s.length;l++){for(var f=s[l],c=t.uniforms[f.data.name],_=f.data.name,A=!1,m=0;m<Ei.length;m++){var I=Ei[m];if(I.codeUbo&&I.test(f.data,c)){h.push("offset = "+f.offset/4+";",Ei[m].codeUbo(f.data.name,c)),A=!0;break}}if(!A)if(f.data.size>1){var y=y0(f.data.type),b=Math.max(P0[f.data.type]/16,1),R=y/b,F=(4-R%4)%4;h.push(`
                cv = ud.`+_+`.value;
                v = uv.`+_+`;
                offset = `+f.offset/4+`;

                t = 0;

                for(var i=0; i < `+f.data.size*b+`; i++)
                {
                    for(var j = 0; j < `+R+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+F+`;
                }

                `)}else{var k=fg[f.data.type];h.push(`
                cv = ud.`+_+`.value;
                v = uv.`+_+`;
                offset = `+f.offset/4+`;
                `+k+`;
                `)}}return h.push(`
       renderer.buffer.update(buffer);
    `),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",h.join(`
`))}}var cg=function(){function t(){}return t}(),U0=function(){function t(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function dg(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<i;s++){var a=e.getActiveAttrib(t,s);if(a.name.indexOf("gl_")!==0){var h=x0(e,a.type),l={type:h,name:a.name,size:y0(h),location:e.getAttribLocation(t,a.name)};r[a.name]=l}}return r}function pg(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<i;s++){var a=e.getActiveUniform(t,s),h=a.name.replace(/\[.*?\]$/,""),l=!!a.name.match(/\[.*?\]$/),f=x0(e,a.type);r[h]={name:h,index:s,type:f,size:a.size,isArray:l,value:v0(f,a.size)}}return r}function O0(t,e){var r=d0(t,t.VERTEX_SHADER,e.vertexSrc),i=d0(t,t.FRAGMENT_SHADER,e.fragmentSrc),s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,i),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||Ym(t,s,r,i),e.attributeData=dg(s,t),e.uniformData=pg(s,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var a=Object.keys(e.attributeData);a.sort(function(_,A){return _>A?1:-1});for(var h=0;h<a.length;h++)e.attributeData[a[h]].location=h,t.bindAttribLocation(s,h,a[h]);t.linkProgram(s)}t.deleteShader(r),t.deleteShader(i);var l={};for(var h in e.uniformData){var f=e.uniformData[h];l[h]={location:t.getUniformLocation(s,h),value:v0(f.type,f.size)}}var c=new U0(s,l);return c}var vg=0,Vs={textureCount:0,uboCount:0},Wo=function(){function t(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=vg++}return t.prototype.systemCheck=function(){if(!rg())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,r){e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),r||(Vs.textureCount=0,Vs.uboCount=0,this.syncUniformGroup(e.uniformGroup,Vs)),s},t.prototype.setUniforms=function(e){var r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,r){var i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,r))},t.prototype.syncUniforms=function(e,r,i){var s=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);s(r.uniformData,e.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=Qm(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(e,r){var i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;var s=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,r);e.buffer.update(),s(i.uniformData,e.uniforms,this.renderer,Vs,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[r])},t.prototype.createSyncBufferGroup=function(e,r,i){var s=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var a=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;var h=this.getSignature(e,this.shader.program.uniformData,"ubo"),l=this._uboCache[h];if(l||(l=this._uboCache[h]=S0(e,this.shader.program.uniformData)),e.autoManage){var f=new Float32Array(l.size/4);e.buffer.update(f)}return r.uniformGroups[e.id]=l.syncFunc,r.uniformGroups[e.id]},t.prototype.getSignature=function(e,r,i){var s=e.uniforms,a=[i+"-"];for(var h in s)a.push(h),r[h]&&a.push(r[h].type);return a.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(e){var r=this.gl,i=e.program,s=O0(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();function _g(t,e){return e===void 0&&(e=[]),e[Nt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.ADD]=[t.ONE,t.ONE],e[Nt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.NONE]=[0,0],e[Nt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Nt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Nt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Nt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Nt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Nt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Nt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Nt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Nt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Nt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Nt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}var mg=0,gg=1,yg=2,bg=3,xg=4,Tg=5,$o=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Nt.NONE,this._blendEq=!1,this.map=[],this.map[mg]=this.setBlend,this.map[gg]=this.setOffset,this.map[yg]=this.setCullFace,this.map[bg]=this.setDepthTest,this.map[xg]=this.setFrontFace,this.map[Tg]=this.setDepthMask,this.checks=[],this.defaultState=new oi,this.defaultState.blend=!0}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=_g(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,i=0;r;)r&1&&this.map[i].call(this,!!(e.data&1<<i)),r=r>>1,i++;this.stateId=e.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(e){this.gl.depthMask(e)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,r){var i=this.checks.indexOf(e);r&&i===-1?this.checks.push(e):!r&&i!==-1&&this.checks.splice(i,1)},t.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),Yo=function(){function t(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=yt.GC_MAX_IDLE,this.checkCountMax=yt.GC_MAX_CHECK_COUNT,this.mode=yt.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Es.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,i=!1,s=0;s<r.length;s++){var a=r[s];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),r[s]=null,i=!0)}if(i){for(var h=0,s=0;s<r.length;s++)r[s]!==null&&(r[h++]=r[s]);r.length=h}},t.prototype.unload=function(e){var r=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(var s=e.children.length-1;s>=0;s--)this.unload(e.children[s])},t.prototype.destroy=function(){this.renderer=null},t}();function Ag(t){var e,r,i,s,a,h,l,f,c,_,A,m,I,y,b,R,F,k,H,z,W,X,rt;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?rt=(e={},e[Et.UNSIGNED_BYTE]=(r={},r[ft.RGBA]=t.RGBA8,r[ft.RGB]=t.RGB8,r[ft.RG]=t.RG8,r[ft.RED]=t.R8,r[ft.RGBA_INTEGER]=t.RGBA8UI,r[ft.RGB_INTEGER]=t.RGB8UI,r[ft.RG_INTEGER]=t.RG8UI,r[ft.RED_INTEGER]=t.R8UI,r[ft.ALPHA]=t.ALPHA,r[ft.LUMINANCE]=t.LUMINANCE,r[ft.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,r),e[Et.BYTE]=(i={},i[ft.RGBA]=t.RGBA8_SNORM,i[ft.RGB]=t.RGB8_SNORM,i[ft.RG]=t.RG8_SNORM,i[ft.RED]=t.R8_SNORM,i[ft.RGBA_INTEGER]=t.RGBA8I,i[ft.RGB_INTEGER]=t.RGB8I,i[ft.RG_INTEGER]=t.RG8I,i[ft.RED_INTEGER]=t.R8I,i),e[Et.UNSIGNED_SHORT]=(s={},s[ft.RGBA_INTEGER]=t.RGBA16UI,s[ft.RGB_INTEGER]=t.RGB16UI,s[ft.RG_INTEGER]=t.RG16UI,s[ft.RED_INTEGER]=t.R16UI,s[ft.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,s),e[Et.SHORT]=(a={},a[ft.RGBA_INTEGER]=t.RGBA16I,a[ft.RGB_INTEGER]=t.RGB16I,a[ft.RG_INTEGER]=t.RG16I,a[ft.RED_INTEGER]=t.R16I,a),e[Et.UNSIGNED_INT]=(h={},h[ft.RGBA_INTEGER]=t.RGBA32UI,h[ft.RGB_INTEGER]=t.RGB32UI,h[ft.RG_INTEGER]=t.RG32UI,h[ft.RED_INTEGER]=t.R32UI,h[ft.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,h),e[Et.INT]=(l={},l[ft.RGBA_INTEGER]=t.RGBA32I,l[ft.RGB_INTEGER]=t.RGB32I,l[ft.RG_INTEGER]=t.RG32I,l[ft.RED_INTEGER]=t.R32I,l),e[Et.FLOAT]=(f={},f[ft.RGBA]=t.RGBA32F,f[ft.RGB]=t.RGB32F,f[ft.RG]=t.RG32F,f[ft.RED]=t.R32F,f[ft.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,f),e[Et.HALF_FLOAT]=(c={},c[ft.RGBA]=t.RGBA16F,c[ft.RGB]=t.RGB16F,c[ft.RG]=t.RG16F,c[ft.RED]=t.R16F,c),e[Et.UNSIGNED_SHORT_5_6_5]=(_={},_[ft.RGB]=t.RGB565,_),e[Et.UNSIGNED_SHORT_4_4_4_4]=(A={},A[ft.RGBA]=t.RGBA4,A),e[Et.UNSIGNED_SHORT_5_5_5_1]=(m={},m[ft.RGBA]=t.RGB5_A1,m),e[Et.UNSIGNED_INT_2_10_10_10_REV]=(I={},I[ft.RGBA]=t.RGB10_A2,I[ft.RGBA_INTEGER]=t.RGB10_A2UI,I),e[Et.UNSIGNED_INT_10F_11F_11F_REV]=(y={},y[ft.RGB]=t.R11F_G11F_B10F,y),e[Et.UNSIGNED_INT_5_9_9_9_REV]=(b={},b[ft.RGB]=t.RGB9_E5,b),e[Et.UNSIGNED_INT_24_8]=(R={},R[ft.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,R),e[Et.FLOAT_32_UNSIGNED_INT_24_8_REV]=(F={},F[ft.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,F),e):rt=(k={},k[Et.UNSIGNED_BYTE]=(H={},H[ft.RGBA]=t.RGBA,H[ft.RGB]=t.RGB,H[ft.ALPHA]=t.ALPHA,H[ft.LUMINANCE]=t.LUMINANCE,H[ft.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,H),k[Et.UNSIGNED_SHORT_5_6_5]=(z={},z[ft.RGB]=t.RGB,z),k[Et.UNSIGNED_SHORT_4_4_4_4]=(W={},W[ft.RGBA]=t.RGBA,W),k[Et.UNSIGNED_SHORT_5_5_5_1]=(X={},X[ft.RGBA]=t.RGBA,X),k),rt}var zs=function(){function t(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Et.UNSIGNED_BYTE,this.internalFormat=ft.RGBA,this.samplerType=0}return t}(),Zo=function(){function t(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new te,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Ag(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};var s=new zs(e.createTexture());e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=s,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new zs(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(e,r){r===void 0&&(r=0);var i=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var r=this,i=r.gl,s=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<s.length;a++)s[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<s.length;a++)s[a]===e&&(this.currentLocation!==a&&(i.activeTexture(i.TEXTURE0+a),this.currentLocation=a),i.bindTexture(e.target,this.emptyTextures[e.target].texture),s[a]=null)},t.prototype.ensureSamplerType=function(e){var r=this,i=r.boundTextures,s=r.hasIntegerTextures,a=r.CONTEXT_UID;if(s)for(var h=e-1;h>=0;--h){var l=i[h];if(l){var f=l._glTextures[a];f.samplerType!==Un.FLOAT&&this.renderer.texture.unbind(l)}}},t.prototype.initTexture=function(e){var r=new zs(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(e,r){var i,s;r.internalFormat=(s=(i=this.internalFormats[e.type])===null||i===void 0?void 0:i[e.format])!==null&&s!==void 0?s:e.format,this.webGLVersion===2&&e.type===Et.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},t.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var i=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(i,e,r))r.samplerType!==Un.FLOAT&&(this.hasIntegerTextures=!0);else{var s=e.realWidth,a=e.realHeight,h=i.gl;(r.width!==s||r.height!==a||r.dirtyId<0)&&(r.width=s,r.height=a,h.texImage2D(e.target,0,r.internalFormat,s,a,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,r){var i=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var s=this.managedTextures.indexOf(e);s!==-1&&gi(this.managedTextures,s,1)}},t.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Or.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Ur.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,r){var i=this.gl;if(r.mipmap&&e.mipmap!==Or.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Sr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===Sr.LINEAR){var a=Math.min(e.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Sr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===Sr.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),F0={__proto__:null,FilterSystem:Po,BatchSystem:Ro,ContextSystem:No,FramebufferSystem:So,GeometrySystem:Oo,MaskSystem:Ho,ScissorSystem:Xo,StencilSystem:Vo,ProjectionSystem:zo,RenderTextureSystem:jo,ShaderSystem:Wo,StateSystem:$o,TextureGCSystem:Yo,TextureSystem:Zo},qo=new Ee,L0=function(t){xe(e,t);function e(r,i){r===void 0&&(r=tn.UNKNOWN);var s=t.call(this)||this;return i=Object.assign({},yt.RENDER_OPTIONS,i),s.options=i,s.type=r,s.screen=new Qt(0,0,i.width,i.height),s.view=i.view||yt.ADAPTER.createCanvas(),s.resolution=i.resolution||yt.RESOLUTION,s.useContextAlpha=i.useContextAlpha,s.autoDensity=!!i.autoDensity,s.preserveDrawingBuffer=i.preserveDrawingBuffer,s.clearBeforeRender=i.clearBeforeRender,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,1],s._backgroundColorString="#000000",s.backgroundColor=i.backgroundColor||s._backgroundColor,s.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(er("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),s.useContextAlpha=i.transparent,s.backgroundAlpha=i.transparent?0:1),s._lastObjectRendered=null,s.plugins={},s}return e.prototype.initPlugins=function(r){for(var i in r)this.plugins[i]=new r[i](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(i*this.resolution);var s=this.view.width/this.resolution,a=this.view.height/this.resolution;this.screen.width=s,this.screen.height=a,this.autoDensity&&(this.view.style.width=s+"px",this.view.style.height=a+"px"),this.emit("resize",s,a)},e.prototype.generateTexture=function(r,i,s,a){i===void 0&&(i={}),typeof i=="number"&&(er("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:s,region:a});var h=i.region,l=km(i,["region"]);a=h||r.getLocalBounds(null,!0),a.width===0&&(a.width=1),a.height===0&&(a.height=1);var f=si.create(_o({width:a.width,height:a.height},l));return qo.tx=-a.x,qo.ty=-a.y,this.render(r,{renderTexture:f,clear:!1,transform:qo,skipUpdateTransform:!!r.parent}),f},e.prototype.destroy=function(r){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var s=this;s.plugins=null,s.type=tn.UNKNOWN,s.view=null,s.screen=null,s._tempDisplayObjectParent=null,s.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=Qa(r),mi(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),e}(yr),Ig=function(){function t(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t}(),wg=function(){function t(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(e){var r=this,i=r.gl,s=r.CONTEXT_UID,a=e._glBuffers[s]||this.createGLBuffer(e);i.bindBuffer(e.type,a.buffer)},t.prototype.bindBufferBase=function(e,r){var i=this,s=i.gl,a=i.CONTEXT_UID;if(this.boundBufferBases[r]!==e){var h=e._glBuffers[a]||this.createGLBuffer(e);this.boundBufferBases[r]=e,s.bindBufferBase(s.UNIFORM_BUFFER,r,h.buffer)}},t.prototype.bindBufferRange=function(e,r,i){var s=this,a=s.gl,h=s.CONTEXT_UID;i=i||0;var l=e._glBuffers[h]||this.createGLBuffer(e);a.bindBufferRange(a.UNIFORM_BUFFER,r||0,l.buffer,i*256,256)},t.prototype.update=function(e){var r=this,i=r.gl,s=r.CONTEXT_UID,a=e._glBuffers[s];if(e._updateID!==a.updateID)if(a.updateID=e._updateID,i.bindBuffer(e.type,a.buffer),a.byteLength>=e.data.byteLength)i.bufferSubData(e.type,0,e.data);else{var h=e.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;a.byteLength=e.data.byteLength,i.bufferData(e.type,e.data,h)}},t.prototype.dispose=function(e,r){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var i=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),i&&(r||s.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedBuffers),i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],e)},t.prototype.createGLBuffer=function(e){var r=this,i=r.CONTEXT_UID,s=r.gl;return e._glBuffers[i]=new Ig(s.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[i]},t}(),Jo=function(t){xe(e,t);function e(r){var i=t.call(this,tn.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Ye("destroy"),contextChange:new Ye("contextChange"),reset:new Ye("reset"),update:new Ye("update"),postrender:new Ye("postrender"),prerender:new Ye("prerender"),resize:new Ye("resize")},i.runners.contextChange.add(i),i.globalUniforms=new ai({projectionMatrix:new Ee},!0),i.addSystem(Ho,"mask").addSystem(No,"context").addSystem($o,"state").addSystem(Wo,"shader").addSystem(Zo,"texture").addSystem(wg,"buffer").addSystem(Oo,"geometry").addSystem(So,"framebuffer").addSystem(Xo,"scissor").addSystem(Vo,"stencil").addSystem(zo,"projection").addSystem(Yo,"textureGC").addSystem(Po,"filter").addSystem(jo,"renderTexture").addSystem(Ro,"batch"),i.initPlugins(e.__plugins),i.multisample=void 0,r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,Al(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return e.create=function(r){if(Il())return new e(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r=this.gl,i;if(this.context.webGLVersion===1){var s=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,s)}else{var s=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,s)}i>=Fe.HIGH?this.multisample=Fe.HIGH:i>=Fe.MEDIUM?this.multisample=Fe.MEDIUM:i>=Fe.LOW?this.multisample=Fe.LOW:this.multisample=Fe.NONE},e.prototype.addSystem=function(r,i){var s=new r(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=s;for(var a in this.runners)this.runners[a].add(s);return this},e.prototype.render=function(r,i){var s,a,h,l;if(i&&(i instanceof si?(er("6.0.0","Renderer#render arguments changed, use options instead."),s=i,a=arguments[2],h=arguments[3],l=arguments[4]):(s=i.renderTexture,a=i.clear,h=i.transform,l=i.skipUpdateTransform)),this.renderingToScreen=!s,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=h,!this.context.isLost){if(s||(this._lastObjectRendered=r),!l){var f=r.enableTempParent();r.updateTransform(),r.disableTempParent(f)}this.renderTexture.bind(s),this.batch.currentRenderer.start(),(a!==void 0?a:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),s&&s.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(r,i,s,a){i===void 0&&(i={});var h=t.prototype.generateTexture.call(this,r,i,s,a);return this.framebuffer.blit(),h},e.prototype.resize=function(r,i){t.prototype.resize.call(this,r,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(r){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return er("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(r,i){er("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Lr.add({name:r,type:fe.RendererPlugin,ref:i})},e.__plugins={},e}(L0);Lr.handleByMap(fe.RendererPlugin,Jo.__plugins);function M0(t){return Jo.create(t)}var Eg=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Cg=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,G0=Eg,Ko=Cg,Pg=function(){function t(e){er("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return t.prototype.destroy=function(){this.renderer=null},t}(),js=function(){function t(){this.texArray=null,this.blend=0,this.type=ur.TRIANGLES,this.start=0,this.size=0,this.data=null}return t}(),Ws=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},t}(),$s=function(){function t(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(e){return this[e+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},t}(),k0=function(t){xe(e,t);function e(r){var i=t.call(this,r)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=oi.for2d(),i.size=yt.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),r.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return e.prototype.contextChange=function(){var r=this.renderer.gl;yt.PREFER_ENV===Nr.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),yt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=T0(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var r=e._drawCallPool,i=e._textureArrayPool,s=this.size/4,a=Math.floor(s/this.MAX_TEXTURES)+1;r.length<s;)r.push(new js);for(;i.length<a;)i.push(new Ws);for(var h=0;h<this.MAX_TEXTURES;h++)this._tempBoundTextures[h]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this,i=r._bufferedTextures,s=r.MAX_TEXTURES,a=e._textureArrayPool,h=this.renderer.batch,l=this._tempBoundTextures,f=this.renderer.textureGC.count,c=++te._globalBatch,_=0,A=a[0],m=0;h.copyBoundTextures(l,s);for(var I=0;I<this._bufferSize;++I){var y=i[I];i[I]=null,y._batchEnabled!==c&&(A.count>=s&&(h.boundArray(A,l,c,s),this.buildDrawCalls(A,m,I),m=I,A=a[++_],++c),y._batchEnabled=c,y.touched=f,A.elements[A.count++]=y)}A.count>0&&(h.boundArray(A,l,c,s),this.buildDrawCalls(A,m,this._bufferSize),++_,++c);for(var I=0;I<l.length;I++)l[I]=null;te._globalBatch=c},e.prototype.buildDrawCalls=function(r,i,s){var a=this,h=a._bufferedElements,l=a._attributeBuffer,f=a._indexBuffer,c=a.vertexSize,_=e._drawCallPool,A=this._dcIndex,m=this._aIndex,I=this._iIndex,y=_[A];y.start=this._iIndex,y.texArray=r;for(var b=i;b<s;++b){var R=h[b],F=R._texture.baseTexture,k=eo[F.alphaMode?1:0][R.blendMode];h[b]=null,i<b&&y.blend!==k&&(y.size=I-y.start,i=b,y=_[++A],y.texArray=r,y.start=I),this.packInterleavedGeometry(R,l,f,m,I),m+=R.vertexData.length/2*c,I+=R.indices.length,y.blend=k}i<s&&(y.size=I-y.start,++A),this._dcIndex=A,this._aIndex=m,this._iIndex=I},e.prototype.bindAndClearTexArray=function(r){for(var i=this.renderer.texture,s=0;s<r.count;s++)i.bind(r.elements[s],r.ids[s]),r.elements[s]=null;r.count=0},e.prototype.updateGeometry=function(){var r=this,i=r._packedGeometries,s=r._attributeBuffer,a=r._indexBuffer;yt.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(s.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(s.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var r=this._dcIndex,i=this.renderer,s=i.gl,a=i.state,h=e._drawCallPool,l=null,f=0;f<r;f++){var c=h[f],_=c.texArray,A=c.type,m=c.size,I=c.start,y=c.blend;l!==_&&(l=_,this.bindAndClearTexArray(_)),this.state.blendMode=y,a.set(this.state),s.drawElements(A,m,s.UNSIGNED_SHORT,I*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),yt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(r){var i=On(Math.ceil(r/8)),s=so(i),a=i*8;this._aBuffers.length<=s&&(this._iBuffers.length=s+1);var h=this._aBuffers[a];return h||(this._aBuffers[a]=h=new $s(a*this.vertexSize*4)),h},e.prototype.getIndexBuffer=function(r){var i=On(Math.ceil(r/12)),s=so(i),a=i*12;this._iBuffers.length<=s&&(this._iBuffers.length=s+1);var h=this._iBuffers[s];return h||(this._iBuffers[s]=h=new Uint16Array(a)),h},e.prototype.packInterleavedGeometry=function(r,i,s,a,h){for(var l=i.uint32View,f=i.float32View,c=a/this.vertexSize,_=r.uvs,A=r.indices,m=r.vertexData,I=r._texture.baseTexture._batchLocation,y=Math.min(r.worldAlpha,1),b=y<1&&r._texture.baseTexture.alphaMode?Cs(r._tintRGB,y):r._tintRGB+(y*255<<24),R=0;R<m.length;R+=2)f[a++]=m[R],f[a++]=m[R+1],f[a++]=_[R],f[a++]=_[R+1],l[a++]=b,f[a++]=I;for(var R=0;R<A.length;R++)s[h++]=c+A[R]},e._drawCallPool=[],e._textureArrayPool=[],e}(Dn),B0=function(){function t(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(e){if(!this.programCache[e]){for(var r=new Int32Array(e),i=0;i<e;i++)r[i]=i;this.defaultGroupCache[e]=ai.from({uSamplers:r},!0);var s=this.fragTemplate;s=s.replace(/%count%/gi,""+e),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new rn(this.vertexSrc,s)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ee,default:this.defaultGroupCache[e]};return new Wr(this.programCache[e],a)},t.prototype.generateSampleSrc=function(e){var r="";r+=`
`,r+=`
`;for(var i=0;i<e;i++)i>0&&(r+=`
else `),i<e-1&&(r+="if(vTextureId < "+i+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},t}(),Qo=function(t){xe(e,t);function e(r){r===void 0&&(r=!1);var i=t.call(this)||this;return i._buffer=new Ge(null,r,!1),i._indexBuffer=new Ge(null,r,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Et.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Et.FLOAT).addAttribute("aColor",i._buffer,4,!0,Et.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Et.FLOAT).addIndex(i._indexBuffer),i}return e}(en),D0=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,H0=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,X0=function(){function t(){}return t.create=function(e){var r=Object.assign({vertex:D0,fragment:H0,geometryClass:Qo,vertexSize:6},e),i=r.vertex,s=r.fragment,a=r.vertexSize,h=r.geometryClass;return function(l){xe(f,l);function f(c){var _=l.call(this,c)||this;return _.shaderGenerator=new B0(i,s),_.geometryClass=h,_.vertexSize=a,_}return f}(k0)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return D0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return H0},enumerable:!1,configurable:!0}),t}(),th=X0.create();Object.assign(th,{extension:{name:"batch",type:fe.RendererPlugin}});var V0={},Rg=function(t){Object.defineProperty(V0,t,{get:function(){return er("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),n0[t]}})};for(var eh in n0)Rg(eh);var z0={},Ng=function(t){Object.defineProperty(z0,t,{get:function(){return er("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),F0[t]}})};for(var eh in F0)Ng(eh);var Sg="6.5.2";/*!
 * @pixi/accessibility - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var j0={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Oe.mixin(j0);var Ug=9,Ys=100,Og=0,Fg=0,W0=2,$0=1,Lg=-1e3,Mg=-1e3,Gg=2,Y0=function(){function t(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(hr.tablet||hr.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=Ys+"px",r.style.height=Ys+"px",r.style.position="absolute",r.style.top=Og+"px",r.style.left=Fg+"px",r.style.zIndex=W0.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var e=this,r=document.createElement("button");r.style.width=$0+"px",r.style.height=$0+"px",r.style.position="absolute",r.style.top=Lg+"px",r.style.left=Mg+"px",r.style.zIndex=Gg.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},t.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var r=e.children;if(r)for(var i=0;i<r.length;i++)this.updateAccessibleObjects(r[i])}},t.prototype.update=function(){var e=performance.now();if(!(hr.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),i=r.left,s=r.top,a=r.width,h=r.height,l=this.renderer,f=l.width,c=l.height,_=l.resolution,A=a/f*_,m=h/c*_,I=this.div;I.style.left=i+"px",I.style.top=s+"px",I.style.width=f+"px",I.style.height=c+"px";for(var y=0;y<this.children.length;y++){var b=this.children[y];if(b.renderId!==this.renderId)b._accessibleActive=!1,gi(this.children,y,1),this.div.removeChild(b._accessibleDiv),this.pool.push(b._accessibleDiv),b._accessibleDiv=null,y--;else{I=b._accessibleDiv;var R=b.hitArea,F=b.worldTransform;b.hitArea?(I.style.left=(F.tx+R.x*F.a)*A+"px",I.style.top=(F.ty+R.y*F.d)*m+"px",I.style.width=R.width*F.a*A+"px",I.style.height=R.height*F.d*m+"px"):(R=b.getBounds(),this.capHitArea(R),I.style.left=R.x*A+"px",I.style.top=R.y*m+"px",I.style.width=R.width*A+"px",I.style.height=R.height*m+"px",I.title!==b.accessibleTitle&&b.accessibleTitle!==null&&(I.title=b.accessibleTitle),I.getAttribute("aria-label")!==b.accessibleHint&&b.accessibleHint!==null&&I.setAttribute("aria-label",b.accessibleHint)),(b.accessibleTitle!==I.title||b.tabIndex!==I.tabIndex)&&(I.title=b.accessibleTitle,I.tabIndex=b.tabIndex,this.debug&&this.updateDebugHTML(I))}}this.renderId++}},t.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},t.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var r=this.renderer,i=r.width,s=r.height;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>s&&(e.height=s-e.y)},t.prototype.addChild=function(e){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=Ys+"px",r.style.height=Ys+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=W0.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},t.prototype._onClick=function(e){var r=this.renderer.plugins.interaction,i=e.target.displayObject,s=r.eventData;r.dispatchEvent(i,"click",s),r.dispatchEvent(i,"pointertap",s),r.dispatchEvent(i,"tap",s)},t.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,i=e.target.displayObject,s=r.eventData;r.dispatchEvent(i,"mouseover",s)},t.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,i=e.target.displayObject,s=r.eventData;r.dispatchEvent(i,"mouseout",s)},t.prototype._onKeyDown=function(e){e.keyCode===Ug&&this.activate()},t.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[fe.RendererPlugin,fe.CanvasRendererPlugin]},t}();/*!
 * @pixi/interaction - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var rh=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ye,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(e,r,i){return e.worldTransform.applyInverse(i||this.global,r)},t.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var r="buttons"in e&&e.buttons;this.buttons=Number.isInteger(r)?r:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var ih=function(t,e){return ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},ih(t,e)};function kg(t,e){ih(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Z0=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),Zs=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(e,r){r?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),t}(),Bg=function(){function t(){this._tempPoint=new ye}return t.prototype.recursiveFindHit=function(e,r,i,s,a){var h;if(!r||!r.visible)return!1;var l=e.data.global;a=r.interactive||a;var f=!1,c=a,_=!0;if(r.hitArea)s&&(r.worldTransform.applyInverse(l,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?f=!0:(s=!1,_=!1)),c=!1;else if(r._mask&&s){var A=r._mask.isMaskData?r._mask.maskObject:r._mask;A&&!(!((h=A.containsPoint)===null||h===void 0)&&h.call(A,l))&&(s=!1)}if(_&&r.interactiveChildren&&r.children)for(var m=r.children,I=m.length-1;I>=0;I--){var y=m[I],b=this.recursiveFindHit(e,y,i,s,c);if(b){if(!y.parent)continue;c=!1,b&&(e.target&&(s=!1),f=!0)}}return a&&(s&&!e.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(l)&&(f=!0),r.interactive&&(f&&!e.target&&(e.target=r),i&&i(e,r,!!f))),f},t.prototype.findHit=function(e,r,i,s){this.recursiveFindHit(e,r,i,s,!1)},t}(),q0={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(t){t?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Oe.mixin(q0);var qs=1,Js={target:null,data:{global:null}},J0=function(t){kg(e,t);function e(r,i){var s=t.call(this)||this;return i=i||{},s.renderer=r,s.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,s.interactionFrequency=i.interactionFrequency||10,s.mouse=new rh,s.mouse.identifier=qs,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[qs]=s.mouse,s.interactionDataPool=[],s.eventData=new Z0,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.tickerAdded=!1,s.mouseOverRenderer=!("PointerEvent"in globalThis),s.supportsTouchEvents="ontouchstart"in globalThis,s.supportsPointerEvents=!!globalThis.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s.resolution=1,s.delayedEvents=[],s.search=new Bg,s._tempDisplayObject=new fo,s._eventListenerOptions={capture:!0,passive:!1},s._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(r,i){return Js.target=null,Js.data.global=r,i||(i=this.lastObjectRendered),this.processInteractive(Js,i,null,!0),Js.target},e.prototype.setTargetElement=function(r,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=i,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Xe.system.add(this.tickerUpdate,this,Mr.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Xe.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var i=this.activeInteractionData[r];if(i.originalEvent&&i.pointerType!=="touch"){var s=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(r){r=r||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var s=this.cursorStyles[r];if(s)switch(typeof s){case"string":i&&(this.interactionDOMElement.style.cursor=s);break;case"function":s(r);break;case"object":i&&Object.assign(this.interactionDOMElement.style,s);break}else i&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},e.prototype.dispatchEvent=function(r,i,s){(!s.stopPropagationHint||r===s.stopsPropagatingAt)&&(s.currentTarget=r,s.type=i,r.emit(i,s),r[i]&&r[i](s))},e.prototype.delayDispatchEvent=function(r,i,s){this.delayedEvents.push({displayObject:r,eventString:i,eventData:s})},e.prototype.mapPositionToPoint=function(r,i,s){var a;this.interactionDOMElement.parentElement?a=this.interactionDOMElement.getBoundingClientRect():a={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var h=1/this.resolution;r.x=(i-a.left)*(this.interactionDOMElement.width/a.width)*h,r.y=(s-a.top)*(this.interactionDOMElement.height/a.height)*h},e.prototype.processInteractive=function(r,i,s,a){var h=this.search.findHit(r,i,s,a),l=this.delayedEvents;if(!l.length)return h;r.stopPropagationHint=!1;var f=l.length;this.delayedEvents=[];for(var c=0;c<f;c++){var _=l[c],A=_.displayObject,m=_.eventString,I=_.eventData;I.stopsPropagatingAt===A&&(I.stopPropagationHint=!0),this.dispatchEvent(A,m,I)}return h},e.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);if(this.autoPreventDefault&&i[0].isNormalized){var s=r.cancelable||!("cancelable"in r);s&&r.preventDefault()}for(var a=i.length,h=0;h<a;h++){var l=i[h],f=this.getInteractionDataForPointerId(l),c=this.configureInteractionEventForDOMEvent(this.eventData,l,f);if(c.data.originalEvent=r,this.processInteractive(c,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",c),l.pointerType==="touch")this.emit("touchstart",c);else if(l.pointerType==="mouse"||l.pointerType==="pen"){var _=l.button===2;this.emit(_?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(r,i,s){var a=r.data,h=r.data.identifier;if(s){if(i.trackedPointers[h]||(i.trackedPointers[h]=new Zs(h)),this.dispatchEvent(i,"pointerdown",r),a.pointerType==="touch")this.dispatchEvent(i,"touchstart",r);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var l=a.button===2;l?i.trackedPointers[h].rightDown=!0:i.trackedPointers[h].leftDown=!0,this.dispatchEvent(i,l?"rightdown":"mousedown",r)}}},e.prototype.onPointerComplete=function(r,i,s){var a=this.normalizeToPointerData(r),h=a.length,l=r.target;r.composedPath&&r.composedPath().length>0&&(l=r.composedPath()[0]);for(var f=l!==this.interactionDOMElement?"outside":"",c=0;c<h;c++){var _=a[c],A=this.getInteractionDataForPointerId(_),m=this.configureInteractionEventForDOMEvent(this.eventData,_,A);if(m.data.originalEvent=r,this.processInteractive(m,this.lastObjectRendered,s,i||!f),this.emit(i?"pointercancel":"pointerup"+f,m),_.pointerType==="mouse"||_.pointerType==="pen"){var I=_.button===2;this.emit(I?"rightup"+f:"mouseup"+f,m)}else _.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+f,m),this.releaseInteractionDataForPointerId(_.pointerId))}},e.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(r,i){var s=r.data,a=r.data.identifier;i.trackedPointers[a]!==void 0&&(delete i.trackedPointers[a],this.dispatchEvent(i,"pointercancel",r),s.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",r))},e.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},e.prototype.processPointerUp=function(r,i,s){var a=r.data,h=r.data.identifier,l=i.trackedPointers[h],f=a.pointerType==="touch",c=a.pointerType==="mouse"||a.pointerType==="pen",_=!1;if(c){var A=a.button===2,m=Zs.FLAGS,I=A?m.RIGHT_DOWN:m.LEFT_DOWN,y=l!==void 0&&l.flags&I;s?(this.dispatchEvent(i,A?"rightup":"mouseup",r),y&&(this.dispatchEvent(i,A?"rightclick":"click",r),_=!0)):y&&this.dispatchEvent(i,A?"rightupoutside":"mouseupoutside",r),l&&(A?l.rightDown=!1:l.leftDown=!1)}s?(this.dispatchEvent(i,"pointerup",r),f&&this.dispatchEvent(i,"touchend",r),l&&((!c||_)&&this.dispatchEvent(i,"pointertap",r),f&&(this.dispatchEvent(i,"tap",r),l.over=!1))):l&&(this.dispatchEvent(i,"pointerupoutside",r),f&&this.dispatchEvent(i,"touchendoutside",r)),l&&l.none&&delete i.trackedPointers[h]},e.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var s=i.length,a=0;a<s;a++){var h=i[a],l=this.getInteractionDataForPointerId(h),f=this.configureInteractionEventForDOMEvent(this.eventData,h,l);f.data.originalEvent=r,this.processInteractive(f,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",f),h.pointerType==="touch"&&this.emit("touchmove",f),(h.pointerType==="mouse"||h.pointerType==="pen")&&this.emit("mousemove",f)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(r,i,s){var a=r.data,h=a.pointerType==="touch",l=a.pointerType==="mouse"||a.pointerType==="pen";l&&this.processPointerOverOut(r,i,s),(!this.moveWhenInside||s)&&(this.dispatchEvent(i,"pointermove",r),h&&this.dispatchEvent(i,"touchmove",r),l&&this.dispatchEvent(i,"mousemove",r))},e.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r),s=i[0];s.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(s),h=this.configureInteractionEventForDOMEvent(this.eventData,s,a);h.data.originalEvent=s,this.processInteractive(h,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",h),s.pointerType==="mouse"||s.pointerType==="pen"?this.emit("mouseout",h):this.releaseInteractionDataForPointerId(a.identifier)}},e.prototype.processPointerOverOut=function(r,i,s){var a=r.data,h=r.data.identifier,l=a.pointerType==="mouse"||a.pointerType==="pen",f=i.trackedPointers[h];s&&!f&&(f=i.trackedPointers[h]=new Zs(h)),f!==void 0&&(s&&this.mouseOverRenderer?(f.over||(f.over=!0,this.delayDispatchEvent(i,"pointerover",r),l&&this.delayDispatchEvent(i,"mouseover",r)),l&&this.cursor===null&&(this.cursor=i.cursor)):f.over&&(f.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),l&&this.dispatchEvent(i,"mouseout",r),f.none&&delete i.trackedPointers[h]))},e.prototype.onPointerOver=function(r){var i=this.normalizeToPointerData(r),s=i[0],a=this.getInteractionDataForPointerId(s),h=this.configureInteractionEventForDOMEvent(this.eventData,s,a);h.data.originalEvent=s,s.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",h),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mouseover",h)},e.prototype.getInteractionDataForPointerId=function(r){var i=r.pointerId,s;return i===qs||r.pointerType==="mouse"?s=this.mouse:this.activeInteractionData[i]?s=this.activeInteractionData[i]:(s=this.interactionDataPool.pop()||new rh,s.identifier=i,this.activeInteractionData[i]=s),s.copyEvent(r),s},e.prototype.releaseInteractionDataForPointerId=function(r){var i=this.activeInteractionData[r];i&&(delete this.activeInteractionData[r],i.reset(),this.interactionDataPool.push(i))},e.prototype.configureInteractionEventForDOMEvent=function(r,i,s){return r.data=s,this.mapPositionToPoint(s.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=s.global.x,i.globalY=s.global.y),s.originalEvent=i,r.reset(),r},e.prototype.normalizeToPointerData=function(r){var i=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var s=0,a=r.changedTouches.length;s<a;s++){var h=r.changedTouches[s];typeof h.button=="undefined"&&(h.button=r.touches.length?1:0),typeof h.buttons=="undefined"&&(h.buttons=r.touches.length?1:0),typeof h.isPrimary=="undefined"&&(h.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof h.width=="undefined"&&(h.width=h.radiusX||1),typeof h.height=="undefined"&&(h.height=h.radiusY||1),typeof h.tiltX=="undefined"&&(h.tiltX=0),typeof h.tiltY=="undefined"&&(h.tiltY=0),typeof h.pointerType=="undefined"&&(h.pointerType="touch"),typeof h.pointerId=="undefined"&&(h.pointerId=h.identifier||0),typeof h.pressure=="undefined"&&(h.pressure=h.force||.5),typeof h.twist=="undefined"&&(h.twist=0),typeof h.tangentialPressure=="undefined"&&(h.tangentialPressure=0),typeof h.layerX=="undefined"&&(h.layerX=h.offsetX=h.clientX),typeof h.layerY=="undefined"&&(h.layerY=h.offsetY=h.clientY),h.isNormalized=!0,i.push(h)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var l=r;typeof l.isPrimary=="undefined"&&(l.isPrimary=!0),typeof l.width=="undefined"&&(l.width=1),typeof l.height=="undefined"&&(l.height=1),typeof l.tiltX=="undefined"&&(l.tiltX=0),typeof l.tiltY=="undefined"&&(l.tiltY=0),typeof l.pointerType=="undefined"&&(l.pointerType="mouse"),typeof l.pointerId=="undefined"&&(l.pointerId=qs),typeof l.pressure=="undefined"&&(l.pressure=.5),typeof l.twist=="undefined"&&(l.twist=0),typeof l.tangentialPressure=="undefined"&&(l.tangentialPressure=0),l.isNormalized=!0,i.push(l)}else i.push(r);return i},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[fe.RendererPlugin,fe.CanvasRendererPlugin]},e}(yr);/*!
 * @pixi/extract - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var K0=new Qt,Q0=4,tf=function(){function t(e){this.renderer=e}return t.prototype.image=function(e,r,i){var s=new Image;return s.src=this.base64(e,r,i),s},t.prototype.base64=function(e,r,i){return this.canvas(e).toDataURL(r,i)},t.prototype.canvas=function(e,r){var i=this.renderer,s,a=!1,h,l=!1;e&&(e instanceof si?h=e:(h=this.renderer.generateTexture(e),l=!0)),h?(s=h.baseTexture.resolution,r=r!=null?r:h.frame,a=!1,i.renderTexture.bind(h)):(s=i.resolution,r||(r=K0,r.width=i.width,r.height=i.height),a=!0,i.renderTexture.bind(null));var f=Math.round(r.width*s),c=Math.round(r.height*s),_=new oo(f,c,1),A=new Uint8Array(Q0*f*c),m=i.gl;m.readPixels(Math.round(r.x*s),Math.round(r.y*s),f,c,m.RGBA,m.UNSIGNED_BYTE,A);var I=_.context.getImageData(0,0,f,c);if(t.arrayPostDivide(A,I.data),_.context.putImageData(I,0,0),a){var y=new oo(_.width,_.height,1);y.context.scale(1,-1),y.context.drawImage(_.canvas,0,-c),_.destroy(),_=y}return l&&h.destroy(!0),_.canvas},t.prototype.pixels=function(e,r){var i=this.renderer,s,a,h=!1;e&&(e instanceof si?a=e:(a=this.renderer.generateTexture(e),h=!0)),a?(s=a.baseTexture.resolution,r=r!=null?r:a.frame,i.renderTexture.bind(a)):(s=i.resolution,r||(r=K0,r.width=i.width,r.height=i.height),i.renderTexture.bind(null));var l=Math.round(r.width*s),f=Math.round(r.height*s),c=new Uint8Array(Q0*l*f),_=i.gl;return _.readPixels(Math.round(r.x*s),Math.round(r.y*s),l,f,_.RGBA,_.UNSIGNED_BYTE,c),h&&a.destroy(!0),t.arrayPostDivide(c,c),c},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(e,r){for(var i=0;i<e.length;i+=4){var s=r[i+3]=e[i+3];s!==0?(r[i]=Math.round(Math.min(e[i]*255/s,255)),r[i+1]=Math.round(Math.min(e[i+1]*255/s,255)),r[i+2]=Math.round(Math.min(e[i+2]*255/s,255))):(r[i]=e[i],r[i+1]=e[i+1],r[i+2]=e[i+2])}},t.extension={name:"extract",type:fe.RendererPlugin},t}();/*!
 * @pixi/loaders - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ks=function(){function t(e,r,i){r===void 0&&(r=!1),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t}();function ef(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var Yr=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(e){e===void 0&&(e=!1);var r=this._head;if(e)return!!r;for(var i=[];r;)i.push(r),r=r._next;return i},t.prototype.has=function(e){if(!(e instanceof Ks))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},t.prototype.dispatch=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var s=this._head;if(!s)return!1;for(;s;)s._once&&this.detach(s),s._fn.apply(s._thisArg,r),s=s._next;return!0},t.prototype.add=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return ef(this,new Ks(e,!1,r))},t.prototype.once=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return ef(this,new Ks(e,!0,r))},t.prototype.detach=function(e){if(!(e instanceof Ks))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},t.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},t}();function rf(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),s={},a=14;a--;)s[r.key[a]]=i[a]||"";return s[r.q.name]={},s[r.key[12]].replace(r.q.parser,function(h,l,f){l&&(s[r.q.name][l]=f)}),s}var nh,Qs=null,Dg=0,nf=200,Hg=204,Xg=1223,Vg=2;function sf(){}function af(t,e,r){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(t[e]=r)}function sh(t){return t.toString().replace("object ","")}var Ne=function(){function t(e,r,i){if(this._dequeue=sf,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=sf,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Yr,this.onProgress=new Yr,this.onComplete=new Yr,this.onAfterMiddleware=new Yr}return t.setExtensionLoadType=function(e,r){af(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){af(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(r)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:typeof nh=="undefined"&&(nh=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),nh&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(e){return(this._flags&e)!==0},t.prototype._setFlag=function(e,r){this._flags=r?this._flags|e:this._flags&~e},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image!="undefined"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(r)?r[i]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},t.prototype._createSource=function(e,r,i){i||(i=e+"/"+this._getExtension(r));var s=document.createElement("source");return s.src=r,s.type=i,s},t.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var e=this.xhr;this.abort(sh(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(sh(e)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(sh(e)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",i=typeof e.status=="undefined"?nf:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType=="undefined")&&(r=e.responseText),i===Dg&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=nf:i===Xg&&(i=Hg);var s=i/100|0;if(s===Vg)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(l){this.abort("Error trying to parse loaded json: "+l);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var h=document.createElement("div");h.innerHTML=r,this.data=h}this.type=t.TYPE.XML}catch(l){this.abort("Error trying to parse loaded xml: "+l);return}else this.data=e.response||r;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(e,r){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,Qs||(Qs=document.createElement("a")),Qs.href=e;var i=rf(Qs.href,{strictMode:!0}),s=!i.port&&r.port===""||i.port===r.port,a=i.protocol?i.protocol+":":"";return i.host!==r.hostname||!s||a!==r.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(e){e===void 0&&(e=this.url);var r="";if(this.isDataUrl){var i=e.indexOf("/");r=e.substring(i+1,e.indexOf(";",i))}else{var s=e.indexOf("?"),a=e.indexOf("#"),h=Math.min(s>-1?s:e.length,a>-1?a:e.length);e=e.substring(0,h),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();(function(t){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Ne||(Ne={}));function Pi(){}function zg(t){return function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];if(t===null)throw new Error("Callback was already called.");var a=t;t=null,a.apply(this,i)}}var jg=function(){function t(e,r){this.data=e,this.callback=r}return t}(),ah=function(){function t(e,r){var i=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Pi,this.unsaturated=Pi,this.empty=Pi,this.drain=Pi,this.error=Pi,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(s,a,h){if(h&&typeof h!="function")throw new Error("task callback must be a function");if(i.started=!0,s==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var l=new jg(s,typeof h=="function"?h:Pi);a?i._tasks.unshift(l):i._tasks.push(l),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var s=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(s.data,zg(i._next(s)))}},this._worker=e,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return t.prototype._next=function(e){var r=this;return function(){for(var i=arguments,s=[],a=0;a<arguments.length;a++)s[a]=i[a];r.workers-=1,e.callback.apply(e,s),s[0]!=null&&r.error(s[0],e.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},t.prototype.push=function(e,r){this._insert(e,!1,r)},t.prototype.kill=function(){this.workers=0,this.drain=Pi,this.started=!1,this._tasks=[]},t.prototype.unshift=function(e,r){this._insert(e,!0,r)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},t.eachSeries=function(e,r,i,s){var a=0,h=e.length;function l(f){if(f||a===h){i&&i(f);return}s?setTimeout(function(){r(e[a++],l)},1):r(e[a++],l)}l()},t.queue=function(e,r){return new t(e,r)},t}(),oh=100,Wg=/(#[\w-]+)?$/,zn=function(){function t(e,r){var i=this;e===void 0&&(e=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(f,c){return i._loadResource(f,c)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(f,c){return i._loadResource(f,c)},this._queue=ah.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Yr,this.onError=new Yr,this.onLoad=new Yr,this.onStart=new Yr,this.onComplete=new Yr;for(var s=0;s<t._plugins.length;++s){var a=t._plugins[s],h=a.pre,l=a.use;h&&this.pre(h),l&&this.use(l)}this._protected=!1}return t.prototype._add=function(e,r,i,s){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new Ne(e,r,i),typeof s=="function"&&this.resources[e].onAfterMiddleware.once(s),this.loading){for(var a=i.parentResource,h=[],l=0;l<a.children.length;++l)a.children[l].isComplete||h.push(a.children[l]);var f=a.progressChunk*(h.length+1),c=f/(h.length+2);a.children.push(this.resources[e]),a.progressChunk=c;for(var l=0;l<h.length;++l)h[l].progressChunk=c;this.resources[e].progressChunk=c}return this._queue.push(this.resources[e]),this},t.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},t.prototype.use=function(e){return this._afterMiddleware.push(e),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},t.prototype.load=function(e){if(er("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,i=oh/r,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(e){var r=rf(e,{strictMode:!0}),i;if(r.protocol||!r.path||e.indexOf("//")===0?i=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?i=this.baseUrl+"/"+e:i=this.baseUrl+e,this.defaultQueryString){var s=Wg.exec(i)[0];i=i.slice(0,i.length-s.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=s}return i},t.prototype._loadResource=function(e,r){var i=this;e._dequeue=r,ah.eachSeries(this._beforeMiddleware,function(s,a){s.call(i,e,function(){a(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=oh,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),ah.eachSeries(this._afterMiddleware,function(i,s){i.call(r,e,s)},function(){e.onAfterMiddleware.dispatch(e),r.progress=Math.min(oh,r.progress+e.progressChunk),r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return er("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Lr.add({type:fe.Loader,ref:e}),t},t._plugins=[],t}();Lr.handleByList(fe.Loader,zn._plugins),zn.prototype.add=function(e,r,i,s){if(Array.isArray(e)){for(var a=0;a<e.length;++a)this.add(e[a]);return this}if(typeof e=="object"&&(i=e,s=r||i.callback||i.onComplete,r=i.url,e=i.name||i.key||i.url),typeof r!="string"&&(s=i,i=r,r=e),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(s=i,i=null),this._add(e,r,i,s)};var of=function(){function t(){}return t.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?zn.shared:new zn},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=fe.Application,t}(),hf=function(){function t(){}return t.add=function(){Ne.setExtensionLoadType("svg",Ne.LOAD_TYPE.XHR),Ne.setExtensionXhrType("svg",Ne.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){if(e.data&&(e.type===Ne.TYPE.IMAGE||e.extension==="svg")){var i=e.data,s=e.url,a=e.name,h=e.metadata;Dt.fromLoader(i,s,a,h).then(function(l){e.texture=l,r()}).catch(r)}else r()},t.extension=fe.Loader,t}(),$g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Yg(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],s=[0,0,0,0],a=0;a<i.length;++a)r<t.length?i[a]=t.charCodeAt(r++)&255:i[a]=0;s[0]=i[0]>>2,s[1]=(i[0]&3)<<4|i[1]>>4,s[2]=(i[1]&15)<<2|i[2]>>6,s[3]=i[2]&63;var h=r-(t.length-1);switch(h){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64;break}for(var a=0;a<s.length;++a)e+=$g.charAt(s[a])}return e}function Zg(t,e){if(!t.data){e();return}if(t.xhr&&t.xhrType===Ne.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var r=t.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){t.data=new Image,t.data.src="data:"+r+";base64,"+Yg(t.xhr.responseText),t.type=Ne.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,e()};return}}else if(t.data.type.indexOf("image")===0){var i=globalThis.URL||globalThis.webkitURL,s=i.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=s,t.type=Ne.TYPE.IMAGE,t.data.onload=function(){i.revokeObjectURL(s),t.data.onload=null,e()};return}}e()}var qg=function(){function t(){}return t.extension=fe.Loader,t.use=Zg,t}();Lr.add(hf,qg);/*!
 * @pixi/compressed-textures - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var pe,Wt;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(Wt||(Wt={}));var jn=(pe={},pe[Wt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,pe[Wt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,pe[Wt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,pe[Wt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,pe[Wt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,pe[Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,pe[Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,pe[Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,pe[Wt.COMPRESSED_R11_EAC]=.5,pe[Wt.COMPRESSED_SIGNED_R11_EAC]=.5,pe[Wt.COMPRESSED_RG11_EAC]=1,pe[Wt.COMPRESSED_SIGNED_RG11_EAC]=1,pe[Wt.COMPRESSED_RGB8_ETC2]=.5,pe[Wt.COMPRESSED_RGBA8_ETC2_EAC]=1,pe[Wt.COMPRESSED_SRGB8_ETC2]=.5,pe[Wt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,pe[Wt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,pe[Wt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,pe[Wt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,pe[Wt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,pe[Wt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,pe[Wt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,pe[Wt.COMPRESSED_RGB_ETC1_WEBGL]=.5,pe[Wt.COMPRESSED_RGB_ATC_WEBGL]=.5,pe[Wt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,pe[Wt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,pe);/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var hh=function(t,e){return hh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},hh(t,e)};function uf(t,e){hh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Jg(t,e,r,i){function s(a){return a instanceof r?a:new r(function(h){h(a)})}return new(r||(r=Promise))(function(a,h){function l(_){try{c(i.next(_))}catch(A){h(A)}}function f(_){try{c(i.throw(_))}catch(A){h(A)}}function c(_){_.done?a(_.value):s(_.value).then(l,f)}c((i=i.apply(t,e||[])).next())})}function Kg(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,h;return h={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function l(c){return function(_){return f([c,_])}}function f(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(_){c=[6,_],s=0}finally{i=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var lf=function(t){uf(e,t);function e(r,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var s=this,a,h;return typeof r=="string"?(a=r,h=new Uint8Array):(a=null,h=r),s=t.call(this,h,i)||this,s.origin=a,s.buffer=h?new $s(h):null,s.origin&&i.autoLoad!==!1&&s.load(),h&&h.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return e.prototype.onBlobLoaded=function(r){},e.prototype.load=function(){return Jg(this,void 0,Promise,function(){var r,i,s;return Kg(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return r=a.sent(),[4,r.blob()];case 2:return i=a.sent(),[4,i.arrayBuffer()];case 3:return s=a.sent(),this.data=new Uint32Array(s),this.buffer=new $s(s),this.loaded=!0,this.onBlobLoaded(s),this.update(),[2,this]}})})},e}(wi),ta=function(t){uf(e,t);function e(r,i){var s=t.call(this,r,i)||this;return s.format=i.format,s.levels=i.levels||1,s._width=i.width,s._height=i.height,s._extension=e._formatToExtension(s.format),(i.levelBuffers||s.buffer)&&(s._levelBuffers=i.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:s.buffer.uint8View,s.format,s.levels,4,4,s.width,s.height)),s}return e.prototype.upload=function(r,i,s){var a=r.gl,h=r.context.extensions[this._extension];if(!h)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var l=0,f=this.levels;l<f;l++){var c=this._levelBuffers[l],_=c.levelID,A=c.levelWidth,m=c.levelHeight,I=c.levelBuffer;a.compressedTexImage2D(a.TEXTURE_2D,_,this.format,A,m,0,I)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(r,i,s,a,h,l,f){for(var c=new Array(s),_=r.byteOffset,A=l,m=f,I=A+a-1&~(a-1),y=m+h-1&~(h-1),b=I*y*jn[i],R=0;R<s;R++)c[R]={levelID:R,levelWidth:s>1?A:I,levelHeight:s>1?m:y,levelBuffer:new Uint8Array(r.buffer,_,b)},_+=b,A=A>>1||1,m=m>>1||1,I=A+a-1&~(a-1),y=m+h-1&~(h-1),b=I*y*jn[i];return c},e}(lf),ff=function(){function t(){}return t.use=function(e,r){var i=e.data,s=this;if(e.type===Ne.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var a=i.textures,h=void 0,l=void 0,f=0,c=a.length;f<c;f++){var _=a[f],A=_.src,m=_.format;if(m||(l=A),t.textureFormats[m]){h=A;break}}if(h=h||l,!h){r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(h===e.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var I={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},y=Fr.resolve(e.url.replace(s.baseUrl,""),h),b=i.cacheID;s.add(b,y,I,function(R){if(R.error){r(R.error);return}var F=R.texture,k=F===void 0?null:F,H=R.textures,z=H===void 0?{}:H;Object.assign(e,{texture:k,textures:z}),r()})}else r()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=yt.ADAPTER.createCanvas(),r=e.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=i}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;t._textureFormats={};for(var r in e){var i=e[r];i&&Object.assign(t._textureFormats,Object.getPrototypeOf(i))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=fe.Loader,t}();function cf(t,e,r){var i={textures:{},texture:null};if(!e)return i;var s=e.map(function(a){return new Dt(new te(a,Object.assign({mipmap:Or.OFF,alphaMode:lr.NO_PREMULTIPLIED_ALPHA},r)))});return s.forEach(function(a,h){var l=a.baseTexture,f=t+"-"+(h+1);te.addToCache(l,f),Dt.addToCache(a,f),h===0&&(te.addToCache(l,t),Dt.addToCache(a,t),i.texture=a),i.textures[f]=a}),i}var Wn,Ir,uh=4,ea=124,Qg=32,df=20,t1=542327876,ra={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},e1={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},ia={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},wr;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(wr||(wr={}));var lh;(function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(lh||(lh={}));var r1=1,i1=2,n1=4,s1=64,a1=512,o1=131072,h1=827611204,u1=861165636,l1=894720068,f1=808540228,c1=4,d1=(Wn={},Wn[h1]=Wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Wn[u1]=Wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Wn[l1]=Wt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Wn),p1=(Ir={},Ir[wr.DXGI_FORMAT_BC1_TYPELESS]=Wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ir[wr.DXGI_FORMAT_BC1_UNORM]=Wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ir[wr.DXGI_FORMAT_BC2_TYPELESS]=Wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ir[wr.DXGI_FORMAT_BC2_UNORM]=Wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ir[wr.DXGI_FORMAT_BC3_TYPELESS]=Wt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ir[wr.DXGI_FORMAT_BC3_UNORM]=Wt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ir[wr.DXGI_FORMAT_BC1_UNORM_SRGB]=Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Ir[wr.DXGI_FORMAT_BC2_UNORM_SRGB]=Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Ir[wr.DXGI_FORMAT_BC3_UNORM_SRGB]=Wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Ir);function pf(t){var e=new Uint32Array(t),r=e[0];if(r!==t1)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,ea/Uint32Array.BYTES_PER_ELEMENT),s=i[ra.HEIGHT],a=i[ra.WIDTH],h=i[ra.MIPMAP_COUNT],l=new Uint32Array(t,ra.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Qg/Uint32Array.BYTES_PER_ELEMENT),f=l[r1];if(f&n1){var c=l[e1.FOURCC];if(c!==f1){var _=d1[c],A=uh+ea,m=new Uint8Array(t,A),I=new ta(m,{format:_,width:a,height:s,levels:h});return[I]}var y=uh+ea,b=new Uint32Array(e.buffer,y,df/Uint32Array.BYTES_PER_ELEMENT),R=b[ia.DXGI_FORMAT],F=b[ia.RESOURCE_DIMENSION],k=b[ia.MISC_FLAG],H=b[ia.ARRAY_SIZE],z=p1[R];if(z===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+R);if(k===c1)throw new Error("DDSParser does not support cubemap textures");if(F===lh.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var W=new Array,X=uh+ea+df;if(H===1)W.push(new Uint8Array(t,X));else{for(var rt=jn[z],ut=0,tt=a,st=s,bt=0;bt<h;bt++){var Ct=Math.max(1,tt+3&-4),Gt=Math.max(1,st+3&-4),ee=Ct*Gt*rt;ut+=ee,tt=tt>>>1,st=st>>>1}for(var xt=X,bt=0;bt<H;bt++)W.push(new Uint8Array(t,xt,ut)),xt+=ut}return W.map(function(Tt){return new ta(Tt,{format:z,width:a,height:s,levels:h})})}throw f&s1?new Error("DDSParser does not support uncompressed texture data."):f&a1?new Error("DDSParser does not supported YUV uncompressed texture data."):f&o1?new Error("DDSParser does not support single-channel (lumninance) texture data!"):f&i1?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var hi,Zr,$n,vf=[171,75,84,88,32,49,49,187,13,10,26,10],v1=67305985,Er={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},fh=64,ch=(hi={},hi[Et.UNSIGNED_BYTE]=1,hi[Et.UNSIGNED_SHORT]=2,hi[Et.INT]=4,hi[Et.UNSIGNED_INT]=4,hi[Et.FLOAT]=4,hi[Et.HALF_FLOAT]=8,hi),_f=(Zr={},Zr[ft.RGBA]=4,Zr[ft.RGB]=3,Zr[ft.RG]=2,Zr[ft.RED]=1,Zr[ft.LUMINANCE]=1,Zr[ft.LUMINANCE_ALPHA]=2,Zr[ft.ALPHA]=1,Zr),mf=($n={},$n[Et.UNSIGNED_SHORT_4_4_4_4]=2,$n[Et.UNSIGNED_SHORT_5_5_5_1]=2,$n[Et.UNSIGNED_SHORT_5_6_5]=2,$n);function gf(t,e,r){r===void 0&&(r=!1);var i=new DataView(e);if(!_1(t,i))return null;var s=i.getUint32(Er.ENDIANNESS,!0)===v1,a=i.getUint32(Er.GL_TYPE,s),h=i.getUint32(Er.GL_FORMAT,s),l=i.getUint32(Er.GL_INTERNAL_FORMAT,s),f=i.getUint32(Er.PIXEL_WIDTH,s),c=i.getUint32(Er.PIXEL_HEIGHT,s)||1,_=i.getUint32(Er.PIXEL_DEPTH,s)||1,A=i.getUint32(Er.NUMBER_OF_ARRAY_ELEMENTS,s)||1,m=i.getUint32(Er.NUMBER_OF_FACES,s),I=i.getUint32(Er.NUMBER_OF_MIPMAP_LEVELS,s),y=i.getUint32(Er.BYTES_OF_KEY_VALUE_DATA,s);if(c===0||_!==1)throw new Error("Only 2D textures are supported");if(m!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(A!==1)throw new Error("WebGL does not support array textures");var b=4,R=4,F=f+3&-4,k=c+3&-4,H=new Array(A),z=f*c;a===0&&(z=F*k);var W;if(a!==0?ch[a]?W=ch[a]*_f[h]:W=mf[a]:W=jn[l],W===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var X=r?g1(i,y,s):null,rt=z*W,ut=rt,tt=f,st=c,bt=F,Ct=k,Gt=fh+y,ee=0;ee<I;ee++){for(var xt=i.getUint32(Gt,s),Tt=Gt+4,Ot=0;Ot<A;Ot++){var ve=H[Ot];ve||(ve=H[Ot]=new Array(I)),ve[ee]={levelID:ee,levelWidth:I>1||a!==0?tt:bt,levelHeight:I>1||a!==0?st:Ct,levelBuffer:new Uint8Array(e,Tt,ut)},Tt+=ut}Gt+=xt+4,Gt=Gt%4!==0?Gt+4-Gt%4:Gt,tt=tt>>1||1,st=st>>1||1,bt=tt+b-1&~(b-1),Ct=st+R-1&~(R-1),ut=bt*Ct*W}return a!==0?{uncompressed:H.map(function(Jt){var q=Jt[0].levelBuffer,at=!1;return a===Et.FLOAT?q=new Float32Array(Jt[0].levelBuffer.buffer,Jt[0].levelBuffer.byteOffset,Jt[0].levelBuffer.byteLength/4):a===Et.UNSIGNED_INT?(at=!0,q=new Uint32Array(Jt[0].levelBuffer.buffer,Jt[0].levelBuffer.byteOffset,Jt[0].levelBuffer.byteLength/4)):a===Et.INT&&(at=!0,q=new Int32Array(Jt[0].levelBuffer.buffer,Jt[0].levelBuffer.byteOffset,Jt[0].levelBuffer.byteLength/4)),{resource:new wi(q,{width:Jt[0].levelWidth,height:Jt[0].levelHeight}),type:a,format:at?m1(h):h}}),kvData:X}:{compressed:H.map(function(Jt){return new ta(null,{format:l,width:f,height:c,levels:I,levelBuffers:Jt})}),kvData:X}}function _1(t,e){for(var r=0;r<vf.length;r++)if(e.getUint8(r)!==vf[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}function m1(t){switch(t){case ft.RGBA:return ft.RGBA_INTEGER;case ft.RGB:return ft.RGB_INTEGER;case ft.RG:return ft.RG_INTEGER;case ft.RED:return ft.RED_INTEGER;default:return t}}function g1(t,e,r){for(var i=new Map,s=0;s<e;){var a=t.getUint32(fh+s,r),h=fh+s+4,l=3-(a+3)%4;if(a===0||a>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var f=0;f<a&&t.getUint8(h+f)!==0;f++);if(f===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var c=new TextDecoder().decode(new Uint8Array(t.buffer,h,f)),_=new DataView(t.buffer,h+f+1,a-f-1);i.set(c,_),s+=4+a+l}return i}Ne.setExtensionXhrType("dds",Ne.XHR_RESPONSE_TYPE.BUFFER);var yf=function(){function t(){}return t.use=function(e,r){if(e.extension==="dds"&&e.data)try{Object.assign(e,cf(e.name||e.url,pf(e.data),e.metadata))}catch(i){r(i);return}r()},t.extension=fe.Loader,t}();Ne.setExtensionXhrType("ktx",Ne.XHR_RESPONSE_TYPE.BUFFER);var bf=function(){function t(){}return t.use=function(e,r){if(e.extension==="ktx"&&e.data)try{var i=e.name||e.url,s=gf(i,e.data,this.loadKeyValueData),a=s.compressed,h=s.uncompressed,l=s.kvData;if(a){var f=cf(i,a,e.metadata);if(l&&f.textures)for(var c in f.textures)f.textures[c].baseTexture.ktxKeyValueData=l;Object.assign(e,f)}else if(h){var _={};h.forEach(function(A,m){var I=new Dt(new te(A.resource,{mipmap:Or.OFF,alphaMode:lr.NO_PREMULTIPLIED_ALPHA,type:A.type,format:A.format})),y=i+"-"+(m+1);l&&(I.baseTexture.ktxKeyValueData=l),te.addToCache(I.baseTexture,y),Dt.addToCache(I,y),m===0&&(_[i]=I,te.addToCache(I.baseTexture,i),Dt.addToCache(I,i)),_[y]=I}),Object.assign(e,{textures:_})}}catch(A){r(A);return}r()},t.extension=fe.Loader,t.loadKeyValueData=!1,t}();/*!
 * @pixi/particle-container - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var dh=function(t,e){return dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},dh(t,e)};function xf(t,e){dh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var y1=function(t){xf(e,t);function e(r,i,s,a){r===void 0&&(r=1500),s===void 0&&(s=16384),a===void 0&&(a=!1);var h=t.call(this)||this,l=16384;return s>l&&(s=l),h._properties=[!1,!0,!1,!1,!1],h._maxSize=r,h._batchSize=s,h._buffers=null,h._bufferUpdateIDs=[],h._updateID=0,h.interactiveChildren=!1,h.blendMode=Nt.NORMAL,h.autoResize=a,h.roundPixels=!0,h.baseTexture=null,h.setProperties(i),h._tint=0,h.tintRgb=new Float32Array(4),h.tint=16777215,h}return e.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,mi(r,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(r){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},e.prototype.onChildrenChange=function(r){for(var i=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(cr),Tf=function(){function t(e,r,i){this.geometry=new en,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<e.length;++s){var a=e[s];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Et.FLOAT,offset:a.offset},r[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var e=this.geometry,r=0;this.indexBuffer=new Ge(El(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var s=this.dynamicProperties[i];s.offset=r,r+=s.size,this.dynamicStride+=s.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new Ge(this.dynamicData,!1,!1);var h=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var s=this.staticProperties[i];s.offset=h,h+=s.size,this.staticStride+=s.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=new Ge(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var s=this.dynamicProperties[i];e.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===Et.UNSIGNED_BYTE,s.type,this.dynamicStride*4,s.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var s=this.staticProperties[i];e.addAttribute(s.attributeName,this.staticBuffer,0,s.type===Et.UNSIGNED_BYTE,s.type,this.staticStride*4,s.offset*4)}},t.prototype.uploadDynamic=function(e,r,i){for(var s=0;s<this.dynamicProperties.length;s++){var a=this.dynamicProperties[s];a.uploadFunction(e,r,i,a.type===Et.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(e,r,i){for(var s=0;s<this.staticProperties.length;s++){var a=this.staticProperties[s];a.uploadFunction(e,r,i,a.type===Et.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),b1=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,x1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Af=function(t){xf(e,t);function e(r){var i=t.call(this,r)||this;return i.shader=null,i.properties=null,i.tempMatrix=new Ee,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Et.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=Wr.from(x1,b1,{}),i.state=oi.for2d(),i}return e.prototype.render=function(r){var i=r.children,s=r._maxSize,a=r._batchSize,h=this.renderer,l=i.length;if(l!==0){l>s&&!r.autoResize&&(l=s);var f=r._buffers;f||(f=r._buffers=this.generateBuffers(r));var c=i[0]._texture.baseTexture,_=c.alphaMode>0;this.state.blendMode=ro(r.blendMode,_),h.state.set(this.state);var A=h.gl,m=r.worldTransform.copyTo(this.tempMatrix);m.prepend(h.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=m.toArray(!0),this.shader.uniforms.uColor=wl(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,_),this.shader.uniforms.uSampler=c,this.renderer.shader.bind(this.shader);for(var I=!1,y=0,b=0;y<l;y+=a,b+=1){var R=l-y;R>a&&(R=a),b>=f.length&&f.push(this._generateOneMoreBuffer(r));var F=f[b];F.uploadDynamic(i,y,R);var k=r._bufferUpdateIDs[b]||0;I=I||F._updateID<k,I&&(F._updateID=r._updateID,F.uploadStatic(i,y,R)),h.geometry.bind(F.geometry),A.drawElements(A.TRIANGLES,R*6,A.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(r){for(var i=[],s=r._maxSize,a=r._batchSize,h=r._properties,l=0;l<s;l+=a)i.push(new Tf(this.properties,h,a));return i},e.prototype._generateOneMoreBuffer=function(r){var i=r._batchSize,s=r._properties;return new Tf(this.properties,s,i)},e.prototype.uploadVertices=function(r,i,s,a,h,l){for(var f=0,c=0,_=0,A=0,m=0;m<s;++m){var I=r[i+m],y=I._texture,b=I.scale.x,R=I.scale.y,F=y.trim,k=y.orig;F?(c=F.x-I.anchor.x*k.width,f=c+F.width,A=F.y-I.anchor.y*k.height,_=A+F.height):(f=k.width*(1-I.anchor.x),c=k.width*-I.anchor.x,_=k.height*(1-I.anchor.y),A=k.height*-I.anchor.y),a[l]=c*b,a[l+1]=A*R,a[l+h]=f*b,a[l+h+1]=A*R,a[l+h*2]=f*b,a[l+h*2+1]=_*R,a[l+h*3]=c*b,a[l+h*3+1]=_*R,l+=h*4}},e.prototype.uploadPosition=function(r,i,s,a,h,l){for(var f=0;f<s;f++){var c=r[i+f].position;a[l]=c.x,a[l+1]=c.y,a[l+h]=c.x,a[l+h+1]=c.y,a[l+h*2]=c.x,a[l+h*2+1]=c.y,a[l+h*3]=c.x,a[l+h*3+1]=c.y,l+=h*4}},e.prototype.uploadRotation=function(r,i,s,a,h,l){for(var f=0;f<s;f++){var c=r[i+f].rotation;a[l]=c,a[l+h]=c,a[l+h*2]=c,a[l+h*3]=c,l+=h*4}},e.prototype.uploadUvs=function(r,i,s,a,h,l){for(var f=0;f<s;++f){var c=r[i+f]._texture._uvs;c?(a[l]=c.x0,a[l+1]=c.y0,a[l+h]=c.x1,a[l+h+1]=c.y1,a[l+h*2]=c.x2,a[l+h*2+1]=c.y2,a[l+h*3]=c.x3,a[l+h*3+1]=c.y3,l+=h*4):(a[l]=0,a[l+1]=0,a[l+h]=0,a[l+h+1]=0,a[l+h*2]=0,a[l+h*2+1]=0,a[l+h*3]=0,a[l+h*3+1]=0,l+=h*4)}},e.prototype.uploadTint=function(r,i,s,a,h,l){for(var f=0;f<s;++f){var c=r[i+f],_=c._texture.baseTexture.alphaMode>0,A=c.alpha,m=A<1&&_?Cs(c._tintRGB,A):c._tintRGB+(A*255<<24);a[l]=m,a[l+h]=m,a[l+h*2]=m,a[l+h*3]=m,l+=h*4}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:fe.RendererPlugin},e}(Dn);/*!
 * @pixi/graphics - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qr;(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(qr||(qr={}));var Jr;(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"})(Jr||(Jr={}));var nn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(e===void 0&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},ph=function(){function t(){this.color=16777215,this.alpha=1,this.texture=Dt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Dt.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}();/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var vh=function(t,e){return vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},vh(t,e)};function _h(t,e){vh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function If(t,e){var r,i;e===void 0&&(e=!1);var s=t.length;if(!(s<6)){for(var a=0,h=0,l=t[s-2],f=t[s-1];h<s;h+=2){var c=t[h],_=t[h+1];a+=(c-l)*(_+f),l=c,f=_}if(!e&&a>0||e&&a<=0)for(var A=s/2,h=A+A%2;h<s;h+=2){var m=s-h-2,I=s-h-1,y=h,b=h+1;r=[t[y],t[m]],t[m]=r[0],t[y]=r[1],i=[t[b],t[I]],t[I]=i[0],t[b]=i[1]}}}var mh={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,i=t.holes,s=e.points,a=e.indices;if(r.length>=6){If(r,!1);for(var h=[],l=0;l<i.length;l++){var f=i[l];If(f.points,!0),h.push(r.length/2),r=r.concat(f.points)}var c=Ji(r,h,2);if(!c)return;for(var _=s.length/2,l=0;l<c.length;l+=3)a.push(c[l]+_),a.push(c[l+1]+_),a.push(c[l+2]+_);for(var l=0;l<r.length;l++)s.push(r[l])}}},Yn={build:function(t){var e=t.points,r,i,s,a,h,l;if(t.type===De.CIRC){var f=t.shape;r=f.x,i=f.y,h=l=f.radius,s=a=0}else if(t.type===De.ELIP){var c=t.shape;r=c.x,i=c.y,h=c.width,l=c.height,s=a=0}else{var _=t.shape,A=_.width/2,m=_.height/2;r=_.x+A,i=_.y+m,h=l=Math.max(0,Math.min(_.radius,Math.min(A,m))),s=A-h,a=m-l}if(!(h>=0&&l>=0&&s>=0&&a>=0)){e.length=0;return}var I=Math.ceil(2.3*Math.sqrt(h+l)),y=I*8+(s?4:0)+(a?4:0);if(e.length=y,y!==0){if(I===0){e.length=8,e[0]=e[6]=r+s,e[1]=e[3]=i+a,e[2]=e[4]=r-s,e[5]=e[7]=i-a;return}var b=0,R=I*4+(s?2:0)+2,F=R,k=y;{var H=s+h,z=a,W=r+H,X=r-H,rt=i+z;if(e[b++]=W,e[b++]=rt,e[--R]=rt,e[--R]=X,a){var ut=i-z;e[F++]=X,e[F++]=ut,e[--k]=ut,e[--k]=W}}for(var tt=1;tt<I;tt++){var st=Math.PI/2*(tt/I),H=s+Math.cos(st)*h,z=a+Math.sin(st)*l,W=r+H,X=r-H,rt=i+z,ut=i-z;e[b++]=W,e[b++]=rt,e[--R]=rt,e[--R]=X,e[F++]=X,e[F++]=ut,e[--k]=ut,e[--k]=W}{var H=s,z=a+l,W=r+H,X=r-H,rt=i+z,ut=i-z;e[b++]=W,e[b++]=rt,e[--k]=ut,e[--k]=W,s&&(e[b++]=X,e[b++]=rt,e[--k]=ut,e[--k]=X)}}},triangulate:function(t,e){var r=t.points,i=e.points,s=e.indices;if(r.length!==0){var a=i.length/2,h=a,l,f;if(t.type!==De.RREC){var c=t.shape;l=c.x,f=c.y}else{var _=t.shape;l=_.x+_.width/2,f=_.y+_.height/2}var A=t.matrix;i.push(t.matrix?A.a*l+A.c*f+A.tx:l,t.matrix?A.b*l+A.d*f+A.ty:f),a++,i.push(r[0],r[1]);for(var m=2;m<r.length;m+=2)i.push(r[m],r[m+1]),s.push(a++,h,a);s.push(h+1,h,a)}}},wf={build:function(t){var e=t.shape,r=e.x,i=e.y,s=e.width,a=e.height,h=t.points;h.length=0,h.push(r,i,r+s,i,r+s,i+a,r,i+a)},triangulate:function(t,e){var r=t.points,i=e.points,s=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}};function sn(t,e,r){var i=e-t;return t+i*r}function na(t,e,r,i,s,a,h){h===void 0&&(h=[]);for(var l=20,f=h,c=0,_=0,A=0,m=0,I=0,y=0,b=0,R=0;b<=l;++b)R=b/l,c=sn(t,r,R),_=sn(e,i,R),A=sn(r,s,R),m=sn(i,a,R),I=sn(c,A,R),y=sn(_,m,R),!(b===0&&f[f.length-2]===I&&f[f.length-1]===y)&&f.push(I,y);return f}var Ef={build:function(t){if(qn.nextRoundedRectBehavior){Yn.build(t);return}var e=t.shape,r=t.points,i=e.x,s=e.y,a=e.width,h=e.height,l=Math.max(0,Math.min(e.radius,Math.min(a,h)/2));r.length=0,l?(na(i,s+l,i,s,i+l,s,r),na(i+a-l,s,i+a,s,i+a,s+l,r),na(i+a,s+h-l,i+a,s+h,i+a-l,s+h,r),na(i+l,s+h,i,s+h,i,s+h-l,r)):r.push(i,s,i+a,s,i+a,s+h,i,s+h)},triangulate:function(t,e){if(qn.nextRoundedRectBehavior){Yn.triangulate(t,e);return}for(var r=t.points,i=e.points,s=e.indices,a=i.length/2,h=Ji(r,null,2),l=0,f=h.length;l<f;l+=3)s.push(h[l]+a),s.push(h[l+1]+a),s.push(h[l+2]+a);for(var l=0,f=r.length;l<f;l++)i.push(r[l],r[++l])}};function Cf(t,e,r,i,s,a,h,l){var f=t-r*s,c=e-i*s,_=t+r*a,A=e+i*a,m,I;h?(m=i,I=-r):(m=-i,I=r);var y=f+m,b=c+I,R=_+m,F=A+I;return l.push(y,b),l.push(R,F),2}function an(t,e,r,i,s,a,h,l){var f=r-t,c=i-e,_=Math.atan2(f,c),A=Math.atan2(s-t,a-e);l&&_<A?_+=Math.PI*2:!l&&_>A&&(A+=Math.PI*2);var m=_,I=A-_,y=Math.abs(I),b=Math.sqrt(f*f+c*c),R=(15*y*Math.sqrt(b)/Math.PI>>0)+1,F=I/R;if(m+=F,l){h.push(t,e),h.push(r,i);for(var k=1,H=m;k<R;k++,H+=F)h.push(t,e),h.push(t+Math.sin(H)*b,e+Math.cos(H)*b);h.push(t,e),h.push(s,a)}else{h.push(r,i),h.push(t,e);for(var k=1,H=m;k<R;k++,H+=F)h.push(t+Math.sin(H)*b,e+Math.cos(H)*b),h.push(t,e);h.push(s,a),h.push(t,e)}return R*2}function T1(t,e){var r=t.shape,i=t.points||r.points.slice(),s=e.closePointEps;if(i.length!==0){var a=t.lineStyle,h=new ye(i[0],i[1]),l=new ye(i[i.length-2],i[i.length-1]),f=r.type!==De.POLY||r.closeStroke,c=Math.abs(h.x-l.x)<s&&Math.abs(h.y-l.y)<s;if(f){i=i.slice(),c&&(i.pop(),i.pop(),l.set(i[i.length-2],i[i.length-1]));var _=(h.x+l.x)*.5,A=(l.y+h.y)*.5;i.unshift(_,A),i.push(_,A)}var m=e.points,I=i.length/2,y=i.length,b=m.length/2,R=a.width/2,F=R*R,k=a.miterLimit*a.miterLimit,H=i[0],z=i[1],W=i[2],X=i[3],rt=0,ut=0,tt=-(z-X),st=H-W,bt=0,Ct=0,Gt=Math.sqrt(tt*tt+st*st);tt/=Gt,st/=Gt,tt*=R,st*=R;var ee=a.alignment,xt=(1-ee)*2,Tt=ee*2;f||(a.cap===Jr.ROUND?y+=an(H-tt*(xt-Tt)*.5,z-st*(xt-Tt)*.5,H-tt*xt,z-st*xt,H+tt*Tt,z+st*Tt,m,!0)+2:a.cap===Jr.SQUARE&&(y+=Cf(H,z,tt,st,xt,Tt,!0,m))),m.push(H-tt*xt,z-st*xt),m.push(H+tt*Tt,z+st*Tt);for(var Ot=1;Ot<I-1;++Ot){H=i[(Ot-1)*2],z=i[(Ot-1)*2+1],W=i[Ot*2],X=i[Ot*2+1],rt=i[(Ot+1)*2],ut=i[(Ot+1)*2+1],tt=-(z-X),st=H-W,Gt=Math.sqrt(tt*tt+st*st),tt/=Gt,st/=Gt,tt*=R,st*=R,bt=-(X-ut),Ct=W-rt,Gt=Math.sqrt(bt*bt+Ct*Ct),bt/=Gt,Ct/=Gt,bt*=R,Ct*=R;var ve=W-H,Jt=z-X,q=W-rt,at=ut-X,gt=Jt*q-at*ve,At=gt<0;if(Math.abs(gt)<.1){m.push(W-tt*xt,X-st*xt),m.push(W+tt*Tt,X+st*Tt);continue}var Pt=(-tt+H)*(-st+X)-(-tt+W)*(-st+z),$t=(-bt+rt)*(-Ct+X)-(-bt+W)*(-Ct+ut),kt=(ve*$t-q*Pt)/gt,Kt=(at*Pt-Jt*$t)/gt,ie=(kt-W)*(kt-W)+(Kt-X)*(Kt-X),Yt=W+(kt-W)*xt,qt=X+(Kt-X)*xt,Ut=W-(kt-W)*Tt,Ft=X-(Kt-X)*Tt,It=Math.min(ve*ve+Jt*Jt,q*q+at*at),_e=At?xt:Tt,ce=It+_e*_e*F,jt=ie<=ce;jt?a.join===qr.BEVEL||ie/F>k?(At?(m.push(Yt,qt),m.push(W+tt*Tt,X+st*Tt),m.push(Yt,qt),m.push(W+bt*Tt,X+Ct*Tt)):(m.push(W-tt*xt,X-st*xt),m.push(Ut,Ft),m.push(W-bt*xt,X-Ct*xt),m.push(Ut,Ft)),y+=2):a.join===qr.ROUND?At?(m.push(Yt,qt),m.push(W+tt*Tt,X+st*Tt),y+=an(W,X,W+tt*Tt,X+st*Tt,W+bt*Tt,X+Ct*Tt,m,!0)+4,m.push(Yt,qt),m.push(W+bt*Tt,X+Ct*Tt)):(m.push(W-tt*xt,X-st*xt),m.push(Ut,Ft),y+=an(W,X,W-tt*xt,X-st*xt,W-bt*xt,X-Ct*xt,m,!1)+4,m.push(W-bt*xt,X-Ct*xt),m.push(Ut,Ft)):(m.push(Yt,qt),m.push(Ut,Ft)):(m.push(W-tt*xt,X-st*xt),m.push(W+tt*Tt,X+st*Tt),a.join===qr.ROUND?At?y+=an(W,X,W+tt*Tt,X+st*Tt,W+bt*Tt,X+Ct*Tt,m,!0)+2:y+=an(W,X,W-tt*xt,X-st*xt,W-bt*xt,X-Ct*xt,m,!1)+2:a.join===qr.MITER&&ie/F<=k&&(At?(m.push(Ut,Ft),m.push(Ut,Ft)):(m.push(Yt,qt),m.push(Yt,qt)),y+=2),m.push(W-bt*xt,X-Ct*xt),m.push(W+bt*Tt,X+Ct*Tt),y+=2)}H=i[(I-2)*2],z=i[(I-2)*2+1],W=i[(I-1)*2],X=i[(I-1)*2+1],tt=-(z-X),st=H-W,Gt=Math.sqrt(tt*tt+st*st),tt/=Gt,st/=Gt,tt*=R,st*=R,m.push(W-tt*xt,X-st*xt),m.push(W+tt*Tt,X+st*Tt),f||(a.cap===Jr.ROUND?y+=an(W-tt*(xt-Tt)*.5,X-st*(xt-Tt)*.5,W-tt*xt,X-st*xt,W+tt*Tt,X+st*Tt,m,!1)+2:a.cap===Jr.SQUARE&&(y+=Cf(W,X,tt,st,xt,Tt,!1,m)));for(var sr=e.indices,ti=nn.epsilon*nn.epsilon,Ot=b;Ot<y+b-2;++Ot)H=m[Ot*2],z=m[Ot*2+1],W=m[(Ot+1)*2],X=m[(Ot+1)*2+1],rt=m[(Ot+2)*2],ut=m[(Ot+2)*2+1],!(Math.abs(H*(X-ut)+W*(ut-z)+rt*(z-X))<ti)&&sr.push(Ot,Ot+1,Ot+2)}}function A1(t,e){var r=0,i=t.shape,s=t.points||i.points,a=i.type!==De.POLY||i.closeStroke;if(s.length!==0){var h=e.points,l=e.indices,f=s.length/2,c=h.length/2,_=c;for(h.push(s[0],s[1]),r=1;r<f;r++)h.push(s[r*2],s[r*2+1]),l.push(_,_+1),_++;a&&l.push(_,c)}}function gh(t,e){t.lineStyle.native?A1(t,e):T1(t,e)}var yh=function(){function t(){}return t.curveTo=function(e,r,i,s,a,h){var l=h[h.length-2],f=h[h.length-1],c=f-r,_=l-e,A=s-r,m=i-e,I=Math.abs(c*m-_*A);if(I<1e-8||a===0)return(h[h.length-2]!==e||h[h.length-1]!==r)&&h.push(e,r),null;var y=c*c+_*_,b=A*A+m*m,R=c*A+_*m,F=a*Math.sqrt(y)/I,k=a*Math.sqrt(b)/I,H=F*R/y,z=k*R/b,W=F*m+k*_,X=F*A+k*c,rt=_*(k+H),ut=c*(k+H),tt=m*(F+z),st=A*(F+z),bt=Math.atan2(ut-X,rt-W),Ct=Math.atan2(st-X,tt-W);return{cx:W+e,cy:X+r,radius:a,startAngle:bt,endAngle:Ct,anticlockwise:_*A>m*c}},t.arc=function(e,r,i,s,a,h,l,f,c){for(var _=l-h,A=nn._segmentsCount(Math.abs(_)*a,Math.ceil(Math.abs(_)/Ln)*40),m=_/(A*2),I=m*2,y=Math.cos(m),b=Math.sin(m),R=A-1,F=R%1/R,k=0;k<=R;++k){var H=k+F*k,z=m+h+I*H,W=Math.cos(z),X=-Math.sin(z);c.push((y*W+b*X)*a+i,(y*-X+b*W)*a+s)}},t}(),Pf=function(){function t(){}return t.curveLength=function(e,r,i,s,a,h,l,f){for(var c=10,_=0,A=0,m=0,I=0,y=0,b=0,R=0,F=0,k=0,H=0,z=0,W=e,X=r,rt=1;rt<=c;++rt)A=rt/c,m=A*A,I=m*A,y=1-A,b=y*y,R=b*y,F=R*e+3*b*A*i+3*y*m*a+I*l,k=R*r+3*b*A*s+3*y*m*h+I*f,H=W-F,z=X-k,W=F,X=k,_+=Math.sqrt(H*H+z*z);return _},t.curveTo=function(e,r,i,s,a,h,l){var f=l[l.length-2],c=l[l.length-1];l.length-=2;var _=nn._segmentsCount(t.curveLength(f,c,e,r,i,s,a,h)),A=0,m=0,I=0,y=0,b=0;l.push(f,c);for(var R=1,F=0;R<=_;++R)F=R/_,A=1-F,m=A*A,I=m*A,y=F*F,b=y*F,l.push(I*f+3*m*F*e+3*A*y*i+b*a,I*c+3*m*F*r+3*A*y*s+b*h)},t}(),Rf=function(){function t(){}return t.curveLength=function(e,r,i,s,a,h){var l=e-2*i+a,f=r-2*s+h,c=2*i-2*e,_=2*s-2*r,A=4*(l*l+f*f),m=4*(l*c+f*_),I=c*c+_*_,y=2*Math.sqrt(A+m+I),b=Math.sqrt(A),R=2*A*b,F=2*Math.sqrt(I),k=m/b;return(R*y+b*m*(y-F)+(4*I*A-m*m)*Math.log((2*b+k+y)/(k+F)))/(4*R)},t.curveTo=function(e,r,i,s,a){for(var h=a[a.length-2],l=a[a.length-1],f=nn._segmentsCount(t.curveLength(h,l,e,r,i,s)),c=0,_=0,A=1;A<=f;++A){var m=A/f;c=h+(e-h)*m,_=l+(r-l)*m,a.push(c+(e+(i-e)*m-c)*m,_+(r+(s-r)*m-_)*m)}},t}(),Nf=function(){function t(){this.reset()}return t.prototype.begin=function(e,r,i){this.reset(),this.style=e,this.start=r,this.attribStart=i},t.prototype.end=function(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Ri,sa=(Ri={},Ri[De.POLY]=mh,Ri[De.CIRC]=Yn,Ri[De.ELIP]=Yn,Ri[De.RECT]=wf,Ri[De.RREC]=Ef,Ri),bh=[],Zn=[],xh=function(){function t(e,r,i,s){r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=r,this.matrix=s,this.type=e.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),on=new ye,Sf=function(t){_h(e,t);function e(){var r=t.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new Gn,r.boundsDirty=-1,r}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Zn.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var i=this.batches[r];i.reset(),bh.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(r,i,s,a){i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null);var h=new xh(r,i,s,a);return this.graphicsData.push(h),this.dirty++,this},e.prototype.drawHole=function(r,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var s=new xh(r,null,null,i),a=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=a.lineStyle,a.holes.push(s),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(r){for(var i=this.graphicsData,s=0;s<i.length;++s){var a=i[s];if(a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(r,on):on.copyFrom(r),a.shape.contains(on.x,on.y))){var h=!1;if(a.holes)for(var l=0;l<a.holes.length;l++){var f=a.holes[l];if(f.shape.contains(on.x,on.y)){h=!0;break}}if(!h)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,i=this.graphicsData,s=null,a=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],a=s.style);for(var h=this.shapeIndex;h<i.length;h++){this.shapeIndex++;var l=i[h],f=l.fillStyle,c=l.lineStyle,_=sa[l.type];_.build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(f.visible||c.visible)&&this.processHoles(l.holes);for(var A=0;A<2;A++){var m=A===0?f:c;if(m.visible){var I=m.texture.baseTexture,y=this.indices.length,b=this.points.length/2;I.wrapMode=Ur.REPEAT,A===0?this.processFill(l):this.processLine(l);var R=this.points.length/2-b;R!==0&&(s&&!this._compareStyles(a,m)&&(s.end(y,b),s=null),s||(s=bh.pop()||new Nf,s.begin(m,y,b),this.batches.push(s),a=m),this.addUvs(this.points,r,m.texture,b,R,m.matrix))}}}var F=this.indices.length,k=this.points.length/2;if(s&&s.end(F,k),this.batches.length===0){this.batchable=!0;return}var H=k>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&H===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=H?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(r,i){return!(!r||!i||r.texture.baseTexture!==i.texture.baseTexture||r.color+r.alpha!==i.color+i.alpha||!!r.native!=!!i.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,i=this.graphicsData.length;r<i;r++){var s=this.graphicsData[r],a=s.fillStyle,h=s.lineStyle;if(a&&!a.texture.baseTexture.valid||h&&!h.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,i=0,s=r.length;i<s;i++)for(var a=r[i],h=0;h<a.size;h++){var l=a.start+h;this.indicesUint16[l]=this.indicesUint16[l]-a.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,i=0;i<r.length;i++)if(r[i].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var r=++te._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),Zn.push(this.drawCalls[i]);this.drawCalls.length=0;var s=this.colors,a=this.textureIds,h=Zn.pop();h||(h=new js,h.texArray=new Ws),h.texArray.count=0,h.start=0,h.size=0,h.type=ur.TRIANGLES;var l=0,f=null,c=0,_=!1,A=ur.TRIANGLES,m=0;this.drawCalls.push(h);for(var i=0;i<this.batches.length;i++){var I=this.batches[i],y=8,b=I.style,R=b.texture.baseTexture;_!==!!b.native&&(_=!!b.native,A=_?ur.LINES:ur.TRIANGLES,f=null,l=y,r++),f!==R&&(f=R,R._batchEnabled!==r&&(l===y&&(r++,l=0,h.size>0&&(h=Zn.pop(),h||(h=new js,h.texArray=new Ws),this.drawCalls.push(h)),h.start=m,h.size=0,h.texArray.count=0,h.type=A),R.touched=1,R._batchEnabled=r,R._batchLocation=l,R.wrapMode=Ur.REPEAT,h.texArray.elements[h.texArray.count++]=R,l++)),h.size+=I.size,m+=I.size,c=R._batchLocation,this.addColors(s,b.color,b.alpha,I.attribSize,I.attribStart),this.addTextureIds(a,c,I.attribSize,I.attribStart)}te._globalBatch=r,this.packAttributes()},e.prototype.packAttributes=function(){for(var r=this.points,i=this.uvs,s=this.colors,a=this.textureIds,h=new ArrayBuffer(r.length*3*4),l=new Float32Array(h),f=new Uint32Array(h),c=0,_=0;_<r.length/2;_++)l[c++]=r[_*2],l[c++]=r[_*2+1],l[c++]=i[_*2],l[c++]=i[_*2+1],f[c++]=s[_],l[c++]=a[_];this._buffer.update(h),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(r){if(r.holes.length)mh.triangulate(r,this);else{var i=sa[r.type];i.triangulate(r,this)}},e.prototype.processLine=function(r){gh(r,this);for(var i=0;i<r.holes.length;i++)gh(r.holes[i],this)},e.prototype.processHoles=function(r){for(var i=0;i<r.length;i++){var s=r[i],a=sa[s.type];a.build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}},e.prototype.calculateBounds=function(){var r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(r,i){for(var s=0;s<r.length/2;s++){var a=r[s*2],h=r[s*2+1];r[s*2]=i.a*a+i.c*h+i.tx,r[s*2+1]=i.b*a+i.d*h+i.ty}},e.prototype.addColors=function(r,i,s,a,h){h===void 0&&(h=0);var l=(i>>16)+(i&65280)+((i&255)<<16),f=Cs(l,s);r.length=Math.max(r.length,h+a);for(var c=0;c<a;c++)r[h+c]=f},e.prototype.addTextureIds=function(r,i,s,a){a===void 0&&(a=0),r.length=Math.max(r.length,a+s);for(var h=0;h<s;h++)r[a+h]=i},e.prototype.addUvs=function(r,i,s,a,h,l){l===void 0&&(l=null);for(var f=0,c=i.length,_=s.frame;f<h;){var A=r[(a+f)*2],m=r[(a+f)*2+1];if(l){var I=l.a*A+l.c*m+l.tx;m=l.b*A+l.d*m+l.ty,A=I}f++,i.push(A/_.width,m/_.height)}var y=s.baseTexture;(_.width<y.width||_.height<y.height)&&this.adjustUvs(i,s,c,h)},e.prototype.adjustUvs=function(r,i,s,a){for(var h=i.baseTexture,l=1e-6,f=s+a*2,c=i.frame,_=c.width/h.width,A=c.height/h.height,m=c.x/c.width,I=c.y/c.height,y=Math.floor(r[s]+l),b=Math.floor(r[s+1]+l),R=s+2;R<f;R+=2)y=Math.min(y,Math.floor(r[R]+l)),b=Math.min(b,Math.floor(r[R+1]+l));m-=y,I-=b;for(var R=s;R<f;R+=2)r[R]=(r[R]+m)*_,r[R+1]=(r[R+1]+I)*A},e.BATCHABLE_SIZE=100,e}(Qo),Uf=function(t){_h(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=Jr.BUTT,r.join=qr.MITER,r.miterLimit=10,r}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(ph),I1=new Float32Array(3),Th={},qn=function(t){_h(e,t);function e(r){r===void 0&&(r=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new ph,i._lineStyle=new Uf,i._matrix=null,i._holeMode=!1,i.state=oi.for2d(),i._geometry=r||new Sf,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=Nt.NORMAL,i}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(r,i,s,a,h){return r===void 0&&(r=null),i===void 0&&(i=0),s===void 0&&(s=1),a===void 0&&(a=.5),h===void 0&&(h=!1),typeof r=="number"&&(r={width:r,color:i,alpha:s,alignment:a,native:h}),this.lineTextureStyle(r)},e.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:Dt.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Jr.BUTT,join:qr.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var i=r.width>0&&r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:i},r)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new Mn,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[i-2],r[i-1]))}else this.currentPath=new Mn,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(r,i){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=i,this},e.prototype.lineTo=function(r,i){this.currentPath||this.moveTo(0,0);var s=this.currentPath.points,a=s[s.length-2],h=s[s.length-1];return(a!==r||h!==i)&&s.push(r,i),this},e.prototype._initCurve=function(r,i){r===void 0&&(r=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,i]):this.moveTo(r,i)},e.prototype.quadraticCurveTo=function(r,i,s,a){this._initCurve();var h=this.currentPath.points;return h.length===0&&this.moveTo(0,0),Rf.curveTo(r,i,s,a,h),this},e.prototype.bezierCurveTo=function(r,i,s,a,h,l){return this._initCurve(),Pf.curveTo(r,i,s,a,h,l,this.currentPath.points),this},e.prototype.arcTo=function(r,i,s,a,h){this._initCurve(r,i);var l=this.currentPath.points,f=yh.curveTo(r,i,s,a,h,l);if(f){var c=f.cx,_=f.cy,A=f.radius,m=f.startAngle,I=f.endAngle,y=f.anticlockwise;this.arc(c,_,A,m,I,y)}return this},e.prototype.arc=function(r,i,s,a,h,l){if(l===void 0&&(l=!1),a===h)return this;!l&&h<=a?h+=Ln:l&&a<=h&&(a+=Ln);var f=h-a;if(f===0)return this;var c=r+Math.cos(a)*s,_=i+Math.sin(a)*s,A=this._geometry.closePointEps,m=this.currentPath?this.currentPath.points:null;if(m){var I=Math.abs(m[m.length-2]-c),y=Math.abs(m[m.length-1]-_);I<A&&y<A||m.push(c,_)}else this.moveTo(c,_),m=this.currentPath.points;return yh.arc(c,_,r,i,s,a,h,l,m),this},e.prototype.beginFill=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=1),this.beginTextureFill({texture:Dt.WHITE,color:r,alpha:i})},e.prototype.beginTextureFill=function(r){r=Object.assign({texture:Dt.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var i=r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:i},r)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(r,i,s,a){return this.drawShape(new Qt(r,i,s,a))},e.prototype.drawRoundedRect=function(r,i,s,a,h){return this.drawShape(new Ll(r,i,s,a,h))},e.prototype.drawCircle=function(r,i,s){return this.drawShape(new Ol(r,i,s))},e.prototype.drawEllipse=function(r,i,s,a){return this.drawShape(new Fl(r,i,s,a))},e.prototype.drawPolygon=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];var a,h=!0,l=i[0];l.points?(h=l.closeStroke,a=l.points):Array.isArray(i[0])?a=i[0]:a=i;var f=new Mn(a);return f.closeStroke=h,this.drawShape(f),this},e.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===De.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},e.prototype._render=function(r){this.finishPoly();var i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},e.prototype._populateBatches=function(){var r=this._geometry,i=this.blendMode,s=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(r.points);for(var a=0;a<s;a++){var h=r.batches[a],l=h.style.color,f=new Float32Array(this.vertexData.buffer,h.attribStart*4*2,h.attribSize*2),c=new Float32Array(r.uvsFloat32.buffer,h.attribStart*4*2,h.attribSize*2),_=new Uint16Array(r.indicesUint16.buffer,h.start*2,h.size),A={vertexData:f,blendMode:i,indices:_,uvs:c,_batchRGB:mi(l),_tintRGB:l,_texture:h.style.texture,alpha:h.style.alpha,worldAlpha:1};this.batches[a]=A}},e.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,s=this.batches.length;i<s;i++){var a=this.batches[i];a.worldAlpha=this.worldAlpha*a.alpha,r.plugins[this.pluginName].render(a)}}},e.prototype._renderDirect=function(r){var i=this._resolveDirectShader(r),s=this._geometry,a=this.tint,h=this.worldAlpha,l=i.uniforms,f=s.drawCalls;l.translationMatrix=this.transform.worldTransform,l.tint[0]=(a>>16&255)/255*h,l.tint[1]=(a>>8&255)/255*h,l.tint[2]=(a&255)/255*h,l.tint[3]=h,r.shader.bind(i),r.geometry.bind(s,i),r.state.set(this.state);for(var c=0,_=f.length;c<_;c++)this._renderDrawCallDirect(r,s.drawCalls[c])},e.prototype._renderDrawCallDirect=function(r,i){for(var s=i.texArray,a=i.type,h=i.size,l=i.start,f=s.count,c=0;c<f;c++)r.texture.bind(s.elements[c],c);r.geometry.draw(a,h,l)},e.prototype._resolveDirectShader=function(r){var i=this.shader,s=this.pluginName;if(!i){if(!Th[s]){for(var a=r.plugins[s].MAX_TEXTURES,h=new Int32Array(a),l=0;l<a;l++)h[l]=l;var f={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ee,default:ai.from({uSamplers:h},!0)},c=r.plugins[s]._shader.program;Th[s]=new Wr(c,f)}i=Th[s]}return i},e.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var i=r.bounds,s=i.minX,a=i.minY,h=i.maxX,l=i.maxY;this._bounds.addFrame(this.transform,s,a,h,l)}},e.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=mi(this.tint,I1),i=0;i<this.batches.length;i++){var s=this.batches[i],a=s._batchRGB,h=r[0]*a[0]*255,l=r[1]*a[1]*255,f=r[2]*a[2]*255,c=(h<<16)+(l<<8)+(f|0);s._tintRGB=(c>>16)+(c&65280)+((c&255)<<16)}}},e.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var i=this.transform.worldTransform,s=i.a,a=i.b,h=i.c,l=i.d,f=i.tx,c=i.ty,_=this._geometry.points,A=this.vertexData,m=0,I=0;I<_.length;I+=2){var y=_[I],b=_[I+1];A[m++]=s*y+h*b+f,A[m++]=l*b+a*y+c}}},e.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(r){return this._matrix=r,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,r)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new ye,e}(cr),w1={buildPoly:mh,buildCircle:Yn,buildRectangle:wf,buildRoundedRectangle:Ef,buildLine:gh,ArcUtils:yh,BezierUtils:Pf,QuadraticUtils:Rf,BatchPart:Nf,FILL_COMMANDS:sa,BATCH_POOL:bh,DRAW_CALL_POOL:Zn};/*!
 * @pixi/sprite - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ah=function(t,e){return Ah=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Ah(t,e)};function E1(t,e){Ah(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Jn=new ye,C1=new Uint16Array([0,1,2,0,2,3]),hn=function(t){E1(e,t);function e(r){var i=t.call(this)||this;return i._anchor=new ni(i._onAnchorUpdate,i,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=Nt.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=r||Dt.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=C1,i.pluginName="batch",i.isSprite=!0,i._roundPixels=yt.ROUND_PIXELS,i}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=yi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=yi(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var i=this.transform.worldTransform,s=i.a,a=i.b,h=i.c,l=i.d,f=i.tx,c=i.ty,_=this.vertexData,A=r.trim,m=r.orig,I=this._anchor,y=0,b=0,R=0,F=0;if(A?(b=A.x-I._x*m.width,y=b+A.width,F=A.y-I._y*m.height,R=F+A.height):(b=-I._x*m.width,y=b+m.width,F=-I._y*m.height,R=F+m.height),_[0]=s*b+h*F+f,_[1]=l*F+a*b+c,_[2]=s*y+h*F+f,_[3]=l*F+a*y+c,_[4]=s*y+h*R+f,_[5]=l*R+a*y+c,_[6]=s*b+h*R+f,_[7]=l*R+a*b+c,this._roundPixels)for(var k=yt.RESOLUTION,H=0;H<_.length;++H)_[H]=Math.round((_[H]*k|0)/k)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,i=this.vertexTrimmedData,s=r.orig,a=this._anchor,h=this.transform.worldTransform,l=h.a,f=h.b,c=h.c,_=h.d,A=h.tx,m=h.ty,I=-a._x*s.width,y=I+s.width,b=-a._y*s.height,R=b+s.height;i[0]=l*I+c*b+A,i[1]=_*b+f*I+m,i[2]=l*y+c*b+A,i[3]=_*b+f*y+m,i[4]=l*y+c*R+A,i[5]=_*R+f*y+m,i[6]=l*I+c*R+A,i[7]=_*R+f*I+m},e.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var r=this._texture.trim,i=this._texture.orig;!r||r.width===i.width&&r.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new Gn),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Qt),r=this._localBoundsRect),this._localBounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Jn);var i=this._texture.orig.width,s=this._texture.orig.height,a=-i*this.anchor.x,h=0;return Jn.x>=a&&Jn.x<a+i&&(h=-s*this.anchor.y,Jn.y>=h&&Jn.y<h+s)},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof r=="boolean"?r:r&&r.texture;if(i){var s=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!s)}this._texture=null},e.from=function(r,i){var s=r instanceof Dt?r:Dt.from(r,i);return new e(s)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var i=yi(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var i=yi(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||Dt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(cr);/*!
 * @pixi/text - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ih=function(t,e){return Ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Ih(t,e)};function P1(t,e){Ih(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var un;(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(un||(un={}));var wh={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:un.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},R1=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ni=function(){function t(e){this.styleID=0,this.reset(),Ch(this,e,e)}return t.prototype.clone=function(){var e={};return Ch(e,this,wh),new t(e)},t.prototype.reset=function(){Ch(this,wh,wh)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var r=Eh(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){var r=Eh(e);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){N1(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var r=Eh(e);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var i=r.length-1;i>=0;i--){var s=r[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&R1.indexOf(s)<0&&(s='"'+s+'"'),r[i]=s}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+r.join(",")},t}();function Of(t){return typeof t=="number"?Qa(t):(typeof t=="string"&&t.indexOf("0x")===0&&(t=t.replace("0x","#")),t)}function Eh(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Of(t[e]);return t}else return Of(t)}function N1(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Ch(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var Cr=function(){function t(e,r,i,s,a,h,l,f,c){this.text=e,this.style=r,this.width=i,this.height=s,this.lines=a,this.lineWidths=h,this.lineHeight=l,this.maxLineWidth=f,this.fontProperties=c}return t.measureText=function(e,r,i,s){s===void 0&&(s=t._canvas),i=i==null?r.wordWrap:i;var a=r.toFontString(),h=t.measureFont(a);h.fontSize===0&&(h.fontSize=r.fontSize,h.ascent=r.fontSize);var l=s.getContext("2d");l.font=a;for(var f=i?t.wordWrap(e,r,s):e,c=f.split(/(?:\r\n|\r|\n)/),_=new Array(c.length),A=0,m=0;m<c.length;m++){var I=l.measureText(c[m]).width+(c[m].length-1)*r.letterSpacing;_[m]=I,A=Math.max(A,I)}var y=A+r.strokeThickness;r.dropShadow&&(y+=r.dropShadowDistance);var b=r.lineHeight||h.fontSize+r.strokeThickness,R=Math.max(b,h.fontSize+r.strokeThickness)+(c.length-1)*(b+r.leading);return r.dropShadow&&(R+=r.dropShadowDistance),new t(e,r,y,R,c,_,b+r.leading,A,h)},t.wordWrap=function(e,r,i){i===void 0&&(i=t._canvas);for(var s=i.getContext("2d"),a=0,h="",l="",f=Object.create(null),c=r.letterSpacing,_=r.whiteSpace,A=t.collapseSpaces(_),m=t.collapseNewlines(_),I=!A,y=r.wordWrapWidth+c,b=t.tokenize(e),R=0;R<b.length;R++){var F=b[R];if(t.isNewline(F)){if(!m){l+=t.addLine(h),I=!A,h="",a=0;continue}F=" "}if(A){var k=t.isBreakingSpace(F),H=t.isBreakingSpace(h[h.length-1]);if(k&&H)continue}var z=t.getFromCache(F,c,f,s);if(z>y)if(h!==""&&(l+=t.addLine(h),h="",a=0),t.canBreakWords(F,r.breakWords))for(var W=t.wordWrapSplit(F),X=0;X<W.length;X++){for(var rt=W[X],ut=1;W[X+ut];){var tt=W[X+ut],st=rt[rt.length-1];if(!t.canBreakChars(st,tt,F,X,r.breakWords))rt+=tt;else break;ut++}X+=rt.length-1;var bt=t.getFromCache(rt,c,f,s);bt+a>y&&(l+=t.addLine(h),I=!1,h="",a=0),h+=rt,a+=bt}else{h.length>0&&(l+=t.addLine(h),h="",a=0);var Ct=R===b.length-1;l+=t.addLine(F,!Ct),I=!1,h="",a=0}else z+a>y&&(I=!1,l+=t.addLine(h),h="",a=0),(h.length>0||!t.isBreakingSpace(F)||I)&&(h+=F,a+=z)}return l+=t.addLine(h,!1),l},t.addLine=function(e,r){return r===void 0&&(r=!0),e=t.trimRight(e),e=r?e+`
`:e,e},t.getFromCache=function(e,r,i,s){var a=i[e];if(typeof a!="number"){var h=e.length*r;a=s.measureText(e).width+h,i[e]=a}return a},t.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},t.collapseNewlines=function(e){return e==="normal"},t.trimRight=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;r--){var i=e[r];if(!t.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return typeof e!="string"?!1:t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return typeof e!="string"?!1:t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],i="";if(typeof e!="string")return r;for(var s=0;s<e.length;s++){var a=e[s],h=e[s+1];if(t.isBreakingSpace(a,h)||t.isNewline(a)){i!==""&&(r.push(i),i=""),r.push(a);continue}i+=a}return i!==""&&r.push(i),r},t.canBreakWords=function(e,r){return r},t.canBreakChars=function(e,r,i,s,a){return!0},t.wordWrapSplit=function(e){return e.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},i=t._canvas,s=t._context;s.font=e;var a=t.METRICS_STRING+t.BASELINE_SYMBOL,h=Math.ceil(s.measureText(a).width),l=Math.ceil(s.measureText(t.BASELINE_SYMBOL).width),f=Math.ceil(t.HEIGHT_MULTIPLIER*l);l=l*t.BASELINE_MULTIPLIER|0,i.width=h,i.height=f,s.fillStyle="#f00",s.fillRect(0,0,h,f),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(a,0,l);var c=s.getImageData(0,0,h,f).data,_=c.length,A=h*4,m=0,I=0,y=!1;for(m=0;m<l;++m){for(var b=0;b<A;b+=4)if(c[I+b]!==255){y=!0;break}if(!y)I+=A;else break}for(r.ascent=l-m,I=_-A,y=!1,m=f;m>l;--m){for(var b=0;b<A;b+=4)if(c[I+b]!==255){y=!0;break}if(!y)I-=A;else break}return r.descent=m-l,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){e===void 0&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),i=r.getContext("2d");if(i&&i.measureText)return t.__canvas=r,r;e=yt.ADAPTER.createCanvas()}catch(s){e=yt.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();Cr._fonts={},Cr.METRICS_STRING="|ÉqÅ",Cr.BASELINE_SYMBOL="M",Cr.BASELINE_MULTIPLIER=1.4,Cr.HEIGHT_MULTIPLIER=2,Cr._newlines=[10,13],Cr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var S1={texture:!0,children:!1,baseTexture:!0},Ph=function(t){P1(e,t);function e(r,i,s){var a=this,h=!1;s||(s=yt.ADAPTER.createCanvas(),h=!0),s.width=3,s.height=3;var l=Dt.from(s);return l.orig=new Qt,l.trim=new Qt,a=t.call(this,l)||this,a._ownCanvas=h,a.canvas=s,a.context=s.getContext("2d"),a._resolution=yt.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=r,a.style=i,a.localStyleID=-1,a}return e.prototype.updateText=function(r){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var s=this.context,a=Cr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),h=a.width,l=a.height,f=a.lines,c=a.lineHeight,_=a.lineWidths,A=a.maxLineWidth,m=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,h)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,l)+i.padding*2)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=i.strokeThickness,s.textBaseline=i.textBaseline,s.lineJoin=i.lineJoin,s.miterLimit=i.miterLimit;for(var I,y,b=i.dropShadow?2:1,R=0;R<b;++R){var F=i.dropShadow&&R===0,k=F?Math.ceil(Math.max(1,l)+i.padding*2):0,H=k*this._resolution;if(F){s.fillStyle="black",s.strokeStyle="black";var z=i.dropShadowColor,W=mi(typeof z=="number"?z:to(z)),X=i.dropShadowBlur*this._resolution,rt=i.dropShadowDistance*this._resolution;s.shadowColor="rgba("+W[0]*255+","+W[1]*255+","+W[2]*255+","+i.dropShadowAlpha+")",s.shadowBlur=X,s.shadowOffsetX=Math.cos(i.dropShadowAngle)*rt,s.shadowOffsetY=Math.sin(i.dropShadowAngle)*rt+H}else s.fillStyle=this._generateFillStyle(i,f,a),s.strokeStyle=i.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var ut=(c-m.fontSize)/2;(!e.nextLineHeightBehavior||c-m.fontSize<0)&&(ut=0);for(var tt=0;tt<f.length;tt++)I=i.strokeThickness/2,y=i.strokeThickness/2+tt*c+m.ascent+ut,i.align==="right"?I+=A-_[tt]:i.align==="center"&&(I+=(A-_[tt])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(f[tt],I+i.padding,y+i.padding-k,!0),i.fill&&this.drawLetterSpacing(f[tt],I+i.padding,y+i.padding-k)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(r,i,s,a){a===void 0&&(a=!1);var h=this._style,l=h.letterSpacing,f=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(l===0||f){f&&(this.context.letterSpacing=l,this.context.textLetterSpacing=l),a?this.context.strokeText(r,i,s):this.context.fillText(r,i,s);return}for(var c=i,_=Array.from?Array.from(r):r.split(""),A=this.context.measureText(r).width,m=0,I=0;I<_.length;++I){var y=_[I];a?this.context.strokeText(y,c,s):this.context.fillText(y,c,s);for(var b="",R=I+1;R<_.length;++R)b+=_[R];m=this.context.measureText(b).width,c+=A-m+l,A=m}},e.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var i=Pl(r);i.data&&(r.width=i.width,r.height=i.height,this.context.putImageData(i.data,0,0))}var s=this._texture,a=this._style,h=a.trim?0:a.padding,l=s.baseTexture;s.trim.width=s._frame.width=r.width/this._resolution,s.trim.height=s._frame.height=r.height/this._resolution,s.trim.x=-h,s.trim.y=-h,s.orig.width=s._frame.width-h*2,s.orig.height=s._frame.height-h*2,this._onTextureUpdate(),l.setRealSize(r.width,r.height,this._resolution),s.updateUvs(),this.dirty=!1},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,r)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(r,i){return this.updateText(!0),this._textureID===-1&&(r=!1),t.prototype.getBounds.call(this,r,i)},e.prototype.getLocalBounds=function(r){return this.updateText(!0),t.prototype.getLocalBounds.call(this,r)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(r,i,s){var a=r.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var h,l=r.dropShadow?r.dropShadowDistance:0,f=r.padding||0,c=this.canvas.width/this._resolution-l-f*2,_=this.canvas.height/this._resolution-l-f*2,A=a.slice(),m=r.fillGradientStops.slice();if(!m.length)for(var I=A.length+1,y=1;y<I;++y)m.push(y/I);if(A.unshift(a[0]),m.unshift(0),A.push(a[a.length-1]),m.push(1),r.fillGradientType===un.LINEAR_VERTICAL){h=this.context.createLinearGradient(c/2,f,c/2,_+f);for(var b=s.fontProperties.fontSize+r.strokeThickness,y=0;y<i.length;y++){var R=s.lineHeight*(y-1)+b,F=s.lineHeight*y,k=F;y>0&&R>F&&(k=(F+R)/2);var H=F+b,z=s.lineHeight*(y+1),W=H;y+1<i.length&&z<H&&(W=(H+z)/2);for(var X=(W-k)/_,rt=0;rt<A.length;rt++){var ut=0;typeof m[rt]=="number"?ut=m[rt]:ut=rt/A.length;var tt=Math.min(1,Math.max(0,k/_+ut*X));tt=Number(tt.toFixed(5)),h.addColorStop(tt,A[rt])}}}else{h=this.context.createLinearGradient(f,_/2,c+f,_/2);for(var st=A.length+1,bt=1,y=0;y<A.length;y++){var Ct=void 0;typeof m[y]=="number"?Ct=m[y]:Ct=bt/st,h.addColorStop(Ct,A[y]),bt++}}return h},e.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},S1,r),t.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var i=yi(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var i=yi(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof Ni?this._style=r:this._style=new Ni(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(hn);/*!
 * @pixi/prepare - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yt.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Rh=function(t,e){return Rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Rh(t,e)};function U1(t,e){Rh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ff=function(){function t(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function O1(t,e){var r=!1;if(t&&t._textures&&t._textures.length){for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof Dt){var s=t._textures[i].baseTexture;e.indexOf(s)===-1&&(e.push(s),r=!0)}}return r}function F1(t,e){if(t.baseTexture instanceof te){var r=t.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function L1(t,e){if(t._texture&&t._texture instanceof Dt){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function M1(t,e){return e instanceof Ph?(e.updateText(!0),!0):!1}function G1(t,e){if(e instanceof Ni){var r=e.toFontString();return Cr.measureFont(r),!0}return!1}function k1(t,e){if(t instanceof Ph){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function B1(t,e){return t instanceof Ni?(e.indexOf(t)===-1&&e.push(t),!0):!1}var Lf=function(){function t(e){var r=this;this.limiter=new Ff(yt.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(k1),this.registerFindHook(B1),this.registerFindHook(O1),this.registerFindHook(F1),this.registerFindHook(L1),this.registerUploadHook(M1),this.registerUploadHook(G1)}return t.prototype.upload=function(e,r){var i=this;return typeof e=="function"&&(r=e,e=null),r&&er("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(s){e&&i.add(e);var a=function(){r==null||r(),s()};i.queue.length?(i.completes.push(a),i.ticking||(i.ticking=!0,Xe.system.addOnce(i.tick,i,Mr.UTILITY))):a()})},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed){for(var i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Xe.system.addOnce(this.tick,this,Mr.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(var i=0,s=a.length;i<s;i++)a[i]()}},t.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},t.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},t.prototype.add=function(e){for(var r=0,i=this.addHooks.length;r<i&&!this.addHooks[r](e,this.queue);r++);if(e instanceof cr)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},t.prototype.destroy=function(){this.ticking&&Xe.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Mf(t,e){return e instanceof te?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function D1(t,e){if(!(e instanceof qn))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var i=r.batches,s=0;s<i.length;s++){var a=i[s].style.texture;a&&Mf(t,a.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function H1(t,e){return t instanceof qn?(e.push(t),!0):!1}var Gf=function(t){U1(e,t);function e(r){var i=t.call(this,r)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(H1),i.registerUploadHook(Mf),i.registerUploadHook(D1),i}return e.extension={name:"prepare",type:fe.RendererPlugin},e}(Lf),X1=function(){function t(e){this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();/*!
 * @pixi/spritesheet - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var kf=function(){function t(e,r,i){i===void 0&&(i=null),this.linkedSheets=[],this._texture=e instanceof Dt?e:null,this.baseTexture=e instanceof te?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(e){e===void 0&&(e=null);var r=this.data.meta.scale,i=Fn(e,null);return i===null&&(i=r!==void 0?parseFloat(r):1),i!==1&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){var r=this;return e&&er("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(i){r._callback=function(s){e==null||e(s),i(s)},r._batchIndex=0,r._frameKeys.length<=t.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()})},t.prototype._processFrames=function(e){for(var r=e,i=t.BATCH_SIZE;r-e<i&&r<this._frameKeys.length;){var s=this._frameKeys[r],a=this._frames[s],h=a.frame;if(h){var l=null,f=null,c=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,_=new Qt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);a.rotated?l=new Qt(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):l=new Qt(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(f=new Qt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[s]=new Dt(this.baseTexture,l,_,f,a.rotated?2:0,a.anchor),Dt.addToCache(this.textures[s],s)}r++}},t.prototype._processAnimations=function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var i=0;i<e[r].length;i++){var s=e[r][i];this.animations[r].push(this.textures[s])}}},t.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(e){var r;e===void 0&&(e=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),Bf=function(){function t(){}return t.use=function(e,r){var i,s,a=this,h=e.name+"_image";if(!e.data||e.type!==Ne.TYPE.JSON||!e.data.frames||a.resources[h]){r();return}var l=(s=(i=e.data)===null||i===void 0?void 0:i.meta)===null||s===void 0?void 0:s.related_multi_packs;if(Array.isArray(l))for(var f=function(y){if(typeof y!="string")return"continue";var b=y.replace(".json",""),R=Fr.resolve(e.url.replace(a.baseUrl,""),y);if(a.resources[b]||Object.values(a.resources).some(function(k){return Fr.format(Fr.parse(k.url))===R}))return"continue";var F={crossOrigin:e.crossOrigin,loadType:Ne.LOAD_TYPE.XHR,xhrType:Ne.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};a.add(b,R,F)},c=0,_=l;c<_.length;c++){var A=_[c];f(A)}var m={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},I=t.getResourcePath(e,a.baseUrl);a.add(h,I,m,function(b){if(b.error){r(b.error);return}var R=new kf(b.texture,e.data,e.url);R.parse().then(function(){e.spritesheet=R,e.textures=R.textures,r()})})},t.getResourcePath=function(e,r){return e.isDataUrl?e.data.meta.image:Fr.resolve(e.url.replace(r,""),e.data.meta.image)},t.extension=fe.Loader,t}();/*!
 * @pixi/sprite-tiling - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Nh=function(t,e){return Nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Nh(t,e)};function Df(t,e){Nh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Kn=new ye,V1=function(t){Df(e,t);function e(r,i,s){i===void 0&&(i=100),s===void 0&&(s=100);var a=t.call(this,r)||this;return a.tileTransform=new Us,a._width=i,a._height=s,a.uvMatrix=a.texture.uvMatrix||new Xs(r),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(r){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,i=this._height*-this._anchor._y,s=this._width*(1-this._anchor._x),a=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,i,s,a)},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Qt),r=this._localBoundsRect),this._bounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Kn);var i=this._width,s=this._height,a=-i*this.anchor._x;if(Kn.x>=a&&Kn.x<a+i){var h=-s*this.anchor._y;if(Kn.y>=h&&Kn.y<h+s)return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},e.from=function(r,i){var s=r instanceof Dt?r:Dt.from(r,i);return new e(s,i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),e}(hn),z1=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Hf=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,j1=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,W1=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,$1=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,aa=new Ee,Xf=function(t){Df(e,t);function e(r){var i=t.call(this,r)||this;return r.runners.contextChange.add(i),i.quad=new Eo,i.state=oi.for2d(),i}return e.prototype.contextChange=function(){var r=this.renderer,i={globals:r.globalUniforms};this.simpleShader=Wr.from(Hf,z1,i),this.shader=r.context.webGLVersion>1?Wr.from(W1,$1,i):Wr.from(Hf,j1,i)},e.prototype.render=function(r){var i=this.renderer,s=this.quad,a=s.vertices;a[0]=a[6]=r._width*-r.anchor.x,a[1]=a[3]=r._height*-r.anchor.y,a[2]=a[4]=r._width*(1-r.anchor.x),a[5]=a[7]=r._height*(1-r.anchor.y);var h=r.uvRespectAnchor?r.anchor.x:0,l=r.uvRespectAnchor?r.anchor.y:0;a=s.uvs,a[0]=a[6]=-h,a[1]=a[3]=-l,a[2]=a[4]=1-h,a[5]=a[7]=1-l,s.invalidate();var f=r._texture,c=f.baseTexture,_=c.alphaMode>0,A=r.tileTransform.localTransform,m=r.uvMatrix,I=c.isPowerOfTwo&&f.frame.width===c.width&&f.frame.height===c.height;I&&(c._glTextures[i.CONTEXT_UID]?I=c.wrapMode!==Ur.CLAMP:c.wrapMode===Ur.CLAMP&&(c.wrapMode=Ur.REPEAT));var y=I?this.simpleShader:this.shader,b=f.width,R=f.height,F=r._width,k=r._height;aa.set(A.a*b/F,A.b*b/k,A.c*R/F,A.d*R/k,A.tx/F,A.ty/k),aa.invert(),I?aa.prepend(m.mapCoord):(y.uniforms.uMapCoord=m.mapCoord.toArray(!0),y.uniforms.uClampFrame=m.uClampFrame,y.uniforms.uClampOffset=m.uClampOffset),y.uniforms.uTransform=aa.toArray(!0),y.uniforms.uColor=io(r.tint,r.worldAlpha,y.uniforms.uColor,_),y.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),y.uniforms.uSampler=f,i.shader.bind(y),i.geometry.bind(s),this.state.blendMode=ro(r.blendMode,_),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:fe.RendererPlugin},e}(Dn);/*!
 * @pixi/mesh - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Sh=function(t,e){return Sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Sh(t,e)};function Uh(t,e){Sh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Vf=function(){function t(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},t}(),Oh=new ye,zf=new Mn,ln=function(t){Uh(e,t);function e(r,i,s,a){a===void 0&&(a=ur.TRIANGLES);var h=t.call(this)||this;return h.geometry=r,h.shader=i,h.state=s||oi.for2d(),h.drawMode=a,h.start=0,h.size=0,h.uvs=null,h.indices=null,h.vertexData=new Float32Array(1),h.vertexDirty=-1,h._transformID=-1,h._roundPixels=yt.ROUND_PIXELS,h.batchUvs=null,h}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){var i=this.geometry.buffers[0].data,s=this.shader;s.batchable&&this.drawMode===ur.TRIANGLES&&i.length<e.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},e.prototype._renderDefault=function(r){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),r.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(i),r.state.set(this.state),r.geometry.bind(this.geometry,i),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(r){var i=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;var a=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[a]),r.plugins[a].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry,i=r.buffers[0],s=i.data,a=i._updateID;if(!(a===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==s.length&&(this.vertexData=new Float32Array(s.length));for(var h=this.transform.worldTransform,l=h.a,f=h.b,c=h.c,_=h.d,A=h.tx,m=h.ty,I=this.vertexData,y=0;y<I.length/2;y++){var b=s[y*2],R=s[y*2+1];I[y*2]=l*b+c*R+A,I[y*2+1]=f*b+_*R+m}if(this._roundPixels)for(var F=yt.RESOLUTION,y=0;y<I.length;++y)I[y]=Math.round((I[y]*F|0)/F);this.vertexDirty=a}},e.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new Vf(r,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,Oh);for(var i=this.geometry.getBuffer("aVertexPosition").data,s=zf.points,a=this.geometry.getIndex().data,h=a.length,l=this.drawMode===4?3:1,f=0;f+2<h;f+=l){var c=a[f]*2,_=a[f+1]*2,A=a[f+2]*2;if(s[0]=i[c],s[1]=i[c+1],s[2]=i[_],s[3]=i[_+1],s[4]=i[A],s[5]=i[A+1],zf.contains(Oh.x,Oh.y))return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(cr),Y1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Z1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,fn=function(t){Uh(e,t);function e(r,i){var s=this,a={uSampler:r,alpha:1,uTextureMatrix:Ee.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(a,i.uniforms),s=t.call(this,i.program||rn.from(Z1,Y1),a)||this,s._colorDirty=!1,s.uvMatrix=new Xs(r),s.batchable=i.program===void 0,s.pluginName=i.pluginName,s.tint=i.tint,s.alpha=i.alpha,s}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;io(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Wr),Qn=function(t){Uh(e,t);function e(r,i,s){var a=t.call(this)||this,h=new Ge(r),l=new Ge(i,!0),f=new Ge(s,!0,!0);return a.addAttribute("aVertexPosition",h,2,!1,Et.FLOAT).addAttribute("aTextureCoord",l,2,!1,Et.FLOAT).addIndex(f),a._updateId=-1,a}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(en);/*!
 * @pixi/text-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Fh=function(t,e){return Fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Fh(t,e)};function q1(t,e){Fh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ts=function(){function t(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return t}(),jf=function(){function t(){}return t.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},t.parse=function(e){var r=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var s in r){var a=r[s].match(/^[a-z]+/gm)[0],h=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(var f in h){var c=h[f].split("="),_=c[0],A=c[1].replace(/"/gm,""),m=parseFloat(A),I=isNaN(m)?A:m;l[_]=I}i[a].push(l)}var y=new ts;return i.info.forEach(function(b){return y.info.push({face:b.face,size:parseInt(b.size,10)})}),i.common.forEach(function(b){return y.common.push({lineHeight:parseInt(b.lineHeight,10)})}),i.page.forEach(function(b){return y.page.push({id:parseInt(b.id,10),file:b.file})}),i.char.forEach(function(b){return y.char.push({id:parseInt(b.id,10),page:parseInt(b.page,10),x:parseInt(b.x,10),y:parseInt(b.y,10),width:parseInt(b.width,10),height:parseInt(b.height,10),xoffset:parseInt(b.xoffset,10),yoffset:parseInt(b.yoffset,10),xadvance:parseInt(b.xadvance,10)})}),i.kerning.forEach(function(b){return y.kerning.push({first:parseInt(b.first,10),second:parseInt(b.second,10),amount:parseInt(b.amount,10)})}),i.distanceField.forEach(function(b){return y.distanceField.push({distanceRange:parseInt(b.distanceRange,10),fieldType:b.fieldType})}),y},t}(),oa=function(){function t(){}return t.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},t.parse=function(e){for(var r=new ts,i=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),h=e.getElementsByTagName("char"),l=e.getElementsByTagName("kerning"),f=e.getElementsByTagName("distanceField"),c=0;c<i.length;c++)r.info.push({face:i[c].getAttribute("face"),size:parseInt(i[c].getAttribute("size"),10)});for(var c=0;c<s.length;c++)r.common.push({lineHeight:parseInt(s[c].getAttribute("lineHeight"),10)});for(var c=0;c<a.length;c++)r.page.push({id:parseInt(a[c].getAttribute("id"),10)||0,file:a[c].getAttribute("file")});for(var c=0;c<h.length;c++){var _=h[c];r.char.push({id:parseInt(_.getAttribute("id"),10),page:parseInt(_.getAttribute("page"),10)||0,x:parseInt(_.getAttribute("x"),10),y:parseInt(_.getAttribute("y"),10),width:parseInt(_.getAttribute("width"),10),height:parseInt(_.getAttribute("height"),10),xoffset:parseInt(_.getAttribute("xoffset"),10),yoffset:parseInt(_.getAttribute("yoffset"),10),xadvance:parseInt(_.getAttribute("xadvance"),10)})}for(var c=0;c<l.length;c++)r.kerning.push({first:parseInt(l[c].getAttribute("first"),10),second:parseInt(l[c].getAttribute("second"),10),amount:parseInt(l[c].getAttribute("amount"),10)});for(var c=0;c<f.length;c++)r.distanceField.push({fieldType:f[c].getAttribute("fieldType"),distanceRange:parseInt(f[c].getAttribute("distanceRange"),10)});return r},t}(),Wf=function(){function t(){}return t.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return oa.test(r)}return!1},t.parse=function(e){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return oa.parse(r)},t}(),Lh=[jf,oa,Wf];function Mh(t){for(var e=0;e<Lh.length;e++)if(Lh[e].test(t))return Lh[e];return null}function J1(t,e,r,i,s,a){var h=r.fill;if(Array.isArray(h)){if(h.length===1)return h[0]}else return h;var l,f=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,_=t.width/i-f-c*2,A=t.height/i-f-c*2,m=h.slice(),I=r.fillGradientStops.slice();if(!I.length)for(var y=m.length+1,b=1;b<y;++b)I.push(b/y);if(m.unshift(h[0]),I.unshift(0),m.push(h[h.length-1]),I.push(1),r.fillGradientType===un.LINEAR_VERTICAL){l=e.createLinearGradient(_/2,c,_/2,A+c);for(var R=0,F=a.fontProperties.fontSize+r.strokeThickness,k=F/A,b=0;b<s.length;b++)for(var H=a.lineHeight*b,z=0;z<m.length;z++){var W=0;typeof I[z]=="number"?W=I[z]:W=z/m.length;var X=H/A+W*k,rt=Math.max(R,X);rt=Math.min(rt,1),l.addColorStop(rt,m[z]),R=rt}}else{l=e.createLinearGradient(c,A/2,_+c,A/2);for(var ut=m.length+1,tt=1,b=0;b<m.length;b++){var st=void 0;typeof I[b]=="number"?st=I[b]:st=tt/ut,l.addColorStop(st,m[b]),tt++}}return l}function K1(t,e,r,i,s,a,h){var l=r.text,f=r.fontProperties;e.translate(i,s),e.scale(a,a);var c=h.strokeThickness/2,_=-(h.strokeThickness/2);if(e.font=h.toFontString(),e.lineWidth=h.strokeThickness,e.textBaseline=h.textBaseline,e.lineJoin=h.lineJoin,e.miterLimit=h.miterLimit,e.fillStyle=J1(t,e,h,a,[l],r),e.strokeStyle=h.stroke,h.dropShadow){var A=h.dropShadowColor,m=mi(typeof A=="number"?A:to(A)),I=h.dropShadowBlur*a,y=h.dropShadowDistance*a;e.shadowColor="rgba("+m[0]*255+","+m[1]*255+","+m[2]*255+","+h.dropShadowAlpha+")",e.shadowBlur=I,e.shadowOffsetX=Math.cos(h.dropShadowAngle)*y,e.shadowOffsetY=Math.sin(h.dropShadowAngle)*y}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;h.stroke&&h.strokeThickness&&e.strokeText(l,c,_+r.lineHeight-f.descent),h.fill&&e.fillText(l,c,_+r.lineHeight-f.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function $f(t){return Array.from?Array.from(t):t.split("")}function Q1(t){typeof t=="string"&&(t=[t]);for(var e=[],r=0,i=t.length;r<i;r++){var s=t[r];if(Array.isArray(s)){if(s.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+s.length+".");var a=s[0].charCodeAt(0),h=s[1].charCodeAt(0);if(h<a)throw new Error("[BitmapFont]: Invalid character range.");for(var l=a,f=h;l<=f;l++)e.push(String.fromCharCode(l))}else e.push.apply(e,$f(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function ha(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Si=function(){function t(e,r,i){var s,a,h=e.info[0],l=e.common[0],f=e.page[0],c=e.distanceField[0],_=Fn(f.file),A={};this._ownsTextures=i,this.font=h.face,this.size=h.size,this.lineHeight=l.lineHeight/_,this.chars={},this.pageTextures=A;for(var m=0;m<e.page.length;m++){var I=e.page[m],y=I.id,b=I.file;A[y]=r instanceof Array?r[m]:r[b],c!=null&&c.fieldType&&c.fieldType!=="none"&&(A[y].baseTexture.alphaMode=lr.NO_PREMULTIPLIED_ALPHA)}for(var m=0;m<e.char.length;m++){var R=e.char[m],y=R.id,F=R.page,k=e.char[m],H=k.x,z=k.y,W=k.width,X=k.height,rt=k.xoffset,ut=k.yoffset,tt=k.xadvance;H/=_,z/=_,W/=_,X/=_,rt/=_,ut/=_,tt/=_;var st=new Qt(H+A[F].frame.x/_,z+A[F].frame.y/_,W,X);this.chars[y]={xOffset:rt,yOffset:ut,xAdvance:tt,kerning:{},texture:new Dt(A[F].baseTexture,st),page:F}}for(var m=0;m<e.kerning.length;m++){var bt=e.kerning[m],Ct=bt.first,Gt=bt.second,ee=bt.amount;Ct/=_,Gt/=_,ee/=_,this.chars[Gt]&&(this.chars[Gt].kerning[Ct]=ee)}this.distanceFieldRange=c==null?void 0:c.distanceRange,this.distanceFieldType=(a=(s=c==null?void 0:c.fieldType)===null||s===void 0?void 0:s.toLowerCase())!==null&&a!==void 0?a:"none"}return t.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,i){var s;if(e instanceof ts)s=e;else{var a=Mh(e);if(!a)throw new Error("Unrecognized data format for font.");s=a.parse(e)}r instanceof Dt&&(r=[r]);var h=new t(s,r,i);return t.available[h.font]=h,h},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var s=Object.assign({},t.defaultOptions,i),a=s.chars,h=s.padding,l=s.resolution,f=s.textureWidth,c=s.textureHeight,_=Q1(a),A=r instanceof Ni?r:new Ni(r),m=f,I=new ts;I.info[0]={face:A.fontFamily,size:A.fontSize},I.common[0]={lineHeight:A.fontSize};for(var y=0,b=0,R,F,k,H=0,z=[],W=0;W<_.length;W++){R||(R=yt.ADAPTER.createCanvas(),R.width=f,R.height=c,F=R.getContext("2d"),k=new te(R,{resolution:l}),z.push(new Dt(k)),I.page.push({id:z.length-1,file:""}));var X=Cr.measureText(_[W],A,!1,R),rt=X.width,ut=Math.ceil(X.height),tt=Math.ceil((A.fontStyle==="italic"?2:1)*rt);if(b>=c-ut*l){if(b===0)throw new Error("[BitmapFont] textureHeight "+c+"px is "+("too small for "+A.fontSize+"px fonts"));--W,R=null,F=null,k=null,b=0,y=0,H=0;continue}if(H=Math.max(ut+X.fontProperties.descent,H),tt*l+y>=m){--W,b+=H*l,b=Math.ceil(b),y=0,H=0;continue}K1(R,F,X,y,b,l,A);var st=ha(X.text);I.char.push({id:st,page:z.length-1,x:y/l,y:b/l,width:tt,height:ut,xoffset:0,yoffset:0,xadvance:Math.ceil(rt-(A.dropShadow?A.dropShadowDistance:0)-(A.stroke?A.strokeThickness:0))}),y+=(tt+2*h)*l,y=Math.ceil(y)}for(var W=0,bt=_.length;W<bt;W++)for(var Ct=_[W],Gt=0;Gt<bt;Gt++){var ee=_[Gt],xt=F.measureText(Ct).width,Tt=F.measureText(ee).width,Ot=F.measureText(Ct+ee).width,ve=Ot-(xt+Tt);ve&&I.kerning.push({first:ha(Ct),second:ha(ee),amount:ve})}var Jt=new t(I,z,!0);return t.available[e]!==void 0&&t.uninstall(e),t.available[e]=Jt,Jt},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),ty=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,ey=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,ry=[],iy=[],Yf=[],ny=function(t){q1(e,t);function e(r,i){i===void 0&&(i={});var s=t.call(this)||this;s._tint=16777215;var a=Object.assign({},e.styleDefaults,i),h=a.align,l=a.tint,f=a.maxWidth,c=a.letterSpacing,_=a.fontName,A=a.fontSize;if(!Si.available[_])throw new Error('Missing BitmapFont "'+_+'"');return s._activePagesMeshData=[],s._textWidth=0,s._textHeight=0,s._align=h,s._tint=l,s._fontName=_,s._fontSize=A||Si.available[_].size,s.text=r,s._maxWidth=f,s._maxLineHeight=0,s._letterSpacing=c,s._anchor=new ni(function(){s.dirty=!0},s,0,0),s._roundPixels=yt.ROUND_PIXELS,s.dirty=!0,s._resolution=yt.RESOLUTION,s._autoResolution=!0,s._textureCache={},s}return e.prototype.updateText=function(){for(var r,i=Si.available[this._fontName],s=this._fontSize/i.size,a=new ye,h=[],l=[],f=[],c=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",_=$f(c),A=this._maxWidth*i.size/this._fontSize,m=i.distanceFieldType==="none"?ry:iy,I=null,y=0,b=0,R=0,F=-1,k=0,H=0,z=0,W=0,X=0;X<_.length;X++){var rt=_[X],ut=ha(rt);if(/(?:\s)/.test(rt)&&(F=X,k=y,W++),rt==="\r"||rt===`
`){l.push(y),f.push(-1),b=Math.max(b,y),++R,++H,a.x=0,a.y+=i.lineHeight,I=null,W=0;continue}var tt=i.chars[ut];if(tt){I&&tt.kerning[I]&&(a.x+=tt.kerning[I]);var st=Yf.pop()||{texture:Dt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ye};st.texture=tt.texture,st.line=R,st.charCode=ut,st.position.x=a.x+tt.xOffset+this._letterSpacing/2,st.position.y=a.y+tt.yOffset,st.prevSpaces=W,h.push(st),y=st.position.x+Math.max(tt.xAdvance-tt.xOffset,tt.texture.orig.width),a.x+=tt.xAdvance+this._letterSpacing,z=Math.max(z,tt.yOffset+tt.texture.height),I=ut,F!==-1&&A>0&&a.x>A&&(++H,gi(h,1+F-H,1+X-F),X=F,F=-1,l.push(k),f.push(h.length>0?h[h.length-1].prevSpaces:0),b=Math.max(b,k),R++,a.x=0,a.y+=i.lineHeight,I=null,W=0)}}var bt=_[_.length-1];bt!=="\r"&&bt!==`
`&&(/(?:\s)/.test(bt)&&(y=k),l.push(y),b=Math.max(b,y),f.push(-1));for(var Ct=[],X=0;X<=R;X++){var Gt=0;this._align==="right"?Gt=b-l[X]:this._align==="center"?Gt=(b-l[X])/2:this._align==="justify"&&(Gt=f[X]<0?0:(b-l[X])/f[X]),Ct.push(Gt)}for(var ee=h.length,xt={},Tt=[],Ot=this._activePagesMeshData,X=0;X<Ot.length;X++)m.push(Ot[X]);for(var X=0;X<ee;X++){var ve=h[X].texture,Jt=ve.baseTexture.uid;if(!xt[Jt]){var q=m.pop();if(!q){var at=new Qn,gt=void 0,At=void 0;i.distanceFieldType==="none"?(gt=new fn(Dt.EMPTY),At=Nt.NORMAL):(gt=new fn(Dt.EMPTY,{program:rn.from(ey,ty),uniforms:{uFWidth:0}}),At=Nt.NORMAL_NPM);var Pt=new ln(at,gt);Pt.blendMode=At,q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Pt,vertices:null,uvs:null,indices:null}}q.index=0,q.indexCount=0,q.vertexCount=0,q.uvsCount=0,q.total=0;var $t=this._textureCache;$t[Jt]=$t[Jt]||new Dt(ve.baseTexture),q.mesh.texture=$t[Jt],q.mesh.tint=this._tint,Tt.push(q),xt[Jt]=q}xt[Jt].total++}for(var X=0;X<Ot.length;X++)Tt.indexOf(Ot[X])===-1&&this.removeChild(Ot[X].mesh);for(var X=0;X<Tt.length;X++)Tt[X].mesh.parent!==this&&this.addChild(Tt[X].mesh);this._activePagesMeshData=Tt;for(var X in xt){var q=xt[X],kt=q.total;if(!(((r=q.indices)===null||r===void 0?void 0:r.length)>6*kt)||q.vertices.length<ln.BATCHABLE_SIZE*2)q.vertices=new Float32Array(4*2*kt),q.uvs=new Float32Array(4*2*kt),q.indices=new Uint16Array(6*kt);else for(var Kt=q.total,ie=q.vertices,Yt=Kt*4*2;Yt<ie.length;Yt++)ie[Yt]=0;q.mesh.size=6*kt}for(var X=0;X<ee;X++){var rt=h[X],qt=rt.position.x+Ct[rt.line]*(this._align==="justify"?rt.prevSpaces:1);this._roundPixels&&(qt=Math.round(qt));var Ut=qt*s,Ft=rt.position.y*s,ve=rt.texture,It=xt[ve.baseTexture.uid],_e=ve.frame,ce=ve._uvs,jt=It.index++;It.indices[jt*6+0]=0+jt*4,It.indices[jt*6+1]=1+jt*4,It.indices[jt*6+2]=2+jt*4,It.indices[jt*6+3]=0+jt*4,It.indices[jt*6+4]=2+jt*4,It.indices[jt*6+5]=3+jt*4,It.vertices[jt*8+0]=Ut,It.vertices[jt*8+1]=Ft,It.vertices[jt*8+2]=Ut+_e.width*s,It.vertices[jt*8+3]=Ft,It.vertices[jt*8+4]=Ut+_e.width*s,It.vertices[jt*8+5]=Ft+_e.height*s,It.vertices[jt*8+6]=Ut,It.vertices[jt*8+7]=Ft+_e.height*s,It.uvs[jt*8+0]=ce.x0,It.uvs[jt*8+1]=ce.y0,It.uvs[jt*8+2]=ce.x1,It.uvs[jt*8+3]=ce.y1,It.uvs[jt*8+4]=ce.x2,It.uvs[jt*8+5]=ce.y2,It.uvs[jt*8+6]=ce.x3,It.uvs[jt*8+7]=ce.y3}this._textWidth=b*s,this._textHeight=(a.y+i.lineHeight)*s;for(var X in xt){var q=xt[X];if(this.anchor.x!==0||this.anchor.y!==0)for(var sr=0,ti=this._textWidth*this.anchor.x,Hi=this._textHeight*this.anchor.y,ds=0;ds<q.total;ds++)q.vertices[sr++]-=ti,q.vertices[sr++]-=Hi,q.vertices[sr++]-=ti,q.vertices[sr++]-=Hi,q.vertices[sr++]-=ti,q.vertices[sr++]-=Hi,q.vertices[sr++]-=ti,q.vertices[sr++]-=Hi;this._maxLineHeight=z*s;var ya=q.mesh.geometry.getBuffer("aVertexPosition"),ps=q.mesh.geometry.getBuffer("aTextureCoord"),ba=q.mesh.geometry.getIndex();ya.data=q.vertices,ps.data=q.uvs,ba.data=q.indices,ya.update(),ps.update(),ba.update()}for(var X=0;X<h.length;X++)Yf.push(h[X])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var i=Si.available[this._fontName],s=i.distanceFieldRange,a=i.distanceFieldType,h=i.size;if(a!=="none")for(var l=this.worldTransform,f=l.a,c=l.b,_=l.c,A=l.d,m=Math.sqrt(f*f+c*c),I=Math.sqrt(_*_+A*A),y=(Math.abs(m)+Math.abs(I))/2,b=this._fontSize/h,R=0,F=this._activePagesMeshData;R<F.length;R++){var k=F[R];k.mesh.shader.uniforms.uFWidth=y*s*b*this._resolution}t.prototype._render.call(this,r)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!Si.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r==null?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r){var i=this._textureCache;for(var s in i){var a=i[s];a.destroy(),delete i[s]}this._textureCache=null,t.prototype.destroy.call(this,r)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(cr),Zf=function(){function t(){}return t.add=function(){Ne.setExtensionXhrType("fnt",Ne.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){var i=Mh(e.data);if(!i){r();return}for(var s=t.getBaseUrl(this,e),a=i.parse(e.data),h={},l=function(b){h[b.metadata.pageFile]=b.texture,Object.keys(h).length===a.page.length&&(e.bitmapFont=Si.install(a,h,!0),r())},f=0;f<a.page.length;++f){var c=a.page[f].file,_=s+c,A=!1;for(var m in this.resources){var I=this.resources[m];if(I.url===_){I.metadata.pageFile=c,I.texture?l(I):I.onAfterMiddleware.add(l),A=!0;break}}if(!A){var y={crossOrigin:e.crossOrigin,loadType:Ne.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},e.metadata.imageMetadata),parentResource:e};this.add(_,y,l)}}},t.getBaseUrl=function(e,r){var i=r.isDataUrl?"":t.dirname(r.url);return r.isDataUrl&&(i==="."&&(i=""),e.baseUrl&&i&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(e.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},t.dirname=function(e){var r=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===e?".":r===""?"/":r},t.extension=fe.Loader,t}();/*!
 * @pixi/filter-alpha - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Gh=function(t,e){return Gh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Gh(t,e)};function sy(t,e){Gh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ay=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,oy=function(t){sy(e,t);function e(r){r===void 0&&(r=1);var i=t.call(this,G0,ay,{uAlpha:1})||this;return i.alpha=r,i}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}($r);/*!
 * @pixi/filter-blur - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var kh=function(t,e){return kh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},kh(t,e)};function qf(t,e){kh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var hy=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function uy(t,e){var r=Math.ceil(t/2),i=hy,s="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;h<t;h++){var l=a.replace("%index%",h.toString());l=l.replace("%sampleIndex%",h-(r-1)+".0"),s+=l,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}var ly={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fy=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function cy(t){for(var e=ly[t],r=e.length,i=fy,s="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",h,l=0;l<t;l++){var f=a.replace("%index%",l.toString());h=l,l>=r&&(h=t-l-1),f=f.replace("%value%",e[h].toString()),s+=f,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Jf;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Jf||(Jf={}));var Kf;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Kf||(Kf={}));var Qf;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Qf||(Qf={}));var tc;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(tc||(tc={}));var ec;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ec||(ec={}));var rc;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(rc||(rc={}));var ic;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(ic||(ic={}));var nc;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(nc||(nc={}));var sc;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(sc||(sc={}));var ac;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(ac||(ac={}));var oc;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(oc||(oc={}));var hc;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(hc||(hc={}));var uc;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(uc||(uc={}));var es;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(es||(es={}));var lc;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(lc||(lc={}));var fc;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(fc||(fc={}));var cc;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(cc||(cc={}));var dc;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(dc||(dc={}));var pc;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(pc||(pc={}));var vc;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(vc||(vc={}));var Bh=function(t){qf(e,t);function e(r,i,s,a,h){i===void 0&&(i=8),s===void 0&&(s=4),a===void 0&&(a=yt.FILTER_RESOLUTION),h===void 0&&(h=5);var l=this,f=uy(h,r),c=cy(h);return l=t.call(this,f,c)||this,l.horizontal=r,l.resolution=a,l._quality=0,l.quality=s,l.blur=i,l}return e.prototype.apply=function(r,i,s,a){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/i.width):this.uniforms.strength=1/s.height*(s.height/i.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/i.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,i,s,a);else{var h=r.getFilterTexture(),l=r.renderer,f=i,c=h;this.state.blend=!1,r.applyFilter(this,f,c,es.CLEAR);for(var _=1;_<this.passes-1;_++){r.bindAndClear(f,es.BLIT),this.uniforms.uSampler=c;var A=c;c=f,f=A,l.shader.bind(this),l.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,c,s,a),r.returnFilterTexture(h)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),e}($r),dy=function(t){qf(e,t);function e(r,i,s,a){r===void 0&&(r=8),i===void 0&&(i=4),s===void 0&&(s=yt.FILTER_RESOLUTION),a===void 0&&(a=5);var h=t.call(this)||this;return h.blurXFilter=new Bh(!0,r,i,s,a),h.blurYFilter=new Bh(!1,r,i,s,a),h.resolution=s,h.quality=i,h.blur=r,h.repeatEdgePixels=!1,h}return e.prototype.apply=function(r,i,s,a){var h=Math.abs(this.blurXFilter.strength),l=Math.abs(this.blurYFilter.strength);if(h&&l){var f=r.getFilterTexture();this.blurXFilter.apply(r,i,f,es.CLEAR),this.blurYFilter.apply(r,f,s,a),r.returnFilterTexture(f)}else l?this.blurYFilter.apply(r,i,s,a):this.blurXFilter.apply(r,i,s,a)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),e}($r);/*!
 * @pixi/filter-color-matrix - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Dh=function(t,e){return Dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Dh(t,e)};function py(t,e){Dh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vy=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Hh=function(t){py(e,t);function e(){var r=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=t.call(this,Ko,vy,i)||this,r.alpha=1,r}return e.prototype._loadMatrix=function(r,i){i===void 0&&(i=!1);var s=r;i&&(this._multiply(s,this.uniforms.m,r),s=this._colorMatrix(s)),this.uniforms.m=s},e.prototype._multiply=function(r,i,s){return r[0]=i[0]*s[0]+i[1]*s[5]+i[2]*s[10]+i[3]*s[15],r[1]=i[0]*s[1]+i[1]*s[6]+i[2]*s[11]+i[3]*s[16],r[2]=i[0]*s[2]+i[1]*s[7]+i[2]*s[12]+i[3]*s[17],r[3]=i[0]*s[3]+i[1]*s[8]+i[2]*s[13]+i[3]*s[18],r[4]=i[0]*s[4]+i[1]*s[9]+i[2]*s[14]+i[3]*s[19]+i[4],r[5]=i[5]*s[0]+i[6]*s[5]+i[7]*s[10]+i[8]*s[15],r[6]=i[5]*s[1]+i[6]*s[6]+i[7]*s[11]+i[8]*s[16],r[7]=i[5]*s[2]+i[6]*s[7]+i[7]*s[12]+i[8]*s[17],r[8]=i[5]*s[3]+i[6]*s[8]+i[7]*s[13]+i[8]*s[18],r[9]=i[5]*s[4]+i[6]*s[9]+i[7]*s[14]+i[8]*s[19]+i[9],r[10]=i[10]*s[0]+i[11]*s[5]+i[12]*s[10]+i[13]*s[15],r[11]=i[10]*s[1]+i[11]*s[6]+i[12]*s[11]+i[13]*s[16],r[12]=i[10]*s[2]+i[11]*s[7]+i[12]*s[12]+i[13]*s[17],r[13]=i[10]*s[3]+i[11]*s[8]+i[12]*s[13]+i[13]*s[18],r[14]=i[10]*s[4]+i[11]*s[9]+i[12]*s[14]+i[13]*s[19]+i[14],r[15]=i[15]*s[0]+i[16]*s[5]+i[17]*s[10]+i[18]*s[15],r[16]=i[15]*s[1]+i[16]*s[6]+i[17]*s[11]+i[18]*s[16],r[17]=i[15]*s[2]+i[16]*s[7]+i[17]*s[12]+i[18]*s[17],r[18]=i[15]*s[3]+i[16]*s[8]+i[17]*s[13]+i[18]*s[18],r[19]=i[15]*s[4]+i[16]*s[9]+i[17]*s[14]+i[18]*s[19]+i[19],r},e.prototype._colorMatrix=function(r){var i=new Float32Array(r);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},e.prototype.brightness=function(r,i){var s=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.tint=function(r,i){var s=r>>16&255,a=r>>8&255,h=r&255,l=[s/255,0,0,0,0,0,a/255,0,0,0,0,0,h/255,0,0,0,0,0,1,0];this._loadMatrix(l,i)},e.prototype.greyscale=function(r,i){var s=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.blackAndWhite=function(r){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.hue=function(r,i){r=(r||0)/180*Math.PI;var s=Math.cos(r),a=Math.sin(r),h=Math.sqrt,l=1/3,f=h(l),c=s+(1-s)*l,_=l*(1-s)-f*a,A=l*(1-s)+f*a,m=l*(1-s)+f*a,I=s+l*(1-s),y=l*(1-s)-f*a,b=l*(1-s)-f*a,R=l*(1-s)+f*a,F=s+l*(1-s),k=[c,_,A,0,0,m,I,y,0,0,b,R,F,0,0,0,0,0,1,0];this._loadMatrix(k,i)},e.prototype.contrast=function(r,i){var s=(r||0)+1,a=-.5*(s-1),h=[s,0,0,0,a,0,s,0,0,a,0,0,s,0,a,0,0,0,1,0];this._loadMatrix(h,i)},e.prototype.saturate=function(r,i){r===void 0&&(r=0);var s=r*2/3+1,a=(s-1)*-.5,h=[s,a,a,0,0,a,s,a,0,0,a,a,s,0,0,0,0,0,1,0];this._loadMatrix(h,i)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(r){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.sepia=function(r){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.technicolor=function(r){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.polaroid=function(r){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.toBGR=function(r){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.kodachrome=function(r){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.browni=function(r){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.vintage=function(r){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.colorTone=function(r,i,s,a,h){r=r||.2,i=i||.15,s=s||16770432,a=a||3375104;var l=(s>>16&255)/255,f=(s>>8&255)/255,c=(s&255)/255,_=(a>>16&255)/255,A=(a>>8&255)/255,m=(a&255)/255,I=[.3,.59,.11,0,0,l,f,c,r,0,_,A,m,i,0,l-_,f-A,c-m,0,0];this._loadMatrix(I,h)},e.prototype.night=function(r,i){r=r||.1;var s=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.predator=function(r,i){var s=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(s,i)},e.prototype.lsd=function(r){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}($r);Hh.prototype.grayscale=Hh.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Xh=function(t,e){return Xh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Xh(t,e)};function _y(t,e){Xh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var my=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,gy=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,yy=function(t){_y(e,t);function e(r,i){var s=this,a=new Ee;return r.renderable=!1,s=t.call(this,gy,my,{mapSampler:r._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,s.maskSprite=r,s.maskMatrix=a,i==null&&(i=20),s.scale=new ye(i,i),s}return e.prototype.apply=function(r,i,s,a){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var h=this.maskSprite.worldTransform,l=Math.sqrt(h.a*h.a+h.b*h.b),f=Math.sqrt(h.c*h.c+h.d*h.d);l!==0&&f!==0&&(this.uniforms.rotation[0]=h.a/l,this.uniforms.rotation[1]=h.b/l,this.uniforms.rotation[2]=h.c/f,this.uniforms.rotation[3]=h.d/f),r.applyFilter(this,i,s,a)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),e}($r);/*!
 * @pixi/filter-fxaa - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Vh=function(t,e){return Vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Vh(t,e)};function by(t,e){Vh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xy=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,Ty=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,Ay=function(t){by(e,t);function e(){return t.call(this,xy,Ty)||this}return e}($r);/*!
 * @pixi/filter-noise - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var zh=function(t,e){return zh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},zh(t,e)};function Iy(t,e){zh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var wy=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,Ey=function(t){Iy(e,t);function e(r,i){r===void 0&&(r=.5),i===void 0&&(i=Math.random());var s=t.call(this,Ko,wy,{uNoise:0,uSeed:0})||this;return s.noise=r,s.seed=i,s}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),e}($r);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _c;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(_c||(_c={}));var mc;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(mc||(mc={}));var gc;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(gc||(gc={}));var yc;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(yc||(yc={}));var bc;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(bc||(bc={}));var xc;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(xc||(xc={}));var Tc;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Tc||(Tc={}));var Ac;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Ac||(Ac={}));var Ic;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Ic||(Ic={}));var wc;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(wc||(wc={}));var Ec;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ec||(Ec={}));var Cc;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Cc||(Cc={}));var Pc;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Pc||(Pc={}));var Rc;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Rc||(Rc={}));var Nc;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Nc||(Nc={}));var Sc;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Sc||(Sc={}));var Uc;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Uc||(Uc={}));var Oc;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Oc||(Oc={}));var jh;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(jh||(jh={}));var Fc;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Fc||(Fc={}));var Lc=new Ee;Oe.prototype._cacheAsBitmap=!1,Oe.prototype._cacheData=null,Oe.prototype._cacheAsBitmapResolution=null,Oe.prototype._cacheAsBitmapMultisample=jh.NONE;var Cy=function(){function t(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return t}();Object.defineProperties(Oe.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e;t?(this._cacheData||(this._cacheData=new Cy),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),Oe.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Oe.prototype._initCachedDisplayObject=function(e){var r;if(!(this._cacheData&&this._cacheData.sprite)){var i=this.alpha;this.alpha=1,e.batch.flush();var s=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var a=this.filters[0].padding;s.pad(a)}s.ceil(yt.RESOLUTION);var h=e.renderTexture.current,l=e.renderTexture.sourceFrame.clone(),f=e.renderTexture.destinationFrame.clone(),c=e.projection.transform,_=si.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:e.multisample}),A="cacheAsBitmap_"+ii();this._cacheData.textureCacheId=A,te.addToCache(_.baseTexture,A),Dt.addToCache(_,A);var m=this.transform.localTransform.copyTo(Lc).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:_,clear:!0,transform:m,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=c,e.renderTexture.bind(h,l,f),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var I=new hn(_);I.transform.worldTransform=this.transform.worldTransform,I.anchor.x=-(s.x/s.width),I.anchor.y=-(s.y/s.height),I.alpha=i,I._bounds=this._bounds,this._cacheData.sprite=I,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=I.containsPoint.bind(I)}},Oe.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Oe.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var s=e.context,a=e._projTransform;r.ceil(yt.RESOLUTION);var h=si.create({width:r.width,height:r.height}),l="cacheAsBitmap_"+ii();this._cacheData.textureCacheId=l,te.addToCache(h.baseTexture,l),Dt.addToCache(h,l);var f=Lc;this.transform.localTransform.copyTo(f),f.invert(),f.tx-=r.x,f.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),e.context=s,e._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var c=new hn(h);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(r.x/r.width),c.anchor.y=-(r.y/r.height),c.alpha=i,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)}},Oe.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Oe.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Oe.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,te.removeFromCache(this._cacheData.textureCacheId),Dt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Oe.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Oe.prototype.name=null,cr.prototype.getChildByName=function(e,r){for(var i=0,s=this.children.length;i<s;i++)if(this.children[i].name===e)return this.children[i];if(r)for(var i=0,s=this.children.length;i<s;i++){var a=this.children[i];if(a.getChildByName){var h=a.getChildByName(e,!0);if(h)return h}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Oe.prototype.getGlobalPosition=function(e,r){return e===void 0&&(e=new ye),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mc=function(){function t(){}return t.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var i,s;if(r._resizeTo===globalThis.window)i=globalThis.innerWidth,s=globalThis.innerHeight;else{var a=r._resizeTo,h=a.clientWidth,l=a.clientHeight;i=h,s=l}r.renderer.resize(i,s)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=fe.Application,t}();/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Gc;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Gc||(Gc={}));var kc;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(kc||(kc={}));var Bc;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Bc||(Bc={}));var Dc;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Dc||(Dc={}));var Hc;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Hc||(Hc={}));var Xc;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Xc||(Xc={}));var Vc;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Vc||(Vc={}));var zc;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(zc||(zc={}));var jc;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(jc||(jc={}));var Wh;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Wh||(Wh={}));var $h;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})($h||($h={}));var Yh;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Yh||(Yh={}));var Wc;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Wc||(Wc={}));var $c;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})($c||($c={}));var Zh;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Zh||(Zh={}));var rs;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(rs||(rs={}));var Yc;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Yc||(Yc={}));var Zc;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Zc||(Zc={}));var qh;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(qh||(qh={}));var qc;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(qc||(qc={}));var Py={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},Jh=/iPhone/i,Jc=/iPod/i,Kc=/iPad/i,Qc=/\biOS-universal(?:.+)Mac\b/i,Kh=/\bAndroid(?:.+)Mobile\b/i,td=/Android/i,cn=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ua=/Silk/i,Kr=/Windows Phone/i,ed=/\bWindows(?:.+)ARM\b/i,rd=/BlackBerry/i,id=/BB10/i,nd=/Opera Mini/i,sd=/\b(CriOS|Chrome)(?:.+)Mobile/i,ad=/Mobile(?:.+)Firefox\b/i,od=function(t){return typeof t!="undefined"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream=="undefined"};function Ry(t){return function(e){return e.test(t)}}function Ny(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator!="undefined"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]!="undefined"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]!="undefined"&&(r=i[0]);var s=Ry(r),a={apple:{phone:s(Jh)&&!s(Kr),ipod:s(Jc),tablet:!s(Jh)&&(s(Kc)||od(e))&&!s(Kr),universal:s(Qc),device:(s(Jh)||s(Jc)||s(Kc)||s(Qc)||od(e))&&!s(Kr)},amazon:{phone:s(cn),tablet:!s(cn)&&s(ua),device:s(cn)||s(ua)},android:{phone:!s(Kr)&&s(cn)||!s(Kr)&&s(Kh),tablet:!s(Kr)&&!s(cn)&&!s(Kh)&&(s(ua)||s(td)),device:!s(Kr)&&(s(cn)||s(ua)||s(Kh)||s(td))||s(/\bokhttp\b/i)},windows:{phone:s(Kr),tablet:s(ed),device:s(Kr)||s(ed)},other:{blackberry:s(rd),blackberry10:s(id),opera:s(nd),firefox:s(ad),chrome:s(sd),device:s(rd)||s(id)||s(nd)||s(ad)||s(sd)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var dn=Ny(globalThis.navigator);function Sy(){return!dn.apple.device}function Uy(t){var e=!0;if(dn.tablet||dn.phone){if(dn.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(dn.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}var la={ADAPTER:Py,MIPMAP_TEXTURES:Yh.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:qh.NONE,SPRITE_MAX_TEXTURES:Uy(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Zh.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:$h.CLAMP,SCALE_MODE:Wh.LINEAR,PRECISION_VERTEX:rs.HIGH,PRECISION_FRAGMENT:dn.apple.device?rs.HIGH:rs.MEDIUM,CAN_UPLOAD_SAME_BUFFER:Sy(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Qh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function tu(t,e,r){return r={path:e,exports:{},require:function(i,s){return Oy(i,s==null?r.path:s)}},t(r,r.exports),r.exports}function Oy(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}tu(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(f,c,_){this.fn=f,this.context=c,this.once=_||!1}function a(f,c,_,A,m){if(typeof _!="function")throw new TypeError("The listener must be a function");var I=new s(_,A||f,m),y=r?r+c:c;return f._events[y]?f._events[y].fn?f._events[y]=[f._events[y],I]:f._events[y].push(I):(f._events[y]=I,f._eventsCount++),f}function h(f,c){--f._eventsCount===0?f._events=new i:delete f._events[c]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],_,A;if(this._eventsCount===0)return c;for(A in _=this._events)e.call(_,A)&&c.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(_)):c},l.prototype.listeners=function(c){var _=r?r+c:c,A=this._events[_];if(!A)return[];if(A.fn)return[A.fn];for(var m=0,I=A.length,y=new Array(I);m<I;m++)y[m]=A[m].fn;return y},l.prototype.listenerCount=function(c){var _=r?r+c:c,A=this._events[_];return A?A.fn?1:A.length:0},l.prototype.emit=function(c,_,A,m,I,y){var b=arguments,R=r?r+c:c;if(!this._events[R])return!1;var F=this._events[R],k=arguments.length,H,z;if(F.fn){switch(F.once&&this.removeListener(c,F.fn,void 0,!0),k){case 1:return F.fn.call(F.context),!0;case 2:return F.fn.call(F.context,_),!0;case 3:return F.fn.call(F.context,_,A),!0;case 4:return F.fn.call(F.context,_,A,m),!0;case 5:return F.fn.call(F.context,_,A,m,I),!0;case 6:return F.fn.call(F.context,_,A,m,I,y),!0}for(z=1,H=new Array(k-1);z<k;z++)H[z-1]=b[z];F.fn.apply(F.context,H)}else{var W=F.length,X;for(z=0;z<W;z++)switch(F[z].once&&this.removeListener(c,F[z].fn,void 0,!0),k){case 1:F[z].fn.call(F[z].context);break;case 2:F[z].fn.call(F[z].context,_);break;case 3:F[z].fn.call(F[z].context,_,A);break;case 4:F[z].fn.call(F[z].context,_,A,m);break;default:if(!H)for(X=1,H=new Array(k-1);X<k;X++)H[X-1]=b[X];F[z].fn.apply(F[z].context,H)}}return!0},l.prototype.on=function(c,_,A){return a(this,c,_,A,!1)},l.prototype.once=function(c,_,A){return a(this,c,_,A,!0)},l.prototype.removeListener=function(c,_,A,m){var I=r?r+c:c;if(!this._events[I])return this;if(!_)return h(this,I),this;var y=this._events[I];if(y.fn)y.fn===_&&(!m||y.once)&&(!A||y.context===A)&&h(this,I);else{for(var b=0,R=[],F=y.length;b<F;b++)(y[b].fn!==_||m&&!y[b].once||A&&y[b].context!==A)&&R.push(y[b]);R.length?this._events[I]=R.length===1?R[0]:R:h(this,I)}return this},l.prototype.removeAllListeners=function(c){var _;return c?(_=r?r+c:c,this._events[_]&&h(this,_)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l}),tu(function(t,e){(function(r){var i=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,a=typeof Qh=="object"&&Qh;(a.global===a||a.window===a||a.self===a)&&(r=a);var h,l=2147483647,f=36,c=1,_=26,A=38,m=700,I=72,y=128,b="-",R=/^xn--/,F=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=f-c,W=Math.floor,X=String.fromCharCode,rt;function ut(q){throw RangeError(H[q])}function tt(q,at){for(var gt=q.length,At=[];gt--;)At[gt]=at(q[gt]);return At}function st(q,at){var gt=q.split("@"),At="";gt.length>1&&(At=gt[0]+"@",q=gt[1]),q=q.replace(k,".");var Pt=q.split("."),$t=tt(Pt,at).join(".");return At+$t}function bt(q){for(var at=[],gt=0,At=q.length,Pt,$t;gt<At;)Pt=q.charCodeAt(gt++),Pt>=55296&&Pt<=56319&&gt<At?($t=q.charCodeAt(gt++),($t&64512)==56320?at.push(((Pt&1023)<<10)+($t&1023)+65536):(at.push(Pt),gt--)):at.push(Pt);return at}function Ct(q){return tt(q,function(at){var gt="";return at>65535&&(at-=65536,gt+=X(at>>>10&1023|55296),at=56320|at&1023),gt+=X(at),gt}).join("")}function Gt(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:f}function ee(q,at){return q+22+75*(q<26)-((at!=0)<<5)}function xt(q,at,gt){var At=0;for(q=gt?W(q/m):q>>1,q+=W(q/at);q>z*_>>1;At+=f)q=W(q/z);return W(At+(z+1)*q/(q+A))}function Tt(q){var at=[],gt=q.length,At,Pt=0,$t=y,kt=I,Kt,ie,Yt,qt,Ut,Ft,It,_e,ce;for(Kt=q.lastIndexOf(b),Kt<0&&(Kt=0),ie=0;ie<Kt;++ie)q.charCodeAt(ie)>=128&&ut("not-basic"),at.push(q.charCodeAt(ie));for(Yt=Kt>0?Kt+1:0;Yt<gt;){for(qt=Pt,Ut=1,Ft=f;Yt>=gt&&ut("invalid-input"),It=Gt(q.charCodeAt(Yt++)),(It>=f||It>W((l-Pt)/Ut))&&ut("overflow"),Pt+=It*Ut,_e=Ft<=kt?c:Ft>=kt+_?_:Ft-kt,!(It<_e);Ft+=f)ce=f-_e,Ut>W(l/ce)&&ut("overflow"),Ut*=ce;At=at.length+1,kt=xt(Pt-qt,At,qt==0),W(Pt/At)>l-$t&&ut("overflow"),$t+=W(Pt/At),Pt%=At,at.splice(Pt++,0,$t)}return Ct(at)}function Ot(q){var at,gt,At,Pt,$t,kt,Kt,ie,Yt,qt,Ut,Ft=[],It,_e,ce,jt;for(q=bt(q),It=q.length,at=y,gt=0,$t=I,kt=0;kt<It;++kt)Ut=q[kt],Ut<128&&Ft.push(X(Ut));for(At=Pt=Ft.length,Pt&&Ft.push(b);At<It;){for(Kt=l,kt=0;kt<It;++kt)Ut=q[kt],Ut>=at&&Ut<Kt&&(Kt=Ut);for(_e=At+1,Kt-at>W((l-gt)/_e)&&ut("overflow"),gt+=(Kt-at)*_e,at=Kt,kt=0;kt<It;++kt)if(Ut=q[kt],Ut<at&&++gt>l&&ut("overflow"),Ut==at){for(ie=gt,Yt=f;qt=Yt<=$t?c:Yt>=$t+_?_:Yt-$t,!(ie<qt);Yt+=f)jt=ie-qt,ce=f-qt,Ft.push(X(ee(qt+jt%ce,0))),ie=W(jt/ce);Ft.push(X(ee(ie,0))),$t=xt(gt,_e,At==Pt),gt=0,++At}++gt,++at}return Ft.join("")}function ve(q){return st(q,function(at){return R.test(at)?Tt(at.slice(4).toLowerCase()):at})}function Jt(q){return st(q,function(at){return F.test(at)?"xn--"+Ot(at):at})}if(h={version:"1.3.2",ucs2:{decode:bt,encode:Ct},decode:Tt,encode:Ot,toASCII:Jt,toUnicode:ve},i&&s)if(t.exports==i)s.exports=h;else for(rt in h)h.hasOwnProperty(rt)&&(i[rt]=h[rt]);else r.punycode=h})(Qh)});function Fy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Ly=function(t,e,r,i){e=e||"&",r=r||"=";var s={};if(typeof t!="string"||t.length===0)return s;var a=/\+/g;t=t.split(e);var h=1e3;i&&typeof i.maxKeys=="number"&&(h=i.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var f=0;f<l;++f){var c=t[f].replace(a,"%20"),_=c.indexOf(r),A,m,I,y;_>=0?(A=c.substr(0,_),m=c.substr(_+1)):(A=c,m=""),I=decodeURIComponent(A),y=decodeURIComponent(m),Fy(s,I)?Array.isArray(s[I])?s[I].push(y):s[I]=[s[I],y]:s[I]=y}return s},is=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},My=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(s){var a=encodeURIComponent(is(s))+r;return Array.isArray(t[s])?t[s].map(function(h){return a+encodeURIComponent(is(h))}).join(e):a+encodeURIComponent(is(t[s]))}).join(e):i?encodeURIComponent(is(i))+r+encodeURIComponent(is(t)):""};tu(function(t,e){e.decode=e.parse=Ly,e.encode=e.stringify=My});/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var hd;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(hd||(hd={}));var ud;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(ud||(ud={}));var ld;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(ld||(ld={}));var ir;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(ir||(ir={}));var fd;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(fd||(fd={}));var cd;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(cd||(cd={}));var dd;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(dd||(dd={}));var pd;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(pd||(pd={}));var vd;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(vd||(vd={}));var _d;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(_d||(_d={}));var md;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(md||(md={}));var gd;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(gd||(gd={}));var yd;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(yd||(yd={}));var bd;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(bd||(bd={}));var xd;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(xd||(xd={}));var Td;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Td||(Td={}));var Ad;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Ad||(Ad={}));var Id;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Id||(Id={}));var wd;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(wd||(wd={}));var Ed;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Ed||(Ed={}));/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */la.RETINA_PREFIX=/@([0-9\.]+)x/,la.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;function Gy(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[ir.NORMAL_NPM]=ir.NORMAL,t[ir.ADD_NPM]=ir.ADD,t[ir.SCREEN_NPM]=ir.SCREEN,e[ir.NORMAL]=ir.NORMAL_NPM,e[ir.ADD]=ir.ADD_NPM,e[ir.SCREEN]=ir.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}Gy();var Cd={};function ky(t,e,r){if(r===void 0&&(r=3),!Cd[e]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(i))),Cd[e]=!0}}(function(){function t(e,r,i){this.canvas=la.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||la.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t})();var eu=function(){function t(e){var r=this;this.stage=new cr,e=Object.assign({forceCanvas:!1},e),this.renderer=M0(e),t._plugins.forEach(function(i){i.init.call(r,e)})}return t.registerPlugin=function(e){ky("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Lr.add({type:fe.Application,ref:e})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var i=this,s=t._plugins.slice(0);s.reverse(),s.forEach(function(a){a.destroy.call(i)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();Lr.handleByList(fe.Application,eu._plugins),Lr.add(Mc);/*!
 * @pixi/mesh-extras - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var ru=function(t,e){return ru=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},ru(t,e)};function pn(t,e){ru(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Pd=function(t){pn(e,t);function e(r,i,s,a){r===void 0&&(r=100),i===void 0&&(i=100),s===void 0&&(s=10),a===void 0&&(a=10);var h=t.call(this)||this;return h.segWidth=s,h.segHeight=a,h.width=r,h.height=i,h.build(),h}return e.prototype.build=function(){for(var r=this.segWidth*this.segHeight,i=[],s=[],a=[],h=this.segWidth-1,l=this.segHeight-1,f=this.width/h,c=this.height/l,_=0;_<r;_++){var A=_%this.segWidth,m=_/this.segWidth|0;i.push(A*f,m*c),s.push(A/h,m/l)}for(var I=h*l,_=0;_<I;_++){var y=_%h,b=_/h|0,R=b*this.segWidth+y,F=b*this.segWidth+y+1,k=(b+1)*this.segWidth+y,H=(b+1)*this.segWidth+y+1;a.push(R,F,k,F,H,k)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Qn),Rd=function(t){pn(e,t);function e(r,i,s){r===void 0&&(r=200),s===void 0&&(s=0);var a=t.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return a.points=i,a._width=r,a.textureScale=s,a.build(),a}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var r=this.points;if(r){var i=this.getBuffer("aVertexPosition"),s=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(r.length<1)){i.data.length/4!==r.length&&(i.data=new Float32Array(r.length*4),s.data=new Float32Array(r.length*4),a.data=new Uint16Array((r.length-1)*6));var h=s.data,l=a.data;h[0]=0,h[1]=0,h[2]=0,h[3]=1;for(var f=0,c=r[0],_=this._width*this.textureScale,A=r.length,m=0;m<A;m++){var I=m*4;if(this.textureScale>0){var y=c.x-r[m].x,b=c.y-r[m].y,R=Math.sqrt(y*y+b*b);c=r[m],f+=R/_}else f=m/(A-1);h[I]=f,h[I+1]=0,h[I+2]=f,h[I+3]=1}for(var F=0,m=0;m<A-1;m++){var I=m*2;l[F++]=I,l[F++]=I+1,l[F++]=I+2,l[F++]=I+2,l[F++]=I+1,l[F++]=I+3}s.update(),a.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var i=r[0],s,a=0,h=0,l=this.buffers[0].data,f=r.length,c=0;c<f;c++){var _=r[c],A=c*4;c<r.length-1?s=r[c+1]:s=_,h=-(s.x-i.x),a=s.y-i.y;var m=Math.sqrt(a*a+h*h),I=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=m,h/=m,a*=I,h*=I,l[A]=_.x+a,l[A+1]=_.y+h,l[A+2]=_.x-a,l[A+3]=_.y-h,i=_}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Qn),By=function(t){pn(e,t);function e(r,i,s){s===void 0&&(s=0);var a=this,h=new Rd(r.height,i,s),l=new fn(r);return s>0&&(r.baseTexture.wrapMode=Ur.REPEAT),a=t.call(this,h,l)||this,a.autoUpdate=!0,a}return e.prototype._render=function(r){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,r)},e}(ln),Nd=function(t){pn(e,t);function e(r,i,s){var a=this,h=new Pd(r.width,r.height,i,s),l=new fn(Dt.WHITE);return a=t.call(this,h,l)||this,a.texture=r,a.autoResize=!0,a}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,i=this.shader.texture,s=i.width,a=i.height;this.autoResize&&(r.width!==s||r.height!==a)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,r)},e.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,r)},e}(ln),Dy=function(t){pn(e,t);function e(r,i,s,a,h){r===void 0&&(r=Dt.EMPTY);var l=this,f=new Qn(i,s,a);f.getBuffer("aVertexPosition").static=!1;var c=new fn(r);return l=t.call(this,f,c,null,h)||this,l.autoUpdate=!0,l}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,r)},e}(ln),fa=10,Hy=function(t){pn(e,t);function e(r,i,s,a,h){i===void 0&&(i=fa),s===void 0&&(s=fa),a===void 0&&(a=fa),h===void 0&&(h=fa);var l=t.call(this,Dt.WHITE,4,4)||this;return l._origWidth=r.orig.width,l._origHeight=r.orig.height,l._width=l._origWidth,l._height=l._origHeight,l._leftWidth=i,l._rightWidth=a,l._topHeight=s,l._bottomHeight=h,l.texture=r,l}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var r=this.vertices,i=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*i,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*i,r[25]=r[27]=r[29]=r[31]=this._height},e.prototype.updateVerticalVertices=function(){var r=this.vertices,i=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*i,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*i,r[6]=r[14]=r[22]=r[30]=this._width},e.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,i=this._width>r?1:this._width/r,s=this._topHeight+this._bottomHeight,a=this._height>s?1:this._height/s,h=Math.min(i,a);return h},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var r=this.texture,i=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var s=1/this._origWidth,a=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=s*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-s*this._rightWidth,i[9]=i[11]=i[13]=i[15]=a*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(Nd);/*!
 * @pixi/sprite-animated - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var iu=function(t,e){return iu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},iu(t,e)};function Xy(t,e){iu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Vy=function(t){Xy(e,t);function e(r,i){i===void 0&&(i=!0);var s=t.call(this,r[0]instanceof Dt?r[0]:r[0].texture)||this;return s._textures=null,s._durations=null,s._autoUpdate=i,s._isConnectedToTicker=!1,s.animationSpeed=1,s.loop=!0,s.updateAnchor=!1,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s._playing=!1,s._previousFrame=null,s.textures=r,s}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Xe.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Xe.shared.add(this.update,this,Mr.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(r){this.stop();var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(r){var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(r){if(this._playing){var i=this.animationSpeed*r,s=this.currentFrame;if(this._durations!==null){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=i/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var h=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*h,this._currentTime+=h;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s?this.onLoop():this.animationSpeed<0&&this.currentFrame>s&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(r){this.stop(),t.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(r){for(var i=[],s=0;s<r.length;++s)i.push(Dt.from(r[s]));return new e(i)},e.fromImages=function(r){for(var i=[],s=0;s<r.length;++s)i.push(Dt.from(r[s]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof Dt)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<r.length;i++)this._textures.push(r[i].texture),this._durations.push(r[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Xe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Xe.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(hn);/*!
 * pixi.js - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Lr.add(Y0,tf,J0,Af,Gf,th,Xf,Zf,ff,yf,bf,Bf,i0,of);var zy={AlphaFilter:oy,BlurFilter:dy,BlurFilterPass:Bh,ColorMatrixFilter:Hh,DisplacementFilter:yy,FXAAFilter:Ay,NoiseFilter:Ey};const jy=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return lr},AbstractBatchRenderer:k0,AbstractMultiResource:Fs,AbstractRenderer:L0,AccessibilityManager:Y0,AnimatedSprite:Vy,AppLoaderPlugin:of,Application:eu,ArrayResource:mo,Attribute:wo,get BLEND_MODES(){return Nt},get BUFFER_BITS(){return Sn},get BUFFER_TYPE(){return Tr},BaseImageResource:Gr,BasePrepare:Lf,BaseRenderTexture:Ao,BaseTexture:te,BatchDrawCall:js,BatchGeometry:Qo,BatchPluginFactory:X0,BatchRenderer:th,BatchShaderGenerator:B0,BatchSystem:Ro,BatchTextureArray:Ws,BitmapFont:Si,BitmapFontData:ts,BitmapFontLoader:Zf,BitmapText:ny,BlobResource:lf,Bounds:Gn,BrowserAdapter:el,Buffer:Ge,BufferResource:wi,get CLEAR_MODES(){return jr},get COLOR_MASK_BITS(){return qa},CanvasResource:go,Circle:Ol,CompressedTextureLoader:ff,CompressedTextureResource:ta,Container:cr,ContextSystem:No,CountLimiter:Ff,CubeResource:yo,DDSLoader:yf,DEG_TO_RAD:Ul,get DRAW_MODES(){return ur},DisplayObject:Oe,get ENV(){return Nr},Ellipse:Fl,get ExtensionType(){return fe},Extract:tf,get FORMATS(){return ft},FORMATS_TO_COMPONENTS:_f,FillStyle:ph,Filter:$r,FilterState:u0,FilterSystem:Po,Framebuffer:Ms,FramebufferSystem:So,get GC_MODES(){return Es},GLFramebuffer:f0,GLProgram:U0,GLTexture:zs,GRAPHICS_CURVES:nn,Geometry:en,GeometrySystem:Oo,Graphics:qn,GraphicsData:xh,GraphicsGeometry:Sf,IGLUniformData:cg,INSTALLED:Bn,get INTERNAL_FORMATS(){return Wt},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:jn,ImageBitmapResource:To,ImageResource:Ls,InteractionData:rh,InteractionEvent:Z0,InteractionManager:J0,InteractionTrackingData:Zs,KTXLoader:bf,get LINE_CAP(){return Jr},get LINE_JOIN(){return qr},LineStyle:Uf,Loader:zn,get LoaderResource(){return Ne},get MASK_TYPES(){return Me},get MIPMAP_MODES(){return Or},get MSAA_QUALITY(){return Fe},MaskData:c0,MaskSystem:Ho,Matrix:Ee,Mesh:ln,MeshBatchUvs:Vf,MeshGeometry:Qn,MeshMaterial:fn,NineSlicePlane:Hy,ObjectRenderer:Dn,ObservablePoint:ni,PI_2:Ln,get PRECISION(){return xr},ParticleContainer:y1,ParticleRenderer:Af,PlaneGeometry:Pd,Point:ye,Polygon:Mn,Prepare:Gf,Program:rn,ProjectionSystem:zo,Quad:h0,QuadUv:Eo,RAD_TO_DEG:Sl,get RENDERER_TYPE(){return tn},Rectangle:Qt,RenderTexture:si,RenderTexturePool:a0,RenderTextureSystem:jo,Renderer:Jo,ResizePlugin:Mc,Resource:Ii,RopeGeometry:Rd,RoundedRectangle:Ll,Runner:Ye,get SAMPLER_TYPES(){return Un},get SCALE_MODES(){return Sr},get SHAPES(){return De},SVGResource:bo,ScissorSystem:Xo,Shader:Wr,ShaderSystem:Wo,SimpleMesh:Dy,SimplePlane:Nd,SimpleRope:By,Sprite:hn,SpriteMaskFilter:I0,Spritesheet:kf,SpritesheetLoader:Bf,State:oi,StateSystem:$o,StencilSystem:Vo,System:Pg,get TARGETS(){return ri},get TEXT_GRADIENT(){return un},get TYPES(){return Et},TYPES_TO_BYTES_PER_COMPONENT:ch,TYPES_TO_BYTES_PER_PIXEL:mf,TemporaryDisplayObject:fo,Text:Ph,TextFormat:jf,TextMetrics:Cr,TextStyle:Ni,Texture:Dt,TextureGCSystem:Yo,TextureLoader:hf,TextureMatrix:Xs,TextureSystem:Zo,TextureUvs:Io,Ticker:Xe,TickerPlugin:i0,TilingSprite:V1,TilingSpriteRenderer:Xf,TimeLimiter:X1,Transform:Us,get UPDATE_PRIORITY(){return Mr},UniformGroup:ai,VERSION:Sg,VideoResource:xo,ViewableBuffer:$s,get WRAP_MODES(){return Ur},XMLFormat:oa,XMLStringFormat:Wf,accessibleTarget:j0,autoDetectFormat:Mh,autoDetectRenderer:M0,autoDetectResource:Os,checkMaxIfStatementsInShader:T0,createUBOElements:R0,defaultFilterVertex:Ko,defaultVertex:G0,extensions:Lr,filters:zy,generateProgram:O0,generateUniformBufferSync:S0,getTestContext:m0,getUBOData:N0,graphicsUtils:w1,groupD8:Ce,interactiveTarget:q0,isMobile:hr,parseDDS:pf,parseKTX:gf,resources:V0,settings:yt,systems:z0,uniformParsers:Ei,utils:Lm},Symbol.toStringTag,{value:"Module"})),Wy=t=>{const e=t.length;if(e===0)return;const r=Math.floor(Math.random()*e);return t[r]},$y=(t,e)=>{let r;return{start:function(){return vi(this,null,function*(){const i=()=>vi(this,null,function*(){r&&(yield t(),clearTimeout(r),r=setTimeout(i,e))});r||(clearTimeout(r),r=setTimeout(i,e))})},stop:function(){clearTimeout(r),r=void 0}}},nu=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),su=t=>typeof t=="number"||t instanceof Number,Ui=(t,e)=>{const r=Object.assign({},t);return nu(t)&&nu(e)&&Object.keys(e).forEach(i=>{nu(e[i])?i in t?r[i]=Ui(t[i],e[i]):Object.assign(r,{[i]:e[i]}):Object.assign(r,{[i]:e[i]})}),r},Yy=()=>{console.log(...[`
 %c 🎉🎉🎉 %c %c ✨ oh-my-live2d v0.4.1 - https://oml2d.com Happy Hacking !! ✨ %c %c 🎉🎉🎉 
`,"background: #add7fb; padding:5px 0;","background: #58b0fc; padding:5px 0;","color: #fff; background: #030307; padding:5px 0;","background: #58b0fc; padding:5px 0;","background: #add7fb; padding:5px 0;"])},Zy=t=>{"width"in t&&su(t.width)&&(t.width=`${t.width}px`),"height"in t&&su(t.height)&&(t.height=`${t.height}px`)},ns=(t,e)=>{Object.assign(e.style,t)},qy=t=>new Promise(e=>setTimeout(e,t)),Qr=t=>{const e=document.createElement(t.tagName);return e.id=t.id,t.className&&(e.className=t.className),t.dataName&&e.setAttribute("data-name",t.dataName),t.childrens&&t.childrens.forEach(r=>{e.appendChild(Qr(r))}),t.innerHtml&&(e.innerHTML=t.innerHtml),t.innerText&&(e.innerText=t.innerText),e};var Oi=(t=>(t.PC="PC",t.MOBILE="MOBILE",t))(Oi||{});class Jy{constructor(e){ae(this,"element");ae(this,"style",{});ae(this,"clickItem");this.stageElement=e,this.element=Qr({id:ei.menusId,tagName:"div",className:ei.menusId}),this.createMenuItem(),this.stageElement.append(this.element),this.ininStyle()}ininStyle(){this.setStyle({transition:"all 500ms",visibility:"hidden",opacity:0,position:"absolute",right:0,bottom:"10%",zIndex:"9999",fontSize:"26px"}),this.stageElement.addEventListener("mouseover",()=>this.setStyle({opacity:1,visibility:"visible"})),this.stageElement.addEventListener("mouseout",()=>this.setStyle({opacity:0,visibility:"hidden"}))}createMenuItem(){const e=gs.map(r=>{const i=Qr({id:r.id,tagName:"div",dataName:r.id,className:"oml2d-menus-item",innerHtml:`
      <svg class="oml2d-icon">
        <use xlink:href="#${r.name}"></use>
      </svg>
    `});return i.title=r.title,i});this.element.append(...e),this.element.addEventListener("click",r=>{var s;if(r.target===r.currentTarget)return;let i=r.target;for(;i.parentNode!==r.currentTarget;)i=i.parentNode;(s=this.clickItem)==null||s.call(this,i.getAttribute("data-name"))})}onClickItem(e){this.clickItem=e}setStyle(e){this.style=Ui(this.style,e),ns(this.style,this.element)}}class Ky{constructor(e,r,i){ae(this,"model");ae(this,"failEvent");this.live2dModel=e,this.modelOptions=r,this.application=i,this.model=this.create()}create(){const e=this.live2dModel.fromSync(this.modelOptions.path||"",{onError:r=>{var i;(i=this.failEvent)==null||i.call(this,r)}});return e.once("load",()=>{this.application.stage.addChild(this.model),this.application.resize()}),e}onLoaded(e){this.model.once("load",()=>{e({width:this.model.width,height:this.model.height})})}onFail(e){this.failEvent=e}setScale(e=.1,r=.1){this.model.scale.set(e,r)}setPosition(e=0,r=0){this.model.x=e,this.model.y=r}}const Qy=`
@keyframes oml2d-shake-tips{
  0% {
    transform: translate(-50%, 5%) scale(0.99);
  }
  50% {
 
    transform: translate(-50%, 0%) scale(1);
  }
  100% {
    transform: translate(-50%, 5%) scale(0.99);
  }
}

@keyframes oml2d-stage-slide-in {
  from {
    transform: translateY(130%);
  }
  to {
    transform: translateY(0%);
  }
}

@keyframes oml2d-stage-slide-out {
  from {
    transform: translateY(0%);
  }
  to {
    transform: translateY(130%);
  }
}

@keyframes oml2d-display-tips {
  0% {
    opacity: 0;
    visibility: hidden;
  }
  100% {
    opacity: 1;
    visibility: visible;
  }
}

@keyframes oml2d-hidden-tips {
  0% {
    opacity: 1;
    visibility: visible;
  }
  100% {
    opacity: 0;
    visibility: hidden;
  }
}
@keyframes oml2d-loading-rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.oml2d-icon {
  width: 1em; 
  height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}

.oml2d-loading{
  animation-name: oml2d-loading-rotate;
  animation-duration: 600ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}
.oml2d-menus-item {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  box-sizing: border-box;
  align-items: center;
  transition: all 300ms;
  color: #58b0fc;
  cursor: pointer;
  background-color: #fff;
}

.oml2d-menus-item:hover {
  background-color: #58b0fc;
  color: #fff;
  box-shadow: 0 0 5px #000;
}

#oml2dMenus .oml2d-menus-item:not(:last-child) {
  margin-bottom: 10px;
}



@keyframes oml2d-status-bar-slide-out {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-120%);
  }
}


@keyframes oml2d-status-bar-slide-in {
  0% {
    transform: translateX(-120%);
  }
  100% {
    transform: translateX(0%);
  }
}
`;class tb{constructor(e,r){ae(this,"element");ae(this,"canvasElement");ae(this,"wrapperElement");ae(this,"style",{});ae(this,"canvasStyle",{});ae(this,"status",0);ae(this,"slideChangeEnd");this.targetElement=e,this.options=r,this.element=Qr({id:ei.stageId,tagName:"div"}),this.canvasElement=Qr({id:ei.canvasId,tagName:"canvas"}),this.wrapperElement=Qr({id:"oml2dWrapper",tagName:"div"}),this.create(),this.initStyle()}create(){const e=document.createDocumentFragment();this.wrapperElement.append(e),this.element.append(this.canvasElement),e.append(this.element),this.wrapperElement.append(e),this.targetElement.append(this.wrapperElement),this.targetElement!==document.body&&document.body.append(this.targetElement),window.onbeforeunload=()=>{this.targetElement.removeChild(this.element)}}initStyle(){this.setStyle({width:"0px",height:"0px",zIndex:"9997",transform:"translateY(130%)"}),this.wrapperElement.style.position=this.options.fixed?"fixed":"relative",this.wrapperElement.style.overflow="hidden",this.wrapperElement.style.left="0",this.wrapperElement.style.bottom="0",this.wrapperElement.style.zIndex="9999";const e=Qr({tagName:"style",id:"oml2dStyle",innerHtml:Qy});document.head.append(e)}setStyle(e){this.style=Ui(this.style,e),ns(this.style,this.element),this.setCanvasStyle({width:"100%",height:"100%",zIndex:"9999",position:"relative"})}setCanvasStyle(e){this.canvasStyle=Ui(this.canvasStyle,e),ns(this.canvasStyle,this.canvasElement)}slideIn(e){return this.setStyle({animationName:"oml2d-stage-slide-in",animationDuration:`${e}ms`,animationFillMode:"forwards"}),this.status=1,new Promise(r=>{setTimeout(()=>vi(this,null,function*(){var i;(i=this.slideChangeEnd)==null||i.call(this,this.status),r()}),e)})}slideOut(e){return this.setStyle({animationName:"oml2d-stage-slide-out",animationDuration:`${e}ms`,animationFillMode:"forwards"}),this.status=0,new Promise(r=>setTimeout(()=>{var i;(i=this.slideChangeEnd)==null||i.call(this,this.status),r()},e))}onSlideChangeEnd(e){this.slideChangeEnd=e}}var Sd=(t=>(t.info="info",t.error="error",t))(Sd||{});class eb{constructor(e){ae(this,"element");ae(this,"transitionTime",800);ae(this,"status",0);ae(this,"stateColor",{info:"#58b0fc",error:"#F08080"});ae(this,"style",{});this.element=Qr({id:ei.statusBarId,tagName:"div",innerText:"hello"}),e.append(this.element),this.initStyle()}initStyle(){this.setStyle({minWidth:"20px",minHeight:"50px",position:"absolute",transform:"translateX(-110%)",left:"0",bottom:"80px",padding:"7px 5px",zIndex:"9998",backgroundColor:"#58b0fc",borderStyle:"solid",borderColor:"#fff",fontWeight:"bold",borderRadius:"0 5px 5px 0",borderWidth:"2px 2px 2px 0",boxShadow:"0 0 5px #999",color:"#fff",display:"flex",alignItems:"center",textAlign:"center",flexWrap:"wrap",fontSize:"14px",writingMode:"vertical-lr"})}setStyle(e){this.style=Ui(this.style,e),ns(e,this.element)}slideIn(){return new Promise(e=>{this.status=1,this.setStyle({animationName:"oml2d-status-bar-slide-in",animationDuration:`${this.transitionTime}ms`,animationFillMode:"forwards"}),setTimeout(()=>{e(this.status)},this.transitionTime)})}slideOut(){return new Promise(e=>{this.status=0,this.setStyle({animationName:"oml2d-status-bar-slide-out",animationDuration:`${this.transitionTime}ms`,animationFillMode:"forwards"}),setTimeout(()=>{e(this.status)},this.transitionTime)})}showLoading(){this.setContent(`
      <div style="margin-bottom:3px;">加载中</div>
      <svg class="oml2d-icon oml2d-loading" aria-hidden="true">
        <use xlink:href="#icon-loading"></use>
      </svg>
    `),this.slideIn()}hideLoading(){this.popup("加载成功")}loadingError(e){this.popup("加载失败","error",!1);const r=()=>{this.popup("重新加载","info",!1)},i=()=>{this.popup("加载失败","error",!1)},s=()=>{e(),this.element.removeEventListener("mouseout",i),this.element.removeEventListener("mouseover",r),this.element.removeEventListener("click",s)};this.element.addEventListener("click",s),this.element.addEventListener("mouseover",r),this.element.addEventListener("mouseout",i)}popup(e,r="info",i=1e3){this.setContent(e),this.setStyle({backgroundColor:this.stateColor[r]}),this.slideIn().then(()=>{i&&setTimeout(()=>{this.slideOut()},i)})}setContent(e){this.element.innerHTML=e}}const ui={daybreak:"早上好！一日之计在于晨，美好的一天就要开始了。",morning:"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！",noon:"中午了，工作了一个上午，现在是午餐时间！",afternoon:"午后很容易犯困呢，来杯咖啡吧~",dusk:"傍晚了！工作一天幸苦啦~",night:"晚上好，今天过得怎么样呢？",lateNight:"已经这么晚了呀，早点休息吧，晚安~",weeHours:"这么晚还不睡吗？当心熬夜秃头哦！"},rb=function(t){const{message:e}=t;let r="";const i=new Date().getHours().toString(),s=/^[5-7]$/,a=/^(?:[8-9]|1[0-1])$/,h=/^(1[2-3])$/,l=/^1[4-7]$/,f=/^1[8-9]$/,c=/^2[0-1]$/,_=/^2[2-3]$/;return s.test(i)?r=(e==null?void 0:e.daybreak)||ui.daybreak:a.test(i)?r=(e==null?void 0:e.morning)||ui.morning:h.test(i)?r=(e==null?void 0:e.noon)||ui.noon:l.test(i)?r=(e==null?void 0:e.afternoon)||ui.afternoon:f.test(i)?r=(e==null?void 0:e.dusk)||ui.dusk:c.test(i)?r=(e==null?void 0:e.night)||ui.night:_.test(i)?r=(e==null?void 0:e.lateNight)||ui.lateNight:r=(e==null?void 0:e.weeHours)||ui.weeHours,r};class ib{constructor(e,r){ae(this,"element");ae(this,"idlePlayer");ae(this,"closeTimer",0);ae(this,"transitionTime",1e3);ae(this,"idleTipsInterval",3e3);ae(this,"style",{});ae(this,"priority",0);this.options=r,this.element=Qr({id:ei.tipsId,tagName:"div"}),e.append(this.element),this.initStyle(),this.idlePlayer=this.createIdleMessagePlayer()}initStyle(){if(this.setStyle({position:"absolute",fontSize:"18px",borderRadius:"10px",filter:"drop-shadow(0 0 5px #999)",backgroundColor:"#58b0fc",border:"2px solid #fff",color:"#fff",padding:"3px 5px",opacity:0,visibility:"hidden",transform:"translateX(-50%)",left:"50%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",animationDuration:`${this.transitionTime}ms,${this.transitionTime}ms`,animationFillMode:"forwards, none",animationIterationCount:"1, infinite",minWidth:"230px",minHeight:"100px",top:0}),this.options){const{width:e=230,height:r=100,offsetX:i=0,offsetY:s=0}=this.options.style||{};this.setStyle({minWidth:`${e}px`,minHeight:`${r}px`,left:`calc(${i}px + 50%)`,top:`${s}px`})}}setStyle(e){this.style=Ui(this.style,e),ns(this.style,this.element)}setContent(e){this.element.innerHTML=e}showMessage(e,r=3e3,i=0){i<this.priority||(this.priority=i,this.closeTimer&&clearTimeout(this.closeTimer),this.setContent(e),this.setStyle({animationName:"oml2d-display-tips,oml2d-shake-tips"}),this.closeTimer=setTimeout(()=>{this.setStyle({animationName:"oml2d-hidden-tips,oml2d-shake-tips"}),this.priority=0},r))}clear(){var e;this.setStyle({animationName:"oml2d-hidden-tips,oml2d-shake-tips"}),(e=this.idlePlayer)==null||e.stop(),clearTimeout(this.closeTimer),this.priority=0}notification(e,r,i){var s;(s=this.idlePlayer)==null||s.stop(),this.showMessage(e,r,i),setTimeout(()=>{var a;(a=this.idlePlayer)==null||a.start()},r+this.transitionTime)}welcome(){return vi(this,null,function*(){if(!this.options)return;const e=rb(this.options.welcomeTips||{}),{duration:r=3e3,priority:i=2}=this.options.welcomeTips||{};this.notification(e,r,i)})}createIdleMessagePlayer(){var h;if(!this.options)return;const{message:e,duration:r,priority:i}=this.options.idleTips||{};let s="";const a=$y(()=>vi(this,null,function*(){s=Wy(e||[])||"",s?(yield this.showMessage(s,r,i),yield qy(r||3e3)):a.stop()}),((h=this.options.idleTips)==null?void 0:h.interval)||this.idleTipsInterval);return a}}class nb{constructor(e,r){ae(this,"stage");ae(this,"statusBar");ae(this,"tips");ae(this,"menus");ae(this,"application");ae(this,"modelIndex",0);ae(this,"windowSizeType",Oi.PC);ae(this,"mediaQuery",window.matchMedia("screen and (max-width: 768px)"));this.options=e,this.live2dModel=r,this.options.sayHello&&this.sayHello(),this.stage=new tb(this.options.parentElement,e),this.statusBar=new eb(this.stage.wrapperElement),this.tips=new ib(this.stage.element,this.options.tips),this.menus=new Jy(this.stage.element),this.application=this.createApplication(),this.initialize()}initialize(){if(this.verifyWindowSizeType(),this.windowSizeType!==Oi.PC){this.statusBar.popup("暂不支持移动端",Sd.info,8e3);return}this.loadModel(),this.registerEvents()}verifyWindowSizeType(){this.mediaQuery.matches?this.windowSizeType=Oi.MOBILE:this.windowSizeType=Oi.PC,this.mediaQuery.addEventListener("change",e=>{e.matches?this.windowSizeType=Oi.MOBILE:this.windowSizeType=Oi.PC})}loadModel(e=!0){var i,s,a;e&&this.statusBar.showLoading();const r=new Ky(this.live2dModel,this.currentModelOption,this.application);r==null||r.setScale((i=this.currentModelOption)==null?void 0:i.scale,(s=this.currentModelOption)==null?void 0:s.scale),r==null||r.setPosition(...((a=this.currentModelOption)==null?void 0:a.position)||[]),r==null||r.onLoaded(({width:h,height:l})=>{var f,c,_,A;this.setStageStyle({width:((f=this.currentModelOption.stageStyle)==null?void 0:f.width)||h,height:((c=this.currentModelOption.stageStyle)==null?void 0:c.height)||l,backgroundColor:((_=this.currentModelOption.stageStyle)==null?void 0:_.backgroundColor)||"rgba(0, 0, 0, 0)"}),this.stage.slideIn((A=this.options)==null?void 0:A.transitionTime),this.statusBar.hideLoading()}),r==null||r.onFail(h=>{this.statusBar.loadingError(this.loadModel.bind(this)),console.error(h)})}setStageStyle(e){Zy(e),this.stage.setStyle(e),this.application.resize()}get currentModelOption(){return this.options.models[this.modelIndex]}loadNextModel(){return vi(this,null,function*(){var e;if(this.options.models.length<=1){yield this.tips.notification("没找到其他模型哦...",3e3,9);return}this.tips.clear(),this.statusBar.showLoading(),yield this.stage.slideOut(this.options.transitionTime),this.application.stage.children.length>=1&&this.application.stage.removeChildAt(0),su((e=this.options.models)==null?void 0:e.length)&&(this.modelIndex<this.options.models.length-1?this.modelIndex++:this.modelIndex=0,this.loadModel(!1))})}sayHello(){Yy()}registerEvents(){this.menus.onClickItem(e=>{switch(e){case"SwitchModel":this.loadNextModel();return;case"Play":this.tips.showMessage("抱歉, 这个功能正在施工...",3e3,9);return;case"About":window.open("https://oml2d.com");return}}),window.addEventListener("copy",()=>{}),this.stage.onSlideChangeEnd(e=>vi(this,null,function*(){e&&(yield this.tips.welcome())}))}createApplication(){return new eu({view:this.stage.canvasElement,resolution:2,autoStart:!0,autoDensity:!0,backgroundAlpha:0,resizeTo:this.stage.element})}}const sb=t=>r=>{var a;const{parentElement:i}=r,s=Ui(or,r);if(s.parentElement=i||document.body,!((a=s.models)!=null&&a.length))throw new Error("至少需要一个配置一个模型");new nb(s,t)};var Fi=Math.pow,Se=(t,e,r)=>new Promise((i,s)=>{var a=f=>{try{l(r.next(f))}catch(c){s(c)}},h=f=>{try{l(r.throw(f))}catch(c){s(c)}},l=f=>f.done?i(f.value):Promise.resolve(f.value).then(a,h);l((r=r.apply(t,e)).next())});class au{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new au}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,r){this._currentTime+=r;const i=this._currentTime*2*3.14159;for(let s=0;s<this._breathParameters.length;++s){const a=this._breathParameters[s];e.addParameterValueById(a.parameterId,a.offset+a.peak*Math.sin(i/a.cycle),a.weight)}}}class ss{constructor(e,r,i,s,a){this.parameterId=e==null?void 0:e,this.offset=r==null?0:r,this.peak=i==null?0:i,this.cycle=s==null?0:s,this.weight=a==null?0:a}}const ou=class{static create(t){return new ou(t)}setBlinkingInterval(t){this._blinkingIntervalSeconds=t}setBlinkingSetting(t,e,r){this._closingSeconds=t,this._closedSeconds=e,this._openingSeconds=r}setParameterIds(t){this._parameterIds=t}getParameterIds(){return this._parameterIds}updateParameters(t,e){this._userTimeSeconds+=e;let r,i=0;switch(this._blinkingState){case dr.EyeState_Closing:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,i>=1&&(i=1,this._blinkingState=dr.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),r=1-i;break;case dr.EyeState_Closed:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,i>=1&&(this._blinkingState=dr.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),r=0;break;case dr.EyeState_Opening:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,i>=1&&(i=1,this._blinkingState=dr.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),r=i;break;case dr.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=dr.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),r=1;break;case dr.EyeState_First:default:this._blinkingState=dr.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),r=1;break}ou.CloseIfZero||(r=-r);for(let s=0;s<this._parameterIds.length;++s)t.setParameterValueById(this._parameterIds[s],r)}constructor(t){var e,r;this._blinkingState=dr.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],t!=null&&(this._parameterIds=(r=(e=t.getEyeBlinkParameters())==null?void 0:e.slice())!=null?r:this._parameterIds)}determinNextBlinkingTiming(){const t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)}};let Ud=ou;Ud.CloseIfZero=!0;var dr=(t=>(t[t.EyeState_First=0]="EyeState_First",t[t.EyeState_Interval=1]="EyeState_Interval",t[t.EyeState_Closing=2]="EyeState_Closing",t[t.EyeState_Closed=3]="EyeState_Closed",t[t.EyeState_Opening=4]="EyeState_Opening",t))(dr||{});const ab=.001,Od=.5;class hu{static create(e){const r=new hu;typeof e.FadeInTime=="number"&&(r._fadeTimeSeconds=e.FadeInTime,r._fadeTimeSeconds<=0&&(r._fadeTimeSeconds=Od));const i=e.Groups,s=i.length;for(let a=0;a<s;++a){const h=i[a],l=h.length;let f=0;for(let c=0;c<l;++c){const _=h[c],A=new ca;A.partId=_.Id;const m=_.Link;if(m){const I=m.length;for(let y=0;y<I;++y){const b=new ca;b.partId=m[y],A.link.push(b)}}r._partGroups.push(A),++f}r._partGroupCounts.push(f)}return r}updateParameters(e,r){e!=this._lastModel&&this.reset(e),this._lastModel=e,r<0&&(r=0);let i=0;for(let s=0;s<this._partGroupCounts.length;s++){const a=this._partGroupCounts[s];this.doFade(e,r,i,a),i+=a}this.copyPartOpacities(e)}reset(e){let r=0;for(let i=0;i<this._partGroupCounts.length;++i){const s=this._partGroupCounts[i];for(let a=r;a<r+s;++a){this._partGroups[a].initialize(e);const h=this._partGroups[a].partIndex,l=this._partGroups[a].parameterIndex;if(!(h<0)){e.setPartOpacityByIndex(h,a==r?1:0),e.setParameterValueByIndex(l,a==r?1:0);for(let f=0;f<this._partGroups[a].link.length;++f)this._partGroups[a].link[f].initialize(e)}}r+=s}}copyPartOpacities(e){for(let r=0;r<this._partGroups.length;++r){const i=this._partGroups[r];if(i.link.length==0)continue;const s=this._partGroups[r].partIndex,a=e.getPartOpacityByIndex(s);for(let h=0;h<i.link.length;++h){const f=i.link[h].partIndex;f<0||e.setPartOpacityByIndex(f,a)}}}doFade(e,r,i,s){let a=-1,h=1;const l=.5,f=.15;for(let c=i;c<i+s;++c){const _=this._partGroups[c].partIndex,A=this._partGroups[c].parameterIndex;if(e.getParameterValueByIndex(A)>ab){if(a>=0)break;a=c,h=e.getPartOpacityByIndex(_),h+=r/this._fadeTimeSeconds,h>1&&(h=1)}}a<0&&(a=0,h=1);for(let c=i;c<i+s;++c){const _=this._partGroups[c].partIndex;if(a==c)e.setPartOpacityByIndex(_,h);else{let A=e.getPartOpacityByIndex(_),m;h<l?m=h*(l-1)/l+1:m=(1-h)*l/(1-l),(1-m)*(1-h)>f&&(m=1-f/(1-h)),A>m&&(A=m),e.setPartOpacityByIndex(_,A)}}}constructor(){this._fadeTimeSeconds=Od,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class ca{constructor(e){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],e!=null&&this.assignment(e)}assignment(e){return this.partId=e.partId,this.link=e.link.map(r=>r.clone()),this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new ca;return e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=this.link.map(r=>r.clone()),e}}class Vt{constructor(e,r){this.x=e||0,this.y=r||0}add(e){const r=new Vt(0,0);return r.x=this.x+e.x,r.y=this.y+e.y,r}substract(e){const r=new Vt(0,0);return r.x=this.x-e.x,r.y=this.y-e.y,r}multiply(e){const r=new Vt(0,0);return r.x=this.x*e.x,r.y=this.y*e.y,r}multiplyByScaler(e){return this.multiply(new Vt(e,e))}division(e){const r=new Vt(0,0);return r.x=this.x/e.x,r.y=this.y/e.y,r}divisionByScalar(e){return this.division(new Vt(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}}const da=class{static range(t,e,r){return t<e?t=e:t>r&&(t=r),t}static sin(t){return Math.sin(t)}static cos(t){return Math.cos(t)}static abs(t){return Math.abs(t)}static sqrt(t){return Math.sqrt(t)}static cbrt(t){if(t===0)return t;let e=t;const r=e<0;r&&(e=-e);let i;return e===1/0?i=1/0:(i=Math.exp(Math.log(e)/3),i=(e/(i*i)+2*i)/3),r?-i:i}static getEasingSine(t){return t<0?0:t>1?1:.5-.5*this.cos(t*Math.PI)}static max(t,e){return t>e?t:e}static min(t,e){return t>e?e:t}static degreesToRadian(t){return t/180*Math.PI}static radianToDegrees(t){return t*180/Math.PI}static directionToRadian(t,e){const r=Math.atan2(e.y,e.x),i=Math.atan2(t.y,t.x);let s=r-i;for(;s<-Math.PI;)s+=Math.PI*2;for(;s>Math.PI;)s-=Math.PI*2;return s}static directionToDegrees(t,e){const r=this.directionToRadian(t,e);let i=this.radianToDegrees(r);return e.x-t.x>0&&(i=-i),i}static radianToDirection(t){const e=new Vt;return e.x=this.sin(t),e.y=this.cos(t),e}static quadraticEquation(t,e,r){return this.abs(t)<da.Epsilon?this.abs(e)<da.Epsilon?-r:-r/e:-(e+this.sqrt(e*e-4*t*r))/(2*t)}static cardanoAlgorithmForBezier(t,e,r,i){if(this.sqrt(t)<da.Epsilon)return this.range(this.quadraticEquation(e,r,i),0,1);const s=e/t,a=r/t,h=i/t,l=(3*a-s*s)/3,f=l/3,c=(2*s*s*s-9*s*a+27*h)/27,_=c/2,A=_*_+f*f*f,m=.5,I=m+.01;if(A<0){const k=-l/3,H=k*k*k,z=this.sqrt(H),W=-c/(2*z),X=this.range(W,-1,1),rt=Math.acos(X),tt=2*this.cbrt(z),st=tt*this.cos(rt/3)-s/3;if(this.abs(st-m)<I)return this.range(st,0,1);const bt=tt*this.cos((rt+2*Math.PI)/3)-s/3;if(this.abs(bt-m)<I)return this.range(bt,0,1);const Ct=tt*this.cos((rt+4*Math.PI)/3)-s/3;return this.range(Ct,0,1)}if(A==0){let k;_<0?k=this.cbrt(-_):k=-this.cbrt(_);const H=2*k-s/3;if(this.abs(H-m)<I)return this.range(H,0,1);const z=-k-s/3;return this.range(z,0,1)}const y=this.sqrt(A),b=this.cbrt(y-_),R=this.cbrt(y+_),F=b-R-s/3;return this.range(F,0,1)}constructor(){}};let Te=da;Te.Epsilon=1e-5;class pr{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,r,i){const s=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),a=4;for(let h=0;h<a;++h)for(let l=0;l<a;++l)for(let f=0;f<a;++f)s[l+h*4]+=e[f+h*4]*r[l+f*4];for(let h=0;h<16;++h)i[h]=s[h]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let r=0;r<16;++r)this._tr[r]=e[r]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,r){const i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1]);pr.multiply(i,this._tr,this._tr)}translate(e,r){this._tr[12]=e,this._tr[13]=r}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,r){const i=new Float32Array([e,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);pr.multiply(i,this._tr,this._tr)}scale(e,r){this._tr[0]=e,this._tr[5]=r}multiplyByMatrix(e){pr.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new pr;for(let r=0;r<this._tr.length;r++)e._tr[r]=this._tr[r];return e}}class uu{initialize(e){this._model=e}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,r,i,s){e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),i<0?i=0:i>1&&(i=1),s<0?s=0:s>1&&(s=1),this._modelColor.R=e,this._modelColor.G=r,this._modelColor.B=i,this._modelColor.A=s}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisortopy=e}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new as,this._mvpMatrix4x4=new pr,this._mvpMatrix4x4.loadIdentity()}}var li=(t=>(t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",t))(li||{});class as{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let kr=!1,vn=!1,_n;const lu={vertexOffset:0,vertexStep:2};class os{static startUp(e){if(kr)return hs("CubismFramework.startUp() is already done."),kr;if(Live2DCubismCore._isStarted)return kr=!0,!0;if(Live2DCubismCore._isStarted=!0,_n=e,_n&&Live2DCubismCore.Logging.csmSetLogFunction(_n.logFunction),kr=!0,kr){const r=Live2DCubismCore.Version.csmGetVersion(),i=(r&4278190080)>>24,s=(r&16711680)>>16,a=r&65535,h=r;hs("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+i).slice(-2),("00"+s).slice(-2),("0000"+a).slice(-4),h)}return hs("CubismFramework.startUp() is complete."),kr}static cleanUp(){kr=!1,vn=!1,_n=void 0}static initialize(){if(!kr){us("CubismFramework is not started.");return}if(vn){us("CubismFramework.initialize() skipped, already initialized.");return}vn=!0,hs("CubismFramework.initialize() is complete.")}static dispose(){if(!kr){us("CubismFramework is not started.");return}if(!vn){us("CubismFramework.dispose() skipped, not initialized.");return}uu.staticRelease(),vn=!1,hs("CubismFramework.dispose() is complete.")}static isStarted(){return kr}static isInitialized(){return vn}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return _n!=null?_n.loggingLevel:Li.LogLevel_Off}constructor(){}}var Li=(t=>(t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off",t))(Li||{});const pa=()=>{};function Fd(t,...e){va.print(Li.LogLevel_Debug,"[CSM][D]"+t+`
`,e)}function hs(t,...e){va.print(Li.LogLevel_Info,"[CSM][I]"+t+`
`,e)}function us(t,...e){va.print(Li.LogLevel_Warning,"[CSM][W]"+t+`
`,e)}function mn(t,...e){va.print(Li.LogLevel_Error,"[CSM][E]"+t+`
`,e)}class va{static print(e,r,i){if(e<os.getLoggingLevel())return;const s=os.coreLogFunction;if(!s)return;const a=r.replace(/{(\d+)}/g,(h,l)=>i[l]);s(a)}static dumpBytes(e,r,i){for(let s=0;s<i;s++)s%16==0&&s>0?this.print(e,`
`):s%8==0&&s>0&&this.print(e,"  "),this.print(e,"{0} ",[r[s]&255]);this.print(e,`
`)}constructor(){}}class ob{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,r=this._savedParameters.length;for(let i=0;i<e;++i)i<r?this._savedParameters[i]=this._parameterValues[i]:this._savedParameters.push(this._parameterValues[i])}getModel(){return this._model}getPartIndex(e){let r;const i=this._model.parts.count;for(r=0;r<i;++r)if(e==this._partIds[r])return r;return e in this._notExistPartId?this._notExistPartId[e]:(r=i+this._notExistPartId.length,this._notExistPartId[e]=r,this._notExistPartOpacities[r]=0,r)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,r){if(e in this._notExistPartOpacities){this._notExistPartOpacities[e]=r;return}pa(0<=e&&e<this.getPartCount()),this._partOpacities[e]=r}setPartOpacityById(e,r){const i=this.getPartIndex(e);i<0||this.setPartOpacityByIndex(i,r)}getPartOpacityByIndex(e){return e in this._notExistPartOpacities?this._notExistPartOpacities[e]:(pa(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){const r=this.getPartIndex(e);return r<0?0:this.getPartOpacityByIndex(r)}getParameterIndex(e){let r;const i=this._model.parameters.count;for(r=0;r<i;++r)if(e==this._parameterIds[r])return r;return e in this._notExistParameterId?this._notExistParameterId[e]:(r=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[e]=r,this._notExistParameterValues[r]=0,r)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return e in this._notExistParameterValues?this._notExistParameterValues[e]:(pa(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){const r=this.getParameterIndex(e);return this.getParameterValueByIndex(r)}setParameterValueByIndex(e,r,i=1){if(e in this._notExistParameterValues){this._notExistParameterValues[e]=i==1?r:this._notExistParameterValues[e]*(1-i)+r*i;return}pa(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<r&&(r=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>r&&(r=this._model.parameters.minimumValues[e]),this._parameterValues[e]=i==1?r:this._parameterValues[e]=this._parameterValues[e]*(1-i)+r*i}setParameterValueById(e,r,i=1){const s=this.getParameterIndex(e);this.setParameterValueByIndex(s,r,i)}addParameterValueByIndex(e,r,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+r*i)}addParameterValueById(e,r,i=1){const s=this.getParameterIndex(e);this.addParameterValueByIndex(s,r,i)}multiplyParameterValueById(e,r,i=1){const s=this.getParameterIndex(e);this.multiplyParameterValueByIndex(s,r,i)}multiplyParameterValueByIndex(e,r,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(r-1)*i))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(e){const r=this._model.drawables.count;for(let i=0;i<r;++i)if(this._drawableIds[i]==e)return i;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){return this._model.drawables.ids[e]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(r[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableCulling(e){const r=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(r[e])}getDrawableBlendMode(e){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(r[e])?li.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(r[e])?li.CubismBlendMode_Multiplicative:li.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(r[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(r[e])}getDrawableDynamicFlagVisibilityDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(r[e])}getDrawableDynamicFlagOpacityDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(r[e])}getDrawableDynamicFlagRenderOrderDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(r[e])}loadParameters(){let e=this._model.parameters.count;const r=this._savedParameters.length;e>r&&(e=r);for(let i=0;i<e;++i)this._parameterValues[i]=this._savedParameters[i]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const e=this._model.parameters.ids,r=this._model.parameters.count;for(let i=0;i<r;++i)this._parameterIds.push(e[i])}{const e=this._model.parts.ids,r=this._model.parts.count;for(let i=0;i<r;++i)this._partIds.push(e[i])}{const e=this._model.drawables.ids,r=this._model.drawables.count;for(let i=0;i<r;++i)this._drawableIds.push(e[i])}}constructor(e){this._model=e,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class fu{static create(e){const r=Live2DCubismCore.Moc.fromArrayBuffer(e);if(r)return new fu(r);throw new Error("Unknown error")}createModel(){let e;const r=Live2DCubismCore.Model.fromMoc(this._moc);if(r)return e=new ob(r),++this._modelCount,e;throw new Error("Unknown error")}deleteModel(e){e!=null&&--this._modelCount}constructor(e){this._moc=e,this._modelCount=0}release(){this._moc._release(),this._moc=void 0}}class Ld{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(e,r,i){if(!r.isAvailable()||r.isFinished())return;if(!r.isStarted()){r.setIsStarted(!0),r.setStartTime(i-this._offsetSeconds),r.setFadeInStartTime(i);const l=this.getDuration();r.getEndTime()<0&&r.setEndTime(l<=0?-1:r.getStartTime()+l)}let s=this._weight;const a=this._fadeInSeconds==0?1:Te.getEasingSine((i-r.getFadeInStartTime())/this._fadeInSeconds),h=this._fadeOutSeconds==0||r.getEndTime()<0?1:Te.getEasingSine((r.getEndTime()-i)/this._fadeOutSeconds);s=s*a*h,r.setState(i,s),this.doUpdateParameters(e,i,s,r),r.getEndTime()>0&&r.getEndTime()<i&&r.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,r){return this._firedEventValues}setFinishedMotionHandler(e){this._onFinishedMotion=e}getFinishedMotionHandler(){return this._onFinishedMotion}}const Md=1;class cu extends Ld{constructor(){super(),this._parameters=[]}static create(e){const r=new cu,i=e.FadeInTime,s=e.FadeOutTime;r.setFadeInTime(i!==void 0?i:Md),r.setFadeOutTime(s!==void 0?s:Md);const a=e.Parameters||[];for(let h=0;h<a.length;++h){const l=a[h],f=l.Id,c=l.Value;let _;switch(l.Blend){case"Multiply":_=Mi.ExpressionBlendType_Multiply;break;case"Overwrite":_=Mi.ExpressionBlendType_Overwrite;break;case"Add":default:_=Mi.ExpressionBlendType_Add;break}const A={parameterId:f,blendType:_,value:c};r._parameters.push(A)}return r}doUpdateParameters(e,r,i,s){for(let a=0;a<this._parameters.length;++a){const h=this._parameters[a];switch(h.blendType){case Mi.ExpressionBlendType_Add:{e.addParameterValueById(h.parameterId,h.value,i);break}case Mi.ExpressionBlendType_Multiply:{e.multiplyParameterValueById(h.parameterId,h.value,i);break}case Mi.ExpressionBlendType_Overwrite:{e.setParameterValueById(h.parameterId,h.value,i);break}}}}}var Mi=(t=>(t[t.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",t[t.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",t[t.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",t))(Mi||{}),ls;(t=>{t.supportMoreMaskDivisions=!0,t.setOpacityFromMotion=!1})(ls||(ls={}));var Gi=(t=>(t[t.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",t[t.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",t[t.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",t))(Gi||{}),Br=(t=>(t[t.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",t[t.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",t[t.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",t[t.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",t))(Br||{});class fi{constructor(e=0,r=0){this.time=e,this.value=r}}class hb{constructor(){this.basePointIndex=0,this.segmentType=0}}class ub{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class lb{constructor(){this.fireTime=0,this.value=""}}class fb{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class Gd{constructor(e){this._json=e}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(e){return du.EvaluationOptionFlag_AreBeziersRistricted==e?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(e){return this._json.Curves[e].Target}getMotionCurveId(e){return this._json.Curves[e].Id}getMotionCurveFadeInTime(e){return this._json.Curves[e].FadeInTime}getMotionCurveFadeOutTime(e){return this._json.Curves[e].FadeOutTime}getMotionCurveSegmentCount(e){return this._json.Curves[e].Segments.length}getMotionCurveSegment(e,r){return this._json.Curves[e].Segments[r]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(e){return this._json.UserData[e].Time}getEventValue(e){return this._json.UserData[e].Value}}var du=(t=>(t[t.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",t))(du||{});const cb="EyeBlink",db="LipSync",pb="Model",vb="Parameter",_b="PartOpacity",mb=!1;function vr(t,e,r){const i=new fi;return i.time=t.time+(e.time-t.time)*r,i.value=t.value+(e.value-t.value)*r,i}function gb(t,e){let r=(e-t[0].time)/(t[1].time-t[0].time);return r<0&&(r=0),t[0].value+(t[1].value-t[0].value)*r}function yb(t,e){let r=(e-t[0].time)/(t[3].time-t[0].time);r<0&&(r=0);const i=vr(t[0],t[1],r),s=vr(t[1],t[2],r),a=vr(t[2],t[3],r),h=vr(i,s,r),l=vr(s,a,r);return vr(h,l,r).value}function bb(t,e){const r=e,i=t[0].time,s=t[3].time,a=t[1].time,h=t[2].time,l=s-3*h+3*a-i,f=3*h-6*a+3*i,c=3*a-3*i,_=i-r,A=Te.cardanoAlgorithmForBezier(l,f,c,_),m=vr(t[0],t[1],A),I=vr(t[1],t[2],A),y=vr(t[2],t[3],A),b=vr(m,I,A),R=vr(I,y,A);return vr(b,R,A).value}function xb(t,e){return t[0].value}function Tb(t,e){return t[1].value}function pu(t,e,r){const i=t.curves[e];let s=-1;const a=i.baseSegmentIndex+i.segmentCount;let h=0;for(let f=i.baseSegmentIndex;f<a;++f)if(h=t.segments[f].basePointIndex+(t.segments[f].segmentType==Br.CubismMotionSegmentType_Bezier?3:1),t.points[h].time>r){s=f;break}if(s==-1)return t.points[h].value;const l=t.segments[s];return l.evaluate(t.points.slice(l.basePointIndex),r)}class vu extends Ld{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(e,r){const i=new vu;return i.parse(e),i._sourceFrameRate=i._motionData.fps,i._loopDurationSeconds=i._motionData.duration,i._onFinishedMotion=r,i}doUpdateParameters(e,r,i,s){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=cb),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=db);let a=r-s.getStartTime();a<0&&(a=0);let h=Number.MAX_VALUE,l=Number.MAX_VALUE;const f=64;let c=0,_=0;this._eyeBlinkParameterIds.length>f&&Fd("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>f&&Fd("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const A=this._fadeInSeconds<=0?1:Te.getEasingSine((r-s.getFadeInStartTime())/this._fadeInSeconds),m=this._fadeOutSeconds<=0||s.getEndTime()<0?1:Te.getEasingSine((s.getEndTime()-r)/this._fadeOutSeconds);let I,y,b,R=a;if(this._isLoop)for(;R>this._motionData.duration;)R-=this._motionData.duration;const F=this._motionData.curves;for(y=0;y<this._motionData.curveCount&&F[y].type==Gi.CubismMotionCurveTarget_Model;++y)I=pu(this._motionData,y,R),F[y].id==this._modelCurveIdEyeBlink?l=I:F[y].id==this._modelCurveIdLipSync&&(h=I);for(;y<this._motionData.curveCount&&F[y].type==Gi.CubismMotionCurveTarget_Parameter;++y){if(b=e.getParameterIndex(F[y].id),b==-1)continue;const k=e.getParameterValueByIndex(b);if(I=pu(this._motionData,y,R),l!=Number.MAX_VALUE){for(let z=0;z<this._eyeBlinkParameterIds.length&&z<f;++z)if(this._eyeBlinkParameterIds[z]==F[y].id){I*=l,_|=1<<z;break}}if(h!=Number.MAX_VALUE){for(let z=0;z<this._lipSyncParameterIds.length&&z<f;++z)if(this._lipSyncParameterIds[z]==F[y].id){I+=h,c|=1<<z;break}}let H;if(F[y].fadeInTime<0&&F[y].fadeOutTime<0)H=k+(I-k)*i;else{let z,W;F[y].fadeInTime<0?z=A:z=F[y].fadeInTime==0?1:Te.getEasingSine((r-s.getFadeInStartTime())/F[y].fadeInTime),F[y].fadeOutTime<0?W=m:W=F[y].fadeOutTime==0||s.getEndTime()<0?1:Te.getEasingSine((s.getEndTime()-r)/F[y].fadeOutTime);const X=this._weight*z*W;H=k+(I-k)*X}e.setParameterValueByIndex(b,H,1)}{if(l!=Number.MAX_VALUE)for(let k=0;k<this._eyeBlinkParameterIds.length&&k<f;++k){const H=e.getParameterValueById(this._eyeBlinkParameterIds[k]);if(_>>k&1)continue;const z=H+(l-H)*i;e.setParameterValueById(this._eyeBlinkParameterIds[k],z)}if(h!=Number.MAX_VALUE)for(let k=0;k<this._lipSyncParameterIds.length&&k<f;++k){const H=e.getParameterValueById(this._lipSyncParameterIds[k]);if(c>>k&1)continue;const z=H+(h-H)*i;e.setParameterValueById(this._lipSyncParameterIds[k],z)}}for(;y<this._motionData.curveCount&&F[y].type==Gi.CubismMotionCurveTarget_PartOpacity;++y)if(I=pu(this._motionData,y,R),ls.setOpacityFromMotion)e.setPartOpacityById(F[y].id,I);else{if(b=e.getParameterIndex(F[y].id),b==-1)continue;e.setParameterValueByIndex(b,I)}a>=this._motionData.duration&&(this._isLoop?(s.setStartTime(r),this._isLoopFadeIn&&s.setFadeInStartTime(r)):(this._onFinishedMotion&&this._onFinishedMotion(this),s.setIsFinished(!0))),this._lastWeight=i}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,r){const i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(e==i[s].id){i[s].fadeInTime=r;return}}setParameterFadeOutTime(e,r){const i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(e==i[s].id){i[s].fadeOutTime=r;return}}getParameterFadeInTime(e){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r[i].id)return r[i].fadeInTime;return-1}getParameterFadeOutTime(e){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r[i].id)return r[i].fadeOutTime;return-1}setEffectIds(e,r){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=r}release(){this._motionData=void 0}parse(e){this._motionData=new fb;let r=new Gd(e);this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount();const i=r.getEvaluationOptionFlag(du.EvaluationOptionFlag_AreBeziersRistricted),s=r.getMotionFadeInTime(),a=r.getMotionFadeOutTime();s!==void 0?this._fadeInSeconds=s<0?1:s:this._fadeInSeconds=1,a!==void 0?this._fadeOutSeconds=a<0?1:a:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new ub),this._motionData.segments=Array.from({length:r.getMotionTotalSegmentCount()}).map(()=>new hb),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new lb),this._motionData.points=[];let h=0,l=0;for(let f=0;f<this._motionData.curveCount;++f){const c=this._motionData.curves[f];switch(r.getMotionCurveTarget(f)){case pb:c.type=Gi.CubismMotionCurveTarget_Model;break;case vb:c.type=Gi.CubismMotionCurveTarget_Parameter;break;case _b:c.type=Gi.CubismMotionCurveTarget_PartOpacity;break;default:us('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}c.id=r.getMotionCurveId(f),c.baseSegmentIndex=l;const _=r.getMotionCurveFadeInTime(f),A=r.getMotionCurveFadeOutTime(f);c.fadeInTime=_!==void 0?_:-1,c.fadeOutTime=A!==void 0?A:-1;for(let m=0;m<r.getMotionCurveSegmentCount(f);){switch(m==0?(this._motionData.segments[l].basePointIndex=h,this._motionData.points[h]=new fi(r.getMotionCurveSegment(f,m),r.getMotionCurveSegment(f,m+1)),h+=1,m+=2):this._motionData.segments[l].basePointIndex=h-1,r.getMotionCurveSegment(f,m)){case Br.CubismMotionSegmentType_Linear:{this._motionData.segments[l].segmentType=Br.CubismMotionSegmentType_Linear,this._motionData.segments[l].evaluate=gb,this._motionData.points[h]=new fi(r.getMotionCurveSegment(f,m+1),r.getMotionCurveSegment(f,m+2)),h+=1,m+=3;break}case Br.CubismMotionSegmentType_Bezier:{this._motionData.segments[l].segmentType=Br.CubismMotionSegmentType_Bezier,i||mb?this._motionData.segments[l].evaluate=yb:this._motionData.segments[l].evaluate=bb,this._motionData.points[h]=new fi(r.getMotionCurveSegment(f,m+1),r.getMotionCurveSegment(f,m+2)),this._motionData.points[h+1]=new fi(r.getMotionCurveSegment(f,m+3),r.getMotionCurveSegment(f,m+4)),this._motionData.points[h+2]=new fi(r.getMotionCurveSegment(f,m+5),r.getMotionCurveSegment(f,m+6)),h+=3,m+=7;break}case Br.CubismMotionSegmentType_Stepped:{this._motionData.segments[l].segmentType=Br.CubismMotionSegmentType_Stepped,this._motionData.segments[l].evaluate=xb,this._motionData.points[h]=new fi(r.getMotionCurveSegment(f,m+1),r.getMotionCurveSegment(f,m+2)),h+=1,m+=3;break}case Br.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[l].segmentType=Br.CubismMotionSegmentType_InverseStepped,this._motionData.segments[l].evaluate=Tb,this._motionData.points[h]=new fi(r.getMotionCurveSegment(f,m+1),r.getMotionCurveSegment(f,m+2)),h+=1,m+=3;break}}++c.segmentCount,++l}this._motionData.curves.push(c)}for(let f=0;f<r.getEventCount();++f)this._motionData.events[f].fireTime=r.getEventTime(f),this._motionData.events[f].value=r.getEventValue(f);r.release()}getFiredEvent(e,r){this._firedEventValues.length=0;for(let i=0;i<this._motionData.eventCount;++i)this._motionData.events[i].fireTime>e&&this._motionData.events[i].fireTime<=r&&this._firedEventValues.push(this._motionData.events[i].value);return this._firedEventValues}}class Ab{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,r){const i=r+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,r){this._stateTimeSeconds=e,this._stateWeight=r}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class kd{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let e=0;e<this._motions.length;++e)this._motions[e]&&this._motions[e].release();this._motions=void 0}startMotion(e,r,i){if(e==null)return Ib;let s;for(let a=0;a<this._motions.length;++a)s=this._motions[a],s!=null&&s.setFadeOut(s._motion.getFadeOutTime());return s=new Ab,s._autoDelete=r,s._motion=e,this._motions.push(s),s._motionQueueEntryHandle}isFinished(){let e=0;for(;e<this._motions.length;){const r=this._motions[e];if(r==null){this._motions.splice(e,1);continue}if(r._motion==null){r.release(),this._motions.splice(e,1);continue}if(!r.isFinished())return!1;e++}return!0}isFinishedByHandle(e){for(let r=0;r<this._motions.length;r++){const i=this._motions[r];if(i!=null&&i._motionQueueEntryHandle==e&&!i.isFinished())return!1}return!0}stopAllMotions(){for(let e=0;e<this._motions.length;e++){const r=this._motions[e];r!=null&&r.release()}this._motions=[]}getCubismMotionQueueEntry(e){return this._motions.find(r=>r!=null&&r._motionQueueEntryHandle==e)}setEventCallback(e,r=null){this._eventCallBack=e,this._eventCustomData=r}doUpdateMotion(e,r){let i=!1,s=0;for(;s<this._motions.length;){const a=this._motions[s];if(a==null){this._motions.splice(s,1);continue}const h=a._motion;if(h==null){a.release(),this._motions.splice(s,1);continue}h.updateParameters(e,a,r),i=!0;const l=h.getFiredEvent(a.getLastCheckEventSeconds()-a.getStartTime(),r-a.getStartTime());for(let f=0;f<l.length;++f)this._eventCallBack(this,l[f],this._eventCustomData);a.setLastCheckEventSeconds(r),a.isFinished()?(a.release(),this._motions.splice(s,1)):(a.isTriggeredFadeOut()&&a.startFadeOut(a.getFadeOutSeconds(),r),s++)}return i}}const Ib=-1;var _u=(t=>(t[t.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",t))(_u||{}),ki=(t=>(t[t.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",t[t.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",t[t.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",t))(ki||{});class wb{constructor(){this.initialPosition=new Vt(0,0),this.position=new Vt(0,0),this.lastPosition=new Vt(0,0),this.lastGravity=new Vt(0,0),this.force=new Vt(0,0),this.velocity=new Vt(0,0)}}class Eb{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class Cb{constructor(){this.source={}}}class Pb{constructor(){this.destination={},this.translationScale=new Vt(0,0)}}class Rb{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new Vt(0,0),this.wind=new Vt(0,0)}}class Nb{constructor(e){this._json=e}release(){this._json=void 0}getGravity(){const e=new Vt(0,0);return e.x=this._json.Meta.EffectiveForces.Gravity.X,e.y=this._json.Meta.EffectiveForces.Gravity.Y,e}getWind(){const e=new Vt(0,0);return e.x=this._json.Meta.EffectiveForces.Wind.X,e.y=this._json.Meta.EffectiveForces.Wind.Y,e}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Default}getNormalizationAngleMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Default}getInputCount(e){return this._json.PhysicsSettings[e].Input.length}getInputWeight(e,r){return this._json.PhysicsSettings[e].Input[r].Weight}getInputReflect(e,r){return this._json.PhysicsSettings[e].Input[r].Reflect}getInputType(e,r){return this._json.PhysicsSettings[e].Input[r].Type}getInputSourceId(e,r){return this._json.PhysicsSettings[e].Input[r].Source.Id}getOutputCount(e){return this._json.PhysicsSettings[e].Output.length}getOutputVertexIndex(e,r){return this._json.PhysicsSettings[e].Output[r].VertexIndex}getOutputAngleScale(e,r){return this._json.PhysicsSettings[e].Output[r].Scale}getOutputWeight(e,r){return this._json.PhysicsSettings[e].Output[r].Weight}getOutputDestinationId(e,r){return this._json.PhysicsSettings[e].Output[r].Destination.Id}getOutputType(e,r){return this._json.PhysicsSettings[e].Output[r].Type}getOutputReflect(e,r){return this._json.PhysicsSettings[e].Output[r].Reflect}getParticleCount(e){return this._json.PhysicsSettings[e].Vertices.length}getParticleMobility(e,r){return this._json.PhysicsSettings[e].Vertices[r].Mobility}getParticleDelay(e,r){return this._json.PhysicsSettings[e].Vertices[r].Delay}getParticleAcceleration(e,r){return this._json.PhysicsSettings[e].Vertices[r].Acceleration}getParticleRadius(e,r){return this._json.PhysicsSettings[e].Vertices[r].Radius}getParticlePosition(e,r){const i=new Vt(0,0);return i.x=this._json.PhysicsSettings[e].Vertices[r].Position.X,i.y=this._json.PhysicsSettings[e].Vertices[r].Position.Y,i}}const Bd="X",Dd="Y",Hd="Angle",Sb=5,Xd=100,Ub=.001;class mu{static create(e){const r=new mu;return r.parse(e),r._physicsRig.gravity.y=0,r}evaluate(e,r){let i,s,a,h;const l=new Vt;let f,c,_,A,m,I,y,b;m=e.getModel().parameters.values,I=e.getModel().parameters.maximumValues,y=e.getModel().parameters.minimumValues,b=e.getModel().parameters.defaultValues;for(let R=0;R<this._physicsRig.subRigCount;++R){i={angle:0},l.x=0,l.y=0,f=this._physicsRig.settings[R],c=this._physicsRig.inputs.slice(f.baseInputIndex),_=this._physicsRig.outputs.slice(f.baseOutputIndex),A=this._physicsRig.particles.slice(f.baseParticleIndex);for(let F=0;F<f.inputCount;++F)s=c[F].weight/Xd,c[F].sourceParameterIndex==-1&&(c[F].sourceParameterIndex=e.getParameterIndex(c[F].source.id)),c[F].getNormalizedParameterValue(l,i,m[c[F].sourceParameterIndex],y[c[F].sourceParameterIndex],I[c[F].sourceParameterIndex],b[c[F].sourceParameterIndex],f.normalizationPosition,f.normalizationAngle,c[F].reflect,s);a=Te.degreesToRadian(-i.angle),l.x=l.x*Te.cos(a)-l.y*Te.sin(a),l.y=l.x*Te.sin(a)+l.y*Te.cos(a),jb(A,f.particleCount,l,i.angle,this._options.wind,Ub*f.normalizationPosition.maximum,r,Sb);for(let F=0;F<f.outputCount;++F){const k=_[F].vertexIndex;if(k<1||k>=f.particleCount)break;_[F].destinationParameterIndex==-1&&(_[F].destinationParameterIndex=e.getParameterIndex(_[F].destination.id));const H=new Vt;H.x=A[k].position.x-A[k-1].position.x,H.y=A[k].position.y-A[k-1].position.y,h=_[F].getValue(H,A,k,_[F].reflect,this._options.gravity);const z=_[F].destinationParameterIndex,W=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(m.subarray(z))):m.slice(z);Wb(W,y[z],I[z],h,_[F]);for(let X=z,rt=0;X<m.length;X++,rt++)m[X]=W[rt]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._options=new Ob,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0}parse(e){this._physicsRig=new Rb;let r=new Nb(e);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount();let i=0,s=0,a=0;for(let h=0;h<this._physicsRig.subRigCount;++h){const l=new Eb;l.normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(h),l.normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(h),l.normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(h),l.normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(h),l.normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(h),l.normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(h),l.inputCount=r.getInputCount(h),l.baseInputIndex=i,i+=l.inputCount;for(let f=0;f<l.inputCount;++f){const c=new Cb;switch(c.sourceParameterIndex=-1,c.weight=r.getInputWeight(h,f),c.reflect=r.getInputReflect(h,f),r.getInputType(h,f)){case Bd:c.type=ki.CubismPhysicsSource_X,c.getNormalizedParameterValue=Fb;break;case Dd:c.type=ki.CubismPhysicsSource_Y,c.getNormalizedParameterValue=Lb;break;case Hd:c.type=ki.CubismPhysicsSource_Angle,c.getNormalizedParameterValue=Mb;break}c.source.targetType=_u.CubismPhysicsTargetType_Parameter,c.source.id=r.getInputSourceId(h,f),this._physicsRig.inputs.push(c)}l.outputCount=r.getOutputCount(h),l.baseOutputIndex=s,s+=l.outputCount;for(let f=0;f<l.outputCount;++f){const c=new Pb;switch(c.destinationParameterIndex=-1,c.vertexIndex=r.getOutputVertexIndex(h,f),c.angleScale=r.getOutputAngleScale(h,f),c.weight=r.getOutputWeight(h,f),c.destination.targetType=_u.CubismPhysicsTargetType_Parameter,c.destination.id=r.getOutputDestinationId(h,f),r.getOutputType(h,f)){case Bd:c.type=ki.CubismPhysicsSource_X,c.getValue=Gb,c.getScale=Xb;break;case Dd:c.type=ki.CubismPhysicsSource_Y,c.getValue=kb,c.getScale=Vb;break;case Hd:c.type=ki.CubismPhysicsSource_Angle,c.getValue=Bb,c.getScale=zb;break}c.reflect=r.getOutputReflect(h,f),this._physicsRig.outputs.push(c)}l.particleCount=r.getParticleCount(h),l.baseParticleIndex=a,a+=l.particleCount;for(let f=0;f<l.particleCount;++f){const c=new wb;c.mobility=r.getParticleMobility(h,f),c.delay=r.getParticleDelay(h,f),c.acceleration=r.getParticleAcceleration(h,f),c.radius=r.getParticleRadius(h,f),c.position=r.getParticlePosition(h,f),this._physicsRig.particles.push(c)}this._physicsRig.settings.push(l)}this.initialize(),r.release()}initialize(){let e,r,i;for(let s=0;s<this._physicsRig.subRigCount;++s){r=this._physicsRig.settings[s],e=this._physicsRig.particles.slice(r.baseParticleIndex),e[0].initialPosition=new Vt(0,0),e[0].lastPosition=new Vt(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new Vt(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new Vt(0,0),e[0].force=new Vt(0,0);for(let a=1;a<r.particleCount;++a)i=new Vt(0,0),i.y=e[a].radius,e[a].initialPosition=new Vt(e[a-1].initialPosition.x+i.x,e[a-1].initialPosition.y+i.y),e[a].position=new Vt(e[a].initialPosition.x,e[a].initialPosition.y),e[a].lastPosition=new Vt(e[a].initialPosition.x,e[a].initialPosition.y),e[a].lastGravity=new Vt(0,-1),e[a].lastGravity.y*=-1,e[a].velocity=new Vt(0,0),e[a].force=new Vt(0,0)}}}class Ob{constructor(){this.gravity=new Vt(0,0),this.wind=new Vt(0,0)}}function Fb(t,e,r,i,s,a,h,l,f,c){t.x+=gu(r,i,s,a,h.minimum,h.maximum,h.defalut,f)*c}function Lb(t,e,r,i,s,a,h,l,f,c){t.y+=gu(r,i,s,a,h.minimum,h.maximum,h.defalut,f)*c}function Mb(t,e,r,i,s,a,h,l,f,c){e.angle+=gu(r,i,s,a,l.minimum,l.maximum,l.defalut,f)*c}function Gb(t,e,r,i,s){let a=t.x;return i&&(a*=-1),a}function kb(t,e,r,i,s){let a=t.y;return i&&(a*=-1),a}function Bb(t,e,r,i,s){let a;return r>=2?s=e[r-1].position.substract(e[r-2].position):s=s.multiplyByScaler(-1),a=Te.directionToRadian(s,t),i&&(a*=-1),a}function Db(t,e){return Math.abs(Math.max(t,e)-Math.min(t,e))}function Hb(t,e){return Math.min(t,e)+Db(t,e)/2}function Xb(t,e){return t.x}function Vb(t,e){return t.y}function zb(t,e){return e}function jb(t,e,r,i,s,a,h,l){let f,c,_,A,m=new Vt(0,0),I=new Vt(0,0),y=new Vt(0,0),b=new Vt(0,0);t[0].position=new Vt(r.x,r.y),f=Te.degreesToRadian(i),A=Te.radianToDirection(f),A.normalize();for(let R=1;R<e;++R)t[R].force=A.multiplyByScaler(t[R].acceleration).add(s),t[R].lastPosition=new Vt(t[R].position.x,t[R].position.y),c=t[R].delay*h*30,m=t[R].position.substract(t[R-1].position),_=Te.directionToRadian(t[R].lastGravity,A)/l,m.x=Te.cos(_)*m.x-m.y*Te.sin(_),m.y=Te.sin(_)*m.x+m.y*Te.cos(_),t[R].position=t[R-1].position.add(m),I=t[R].velocity.multiplyByScaler(c),y=t[R].force.multiplyByScaler(c).multiplyByScaler(c),t[R].position=t[R].position.add(I).add(y),b=t[R].position.substract(t[R-1].position),b.normalize(),t[R].position=t[R-1].position.add(b.multiplyByScaler(t[R].radius)),Te.abs(t[R].position.x)<a&&(t[R].position.x=0),c!=0&&(t[R].velocity=t[R].position.substract(t[R].lastPosition),t[R].velocity=t[R].velocity.divisionByScalar(c),t[R].velocity=t[R].velocity.multiplyByScaler(t[R].mobility)),t[R].force=new Vt(0,0),t[R].lastGravity=new Vt(A.x,A.y)}function Wb(t,e,r,i,s){let a,h,l;a=s.getScale(s.translationScale,s.angleScale),h=i*a,h<e?(h<s.valueBelowMinimum&&(s.valueBelowMinimum=h),h=e):h>r&&(h>s.valueExceededMaximum&&(s.valueExceededMaximum=h),h=r),l=s.weight/Xd,l>=1||(h=t[0]*(1-l)+h*l),t[0]=h}function gu(t,e,r,i,s,a,h,l){let f=0;const c=Te.max(r,e);c<t&&(t=c);const _=Te.min(r,e);_>t&&(t=_);const A=Te.min(s,a),m=Te.max(s,a),I=h,y=Hb(_,c),b=t-y;switch(Math.sign(b)){case 1:{const R=m-I,F=c-y;F!=0&&(f=b*(R/F),f+=I);break}case-1:{const R=A-I,F=_-y;F!=0&&(f=b*(R/F),f+=I);break}case 0:{f=I;break}}return l?f:f*-1}class yu{constructor(e=0,r=0,i=0,s=0){this.x=e,this.y=r,this.width=i,this.height=s}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,r){this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2}}const bu=4,$b=10;let Bi,fs,xu;class Tu{getChannelFlagAsColor(e){return this._channelColors[e]}getMaskRenderTexture(){let e=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),e==0){const r=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,r,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,xu),this._maskTexture=new Yb(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,r){let i=Number.MAX_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,h=Number.MIN_VALUE;const l=r._clippedDrawableIndexList.length;for(let f=0;f<l;f++){const c=r._clippedDrawableIndexList[f],_=e.getDrawableVertexCount(c),A=e.getDrawableVertices(c);let m=Number.MAX_VALUE,I=Number.MAX_VALUE,y=Number.MIN_VALUE,b=Number.MIN_VALUE;const R=_*lu.vertexStep;for(let F=lu.vertexOffset;F<R;F+=lu.vertexStep){const k=A[F],H=A[F+1];k<m&&(m=k),k>y&&(y=k),H<I&&(I=H),H>b&&(b=H)}if(m!=Number.MAX_VALUE)if(m<i&&(i=m),I<s&&(s=I),y>a&&(a=y),b>h&&(h=b),i==Number.MAX_VALUE)r._allClippedDrawRect.x=0,r._allClippedDrawRect.y=0,r._allClippedDrawRect.width=0,r._allClippedDrawRect.height=0,r._isUsing=!1;else{r._isUsing=!0;const F=a-i,k=h-s;r._allClippedDrawRect.x=i,r._allClippedDrawRect.y=s,r._allClippedDrawRect.width=F,r._allClippedDrawRect.height=k}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new yu,this._tmpMatrix=new pr,this._tmpMatrixForMask=new pr,this._tmpMatrixForDraw=new pr;let e=new as;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.push(e),e=new as,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.push(e),e=new as,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.push(e),e=new as,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.push(e)}release(){var e,r,i;const s=this;for(let a=0;a<this._clippingContextListForMask.length;a++)this._clippingContextListForMask[a]&&((e=this._clippingContextListForMask[a])==null||e.release());s._clippingContextListForMask=void 0,s._clippingContextListForDraw=void 0,this._maskTexture&&((r=this.gl)==null||r.deleteFramebuffer(this._maskTexture.texture),s._maskTexture=void 0),s._channelColors=void 0,(i=this.gl)==null||i.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,r,i,s){for(let a=0;a<r;a++){if(s[a]<=0){this._clippingContextListForDraw.push(null);continue}let h=this.findSameClip(i[a],s[a]);h==null&&(h=new Zb(this,i[a],s[a]),this._clippingContextListForMask.push(h)),h.addClippedDrawable(a),this._clippingContextListForDraw.push(h)}}setupClippingContext(e,r){this._currentFrameNo++;let i=0;for(let s=0;s<this._clippingContextListForMask.length;s++){const a=this._clippingContextListForMask[s];this.calcClippedDrawTotalBounds(e,a),a._isUsing&&i++}if(i>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),r.getMvpMatrix(),r.preDraw(),this.setupLayoutBounds(i),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let s=0;s<this._clippingContextListForMask.length;s++){const a=this._clippingContextListForMask[s],h=a._allClippedDrawRect,l=a._layoutBounds,f=.05;this._tmpBoundsOnModel.setRect(h),this._tmpBoundsOnModel.expand(h.width*f,h.height*f);const c=l.width/this._tmpBoundsOnModel.width,_=l.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(c,_),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(c,_),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),a._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),a._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const A=a._clippingIdCount;for(let m=0;m<A;m++){const I=a._clippingIdList[m];e.getDrawableDynamicFlagVertexPositionsDidChange(I)&&(r.setIsCulling(e.getDrawableCulling(I)!=!1),r.setClippingContextBufferForMask(a),r.drawMesh(e.getDrawableTextureIndices(I),e.getDrawableVertexIndexCount(I),e.getDrawableVertexCount(I),e.getDrawableVertexIndices(I),e.getDrawableVertices(I),e.getDrawableVertexUvs(I),e.getDrawableOpacity(I),li.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,xu),r.setClippingContextBufferForMask(null),this.gl.viewport(fs[0],fs[1],fs[2],fs[3])}}findSameClip(e,r){for(let i=0;i<this._clippingContextListForMask.length;i++){const s=this._clippingContextListForMask[i],a=s._clippingIdCount;if(a!=r)continue;let h=0;for(let l=0;l<a;l++){const f=s._clippingIdList[l];for(let c=0;c<a;c++)if(e[c]==f){h++;break}}if(h==a)return s}return null}setupLayoutBounds(e){let r=e/bu,i=e%bu;r=~~r,i=~~i;let s=0;for(let a=0;a<bu;a++){const h=r+(a<i?1:0);if(h!=0)if(h==1){const l=this._clippingContextListForMask[s++];l._layoutChannelNo=a,l._layoutBounds.x=0,l._layoutBounds.y=0,l._layoutBounds.width=1,l._layoutBounds.height=1}else if(h==2)for(let l=0;l<h;l++){let f=l%2;f=~~f;const c=this._clippingContextListForMask[s++];c._layoutChannelNo=a,c._layoutBounds.x=f*.5,c._layoutBounds.y=0,c._layoutBounds.width=.5,c._layoutBounds.height=1}else if(h<=4)for(let l=0;l<h;l++){let f=l%2,c=l/2;f=~~f,c=~~c;const _=this._clippingContextListForMask[s++];_._layoutChannelNo=a,_._layoutBounds.x=f*.5,_._layoutBounds.y=c*.5,_._layoutBounds.width=.5,_._layoutBounds.height=.5}else if(h<=9)for(let l=0;l<h;l++){let f=l%3,c=l/3;f=~~f,c=~~c;const _=this._clippingContextListForMask[s++];_._layoutChannelNo=a,_._layoutBounds.x=f/3,_._layoutBounds.y=c/3,_._layoutBounds.width=1/3,_._layoutBounds.height=1/3}else if(ls.supportMoreMaskDivisions&&h<=16)for(let l=0;l<h;l++){let f=l%4,c=l/4;f=~~f,c=~~c;const _=this._clippingContextListForMask[s++];_._layoutChannelNo=a,_._layoutBounds.x=f/4,_._layoutBounds.y=c/4,_._layoutBounds.width=1/4,_._layoutBounds.height=1/4}else mn("not supported mask count : {0}",h)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class Yb{constructor(e,r){this.frameNo=e,this.texture=r}}class Zb{constructor(e,r,i){this._isUsing=!1,this._owner=e,this._clippingIdList=r,this._clippingIdCount=i,this._allClippedDrawRect=new yu,this._layoutBounds=new yu,this._clippedDrawableIndexList=[],this._matrixForMask=new pr,this._matrixForDraw=new pr}release(){const e=this;e._layoutBounds=void 0,e._allClippedDrawRect=void 0,e._clippedDrawableIndexList=void 0}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}}class gn{static getInstance(){return Bi==null&&(Bi=new gn),Bi}static deleteInstance(){Bi&&(Bi.release(),Bi=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(e,r,i,s,a,h,l,f,c,_,A,m,I){A||mn("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let y,b,R,F;const k=e.getClippingContextBufferForMask();if(k!=null){const H=this._shaderSets[cs.ShaderNames_SetupMask];this.gl.useProgram(H.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(H.samplerTexture0Location,0),l.vertex==null&&(l.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(H.attributePositionLocation),this.gl.vertexAttribPointer(H.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),l.uv==null&&(l.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(H.attributeTexCoordLocation),this.gl.vertexAttribPointer(H.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const z=k._layoutChannelNo,W=k.getClippingManager().getChannelFlagAsColor(z);this.gl.uniform4f(H.uniformChannelFlagLocation,W.R,W.G,W.B,W.A),this.gl.uniformMatrix4fv(H.uniformClipMatrixLocation,!1,k._matrixForMask.getArray());const X=k._layoutBounds;this.gl.uniform4f(H.uniformBaseColorLocation,X.x*2-1,X.y*2-1,X.getRight()*2-1,X.getBottom()*2-1),y=this.gl.ZERO,b=this.gl.ONE_MINUS_SRC_COLOR,R=this.gl.ZERO,F=this.gl.ONE_MINUS_SRC_ALPHA}else{const H=e.getClippingContextBufferForDraw(),W=H!=null?I?2:1:0;let X;switch(c){case li.CubismBlendMode_Normal:default:X=this._shaderSets[cs.ShaderNames_NormalPremultipliedAlpha+W],y=this.gl.ONE,b=this.gl.ONE_MINUS_SRC_ALPHA,R=this.gl.ONE,F=this.gl.ONE_MINUS_SRC_ALPHA;break;case li.CubismBlendMode_Additive:X=this._shaderSets[cs.ShaderNames_AddPremultipliedAlpha+W],y=this.gl.ONE,b=this.gl.ONE,R=this.gl.ZERO,F=this.gl.ONE;break;case li.CubismBlendMode_Multiplicative:X=this._shaderSets[cs.ShaderNames_MultPremultipliedAlpha+W],y=this.gl.DST_COLOR,b=this.gl.ONE_MINUS_SRC_ALPHA,R=this.gl.ZERO,F=this.gl.ONE;break}if(this.gl.useProgram(X.shaderProgram),l.vertex==null&&(l.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(X.attributePositionLocation),this.gl.vertexAttribPointer(X.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),l.uv==null&&(l.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(X.attributeTexCoordLocation),this.gl.vertexAttribPointer(X.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),H!=null){this.gl.activeTexture(this.gl.TEXTURE1);const rt=H.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,rt),this.gl.uniform1i(X.samplerTexture1Location,1),this.gl.uniformMatrix4fv(X.uniformClipMatrixLocation,!1,H._matrixForDraw.getArray());const ut=H._layoutChannelNo,tt=H.getClippingManager().getChannelFlagAsColor(ut);this.gl.uniform4f(X.uniformChannelFlagLocation,tt.R,tt.G,tt.B,tt.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(X.samplerTexture0Location,0),this.gl.uniformMatrix4fv(X.uniformMatrixLocation,!1,m.getArray()),this.gl.uniform4f(X.uniformBaseColorLocation,_.R,_.G,_.B,_.A)}l.index==null&&(l.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,l.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,a,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(y,b,R,F)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.length;e++)this.gl.deleteProgram(this._shaderSets[e].shaderProgram),this._shaderSets[e].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let e=0;e<$b;e++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(qb,Jb),this._shaderSets[1].shaderProgram=this.loadShaderProgram(Kb,Qb),this._shaderSets[2].shaderProgram=this.loadShaderProgram(Vd,tx),this._shaderSets[3].shaderProgram=this.loadShaderProgram(Vd,ex),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(e,r){let i=this.gl.createProgram(),s=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!s)return mn("Vertex shader compile error!"),0;let a=this.compileShaderSource(this.gl.FRAGMENT_SHADER,r);return a?(this.gl.attachShader(i,s),this.gl.attachShader(i,a),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(s),this.gl.deleteShader(a),i):(mn("Failed to link program: {0}",i),this.gl.deleteShader(s),this.gl.deleteShader(a),i&&this.gl.deleteProgram(i),0)):(mn("Vertex shader compile error!"),0)}compileShaderSource(e,r){const i=r,s=this.gl.createShader(e);if(this.gl.shaderSource(s,i),this.gl.compileShader(s),!s){const h=this.gl.getShaderInfoLog(s);mn("Shader compile log: {0} ",h)}return this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)?s:(this.gl.deleteShader(s),null)}setGl(e){this.gl=e}}var cs=(t=>(t[t.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",t[t.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",t[t.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",t[t.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",t[t.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",t[t.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",t))(cs||{});const qb="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Jb="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",Kb="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Vd="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Qb="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",tx="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",ex="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class zd extends uu{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new Tu,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(e){e.isUsingMasking()&&(this._clippingManager=new Tu,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts()));for(let r=e.getDrawableCount()-1;r>=0;r--)this._sortedDrawableIndexList[r]=0;super.initialize(e)}bindTexture(e,r){this._textures[e]=r}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=new Tu,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var e,r,i;const s=this;this._clippingManager.release(),s._clippingManager=void 0,(e=this.gl)==null||e.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(r=this.gl)==null||r.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(i=this.gl)==null||i.deleteBuffer(this._bufferData.index),this._bufferData.index=null,s._bufferData=void 0,s._textures=void 0}doDrawModel(){this.preDraw(),this._clippingManager!=null&&this._clippingManager.setupClippingContext(this.getModel(),this);const e=this.getModel().getDrawableCount(),r=this.getModel().getDrawableRenderOrders();for(let i=0;i<e;++i){const s=r[i];this._sortedDrawableIndexList[s]=i}for(let i=0;i<e;++i){const s=this._sortedDrawableIndexList[i];this.getModel().getDrawableDynamicFlagIsVisible(s)&&(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[s]:null),this.setIsCulling(this.getModel().getDrawableCulling(s)),this.drawMesh(this.getModel().getDrawableTextureIndices(s),this.getModel().getDrawableVertexIndexCount(s),this.getModel().getDrawableVertexCount(s),this.getModel().getDrawableVertexIndices(s),this.getModel().getDrawableVertices(s),this.getModel().getDrawableVertexUvs(s),this.getModel().getDrawableOpacity(s),this.getModel().getDrawableBlendMode(s),this.getModel().getDrawableInvertedMaskBit(s)))}}drawMesh(e,r,i,s,a,h,l,f,c){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const _=this.getModelColor();this.getClippingContextBufferForMask()==null&&(_.A*=l,this.isPremultipliedAlpha()&&(_.R*=_.A,_.G*=_.A,_.B*=_.A));let A=null;this._textures[e]!=null&&(A=this._textures[e]),gn.getInstance().setupShaderProgram(this,A,i,a,s,h,this._bufferData,l,f,_,this.isPremultipliedAlpha(),this.getMvpMatrix(),c),this.gl.drawElements(this.gl.TRIANGLES,r,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){gn.deleteInstance()}setRenderState(e,r){xu=e,fs=r}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),gn.getInstance().setGl(e)}}uu.staticRelease=()=>{zd.doStaticRelease()};class jd{constructor(e){this.groups=e.Groups,this.hitAreas=e.HitAreas,this.layout=e.Layout,this.moc=e.FileReferences.Moc,this.expressions=e.FileReferences.Expressions,this.motions=e.FileReferences.Motions,this.textures=e.FileReferences.Textures,this.physics=e.FileReferences.Physics,this.pose=e.FileReferences.Pose}getEyeBlinkParameters(){var e,r;return(r=(e=this.groups)==null?void 0:e.find(i=>i.Name==="EyeBlink"))==null?void 0:r.Ids}getLipSyncParameters(){var e,r;return(r=(e=this.groups)==null?void 0:e.find(i=>i.Name==="LipSync"))==null?void 0:r.Ids}}const rx="ParamAngleX",ix="ParamAngleY",nx="ParamAngleZ",sx="ParamEyeBallX",ax="ParamEyeBallY",ox="ParamBodyAngleX",hx="ParamBreath",Wd=2,$d=2;var ar;(t=>{t.LOG_LEVEL_VERBOSE=0,t.LOG_LEVEL_WARNING=1,t.LOG_LEVEL_ERROR=2,t.LOG_LEVEL_NONE=999,t.logLevel=t.LOG_LEVEL_WARNING,t.sound=!0,t.motionSync=!0,t.motionFadingDuration=500,t.idleMotionFadingDuration=2e3,t.expressionFadingDuration=500,t.preserveExpressionOnMotion=!0,t.cubism4=ls})(ar||(ar={}));const be={log(t,...e){ar.logLevel<=ar.LOG_LEVEL_VERBOSE&&console.log(`[${t}]`,...e)},warn(t,...e){ar.logLevel<=ar.LOG_LEVEL_WARNING&&console.warn(`[${t}]`,...e)},error(t,...e){ar.logLevel<=ar.LOG_LEVEL_ERROR&&console.error(`[${t}]`,...e)}};function Yd(t,e,r){return t<e?e:t>r?r:t}function Zd(t,e){e.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(r.prototype,i))})})}function ux(t){let e=t.lastIndexOf("/");return e!=-1&&(t=t.slice(0,e)),e=t.lastIndexOf("/"),e!==-1&&(t=t.slice(e+1)),t}function lx(t,e){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}class qd extends yr{constructor(e,r){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return Se(this,null,function*(){if(!this.definitions[e]){be.warn(this.tag,`Undefined expression at [${e}]`);return}if(this.expressions[e]===null){be.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);return}if(this.expressions[e])return this.expressions[e];const r=yield this._loadExpression(e);return this.expressions[e]=r,r})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return Se(this,null,function*(){if(this.definitions.length){const e=[];for(let r=0;r<this.definitions.length;r++)this.expressions[r]!==null&&this.expressions[r]!==this.currentExpression&&r!==this.reserveExpressionIndex&&e.push(r);if(e.length){const r=Math.floor(Math.random()*e.length);return this.setExpression(r)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return Se(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const r=yield this.loadExpression(e);return!r||this.reserveExpressionIndex!==e?!1:(this.reserveExpressionIndex=-1,this.currentExpression=r,this._setExpression(r),!0)})}update(e,r){return this.isFinished()?!1:this.updateParameters(e,r)}destroy(){this.destroyed=!0,this.emit("destroy");const e=this;e.definitions=void 0,e.expressions=void 0}}const Jd=.01,fx=40/7.5,cx=1/(.15*1e3);class dx{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(e,r,i=!1){this.targetX=Yd(e,-1,1),this.targetY=Yd(r,-1,1),i&&(this.x=this.targetX,this.y=this.targetY)}update(e){const r=this.targetX-this.x,i=this.targetY-this.y;if(Math.abs(r)<Jd&&Math.abs(i)<Jd)return;const s=Math.sqrt(Fi(r,2)+Fi(i,2)),a=fx/(1e3/e);let h=a*(r/s)-this.vx,l=a*(i/s)-this.vy;const f=Math.sqrt(Fi(h,2)+Fi(l,2)),c=a*cx*e;f>c&&(h*=c/f,l*=c/f),this.vx+=h,this.vy+=l;const _=Math.sqrt(Fi(this.vx,2)+Fi(this.vy,2)),A=.5*(Math.sqrt(Fi(c,2)+8*c*s)-c);_>A&&(this.vx*=A/_,this.vy*=A/_),this.x+=this.vx,this.y+=this.vy}}class Au{constructor(e){this.json=e;let r=e.url;if(typeof r!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=r,this.name=ux(this.url)}resolveURL(e){return Fr.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let r=0;r<this.textures.length;r++)this.textures[r]=e(this.textures[r],`textures[${r}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(r=>(e.push(r),r)),e}validateFiles(e){const r=(a,h)=>{const l=this.resolveURL(a);if(!e.includes(l)){if(h)throw new Error(`File "${a}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(a=>r(a,!0)),this.getDefinedFiles().filter(a=>r(a,!1))}}var Iu=(t=>(t[t.NONE=0]="NONE",t[t.IDLE=1]="IDLE",t[t.NORMAL=2]="NORMAL",t[t.FORCE=3]="FORCE",t))(Iu||{});class px{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(e,r,i){if(i<=0)return be.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&r===this.currentIndex)return be.log(this.tag,"Motion is already playing.",this.dump(e,r)),!1;if(e===this.reservedGroup&&r===this.reservedIndex||e===this.reservedIdleGroup&&r===this.reservedIdleIndex)return be.log(this.tag,"Motion is already reserved.",this.dump(e,r)),!1;if(i===1){if(this.currentPriority!==0)return be.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,r)),!1;if(this.reservedIdleGroup!==void 0)return be.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,r)),!1;this.setReservedIdle(e,r)}else{if(i<3){if(i<=this.currentPriority)return be.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,r)),!1;if(i<=this.reservePriority)return be.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,r)),!1}this.setReserved(e,r,i)}return!0}start(e,r,i,s){if(s===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return be.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(r,i)),!1}else{if(r!==this.reservedGroup||i!==this.reservedIndex)return be.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(r,i)),!1;this.setReserved(void 0,void 0,0)}return e?(this.setCurrent(r,i,s),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,r,i){this.currentPriority=i,this.currentGroup=e,this.currentIndex=r}setReserved(e,r,i){this.reservePriority=i,this.reservedGroup=e,this.reservedIndex=r}setReservedIdle(e,r){this.reservedIdleGroup=e,this.reservedIdleIndex=r}isActive(e,r){return e===this.currentGroup&&r===this.currentIndex||e===this.reservedGroup&&r===this.reservedIndex||e===this.reservedIdleGroup&&r===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!ar.preserveExpressionOnMotion&&this.currentPriority>1}dump(e,r){if(this.debug){const i=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${e}", index = ${r}
`+i.map(s=>"["+s+"] "+this[s]).join(`
`)}return""}}const vx="SoundManager",_x=.5;class Di{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(r=>r.volume=this._volume)}static add(e,r,i){const s=new Audio(e);return s.volume=this._volume,s.preload="auto",s.addEventListener("ended",()=>{this.dispose(s),r==null||r()}),s.addEventListener("error",a=>{this.dispose(s),be.warn(vx,`Error occurred on "${e}"`,a.error),i==null||i(a.error)}),this.audios.push(s),s}static play(e){return new Promise((r,i)=>{var s;(s=e.play())==null||s.catch(a=>{e.dispatchEvent(new ErrorEvent("error",{error:a})),i(a)}),e.readyState===e.HAVE_ENOUGH_DATA?r():e.addEventListener("canplaythrough",r)})}static dispose(e){e.pause(),e.removeAttribute("src"),lx(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}Di.audios=[],Di._volume=_x;class wu extends yr{constructor(e,r){super(),this.motionGroups={},this.state=new px,this.playing=!1,this.destroyed=!1,this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e!=null&&e.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const i of Object.keys(this.definitions))this.motionGroups[i]=[];let r;switch(e==null?void 0:e.motionPreload){case"NONE":return;case"ALL":r=Object.keys(this.definitions);break;case"IDLE":default:r=[this.groups.idle];break}for(const i of r)if(this.definitions[i])for(let s=0;s<this.definitions[i].length;s++)this.loadMotion(i,s).then()}loadMotion(e,r){return Se(this,null,function*(){var i;if(!((i=this.definitions[e])!=null&&i[r])){be.warn(this.tag,`Undefined motion at "${e}"[${r}]`);return}if(this.motionGroups[e][r]===null){be.warn(this.tag,`Cannot start motion at "${e}"[${r}] because it's already failed in loading.`);return}if(this.motionGroups[e][r])return this.motionGroups[e][r];const s=yield this._loadMotion(e,r);if(!this.destroyed)return this.motionGroups[e][r]=s!=null?s:null,s})}_loadMotion(e,r){throw new Error("Not implemented.")}startMotion(e,r){return Se(this,arguments,function*(i,s,a=Iu.NORMAL){var h;if(!this.state.reserve(i,s,a))return!1;const l=(h=this.definitions[i])==null?void 0:h[s];if(!l)return!1;this.currentAudio&&Di.dispose(this.currentAudio);let f;if(ar.sound){const _=this.getSoundFile(l);if(_)try{f=Di.add(this.settings.resolveURL(_),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=f}catch(A){be.warn(this.tag,"Failed to create audio",_,A)}}const c=yield this.loadMotion(i,s);if(f){const _=Di.play(f).catch(A=>be.warn(this.tag,"Failed to play audio",f.src,A));ar.motionSync&&(yield _)}return this.state.start(c,i,s,a)?(be.log(this.tag,"Start motion:",this.getMotionName(l)),this.emit("motionStart",i,s,f),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(c),!0):(f&&(Di.dispose(f),this.currentAudio=void 0),!1)})}startRandomMotion(e,r){return Se(this,null,function*(){const i=this.definitions[e];if(i!=null&&i.length){const s=[];for(let a=0;a<i.length;a++)this.motionGroups[e][a]!==null&&!this.state.isActive(e,a)&&s.push(a);if(s.length){const a=Math.floor(Math.random()*s.length);return this.startMotion(e,s[a],r)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(Di.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,r){var i;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((i=this.expressionManager)==null||i.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,Iu.IDLE)),this.updateParameters(e,r)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy();const r=this;r.definitions=void 0,r.motionGroups=void 0}}const mx={x:0,y:0,width:0,height:0};class gx extends yr{constructor(){super(...arguments),this.focusController=new dx,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new Ee,this.drawingMatrix=new Ee,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,r=this.getSize();e.originalWidth=r[0],e.originalHeight=r[1];const i=Object.assign({width:Wd,height:$d},this.getLayout());this.localTransform.scale(i.width/Wd,i.height/$d),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const s=i.x!==void 0&&i.x-i.width/2||i.centerX!==void 0&&i.centerX||i.left!==void 0&&i.left-i.width/2||i.right!==void 0&&i.right+i.width/2||0,a=i.y!==void 0&&i.y-i.height/2||i.centerY!==void 0&&i.centerY||i.top!==void 0&&i.top-i.height/2||i.bottom!==void 0&&i.bottom+i.height/2||0;this.localTransform.translate(this.width*s,-this.height*a)}setupHitAreas(){const e=this.getHitAreaDefs().filter(r=>r.index>=0);for(const r of e)this.hitAreas[r.name]=r}hitTest(e,r){return Object.keys(this.hitAreas).filter(i=>this.isHit(i,e,r))}isHit(e,r,i){if(!this.hitAreas[e])return!1;const s=this.hitAreas[e].index,a=this.getDrawableBounds(s,mx);return a.x<=r&&r<=a.x+a.width&&a.y<=i&&i<=a.y+a.height}getDrawableBounds(e,r){const i=this.getDrawableVertices(e);let s=i[0],a=i[0],h=i[1],l=i[1];for(let f=0;f<i.length;f+=2){const c=i[f],_=i[f+1];s=Math.min(c,s),a=Math.max(c,a),h=Math.min(_,h),l=Math.max(_,l)}return r!=null||(r={}),r.x=s,r.y=h,r.width=a-s,r.height=l-h,r}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,r){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const yx="XHRLoader";class Kd extends Error{constructor(e,r,i,s=!1){super(e),this.url=r,this.status=i,this.aborted=s}}const Qe=class{static createXHR(t,e,r,i,s){const a=new XMLHttpRequest;if(Qe.allXhrSet.add(a),t){let h=Qe.xhrMap.get(t);h?h.add(a):(h=new Set([a]),Qe.xhrMap.set(t,h)),t.listeners("destroy").includes(Qe.cancelXHRs)||t.once("destroy",Qe.cancelXHRs)}return a.open("GET",e),a.responseType=r,a.onload=()=>{(a.status===200||a.status===0)&&a.response?i(a.response):a.onerror()},a.onerror=()=>{be.warn(yx,`Failed to load resource as ${a.responseType} (Status ${a.status}): ${e}`),s(new Kd("Network error.",e,a.status))},a.onabort=()=>s(new Kd("Aborted.",e,a.status,!0)),a.onloadend=()=>{var h;Qe.allXhrSet.delete(a),t&&((h=Qe.xhrMap.get(t))==null||h.delete(a))},a}static cancelXHRs(){var t;(t=Qe.xhrMap.get(this))==null||t.forEach(e=>{e.abort(),Qe.allXhrSet.delete(e)}),Qe.xhrMap.delete(this)}static release(){Qe.allXhrSet.forEach(t=>t.abort()),Qe.allXhrSet.clear(),Qe.xhrMap=new WeakMap}};let _a=Qe;_a.xhrMap=new WeakMap,_a.allXhrSet=new Set,_a.loader=(t,e)=>new Promise((r,i)=>{Qe.createXHR(t.target,t.settings?t.settings.resolveURL(t.url):t.url,t.type,a=>{t.result=a,r()},i).send()});function Qd(t,e){let r=-1;return i(0);function i(s,a){if(a)return Promise.reject(a);if(s<=r)return Promise.reject(new Error("next() called multiple times"));r=s;const h=t[s];if(!h)return Promise.resolve();try{return Promise.resolve(h(e,i.bind(null,s+1)))}catch(l){return Promise.reject(l)}}}class ci{static load(e){return Qd(this.middlewares,e).then(()=>e.result)}}ci.middlewares=[_a.loader];function bx(t,e={}){var r;const i={resourceOptions:{crossorigin:e.crossOrigin}};if(Dt.fromURL)return Dt.fromURL(t,i).catch(h=>{if(h instanceof Error)throw h;const l=new Error("Texture loading error");throw l.event=h,l});i.resourceOptions.autoLoad=!1;const s=Dt.from(t,i);if(s.baseTexture.valid)return Promise.resolve(s);const a=s.baseTexture.resource;return(r=a._live2d_load)!=null||(a._live2d_load=new Promise((h,l)=>{const f=c=>{a.source.removeEventListener("error",f);const _=new Error("Texture loading error");_.event=c,l(_)};a.source.addEventListener("error",f),a.load().then(()=>h(s)).catch(f)})),a._live2d_load}const t2="Live2DFactory",e2=(t,e)=>Se(void 0,null,function*(){if(typeof t.source=="string"){const r=yield ci.load({url:t.source,type:"json",target:t.live2dModel});r.url=t.source,t.source=r,t.live2dModel.emit("settingsJSONLoaded",r)}return e()}),r2=(t,e)=>Se(void 0,null,function*(){if(t.source instanceof Au)return t.settings=t.source,e();if(typeof t.source=="object"){const r=Ue.findRuntime(t.source);if(r){const i=r.createModelSettings(t.source);return t.settings=i,t.live2dModel.emit("settingsLoaded",i),e()}}throw new TypeError("Unknown settings format.")}),i2=(t,e)=>{if(t.settings){const r=Ue.findRuntime(t.settings);if(r)return r.ready().then(e)}return e()},n2=(t,e)=>Se(void 0,null,function*(){yield e();const r=t.internalModel;if(r){const i=t.settings,s=Ue.findRuntime(i);if(s){const a=[];i.pose&&a.push(ci.load({settings:i,url:i.pose,type:"json",target:r}).then(h=>{r.pose=s.createPose(r.coreModel,h),t.live2dModel.emit("poseLoaded",r.pose)}).catch(h=>{t.live2dModel.emit("poseLoadError",h),be.warn(t2,"Failed to load pose.",h)})),i.physics&&a.push(ci.load({settings:i,url:i.physics,type:"json",target:r}).then(h=>{r.physics=s.createPhysics(r.coreModel,h),t.live2dModel.emit("physicsLoaded",r.physics)}).catch(h=>{t.live2dModel.emit("physicsLoadError",h),be.warn(t2,"Failed to load physics.",h)})),a.length&&(yield Promise.all(a))}}}),s2=(t,e)=>Se(void 0,null,function*(){if(t.settings){const r=t.live2dModel,i=t.settings.textures.map(s=>{const a=t.settings.resolveURL(s);return bx(a,{crossOrigin:t.options.crossOrigin})});if(yield e(),t.internalModel)r.internalModel=t.internalModel,r.emit("modelLoaded",t.internalModel);else throw new TypeError("Missing internal model.");r.textures=yield Promise.all(i),r.emit("textureLoaded",r.textures)}else throw new TypeError("Missing settings.")}),a2=(t,e)=>Se(void 0,null,function*(){const r=t.settings;if(r instanceof Au){const i=Ue.findRuntime(r);if(!i)throw new TypeError("Unknown model settings.");const s=yield ci.load({settings:r,url:r.moc,type:"arraybuffer",target:t.live2dModel});if(!i.isValidMoc(s))throw new Error("Invalid moc data");const a=i.createCoreModel(s);return t.internalModel=i.createInternalModel(a,r,t.options),e()}throw new TypeError("Missing settings.")}),Ze=class{static registerRuntime(t){Ze.runtimes.push(t),Ze.runtimes.sort((e,r)=>r.version-e.version)}static findRuntime(t){for(const e of Ze.runtimes)if(e.test(t))return e}static setupLive2DModel(t,e,r){return Se(this,null,function*(){const i=new Promise(h=>t.once("textureLoaded",h)),s=new Promise(h=>t.once("modelLoaded",h)),a=Promise.all([i,s]).then(()=>t.emit("ready"));yield Qd(Ze.live2DModelMiddlewares,{live2dModel:t,source:e,options:r||{}}),yield a,t.emit("load")})}static loadMotion(t,e,r){var i,s;const a=h=>t.emit("motionLoadError",e,r,h);try{const h=(i=t.definitions[e])==null?void 0:i[r];if(!h)return Promise.resolve(void 0);t.listeners("destroy").includes(Ze.releaseTasks)||t.once("destroy",Ze.releaseTasks);let l=Ze.motionTasksMap.get(t);l||(l={},Ze.motionTasksMap.set(t,l));let f=l[e];f||(f=[],l[e]=f);const c=t.getMotionFile(h);return(s=f[r])!=null||(f[r]=ci.load({url:c,settings:t.settings,type:t.motionDataType,target:t}).then(_=>{var A;const m=(A=Ze.motionTasksMap.get(t))==null?void 0:A[e];m&&delete m[r];const I=t.createMotion(_,e,h);return t.emit("motionLoaded",e,r,I),I}).catch(_=>{be.warn(t.tag,`Failed to load motion: ${c}
`,_),a(_)})),f[r]}catch(h){be.warn(t.tag,`Failed to load motion at "${e}"[${r}]
`,h),a(h)}return Promise.resolve(void 0)}static loadExpression(t,e){var r;const i=s=>t.emit("expressionLoadError",e,s);try{const s=t.definitions[e];if(!s)return Promise.resolve(void 0);t.listeners("destroy").includes(Ze.releaseTasks)||t.once("destroy",Ze.releaseTasks);let a=Ze.expressionTasksMap.get(t);a||(a=[],Ze.expressionTasksMap.set(t,a));const h=t.getExpressionFile(s);return(r=a[e])!=null||(a[e]=ci.load({url:h,settings:t.settings,type:"json",target:t}).then(l=>{const f=Ze.expressionTasksMap.get(t);f&&delete f[e];const c=t.createExpression(l,s);return t.emit("expressionLoaded",e,c),c}).catch(l=>{be.warn(t.tag,`Failed to load expression: ${h}
`,l),i(l)})),a[e]}catch(s){be.warn(t.tag,`Failed to load expression at [${e}]
`,s),i(s)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof wu?Ze.motionTasksMap.delete(this):Ze.expressionTasksMap.delete(this)}};let Ue=Ze;Ue.runtimes=[],Ue.urlToJSON=e2,Ue.jsonToSettings=r2,Ue.waitUntilReady=i2,Ue.setupOptionals=n2,Ue.setupEssentials=s2,Ue.createInternalModel=a2,Ue.live2DModelMiddlewares=[e2,r2,i2,n2,s2,a2],Ue.motionTasksMap=new WeakMap,Ue.expressionTasksMap=new WeakMap,wu.prototype._loadMotion=function(t,e){return Ue.loadMotion(this,t,e)},qd.prototype._loadExpression=function(t){return Ue.loadExpression(this,t)};class xx{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(e){e!==this._autoInteract&&(e?this.on("pointertap",o2,this):this.off("pointertap",o2,this),this._autoInteract=e)}registerInteraction(e){e!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&e&&(this.interactionManager=e,e.on("pointermove",h2,this)))}unregisterInteraction(){var e;this.interactionManager&&((e=this.interactionManager)==null||e.off("pointermove",h2,this),this.interactionManager=void 0)}}function o2(t){this.tap(t.data.global.x,t.data.global.y)}function h2(t){this.focus(t.data.global.x,t.data.global.y)}class Tx extends Us{}const _r=new ye,Ax=new Ee;let di;class u2 extends cr{constructor(e){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new Tx,this.anchor=new ni(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(e))}static from(e,r){const i=new this(r);return Ue.setupLive2DModel(i,e,r).then(()=>i)}static fromSync(e,r){const i=new this(r);return Ue.setupLive2DModel(i,e,r).then(r==null?void 0:r.onLoad).catch(r==null?void 0:r.onError),i}static registerTicker(e){di=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var r;di||(di=(r=window.PIXI)==null?void 0:r.Ticker),e?this._destroyed||(di?(di.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):be.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(di==null||di.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(e){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const r=Object.assign({autoUpdate:!0,autoInteract:!0},e);r.autoInteract&&(this.interactive=!0),this.autoInteract=r.autoInteract,this.autoUpdate=r.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,r,i){return r===void 0?this.internalModel.motionManager.startRandomMotion(e,i):this.internalModel.motionManager.startMotion(e,r,i)}expression(e){return this.internalModel.motionManager.expressionManager?e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,r,i=!1){_r.x=e,_r.y=r,this.toModelPosition(_r,_r,!0);let s=_r.x/this.internalModel.originalWidth*2-1,a=_r.y/this.internalModel.originalHeight*2-1,h=Math.atan2(a,s);this.internalModel.focusController.focus(Math.cos(h),-Math.sin(h),i)}tap(e,r){const i=this.hitTest(e,r);i.length&&(be.log(this.tag,"Hit",i),this.emit("hit",i))}hitTest(e,r){return _r.x=e,_r.y=r,this.toModelPosition(_r,_r),this.internalModel.hitTest(_r.x,_r.y)}toModelPosition(e,r=e.clone(),i){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,r),this.internalModel.localTransform.applyInverse(r,r),r}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(di.shared.deltaMS)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){this.registerInteraction(e.plugins.interaction),e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let r=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),r=!0);for(let a=0;a<this.textures.length;a++){const h=this.textures[a];h.valid&&((r||!h.baseTexture._glTextures[this.glContextID])&&(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(h.baseTexture,0)),this.internalModel.bindTexture(a,h.baseTexture._glTextures[this.glContextID].texture),h.baseTexture.touched=e.textureGC.count)}const i=e.framebuffer.viewport;this.internalModel.viewport=[i.x,i.y,i.width,i.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const s=Ax.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(s),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),e!=null&&e.texture&&this.textures.forEach(r=>r.destroy(e.baseTexture)),this.internalModel.destroy(),super.destroy(e)}}Zd(u2,[xx]);const Dr=class{static resolveURL(t,e){var r;const i=(r=Dr.filesMap[t])==null?void 0:r[e];if(i===void 0)throw new Error("Cannot find this file from uploaded files: "+e);return i}static upload(t,e){return Se(this,null,function*(){const r={};for(const i of e.getDefinedFiles()){const s=decodeURI(Fr.resolve(e.url,i)),a=t.find(h=>h.webkitRelativePath===s);a&&(r[i]=URL.createObjectURL(a))}Dr.filesMap[e._objectURL]=r})}static createSettings(t){return Se(this,null,function*(){const e=t.find(h=>h.name.endsWith("model.json")||h.name.endsWith("model3.json"));if(!e)throw new TypeError("Settings file not found");const r=yield Dr.readText(e),i=JSON.parse(r);i.url=e.webkitRelativePath;const s=Ue.findRuntime(i);if(!s)throw new Error("Unknown settings JSON");const a=s.createModelSettings(i);return a._objectURL=URL.createObjectURL(e),a})}static readText(t){return Se(this,null,function*(){return new Promise((e,r)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=r,i.readAsText(t,"utf8")})})}};let Eu=Dr;Eu.filesMap={},Eu.factory=(t,e)=>Se(void 0,null,function*(){if(Array.isArray(t.source)&&t.source[0]instanceof File){const r=t.source;let i=r.settings;if(!i)i=yield Dr.createSettings(r);else if(!i._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');i.validateFiles(r.map(s=>encodeURI(s.webkitRelativePath))),yield Dr.upload(r,i),i.resolveURL=function(s){return Dr.resolveURL(this._objectURL,s)},t.source=i,t.live2dModel.once("modelLoaded",s=>{s.once("destroy",function(){const a=this.settings._objectURL;if(URL.revokeObjectURL(a),Dr.filesMap[a])for(const h of Object.values(Dr.filesMap[a]))URL.revokeObjectURL(h);delete Dr.filesMap[a]})})}return e()}),Ue.live2DModelMiddlewares.unshift(Eu.factory);const nr=class{static unzip(t,e){return Se(this,null,function*(){const r=yield nr.getFilePaths(t),i=[];for(const a of e.getDefinedFiles()){const h=decodeURI(Fr.resolve(e.url,a));r.includes(h)&&i.push(h)}const s=yield nr.getFiles(t,i);for(let a=0;a<s.length;a++){const h=i[a],l=s[a];Object.defineProperty(l,"webkitRelativePath",{value:h})}return s})}static createSettings(t){return Se(this,null,function*(){const r=(yield nr.getFilePaths(t)).find(h=>h.endsWith("model.json")||h.endsWith("model3.json"));if(!r)throw new Error("Settings file not found");const i=yield nr.readText(t,r);if(!i)throw new Error("Empty settings file: "+r);const s=JSON.parse(i);s.url=r;const a=Ue.findRuntime(s);if(!a)throw new Error("Unknown settings JSON");return a.createModelSettings(s)})}static zipReader(t,e){return Se(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(t){return Se(this,null,function*(){throw new Error("Not implemented")})}static getFiles(t,e){return Se(this,null,function*(){throw new Error("Not implemented")})}static readText(t,e){return Se(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(t){}};let ma=nr;if(ma.ZIP_PROTOCOL="zip://",ma.uid=0,ma.factory=(t,e)=>Se(void 0,null,function*(){const r=t.source;let i,s,a;if(typeof r=="string"&&(r.endsWith(".zip")||r.startsWith(nr.ZIP_PROTOCOL))?(r.startsWith(nr.ZIP_PROTOCOL)?i=r.slice(nr.ZIP_PROTOCOL.length):i=r,s=yield ci.load({url:i,type:"blob",target:t.live2dModel})):Array.isArray(r)&&r.length===1&&r[0]instanceof File&&r[0].name.endsWith(".zip")&&(s=r[0],i=URL.createObjectURL(s),a=r.settings),s){if(!s.size)throw new Error("Empty zip file");const h=yield nr.zipReader(s,i);a||(a=yield nr.createSettings(h)),a._objectURL=nr.ZIP_PROTOCOL+nr.uid+"/"+a.url;const l=yield nr.unzip(h,a);l.settings=a,t.source=l,i.startsWith("blob:")&&t.live2dModel.once("modelLoaded",f=>{f.once("destroy",function(){URL.revokeObjectURL(i)})}),nr.releaseReader(h)}return e()}),Ue.live2DModelMiddlewares.unshift(ma.factory),!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class Ix extends qd{constructor(e,r){var i;super(e,r),this.queueManager=new kd,this.definitions=(i=e.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(r=>r.Name===e)}getExpressionFile(e){return e.File}createExpression(e,r){return cu.create(e)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.doUpdateMotion(e,r)}}class yn extends Au{constructor(e){if(super(e),!yn.isValidJSON(e))throw new TypeError("Invalid JSON.");Object.assign(this,new jd(e))}static isValidJSON(e){var r;return!!(e!=null&&e.FileReferences)&&typeof e.FileReferences.Moc=="string"&&((r=e.FileReferences.Textures)==null?void 0:r.length)>0&&e.FileReferences.Textures.every(i=>typeof i=="string")}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(const[r,i]of Object.entries(this.motions))for(let s=0;s<i.length;s++)i[s].File=e(i[s].File,`motions.${r}[${s}].File`),i[s].Sound!==void 0&&(i[s].Sound=e(i[s].Sound,`motions.${r}[${s}].Sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].File=e(this.expressions[r].File,`expressions[${r}].File`)}}Zd(yn,[jd]);class wx extends wu{constructor(e,r){var i;super(e,r),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new kd,this.definitions=(i=e.motions)!=null?i:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[],this.lipSyncIds=e.getLipSyncParameters()||[],this.init(r)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new Ix(this.settings,e)),this.queueManager.setEventCallback((r,i,s)=>{this.emit("motion:"+i)})}isFinished(){return this.queueManager.isFinished()}_startMotion(e,r){return e.setFinishedMotionHandler(r),this.queueManager.stopAllMotions(),this.queueManager.startMotion(e,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,r,i){const s=vu.create(e),a=new Gd(e),h=(r===this.groups.idle?ar.idleMotionFadingDuration:ar.motionFadingDuration)/1e3;return a.getMotionFadeInTime()===void 0&&s.setFadeInTime(i.FadeInTime>0?i.FadeInTime:h),a.getMotionFadeOutTime()===void 0&&s.setFadeOutTime(i.FadeOutTime>0?i.FadeOutTime:h),s.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),s}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,r){return this.queueManager.doUpdateMotion(e,r)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const l2=new pr;class Ex extends gx{constructor(e,r,i){super(),this.lipSync=!0,this.breath=au.create(),this.renderer=new zd,this.idParamAngleX=rx,this.idParamAngleY=ix,this.idParamAngleZ=nx,this.idParamEyeBallX=sx,this.idParamEyeBallY=ax,this.idParamBodyAngleX=ox,this.idParamBreath=hx,this.pixelsPerUnit=1,this.centeringTransform=new Ee,this.coreModel=e,this.settings=r,this.motionManager=new wx(r,i),this.init()}init(){var e;super.init(),((e=this.settings.getEyeBlinkParameters())==null?void 0:e.length)>0&&(this.eyeBlink=Ud.create(this.settings)),this.breath.setParameters([new ss(this.idParamAngleX,0,15,6.5345,.5),new ss(this.idParamAngleY,0,8,3.5345,.5),new ss(this.idParamAngleZ,0,10,5.5345,.5),new ss(this.idParamBodyAngleX,0,4,15.5345,.5),new ss(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const e={};if(this.settings.layout)for(const r of Object.keys(this.settings.layout)){const i=r.charAt(0).toLowerCase()+r.slice(1);e[i]=this.settings.layout[r]}return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,r){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=r,this.renderer._clippingManager._maskTexture=void 0,gn.getInstance()._shaderSets=[]}bindTexture(e,r){this.renderer.bindTexture(e,r)}getHitAreaDefs(){var e,r;return(r=(e=this.settings.hitAreas)==null?void 0:e.map(i=>({id:i.Id,name:i.Name,index:this.coreModel.getDrawableIndex(i.Id)})))!=null?r:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(e){return this.coreModel.getDrawableIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawableIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);const r=this.coreModel.getDrawableVertices(e).slice();for(let i=0;i<r.length;i+=2)r[i]=r[i]*this.pixelsPerUnit+this.originalWidth/2,r[i+1]=-r[i+1]*this.pixelsPerUnit+this.originalHeight/2;return r}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,r){var i,s,a,h;super.update(e,r),e/=1e3,r/=1e3;const l=this.coreModel;this.emit("beforeMotionUpdate");const f=this.motionManager.update(this.coreModel,r);this.emit("afterMotionUpdate"),l.saveParameters(),(i=this.motionManager.expressionManager)==null||i.update(l,r),f||(s=this.eyeBlink)==null||s.updateParameters(l,e),this.updateFocus(),this.updateNaturalMovements(e*1e3,r*1e3),(a=this.physics)==null||a.evaluate(l,e),(h=this.pose)==null||h.updateParameters(l,e),this.emit("beforeModelUpdate"),l.update(),l.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateNaturalMovements(e,r){var i;(i=this.breath)==null||i.updateParameters(this.coreModel,e/1e3)}draw(e){const r=this.drawingMatrix,i=l2.getArray();i[0]=r.a,i[1]=r.b,i[4]=-r.c,i[5]=-r.d,i[12]=r.tx,i[13]=r.ty,this.renderer.setMvpMatrix(l2),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}let ga,f2=20;function Cx(){return os.isStarted()?Promise.resolve():(ga!=null||(ga=new Promise((t,e)=>{function r(){try{Px(),t()}catch(i){if(f2--,f2<0){const s=new Error("Failed to start up Cubism 4 framework.");s.cause=i,e(s);return}be.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(r,10)}}r()})),ga)}function Px(t){t=Object.assign({logFunction:console.log,loggingLevel:Li.LogLevel_Verbose},t),os.startUp(t),os.initialize()}Ue.registerRuntime({version:4,ready:Cx,test(t){return t instanceof yn||yn.isValidJSON(t)},isValidMoc(t){if(t.byteLength<4)return!1;const e=new Int8Array(t,0,4);return String.fromCharCode(...e)==="MOC3"},createModelSettings(t){return new yn(t)},createCoreModel(t){const e=fu.create(t);try{const r=e.createModel();return r.__moc=e,r}catch(r){try{e.release()}catch(i){}throw r}},createInternalModel(t,e,r){const i=new Ex(t,e,r),s=t;return s.__moc&&(i.__moc=s.__moc,delete s.__moc,i.once("destroy",Rx)),i},createPhysics(t,e){return mu.create(e)},createPose(t,e){return hu.create(e)}});function Rx(){var t;(t=this.__moc)==null||t.release()}window.PIXI=jy,Tl();const Nx=sb(u2);We.loadOml2d=Nx,Object.defineProperty(We,Symbol.toStringTag,{value:"Module"})});
